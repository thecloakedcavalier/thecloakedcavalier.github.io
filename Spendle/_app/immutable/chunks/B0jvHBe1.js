import"./DsnmJJEf.js";import{w as An,h as Ie,az as Po,y as bi,o as Oo,m as ko,O as b,X as Do,u as Bo,H as $o,v as cs,x as _n,F as vt,ae as Lo,aI as Fo,z as Gn,B as Uo,A as rt,aE as wi,av as vi,a3 as zo,ab as ds,ad as jo,C as Ei,D as Vo,aT as Ho,aU as In,an as Si,aV as qo,aW as Go,at as Ko,aX as Wo,aD as Qo,aY as Yo,T as Xo,aZ as xi,G as Jo,a_ as Zo,a$ as ea,aw as ta,a7 as na,J as ra,I as sa,b0 as ia,p as Ke,f as W,s as A,i as S,a6 as se,a8 as Ae,r as E,t as ve,d as z,e as We,R as D,b1 as oa,aP as mn,c as Oe,Q as Ct,b2 as aa,ao as Ai,a9 as _i,a5 as ca,j as xt,aR as da}from"./CPP6oiOQ.js";import{p as Kn,b as Ii,i as ie,_ as Ri}from"./CSfEXXKc.js";import{d as ut,e as nn,s as de,o as ua}from"./C1Koey1e.js";import{r as Le,s as us,a as Wn}from"./DNOEpHzX.js";function sr(t,e){return e}function la(t,e,n){for(var r=t.items,s=[],i=e.length,o=0;o<i;o++)Wo(e[o].e,s,!0);var a=i>0&&s.length===0&&n!==null;if(a){var d=n.parentNode;Qo(d),d.append(n),r.clear(),_e(t,e[0].prev,e[i-1].next)}Yo(s,()=>{for(var c=0;c<i;c++){var l=e[c];a||(r.delete(l.k),_e(t,l.prev,l.next)),Si(l.e,!a)}})}function ir(t,e,n,r,s,i=null){var o=t,a={flags:e,items:new Map,first:null};{var d=t;o=Ie?An(Po(d)):d.appendChild(bi())}Ie&&Oo();var c=null,l=!1,f=new Map,u=Do(()=>{var g=n();return vi(g)?g:g==null?[]:wi(g)}),h,m;function y(){fa(m,h,a,f,o,s,e,r,n),i!==null&&(h.length===0?c?Ei(c):c=Gn(()=>i(o)):c!==null&&Vo(c,()=>{c=null}))}ko(()=>{m??=Xo,h=b(u);var g=h.length;if(l&&g===0)return;l=g===0;let x=!1;if(Ie){var w=Bo(o)===$o;w!==(g===0)&&(o=cs(),An(o),_n(!1),x=!0)}if(Ie){for(var v=null,_,C=0;C<g;C++){if(vt.nodeType===Lo&&vt.data===Fo){o=vt,x=!0,_n(!1);break}var O=h[C],K=r(O,C);_=Qn(vt,a,v,null,O,K,C,s,e,n),a.items.set(K,_),v=_}g>0&&An(cs())}if(Ie)g===0&&i&&(c=Gn(()=>i(o)));else if(Uo()){var F=new Set,V=rt;for(C=0;C<g;C+=1){O=h[C],K=r(O,C);var ee=a.items.get(K)??f.get(K);ee?Ci(ee,O,C):(_=Qn(null,a,null,null,O,K,C,s,e,n,!0),f.set(K,_)),F.add(K)}for(const[te,ne]of a.items)F.has(te)||V.skipped_effects.add(ne.e);V.add_callback(y)}else y();x&&_n(!0),b(u)}),Ie&&(o=vt)}function fa(t,e,n,r,s,i,o,a,d){var c=e.length,l=n.items,f=n.first,u=f,h,m=null,y=[],g=[],x,w,v,_;for(_=0;_<c;_+=1){if(x=e[_],w=a(x,_),v=l.get(w),v===void 0){var C=r.get(w);if(C!==void 0){r.delete(w),l.set(w,C);var O=m?m.next:u;_e(n,m,C),_e(n,C,O),Rn(C,O,s),m=C}else{var K=u?u.e.nodes_start:s;m=Qn(K,n,m,m===null?n.first:m.next,x,w,_,i,o,d)}l.set(w,m),y=[],g=[],u=m.next;continue}if(Ci(v,x,_),(v.e.f&In)!==0&&Ei(v.e),v!==u){if(h!==void 0&&h.has(v)){if(y.length<g.length){var F=g[0],V;m=F.prev;var ee=y[0],te=y[y.length-1];for(V=0;V<y.length;V+=1)Rn(y[V],F,s);for(V=0;V<g.length;V+=1)h.delete(g[V]);_e(n,ee.prev,te.next),_e(n,m,ee),_e(n,te,F),u=F,m=te,_-=1,y=[],g=[]}else h.delete(v),Rn(v,u,s),_e(n,v.prev,v.next),_e(n,v,m===null?n.first:m.next),_e(n,m,v),m=v;continue}for(y=[],g=[];u!==null&&u.k!==w;)(u.e.f&In)===0&&(h??=new Set).add(u),g.push(u),u=u.next;if(u===null)continue;v=u}y.push(v),m=v,u=v.next}if(u!==null||h!==void 0){for(var ne=h===void 0?[]:wi(h);u!==null;)(u.e.f&In)===0&&ne.push(u),u=u.next;var B=ne.length;if(B>0){var U=c===0?s:null;la(n,ne,U)}}t.first=n.first&&n.first.e,t.last=m&&m.e;for(var N of r.values())Si(N.e);r.clear()}function Ci(t,e,n,r){jo(t.v,e),t.i=n}function Qn(t,e,n,r,s,i,o,a,d,c,l){var f=(d&qo)!==0,u=(d&Go)===0,h=f?u?zo(s,!1,!1):ds(s):s,m=(d&Ho)===0?o:ds(o),y={i:m,v:h,k:i,a:null,e:null,prev:n,next:r};try{if(t===null){var g=document.createDocumentFragment();g.append(t=bi())}return y.e=Gn(()=>a(t,h,m,c),Ie),y.e.prev=n&&n.e,y.e.next=r&&r.e,n===null?l||(e.first=y):(n.next=y,n.e.next=y.e),r!==null&&(r.prev=y,r.e.prev=y.e),y}finally{}}function Rn(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,s=e?e.e.nodes_start:n,i=t.e.nodes_start;i!==null&&i!==r;){var o=Ko(i);s.before(i),i=o}}function _e(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}const ls=[...` 	
\r\fÂ \v\uFEFF`];function ha(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var i=s.length,o=0;(o=r.indexOf(s,o))>=0;){var a=o+i;(o===0||ls.includes(r[o-1]))&&(a===r.length||ls.includes(r[a]))?r=(o===0?"":r.substring(0,o))+r.substring(a+1):o=a}}return r===""?null:r}function ot(t,e,n,r,s,i){var o=t.__className;if(Ie||o!==n||o===void 0){var a=ha(n,r,i);(!Ie||a!==t.getAttribute("class"))&&(a==null?t.removeAttribute("class"):t.className=a),t.__className=n}else if(i&&s!==i)for(var d in i){var c=!!i[d];(s==null||c!==!!s[d])&&t.classList.toggle(d,c)}return i}function Ti(t,e,n=!1){if(t.multiple){if(e==null)return;if(!vi(e))return Zo();for(var r of t.options)r.selected=e.includes(At(r));return}for(r of t.options){var s=At(r);if(ea(s,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function pa(t){var e=new MutationObserver(()=>{Ti(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ta(()=>{e.disconnect()})}function ma(t,e,n=e){var r=!0;xi(t,"change",s=>{var i=s?"[selected]":":checked",o;if(t.multiple)o=[].map.call(t.querySelectorAll(i),At);else{var a=t.querySelector(i)??t.querySelector("option:not([disabled])");o=a&&At(a)}n(o)}),Jo(()=>{var s=e();if(Ti(t,s,r),r&&s===void 0){var i=t.querySelector(":checked");i!==null&&(s=At(i),n(s))}t.__value=s,r=!1}),pa(t)}function At(t){return"__value"in t?t.__value:t.value}function Fe(t,e,n=e){var r=new WeakSet;xi(t,"input",async s=>{var i=s?t.defaultValue:t.value;if(i=Cn(t)?Tn(i):i,n(i),rt!==null&&r.add(rt),await na(),i!==(i=e())){var o=t.selectionStart,a=t.selectionEnd;t.value=i??"",a!==null&&(t.selectionStart=o,t.selectionEnd=Math.min(a,t.value.length))}}),(Ie&&t.defaultValue!==t.value||ra(e)==null&&t.value)&&(n(Cn(t)?Tn(t.value):t.value),rt!==null&&r.add(rt)),sa(()=>{var s=e();if(t===document.activeElement){var i=ia??rt;if(r.has(i))return}Cn(t)&&s===Tn(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Cn(t){var e=t.type;return e==="number"||e==="range"}function Tn(t){return t===""?null:+t}function ga(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t=>(+t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+t/4).toString(16))}function tt(t,e){const n=t.replace(/{(\w+)}/g,(r,s)=>e.hasOwnProperty(s)?e[s]:r);return JSON.parse(n)}function Mi(t){const e=t.getTimezoneOffset()*60*1e3,n=t.getTime()-e;return new Date(n).toISOString().slice(0,10)}const Ni=["January","February","March","April","May","June","July","August","September","October","November","December"],Pi={groceries:"ðŸ›’",essentials:"ðŸ§´","rent & utilities":"ðŸ ",entertainment:"ðŸŽ¬",transportation:"ðŸšŒ",car:"ðŸš—",restaurant:"ðŸ½ï¸","eat-outs":"ðŸ”",food:"ðŸ”",utilities:"ðŸ’¡",max:"ðŸ¶",sooms:"ðŸ’ƒ",shopping:"ðŸ›ï¸",health:"ðŸ’Š",healthcare:"ðŸ’Š",travel:"âœˆï¸",coffee:"â˜•",tea:"â˜•","tea & coffee":"â˜•",gas:"â›½",fuel:"â›½",gym:"ðŸ’ª",subscription:"ðŸ“±",others:"ðŸ“¦"};function Oi(t){const e=t.toLowerCase().trim();return Pi[e]||"ðŸ’¸"}function ya(t,e){t.key==="Escape"&&D(e,!1)}var ba=(t,e,n)=>e(n()),wa=W('<li><button type="button" class="flex items-center gap-2"><span> </span> <span class="capitalize"> </span></button></li>'),va=W('<ul class="dropdown-content menu bg-base-200 rounded-box z-10 w-full p-2 shadow-lg max-h-60 overflow-y-auto"></ul>'),Ea=W('<div class="form-control mb-4"><label class="label"><span class="label-text">Category Name</span></label> <div><input type="text" placeholder="e.g., Groceries" class="input input-bordered w-full focus:outline-none" required/> <!></div></div>');function Sa(t,e){Ke(e,!0);let n=Kn(e,"categoryName",15),r=se(!1),s;const i=Ae(()=>Object.entries(Pi).filter(([h])=>h.toLowerCase().includes(n().toLowerCase())));function o(h){n(h.charAt(0).toUpperCase()+h.slice(1)),D(r,!1),s?.focus()}var a=Ea(),d=A(S(a),2);let c;var l=S(d);Le(l),l.__keydown=[ya,r],Ii(l,h=>s=h,()=>s);var f=A(l,2);{var u=h=>{var m=va();ir(m,21,()=>b(i),sr,(y,g)=>{var x=Ae(()=>oa(b(g),2));let w=()=>b(x)[0],v=()=>b(x)[1];var _=wa(),C=S(_);C.__mousedown=[ba,o,w];var O=S(C),K=S(O,!0);E(O);var F=A(O,2),V=S(F,!0);E(F),E(C),E(_),ve(()=>{de(K,v()),de(V,w())}),z(y,_)}),E(m),z(h,m)};ie(f,h=>{b(r)&&b(i).length>0&&h(u)})}E(d),E(a),ve(h=>c=ot(d,1,"dropdown w-full",null,c,h),[()=>({"dropdown-open":b(r)&&b(i).length>0})]),nn("focus",l,()=>D(r,!0)),nn("blur",l,()=>setTimeout(()=>D(r,!1),150)),Fe(l,n),z(t,a),We()}ut(["keydown","mousedown"]);var xa=W('<div class="fixed flex flex-col inset-0 z-50 flex items-center justify-center bg-black/70"><span>Saving the budget to database...</span> <span class="loading loading-infinity loading-lg text-primary"></span></div>'),Aa=(t,e)=>e.setViewState(0),_a=W('<!> <form class="card w-full max-w-md p-4"><h2 class="text-2xl font-bold mb-6 text-center">Add new budget</h2> <div class="form-control mb-4"><label class="label"><span class="label-text">Year</span></label> <input type="number" placeholder="2024" class="input input-bordered w-full focus:outline-none" min="2000" max="2100" required/></div> <div class="form-control mb-4"><label class="label"><span class="label-text">Month</span></label> <select class="select select-bordered w-full focus:outline-none" required><option disabled>Select month</option><option>January</option><option>February</option><option>March</option><option>April</option><option>May</option><option>June</option><option>July</option><option>August</option><option>September</option><option>October</option><option>November</option><option>December</option></select></div> <!> <div class="form-control mb-6"><label class="label"><span class="label-text">Limit Amount</span></label> <input type="number" placeholder="0.00" step="0.01" min="0" class="input input-bordered w-full focus:outline-none" required/></div> <div class="flex flex-col gap-4"><button type="submit" class="btn btn-primary w-full">Submit</button> <button class="btn btn-neutral w-full">Cancel</button></div></form>',1);function Ia(t,e){Ke(e,!0);const n=mn("BudgetsStore");let r=se(!1);n||(console.log("Budgets store not found in context..."),e.setViewState(0));let s=se("");const i=new Date;let o=i.getFullYear().toString(),a=(i.getMonth()+1).toString(),d="";async function c(X){X.preventDefault();try{const oe={year:parseInt(o),month:parseInt(a),category:b(s),spent:0,limit:parseFloat(d)};D(r,!0),await n.addOrUpdate(oe),console.log("Add submitted with data:",oe)}catch(oe){console.log("Budget data submission failed...",oe),alert("Budget data submission failed..")}finally{D(r,!1),e.setViewState(0)}}var l=_a(),f=Oe(l);{var u=X=>{var oe=xa();z(X,oe)};ie(f,X=>{b(r)&&X(u)})}var h=A(f,2),m=A(S(h),2),y=A(S(m),2);Le(y),E(m);var g=A(m,2),x=A(S(g),2),w=S(x);w.value=w.__value="";var v=A(w);v.value=v.__value="1";var _=A(v);_.value=_.__value="2";var C=A(_);C.value=C.__value="3";var O=A(C);O.value=O.__value="4";var K=A(O);K.value=K.__value="5";var F=A(K);F.value=F.__value="6";var V=A(F);V.value=V.__value="7";var ee=A(V);ee.value=ee.__value="8";var te=A(ee);te.value=te.__value="9";var ne=A(te);ne.value=ne.__value="10";var B=A(ne);B.value=B.__value="11";var U=A(B);U.value=U.__value="12",E(x),E(g);var N=A(g,2);Sa(N,{get categoryName(){return b(s)},set categoryName(X){D(s,X,!0)}});var q=A(N,2),ye=A(S(q),2);Le(ye),E(q);var Y=A(q,2),ae=A(S(Y),2);ae.__click=[Aa,e],E(Y),E(h),nn("submit",h,c),Fe(y,()=>o,X=>o=X),ma(x,()=>a,X=>a=X),Fe(ye,()=>d,X=>d=X),z(t,l),We()}ut(["click"]);var Ra=W('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"><span class="loading loading-spinner loading-lg text-primary"></span></div>'),Ca=W('<span class="loading loading-spinner"></span> Processing...',1),Ta=(t,e)=>e.setViewState(0),Ma=W('<form class="card w-full bg-base-100 p-6"><h2 class="text-2xl font-bold mb-2 text-center">Add Transaction</h2> <p class="text-center text-sm text-base-content/60 mb-4"> </p> <div class="grid grid-cols-2 gap-4 mb-4"><div class="form-control"><label class="label"><span class="label-text">Date</span></label> <input type="date" class="input input-bordered w-full focus:outline-none" required/></div> <div class="form-control"><label class="label"><span class="label-text">Time</span></label> <input type="time" class="input input-bordered w-full focus:outline-none" required/></div></div> <div class="form-control mb-4"><label class="label"><span class="label-text">Category</span></label> <input type="text" class="input input-bordered w-full bg-base-200 focus:outline-none" disabled readonly=""/></div> <div class="form-control mb-4"><label class="label"><span class="label-text">Amount</span></label> <input type="number" placeholder="0.00" step="0.01" min="0.01" class="input input-bordered w-full focus:outline-none" required inputmode="decimal"/></div> <div class="form-control mb-6"><label class="label"><span class="label-text">Notes</span> <span class="label-text-alt">Optional</span></label> <textarea placeholder="Add any notes about this transaction..." class="textarea textarea-bordered h-24 w-full focus:outline-none"></textarea></div> <div class="flex flex-col gap-2"><button type="submit" class="btn btn-primary w-full"><!></button> <button class="btn btn-neutral w-full">Cancel</button></div></form>'),Na=W("<!> <!>",1);function Pa(t,e){Ke(e,!0);let n=Ct(Ni[e.selectedBudget.month-1]),r=se(""),s=se(""),i=se(""),o=se(""),a=se(""),d=se(""),c=se(!1),l=mn("BudgetsStore"),f;ua(async()=>{const w=new Date(e.selectedBudget.year,e.selectedBudget.month,0);D(r,`${e.selectedBudget.year}-${String(e.selectedBudget.month).padStart(2,"0")}-01`),D(s,`${e.selectedBudget.year}-${String(e.selectedBudget.month).padStart(2,"0")}-${String(w.getDate()).padStart(2,"0")}`);const v=new Date;let _;v.getFullYear()==e.selectedBudget.year&&v.getMonth()+1==e.selectedBudget.month?_=Mi(v).split("T")[0]:_=b(r);const C=v.toTimeString().slice(0,5);D(i,_,!0),D(o,C,!0),f.focus()});async function u(w){w.preventDefault();const v={date:b(i),time:b(o),category:e.selectedBudget.category,id:ga(),year:e.selectedBudget.year,month:e.selectedBudget.month,notes:b(a),amount:parseFloat(b(d))};D(c,!0);try{l.addTransaction(e.selectedBudget,v)}catch(_){console.error("Transaction submission failed:",_),alert("Transaction submission failed...")}finally{D(c,!1),e.setViewState(0)}}var h=Na(),m=Oe(h);{var y=w=>{var v=Ra();z(w,v)};ie(m,w=>{b(c)&&w(y)})}var g=A(m,2);{var x=w=>{var v=Ma(),_=A(S(v),2),C=S(_);E(_);var O=A(_,2),K=S(O),F=A(S(K),2);Le(F),E(K);var V=A(K,2),ee=A(S(V),2);Le(ee),E(V),E(O);var te=A(O,2),ne=A(S(te),2);Le(ne),E(te);var B=A(te,2),U=A(S(B),2);Le(U),Ii(U,G=>f=G,()=>f),E(B);var N=A(B,2),q=A(S(N),2);aa(q),E(N);var ye=A(N,2),Y=S(ye),ae=S(Y);{var X=G=>{var fe=Ca();Ai(),z(G,fe)},oe=G=>{var fe=_i("Add Transaction");z(G,fe)};ie(ae,G=>{b(c)?G(X):G(oe,!1)})}E(Y);var Xe=A(Y,2);Xe.__click=[Ta,e],E(ye),E(v),ve(()=>{de(C,`${e.selectedBudget.category??""} â€¢ ${n??""} ${e.selectedBudget.year??""}`),us(F,"min",b(r)),us(F,"max",b(s)),F.disabled=b(c),ee.disabled=b(c),Wn(ne,e.selectedBudget.category),U.disabled=b(c),q.disabled=b(c),Y.disabled=b(c)}),nn("submit",v,u),Fe(F,()=>b(i),G=>D(i,G)),Fe(ee,()=>b(o),G=>D(o,G)),Fe(U,()=>b(d),G=>D(d,G)),Fe(q,()=>b(a),G=>D(a,G)),z(w,v)};ie(g,w=>{e.selectedBudget&&w(x)})}z(t,h),We()}ut(["click"]);var Oa=(t,e)=>e("dashboard"),ka=(t,e)=>e("daywise"),Da=W('<nav class="fixed bottom-0 left-0 right-0 z-50 lg:hidden bg-base-300 shadow-lg"><div class="grid grid-cols-2 h-20 items-start pt-3"><button><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg> <span class="text-xs font-medium">Home</span></button> <button><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <span class="text-xs font-medium">Daily</span></button></div></nav>');function Ba(t,e){Ke(e,!0);let n=Kn(e,"activeTab",7,"dashboard"),r=Kn(e,"onNavigate",3,c=>{});function s(c){n(c),r()(c)}var i=Da(),o=S(i),a=S(o);a.__click=[Oa,s];var d=A(a,2);d.__click=[ka,s],E(o),E(i),ve(()=>{ot(a,1,`flex flex-col items-center justify-center gap-1 transition-colors
                   ${n()==="dashboard"?"text-primary":"text-base-content/70 hover:text-base-content"}`),ot(d,1,`flex flex-col items-center justify-center gap-1 transition-colors
                   ${n()==="daywise"?"text-primary":"text-base-content/70 hover:text-base-content"}`)}),z(t,i),We()}ut(["click"]);function $a(t,e,n){D(e,n,!0)}function La(t,e){const n=new Date(b(e));n.setDate(n.getDate()-1),D(e,n.toISOString().split("T")[0],!0)}function Fa(t,e){const n=new Date(b(e));n.setDate(n.getDate()+1),D(e,n.toISOString().split("T")[0],!0)}var Ua=W('<button class="btn btn-xs btn-ghost">Today</button>'),za=W('<div class="mt-3 bg-base-200 rounded-lg p-2 flex justify-between items-center"><span class="text-sm font-medium">Total Spent</span> <span class="text-lg font-bold text-primary"> </span></div>'),ja=W('<div class="flex justify-center items-center py-12"><span class="loading loading-spinner loading-lg text-primary"></span></div>'),Va=W('<div class="alert alert-error"><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),Ha=W('<div class="card bg-base-100"><div class="card-body text-center py-12"><div class="text-6xl mb-4 opacity-20">ðŸ“­</div> <p class="text-base-content/60"> </p> <p class="text-xs text-base-content/40 mt-1">Add a transaction to get started</p></div></div>'),qa=W('<p class="text-xs text-base-content/70 mt-0.5 line-clamp-2"> </p>'),Ga=(t,e,n)=>e(b(n)),Ka=W('<div class="card bg-base-100 shadow-sm"><div class="card-body p-3"><div class="flex items-start gap-3"><div class="text-2xl"> </div> <div class="flex-1 min-w-0"><div class="flex justify-between items-start"><div><h3 class="font-semibold text-sm"> </h3> <!></div> <div class="text-right ml-2 flex-shrink-0"><p class="font-bold"> </p> <p class="text-xs text-base-content/50"> </p></div></div></div> <button class="btn btn-ghost btn-xs btn-circle"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div></div>'),Wa=W('<div class="space-y-2"></div>'),Qa=W('<div class="min-h-screen bg-base-200"><div class="sticky top-0 z-10 bg-base-100 shadow-md"><div class="p-4"><div class="flex items-center justify-between mb-3"><h1 class="text-lg font-bold">Daily Transactions</h1> <!></div> <div class="flex items-center gap-2"><button class="btn btn-circle btn-sm btn-ghost"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <div class="flex-1"><input type="date" class="input input-bordered w-full"/></div> <button class="btn btn-circle btn-sm btn-ghost"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div> <!></div></div> <div class="p-4 pb-20"><!></div></div>');function Ya(t,e){Ke(e,!0);const n=Mi(new Date).split("T")[0],r=mn("BudgetsStore");let s=se(Ct(n)),i=se(Ct([])),o=se(!1),a=se(null),d=Ae(()=>b(i).reduce((B,U)=>B+U.amount,0)),c=Ae(()=>()=>new Date(b(s)).toISOString().split("T")[0]);ca(()=>{l(b(s))});async function l(B){D(o,!0),D(a,null);try{D(i,await r.fetchTransactions(B),!0)}catch(U){D(a,U instanceof Error?U.message:"An error occurred",!0),D(i,[],!0)}finally{D(o,!1)}}async function f(B){if(D(o,!0),confirm("Delete this transaction?"))try{await r.deleteTransaction(B),D(i,b(i).filter(U=>U.id!==B.id),!0)}catch(U){console.error("Failed to delete transaction:",U)}D(o,!1)}var u=Qa(),h=S(u),m=S(h),y=S(m),g=A(S(y),2);{var x=B=>{var U=Ua();U.__click=[$a,s,n],z(B,U)};ie(g,B=>{b(s)!==n&&B(x)})}E(y);var w=A(y,2),v=S(w);v.__click=[La,s];var _=A(v,2),C=S(_);Le(C),E(_);var O=A(_,2);O.__click=[Fa,s],E(w);var K=A(w,2);{var F=B=>{var U=za(),N=A(S(U),2),q=S(N);E(N),E(U),ve(ye=>de(q,`â‚¹${ye??""}`),[()=>b(d).toFixed(2)]),z(B,U)};ie(K,B=>{b(i).length>0&&B(F)})}E(m),E(h);var V=A(h,2),ee=S(V);{var te=B=>{var U=ja();z(B,U)},ne=B=>{var U=xt(),N=Oe(U);{var q=Y=>{var ae=Va(),X=A(S(ae),2),oe=S(X,!0);E(X),E(ae),ve(()=>de(oe,b(a))),z(Y,ae)},ye=Y=>{var ae=xt(),X=Oe(ae);{var oe=G=>{var fe=Ha(),Je=S(fe),pe=A(S(Je),2),ze=S(pe);E(pe),Ai(2),E(Je),E(fe),ve(De=>de(ze,`No transactions for ${De??""}`),[()=>b(c)()]),z(G,fe)},Xe=G=>{var fe=Wa();ir(fe,21,()=>b(i),sr,(Je,pe)=>{var ze=Ka(),De=S(ze),qt=S(De),Ze=S(qt),mt=S(Ze,!0);E(Ze);var et=A(Ze,2),Gt=S(et),gt=S(Gt),Ne=S(gt),yt=S(Ne,!0);E(Ne);var En=A(Ne,2);{var Sn=bt=>{var wt=qa(),No=S(wt,!0);E(wt),ve(()=>de(No,b(pe).notes)),z(bt,wt)};ie(En,bt=>{b(pe).notes&&bt(Sn)})}E(gt);var Kt=A(gt,2),xn=S(Kt),Co=S(xn);E(xn);var as=A(xn,2),To=S(as,!0);E(as),E(Kt),E(Gt),E(et);var Mo=A(et,2);Mo.__click=[Ga,f,pe],E(qt),E(De),E(ze),ve((bt,wt)=>{de(mt,bt),de(yt,b(pe).category),de(Co,`â‚¹${wt??""}`),de(To,b(pe).time)},[()=>Oi(b(pe).category),()=>b(pe).amount.toFixed(2)]),z(Je,ze)}),E(fe),z(G,fe)};ie(X,G=>{b(i).length===0?G(oe):G(Xe,!1)},!0)}z(Y,ae)};ie(N,Y=>{b(a)?Y(q):Y(ye,!1)},!0)}z(B,U)};ie(ee,B=>{b(o)?B(te):B(ne,!1)})}E(V),E(u),ve(()=>O.disabled=b(s)>=n),Fe(C,()=>b(s),B=>D(s,B)),z(t,u),We()}ut(["click"]);var Tt;(function(t){t.HTTP="http",t.HTTPS="https"})(Tt||(Tt={}));var rn;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(rn||(rn={}));const Yn="__smithy_context",gn=t=>t[Yn]||(t[Yn]={}),Me=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},ki="preferred",Xa=["disabled","preferred","required"];function Ja(t){return Xa.includes(t)}const Za=t=>{const{accountIdEndpointMode:e}=t,n=Me(e??ki);return Object.assign(t,{accountIdEndpointMode:async()=>{const r=await n();if(!Ja(r))throw new Error(`Invalid value for accountIdEndpointMode: ${r}. Valid values are: "required", "preferred", "disabled".`);return r}})},ec=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,n){t.httpHandler?.updateHttpClientConfig(e,n)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),tc=t=>({httpHandler:t.httpHandler()});class Ee{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const n=new Ee({...e,headers:{...e.headers}});return n.query&&(n.query=nc(n.query)),n}static isInstance(e){if(!e)return!1;const n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){return Ee.clone(this)}}function nc(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{})}class Mt{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const n=e;return typeof n.statusCode=="number"&&typeof n.headers=="object"}}function rc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mn,fs;function sc(){if(fs)return Mn;fs=1;function t(e){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:e}),this.done=!1}return t.prototype.next=function(){if(this.done)return{done:!0};var e=this._next();return e.done&&(this.done=!0),e},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=function(){return this}),t.of=function(){var e=arguments,n=e.length,r=0;return new t(function(){return r>=n?{done:!0}:{done:!1,value:e[r++]}})},t.empty=function(){var e=new t(null);return e.done=!0,e},t.is=function(e){return e instanceof t?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},Mn=t,Mn}var Nn,hs;function Di(){if(hs)return Nn;hs=1;var t=typeof ArrayBuffer<"u",e=typeof Symbol<"u";function n(r,s){var i,o,a,d,c;if(!r)throw new Error("obliterator/forEach: invalid iterable.");if(typeof s!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(r)||t&&ArrayBuffer.isView(r)||typeof r=="string"||r.toString()==="[object Arguments]"){for(a=0,d=r.length;a<d;a++)s(r[a],a);return}if(typeof r.forEach=="function"){r.forEach(s);return}if(e&&Symbol.iterator in r&&typeof r.next!="function"&&(r=r[Symbol.iterator]()),typeof r.next=="function"){for(i=r,a=0;c=i.next(),c.done!==!0;)s(c.value,a),a++;return}for(o in r)r.hasOwnProperty(o)&&s(r[o],o)}return n.forEachWithNullKeys=function(r,s){var i,o,a,d,c;if(!r)throw new Error("obliterator/forEachWithNullKeys: invalid iterable.");if(typeof s!="function")throw new Error("obliterator/forEachWithNullKeys: expecting a callback.");if(Array.isArray(r)||t&&ArrayBuffer.isView(r)||typeof r=="string"||r.toString()==="[object Arguments]"){for(a=0,d=r.length;a<d;a++)s(r[a],null);return}if(r instanceof Set){r.forEach(function(l){s(l,null)});return}if(typeof r.forEach=="function"){r.forEach(s);return}if(e&&Symbol.iterator in r&&typeof r.next!="function"&&(r=r[Symbol.iterator]()),typeof r.next=="function"){for(i=r,a=0;c=i.next(),c.done!==!0;)s(c.value,null),a++;return}for(o in r)r.hasOwnProperty(o)&&s(r[o],o)},Nn=n,Nn}var Pn={},ps;function Bi(){return ps||(ps=1,(function(t){var e=Math.pow(2,8)-1,n=Math.pow(2,16)-1,r=Math.pow(2,32)-1,s=Math.pow(2,7)-1,i=Math.pow(2,15)-1,o=Math.pow(2,31)-1;t.getPointerArray=function(d){var c=d-1;return c<=e?Uint8Array:c<=n?Uint16Array:c<=r?Uint32Array:Float64Array},t.getSignedPointerArray=function(d){var c=d-1;return c<=s?Int8Array:c<=i?Int16Array:c<=o?Int32Array:Float64Array},t.getNumberType=function(d){return d===(d|0)?Math.sign(d)===-1?d<=127&&d>=-128?Int8Array:d<=32767&&d>=-32768?Int16Array:Int32Array:d<=255?Uint8Array:d<=65535?Uint16Array:Uint32Array:Float64Array};var a={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};t.getMinimalRepresentation=function(d,c){var l=null,f=0,u,h,m,y,g;for(y=0,g=d.length;y<g;y++)m=c?c(d[y]):d[y],h=t.getNumberType(m),u=a[h.name],u>f&&(f=u,l=h);return l},t.isTypedArray=function(d){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(d)},t.concat=function(){var d=0,c,l,f;for(c=0,f=arguments.length;c<f;c++)d+=arguments[c].length;var u=new arguments[0].constructor(d);for(c=0,l=0;c<f;c++)u.set(arguments[c],l),l+=arguments[c].length;return u},t.indices=function(d){for(var c=t.getPointerArray(d),l=new c(d),f=0;f<d;f++)l[f]=f;return l}})(Pn)),Pn}var nt={},ms;function ic(){if(ms)return nt;ms=1;var t=Di(),e=Bi();function n(o){return Array.isArray(o)||e.isTypedArray(o)}function r(o){if(typeof o.length=="number")return o.length;if(typeof o.size=="number")return o.size}function s(o){var a=r(o),d=typeof a=="number"?new Array(a):[],c=0;return t(o,function(l){d[c++]=l}),d}function i(o){var a=r(o),d=typeof a=="number"?e.getPointerArray(a):Array,c=typeof a=="number"?new Array(a):[],l=typeof a=="number"?new d(a):[],f=0;return t(o,function(u){c[f]=u,l[f]=f++}),[c,l]}return nt.isArrayLike=n,nt.guessLength=r,nt.toArray=s,nt.toArrayWithIndices=i,nt}var On,gs;function oc(){if(gs)return On;gs=1;var t=sc(),e=Di(),n=Bi(),r=ic();function s(i,o,a){if(arguments.length<2&&(a=i,i=null,o=null),this.capacity=a,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");var d=n.getPointerArray(a);this.forward=new d(a),this.backward=new d(a),this.K=typeof i=="function"?new i(a):new Array(a),this.V=typeof o=="function"?new o(a):new Array(a),this.size=0,this.head=0,this.tail=0,this.items={}}return s.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}},s.prototype.splayOnTop=function(i){var o=this.head;if(this.head===i)return this;var a=this.backward[i],d=this.forward[i];return this.tail===i?this.tail=a:this.backward[d]=a,this.forward[a]=d,this.backward[o]=i,this.head=i,this.forward[i]=o,this},s.prototype.set=function(i,o){var a=this.items[i];if(typeof a<"u"){this.splayOnTop(a),this.V[a]=o;return}this.size<this.capacity?a=this.size++:(a=this.tail,this.tail=this.backward[a],delete this.items[this.K[a]]),this.items[i]=a,this.K[a]=i,this.V[a]=o,this.forward[a]=this.head,this.backward[this.head]=a,this.head=a},s.prototype.setpop=function(i,o){var a=null,d=null,c=this.items[i];return typeof c<"u"?(this.splayOnTop(c),a=this.V[c],this.V[c]=o,{evicted:!1,key:i,value:a}):(this.size<this.capacity?c=this.size++:(c=this.tail,this.tail=this.backward[c],a=this.V[c],d=this.K[c],delete this.items[this.K[c]]),this.items[i]=c,this.K[c]=i,this.V[c]=o,this.forward[c]=this.head,this.backward[this.head]=c,this.head=c,d?{evicted:!0,key:d,value:a}:null)},s.prototype.has=function(i){return i in this.items},s.prototype.get=function(i){var o=this.items[i];if(!(typeof o>"u"))return this.splayOnTop(o),this.V[o]},s.prototype.peek=function(i){var o=this.items[i];if(!(typeof o>"u"))return this.V[o]},s.prototype.forEach=function(i,o){o=arguments.length>1?o:this;for(var a=0,d=this.size,c=this.head,l=this.K,f=this.V,u=this.forward;a<d;)i.call(o,f[c],l[c],this),c=u[c],a++},s.prototype.keys=function(){var i=0,o=this.size,a=this.head,d=this.K,c=this.forward;return new t(function(){if(i>=o)return{done:!0};var l=d[a];return i++,i<o&&(a=c[a]),{done:!1,value:l}})},s.prototype.values=function(){var i=0,o=this.size,a=this.head,d=this.V,c=this.forward;return new t(function(){if(i>=o)return{done:!0};var l=d[a];return i++,i<o&&(a=c[a]),{done:!1,value:l}})},s.prototype.entries=function(){var i=0,o=this.size,a=this.head,d=this.K,c=this.V,l=this.forward;return new t(function(){if(i>=o)return{done:!0};var f=d[a],u=c[a];return i++,i<o&&(a=l[a]),{done:!1,value:[f,u]}})},typeof Symbol<"u"&&(s.prototype[Symbol.iterator]=s.prototype.entries),s.prototype.inspect=function(){for(var i=new Map,o=this.entries(),a;a=o.next(),!a.done;)i.set(a.value[0],a.value[1]);return Object.defineProperty(i,"constructor",{value:s,enumerable:!1}),i},typeof Symbol<"u"&&(s.prototype[Symbol.for("nodejs.util.inspect.custom")]=s.prototype.inspect),s.from=function(i,o,a,d){if(arguments.length<2){if(d=r.guessLength(i),typeof d!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(d=o,o=null,a=null);var c=new s(o,a,d);return e(i,function(l,f){c.set(f,l)}),c},On=s,On}var ac=oc();const cc=rc(ac);let dc=class{cache;constructor(e){this.cache=new cc(e)}getEndpoint(e){const n=this.get(e);if(!n||n.length===0)return;const r=n.map(s=>s.Address);return r[Math.floor(Math.random()*r.length)]}get(e){if(!this.has(e))return;const n=this.cache.get(e);if(!n)return;const r=Date.now(),s=n.filter(i=>r<i.Expires);if(s.length===0){this.delete(e);return}return s}set(e,n){const r=Date.now();this.cache.set(e,n.map(({Address:s,CachePeriodInMinutes:i})=>({Address:s,Expires:r+i*60*1e3})))}delete(e){this.cache.set(e,[])}has(e){if(!this.cache.has(e))return!1;const n=this.cache.peek(e);return n?n.length>0:!1}clear(){this.cache.clear()}};const uc=(t,{endpointDiscoveryCommandCtor:e})=>{const{endpointCacheSize:n,endpointDiscoveryEnabled:r,endpointDiscoveryEnabledProvider:s}=t;return Object.assign(t,{endpointDiscoveryCommandCtor:e,endpointCache:new dc(n??1e3),endpointDiscoveryEnabled:r!==void 0?()=>Promise.resolve(r):s,isClientEndpointDiscoveryEnabled:r!==void 0})};function Lp(t){return t}const lc=t=>e=>async n=>{if(!Ee.isInstance(n.request))return e(n);const{request:r}=n,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!r.headers[":authority"])delete r.headers.host,r.headers[":authority"]=r.hostname+(r.port?":"+r.port:"");else if(!r.headers.host){let i=r.hostname;r.port!=null&&(i+=`:${r.port}`),r.headers.host=i}return e(n)},fc={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},hc=t=>({applyToStack:e=>{e.add(lc(t),fc)}}),pc=()=>(t,e)=>async n=>{try{const r=await t(n),{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:d,overrideOutputFilterSensitiveLog:c}=a,l=d??e.inputFilterSensitiveLog,f=c??e.outputFilterSensitiveLog,{$metadata:u,...h}=r.output;return o?.info?.({clientName:s,commandName:i,input:l(n.input),output:f(h),metadata:u}),r}catch(r){const{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:d}=a,c=d??e.inputFilterSensitiveLog;throw o?.error?.({clientName:s,commandName:i,input:c(n.input),error:r,metadata:r.$metadata}),r}},mc={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},gc=t=>({applyToStack:e=>{e.add(pc(),mc)}}),yc={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},bc=()=>t=>async e=>t(e),wc=t=>({applyToStack:e=>{e.add(bc(),yc)}}),vc=(t,e)=>{if(!e||e.length===0)return t;const n=[];for(const r of e)for(const s of t)s.schemeId.split("#")[1]===r&&n.push(s);for(const r of t)n.find(({schemeId:s})=>s===r.schemeId)||n.push(r);return n};function Ec(t){const e=new Map;for(const n of t)e.set(n.schemeId,n);return e}const Sc=(t,e)=>(n,r)=>async s=>{const i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,r,s.input)),o=t.authSchemePreference?await t.authSchemePreference():[],a=vc(i,o),d=Ec(t.httpAuthSchemes),c=gn(r),l=[];for(const f of a){const u=d.get(f.schemeId);if(!u){l.push(`HttpAuthScheme \`${f.schemeId}\` was not enabled for this service.`);continue}const h=u.identityProvider(await e.identityProviderConfigProvider(t));if(!h){l.push(`HttpAuthScheme \`${f.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:m={},signingProperties:y={}}=f.propertiesExtractor?.(t,r)||{};f.identityProperties=Object.assign(f.identityProperties||{},m),f.signingProperties=Object.assign(f.signingProperties||{},y),c.selectedHttpAuthScheme={httpAuthOption:f,identity:await h(f.identityProperties),signer:u.signer};break}if(!c.selectedHttpAuthScheme)throw new Error(l.join(`
`));return n(s)},xc={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Ac=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(Sc(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n}),xc)}}),_c=(t,e)=>(n,r)=>async s=>{const{response:i}=await n(s);try{const o=await e(i,t);return{response:i,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:i}),!("$metadata"in o)){const a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{o.message+=`
  `+a}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(a):r.logger?.warn?.(a)}typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText);try{if(Mt.isInstance(i)){const{headers:d={}}=i,c=Object.entries(d);o.$metadata={httpStatusCode:i.statusCode,requestId:kn(/^x-[\w-]+-request-?id$/,c),extendedRequestId:kn(/^x-[\w-]+-id-2$/,c),cfId:kn(/^x-[\w-]+-cf-id$/,c)}}}catch{}}throw o}},kn=(t,e)=>(e.find(([n])=>n.match(t))||[void 0,void 0])[1],Ic=(t,e)=>(n,r)=>async s=>{const i=t,o=r.endpointV2?.url&&i.urlParser?async()=>i.urlParser(r.endpointV2.url):i.endpoint;if(!o)throw new Error("No valid endpoint provider available.");const a=await e(s.input,{...t,endpoint:o});return n({...s,request:a})},Rc={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},$i={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Dt(t,e,n){return{applyToStack:r=>{r.add(_c(t,n),Rc),r.add(Ic(t,e),$i)}}}const Cc=t=>e=>{throw e},Tc=(t,e)=>{},Mc=t=>(e,n)=>async r=>{if(!Ee.isInstance(r.request))return e(r);const i=gn(n).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:a,signer:d}=i,c=await e({...r,request:await d.sign(r.request,a,o)}).catch((d.errorHandler||Cc)(o));return(d.successHandler||Tc)(c.response,o),c},Nc={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Pc=t=>({applyToStack:e=>{e.addRelativeTo(Mc(),Nc)}}),_t=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},Li="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ys=Object.entries(Li).reduce((t,[e,n])=>(t[n]=Number(e),t),{}),Oc=Li.split(""),at=6,It=8,kc=63,or=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const n=new ArrayBuffer(e),r=new DataView(n);for(let s=0;s<t.length;s+=4){let i=0,o=0;for(let c=s,l=s+3;c<=l;c++)if(t[c]!=="="){if(!(t[c]in ys))throw new TypeError(`Invalid character ${t[c]} in base64 string.`);i|=ys[t[c]]<<(l-c)*at,o+=at}else i>>=at;const a=s/4*3;i>>=o%It;const d=Math.floor(o/It);for(let c=0;c<d;c++){const l=(d-c-1)*It;r.setUint8(a+c,(i&255<<l)>>l)}}return new Uint8Array(n)},ct=t=>new TextEncoder().encode(t),Nt=t=>typeof t=="string"?ct(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),ar=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)};function Fi(t){let e;typeof t=="string"?e=ct(t):e=t;const n=typeof e=="object"&&typeof e.length=="number",r=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!n&&!r)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let i=0;i<e.length;i+=3){let o=0,a=0;for(let c=i,l=Math.min(i+3,e.length);c<l;c++)o|=e[c]<<(l-c-1)*It,a+=It;const d=Math.ceil(a/at);o<<=d*at-a;for(let c=1;c<=d;c++){const l=(d-c)*at;s+=Oc[(o&kc<<l)>>l]}s+="==".slice(0,4-d)}return s}function Dc(t,e="utf-8"){return e==="base64"?Fi(t):ar(t)}function Bc(t,e){return e==="base64"?Ve.mutate(or(t)):Ve.mutate(ct(t))}class Ve extends Uint8Array{static fromString(e,n="utf-8"){if(typeof e=="string")return Bc(e,n);throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,Ve.prototype),e}transformToString(e="utf-8"){return Dc(this,e)}}const He=t=>encodeURIComponent(t).replace(/[!'()*]/g,$c),$c=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function Lc(t){const e=[];for(let n of Object.keys(t).sort()){const r=t[n];if(n=He(n),Array.isArray(r))for(let s=0,i=r.length;s<i;s++)e.push(`${n}=${He(r[s])}`);else{let s=n;(r||typeof r=="string")&&(s+=`=${He(r)}`),e.push(s)}}return e.join("&")}function bs(t,e){return new Request(t,e)}function Fc(t=0){return new Promise((e,n)=>{t&&setTimeout(()=>{const r=new Error(`Request did not complete within ${t} ms`);r.name="TimeoutError",n(r)},t)})}const Dn={supported:void 0};class cr{config;configProvider;static create(e){return typeof e?.handle=="function"?e:new cr(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(n=>n||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),Dn.supported===void 0&&(Dn.supported=typeof Request<"u"&&"keepalive"in bs("https://[::1]"))}destroy(){}async handle(e,{abortSignal:n,requestTimeout:r}={}){this.config||(this.config=await this.configProvider);const s=r??this.config.requestTimeout,i=this.config.keepAlive===!0,o=this.config.credentials;if(n?.aborted){const w=new Error("Request aborted");return w.name="AbortError",Promise.reject(w)}let a=e.path;const d=Lc(e.query||{});d&&(a+=`?${d}`),e.fragment&&(a+=`#${e.fragment}`);let c="";if(e.username!=null||e.password!=null){const w=e.username??"",v=e.password??"";c=`${w}:${v}@`}const{port:l,method:f}=e,u=`${e.protocol}//${c}${e.hostname}${l?`:${l}`:""}${a}`,h=f==="GET"||f==="HEAD"?void 0:e.body,m={body:h,headers:new Headers(e.headers),method:f,credentials:o};this.config?.cache&&(m.cache=this.config.cache),h&&(m.duplex="half"),typeof AbortController<"u"&&(m.signal=n),Dn.supported&&(m.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(m,this.config.requestInit(e));let y=()=>{};const g=bs(u,m),x=[fetch(g).then(w=>{const v=w.headers,_={};for(const O of v.entries())_[O[0]]=O[1];return w.body!=null?{response:new Mt({headers:_,reason:w.statusText,statusCode:w.status,body:w.body})}:w.blob().then(O=>({response:new Mt({headers:_,reason:w.statusText,statusCode:w.status,body:O})}))}),Fc(s)];return n&&x.push(new Promise((w,v)=>{const _=()=>{const C=new Error("Request aborted");C.name="AbortError",v(C)};if(typeof n.addEventListener=="function"){const C=n;C.addEventListener("abort",_,{once:!0}),y=()=>C.removeEventListener("abort",_)}else n.onabort=_})),Promise.race(x).finally(y)}updateHttpClientConfig(e,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[e]=n,r))}httpHandlerConfigs(){return this.config??{}}}const Uc=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):zc(t):jc(t);async function zc(t){const e=await Vc(t),n=or(e);return new Uint8Array(n)}async function jc(t){const e=[],n=t.getReader();let r=!1,s=0;for(;!r;){const{done:a,value:d}=await n.read();d&&(e.push(d),s+=d.length),r=a}const i=new Uint8Array(s);let o=0;for(const a of e)i.set(a,o),o+=a.length;return i}function Vc(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{if(r.readyState!==2)return n(new Error("Reader aborted too early"));const s=r.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;e(s.substring(o))},r.onabort=()=>n(new Error("Read aborted")),r.onerror=()=>n(r.error),r.readAsDataURL(t)})}const Ui={},Xn={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),Ui[t]=e,Xn[e]=t}function Hc(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2){const r=t.slice(n,n+2).toLowerCase();if(r in Xn)e[n/2]=Xn[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return e}function qe(t){let e="";for(let n=0;n<t.byteLength;n++)e+=Ui[t[n]];return e}const qc=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return Ve.mutate(t);if(!t)return Ve.mutate(new Uint8Array);const n=e.streamCollector(t);return Ve.mutate(await n)},Wt=t=>typeof t=="function"?t():t;class st{namespace;schemas;exceptions;static registries=new Map;constructor(e,n=new Map,r=new Map){this.namespace=e,this.schemas=n,this.exceptions=r}static for(e){return st.registries.has(e)||st.registries.set(e,new st(e)),st.registries.get(e)}register(e,n){const r=this.normalizeShapeId(e);this.schemas.set(r,n)}getSchema(e){const n=this.normalizeShapeId(e);if(!this.schemas.has(n))throw new Error(`@smithy/core/schema - schema not found for ${n}`);return this.schemas.get(n)}registerError(e,n){this.exceptions.set(e,n)}getErrorCtor(e){return this.exceptions.get(e)}getBaseException(){for(const[e,n]of this.schemas.entries())if(e.startsWith("smithy.ts.sdk.synthetic.")&&e.endsWith("ServiceException"))return n}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}getNamespace(e){return this.normalizeShapeId(e).split("#")[0]}}class Pt{name;namespace;traits;static assign(e,n){const r=Object.assign(e,n);return st.for(r.namespace).register(r.name,r),r}static[Symbol.hasInstance](e){const n=this.prototype.isPrototypeOf(e);return!n&&typeof e=="object"&&e!==null?e.symbol===this.symbol:n}getName(){return this.namespace+"#"+this.name}}class dr extends Pt{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=dr.symbol}class ur extends Pt{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=ur.symbol}class lr extends Pt{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=lr.symbol}function Qt(t){if(typeof t=="object")return t;t=t|0;const e={};let n=0;for(const r of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>n++&1)===1&&(e[r]=1);return e}class Pe{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=Pe.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,n){this.ref=e,this.memberName=n;const r=[];let s=e,i=e;for(this._isMemberSchema=!1;Array.isArray(s);)r.push(s[1]),s=s[0],i=Wt(s),this._isMemberSchema=!0;if(r.length>0){this.memberTraits={};for(let o=r.length-1;o>=0;--o){const a=r[o];Object.assign(this.memberTraits,Qt(a))}}else this.memberTraits=0;if(i instanceof Pe){const o=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},o,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=n??i.memberName;return}if(this.schema=Wt(i),this.schema&&typeof this.schema=="object"?this.traits=this.schema?.traits??{}:this.traits=0,this.name=(this.schema instanceof Pt?this.schema.getName?.():void 0)??this.memberName??String(i),this._isMemberSchema&&!n)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){return Pt[Symbol.hasInstance].bind(this)(e)}static of(e){const n=Wt(e);if(n instanceof Pe)return n;if(Array.isArray(n)){const[r,s]=n;if(r instanceof Pe)return Object.assign(r.getMergedTraits(),Qt(s)),r;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new Pe(n)}getSchema(){return Wt(this.schema?.schemaRef??this.schema)}getName(e=!1){const{name:n}=this;return!e&&n&&n.includes("#")?n.split("#")[1]:n||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){const e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e instanceof dr}isMapSchema(){const e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e instanceof ur}isStructSchema(){const e=this.getSchema();return e!==null&&typeof e=="object"&&"members"in e||e instanceof lr}isBlobSchema(){const e=this.getSchema();return e===21||e===42}isTimestampSchema(){const e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){const{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){const e=i=>(i&4)===4||!!i?.idempotencyToken,{normalizedTraits:n,traits:r,memberTraits:s}=this;return e(n)||e(r)||e(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return Qt(this.memberTraits)}getOwnTraits(){return Qt(this.traits)}getKeySchema(){const[e,n]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!n)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);const r=this.getSchema(),s=e?15:r?.keySchema??0;return Et([s,0],"key")}getValueSchema(){const e=this.getSchema(),[n,r,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(r||s)?e.valueSchema:n?15:void 0;if(i!=null)return Et([i,0],r?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){const n=this.getSchema();if(this.isStructSchema()&&n.memberNames.includes(e)){const r=n.memberNames.indexOf(e),s=n.memberList[r];return Et(Array.isArray(s)?s:[s,0],e)}if(this.isDocumentSchema())return Et([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){const e={};try{for(const[n,r]of this.structIterator())e[n]=r}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(const[e,n]of this.structIterator())if(n.isStreaming()&&n.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");const e=this.getSchema();for(let n=0;n<e.memberNames.length;++n)yield[e.memberNames[n],Et([e.memberList[n],0],e.memberNames[n])]}}function Et(t,e){if(t instanceof Pe)return Object.assign(t,{memberName:e,_isMemberSchema:!0});const n=Pe;return new n(t,e)}const Yt=t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&on.warn(sn(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){const e=t.toLowerCase();if((e==="false"||e==="true")&&on.warn(sn(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},Jn=t=>{if(t!=null){if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&on.warn(sn(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},Gc=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},ws=t=>Kc(t,32),Kc=(t,e)=>{const n=Gc(t);if(n!==void 0&&Wc(n,e)!==n)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return n},Wc=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},Fp=(t,e)=>{if(t==null)throw new TypeError("Expected a non-null value");return t},Qc=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;const e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},ke=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return on.warn(sn(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},Yc=t=>{if(t==null)return;const e=Qc(t),n=Object.entries(e).filter(([,r])=>r!=null).map(([r])=>r);if(n.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(n.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${n} were not null.`);return e},Up=t=>Jn(typeof t=="string"?Jc(t):t),Xc=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Jc=t=>{const e=t.match(Xc);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},Ge=t=>typeof t=="string"?Zc(t):Jn(t),Zc=t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},sn=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),on={warn:console.warn},vs=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ce=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),ed=()=>{if(vs)return vs();const t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,ce[t[0]]+ce[t[1]]+ce[t[2]]+ce[t[3]]+"-"+ce[t[4]]+ce[t[5]]+"-"+ce[t[6]]+ce[t[7]]+"-"+ce[t[8]]+ce[t[9]]+"-"+ce[t[10]]+ce[t[11]]+ce[t[12]]+ce[t[13]]+ce[t[14]]+ce[t[15]]};function td(t,e,n){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=n}class nd{authSchemes=new Map;constructor(e){for(const[n,r]of Object.entries(e))r!==void 0&&this.authSchemes.set(n,r)}getIdentityProvider(e){return this.authSchemes.get(e)}}const rd=t=>function(n){return zi(n)&&n.expiration.getTime()-Date.now()<t},sd=3e5,id=rd(sd),zi=t=>t.expiration!==void 0,od=(t,e,n)=>{if(t===void 0)return;const r=typeof t!="function"?async()=>Promise.resolve(t):t;let s,i,o,a=!1;const d=async c=>{i||(i=r(c));try{s=await i,o=!0,a=!1}finally{i=void 0}return s};return e===void 0?async c=>((!o||c?.forceRefresh)&&(s=await d(c)),s):async c=>((!o||c?.forceRefresh)&&(s=await d(c)),a?s:n(s)?(e(s)&&await d(c),s):(a=!0,s))},ad=void 0;function cd(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function dd(t){const e=_t(t.userAgentAppId??ad),{customUserAgent:n}=t;return Object.assign(t,{customUserAgent:typeof n=="string"?[[n]]:n,userAgentAppId:async()=>{const r=await e();if(!cd(r)){const s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof r!="string"?s?.warn("userAgentAppId must be a string or undefined."):r.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return r}})}class ud{capacity;data=new Map;parameters=[];constructor({size:e,params:n}){this.capacity=e??50,n&&(this.parameters=n)}get(e,n){const r=this.hash(e);if(r===!1)return n();if(!this.data.has(r)){if(this.data.size>this.capacity+10){const s=this.data.keys();let i=0;for(;;){const{value:o,done:a}=s.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(r,n())}return this.data.get(r)}size(){return this.data.size}hash(e){let n="";const{parameters:r}=this;if(r.length===0)return!1;for(const s of r){const i=String(e[s]??"");if(i.includes("|;"))return!1;n+=i+"|;"}return n}}const ld=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),ji=t=>ld.test(t)||t.startsWith("[")&&t.endsWith("]"),fd=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),fr=(t,e=!1)=>{if(!e)return fd.test(t);const n=t.split(".");for(const r of n)if(!fr(r))return!1;return!0},an={},Ot="endpoints";function Ue(t){return typeof t!="object"||t==null?t:"ref"in t?`$${Ue(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(Ue).join(", ")})`:JSON.stringify(t,null,2)}class be extends Error{constructor(e){super(e),this.name="EndpointError"}}const hd=(t,e)=>t===e,pd=t=>{const e=t.split("."),n=[];for(const r of e){const s=r.indexOf("[");if(s!==-1){if(r.indexOf("]")!==r.length-1)throw new be(`Path: '${t}' does not end with ']'`);const i=r.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new be(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&n.push(r.slice(0,s)),n.push(i)}else n.push(r)}return n},Vi=(t,e)=>pd(e).reduce((n,r)=>{if(typeof n!="object")throw new be(`Index '${r}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]},t),md=t=>t!=null,gd=t=>!t,Bn={[Tt.HTTP]:80,[Tt.HTTPS]:443},yd=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:u,port:h,protocol:m="",path:y="",query:g={}}=t,x=new URL(`${m}//${u}${h?`:${h}`:""}${y}`);return x.search=Object.entries(g).map(([w,v])=>`${w}=${v}`).join("&"),x}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const n=e.href,{host:r,hostname:s,pathname:i,protocol:o,search:a}=e;if(a)return null;const d=o.slice(0,-1);if(!Object.values(Tt).includes(d))return null;const c=ji(s),l=n.includes(`${r}:${Bn[d]}`)||typeof t=="string"&&t.includes(`${r}:${Bn[d]}`),f=`${r}${l?`:${Bn[d]}`:""}`;return{scheme:d,authority:f,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:c}},bd=(t,e)=>t===e,wd=(t,e,n,r)=>e>=n||t.length<n?null:r?t.substring(t.length-n,t.length-e):t.substring(e,n),vd=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Ed={booleanEquals:hd,getAttr:Vi,isSet:md,isValidHostLabel:fr,not:gd,parseURL:yd,stringEquals:bd,substring:wd,uriEncode:vd},Hi=(t,e)=>{const n=[],r={...e.endpointParams,...e.referenceRecord};let s=0;for(;s<t.length;){const i=t.indexOf("{",s);if(i===-1){n.push(t.slice(s));break}n.push(t.slice(s,i));const o=t.indexOf("}",i);if(o===-1){n.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(n.push(t.slice(i+1,o)),s=o+2);const a=t.substring(i+1,o);if(a.includes("#")){const[d,c]=a.split("#");n.push(Vi(r[d],c))}else n.push(r[a]);s=o+1}return n.join("")},Sd=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],yn=(t,e,n)=>{if(typeof t=="string")return Hi(t,n);if(t.fn)return qi(t,n);if(t.ref)return Sd(t,n);throw new be(`'${e}': ${String(t)} is not a string, function or reference.`)},qi=({fn:t,argv:e},n)=>{const r=e.map(i=>["boolean","number"].includes(typeof i)?i:yn(i,"arg",n)),s=t.split(".");return s[0]in an&&s[1]!=null?an[s[0]][s[1]](...r):Ed[t](...r)},xd=({assign:t,...e},n)=>{if(t&&t in n.referenceRecord)throw new be(`'${t}' is already defined in Reference Record.`);const r=qi(e,n);return n.logger?.debug?.(`${Ot} evaluateCondition: ${Ue(e)} = ${Ue(r)}`),{result:r===""?!0:!!r,...t!=null&&{toAssign:{name:t,value:r}}}},hr=(t=[],e)=>{const n={};for(const r of t){const{result:s,toAssign:i}=xd(r,{...e,referenceRecord:{...e.referenceRecord,...n}});if(!s)return{result:s};i&&(n[i.name]=i.value,e.logger?.debug?.(`${Ot} assign: ${i.name} := ${Ue(i.value)}`))}return{result:!0,referenceRecord:n}},Ad=(t,e)=>Object.entries(t).reduce((n,[r,s])=>({...n,[r]:s.map(i=>{const o=yn(i,"Header value entry",e);if(typeof o!="string")throw new be(`Header '${r}' value '${o}' is not a string`);return o})}),{}),Gi=(t,e)=>{if(Array.isArray(t))return t.map(n=>Gi(n,e));switch(typeof t){case"string":return Hi(t,e);case"object":if(t===null)throw new be(`Unexpected endpoint property: ${t}`);return Ki(t,e);case"boolean":return t;default:throw new be(`Unexpected endpoint property type: ${typeof t}`)}},Ki=(t,e)=>Object.entries(t).reduce((n,[r,s])=>({...n,[r]:Gi(s,e)}),{}),_d=(t,e)=>{const n=yn(t,"Endpoint URL",e);if(typeof n=="string")try{return new URL(n)}catch(r){throw console.error(`Failed to construct URL with ${n}`,r),r}throw new be(`Endpoint URL must be a string, got ${typeof n}`)},Id=(t,e)=>{const{conditions:n,endpoint:r}=t,{result:s,referenceRecord:i}=hr(n,e);if(!s)return;const o={...e,referenceRecord:{...e.referenceRecord,...i}},{url:a,properties:d,headers:c}=r;return e.logger?.debug?.(`${Ot} Resolving endpoint from template: ${Ue(r)}`),{...c!=null&&{headers:Ad(c,o)},...d!=null&&{properties:Ki(d,o)},url:_d(a,o)}},Rd=(t,e)=>{const{conditions:n,error:r}=t,{result:s,referenceRecord:i}=hr(n,e);if(s)throw new be(yn(r,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},Cd=(t,e)=>{const{conditions:n,rules:r}=t,{result:s,referenceRecord:i}=hr(n,e);if(s)return Wi(r,{...e,referenceRecord:{...e.referenceRecord,...i}})},Wi=(t,e)=>{for(const n of t)if(n.type==="endpoint"){const r=Id(n,e);if(r)return r}else if(n.type==="error")Rd(n,e);else if(n.type==="tree"){const r=Cd(n,e);if(r)return r}else throw new be(`Unknown endpoint rule: ${n}`);throw new be("Rules evaluation failed")},Td=(t,e)=>{const{endpointParams:n,logger:r}=e,{parameters:s,rules:i}=t;e.logger?.debug?.(`${Ot} Initial EndpointParams: ${Ue(n)}`);const o=Object.entries(s).filter(([,c])=>c.default!=null).map(([c,l])=>[c,l.default]);if(o.length>0)for(const[c,l]of o)n[c]=n[c]??l;const a=Object.entries(s).filter(([,c])=>c.required).map(([c])=>c);for(const c of a)if(n[c]==null)throw new be(`Missing required parameter: '${c}'`);const d=Wi(i,{endpointParams:n,logger:r,referenceRecord:{}});return e.logger?.debug?.(`${Ot} Resolved endpoint: ${Ue(d)}`),d},Qi=(t,e=!1)=>{if(e){for(const n of t.split("."))if(!Qi(n))return!1;return!0}return!(!fr(t)||t.length<3||t.length>63||t!==t.toLowerCase()||ji(t))},Es=":",Md="/",Nd=t=>{const e=t.split(Es);if(e.length<6)return null;const[n,r,s,i,o,...a]=e;if(n!=="arn"||r===""||s===""||a.join(Es)==="")return null;const d=a.map(c=>c.split(Md)).flat();return{partition:r,service:s,region:i,accountId:o,resourceId:d}},Pd=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],Od={partitions:Pd};let kd=Od;const Dd=t=>{const{partitions:e}=kd;for(const r of e){const{regions:s,outputs:i}=r;for(const[o,a]of Object.entries(s))if(o===t)return{...i,...a}}for(const r of e){const{regionRegex:s,outputs:i}=r;if(new RegExp(s).test(t))return{...i}}const n=e.find(r=>r.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}},Yi={isVirtualHostableS3Bucket:Qi,parseArn:Nd,partition:Dd};an.aws=Yi;function Bd(t){const e={};if(t=t.replace(/^\?/,""),t)for(const n of t.split("&")){let[r,s=null]=n.split("=");r=decodeURIComponent(r),s&&(s=decodeURIComponent(s)),r in e?Array.isArray(e[r])?e[r].push(s):e[r]=[e[r],s]:e[r]=s}return e}const cn=t=>{if(typeof t=="string")return cn(new URL(t));const{hostname:e,pathname:n,port:r,protocol:s,search:i}=t;let o;return i&&(o=Bd(i)),{hostname:e,port:r?parseInt(r):void 0,protocol:s,path:n,query:o}};function $d(t,e,n){return t.$source||(t.$source={}),t.$source[e]=n,t}function xe(t,e,n){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=n}const Ss=t=>Mt.isInstance(t)?t.headers?.date??t.headers?.Date:void 0,Xi=t=>new Date(Date.now()+t),Ld=(t,e)=>Math.abs(Xi(e).getTime()-t)>=3e5,xs=(t,e)=>{const n=Date.parse(t);return Ld(n,e)?n-Date.now():e},Rt=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},Fd=async t=>{const e=Rt("context",t.context),n=Rt("config",t.config),r=e.endpointV2?.properties?.authSchemes?.[0],i=await Rt("signer",n.signer)(r),o=t?.signingRegion,a=t?.signingRegionSet,d=t?.signingName;return{config:n,signer:i,signingRegion:o,signingRegionSet:a,signingName:d}};class Ud{async sign(e,n,r){if(!Ee.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await Fd(r),{config:i,signer:o}=s;let{signingRegion:a,signingName:d}=s;const c=r.context;if(c?.authSchemes?.length??!1){const[f,u]=c.authSchemes;f?.name==="sigv4a"&&u?.name==="sigv4"&&(a=u?.signingRegion??a,d=u?.signingName??d)}return await o.sign(e,{signingDate:Xi(i.systemClockOffset),signingRegion:a,signingService:d})}errorHandler(e){return n=>{const r=n.ServerTime??Ss(n.$response);if(r){const s=Rt("config",e.config),i=s.systemClockOffset;s.systemClockOffset=xs(r,s.systemClockOffset),s.systemClockOffset!==i&&n.$metadata&&(n.$metadata.clockSkewCorrected=!0)}throw n}}successHandler(e,n){const r=Ss(e);if(r){const s=Rt("config",n.config);s.systemClockOffset=xs(r,s.systemClockOffset)}}}class pr extends Error{name="ProviderError";tryNextLink;constructor(e,n=!0){let r,s=!0;typeof n=="boolean"?(r=void 0,s=n):n!=null&&typeof n=="object"&&(r=n.logger,s=n.tryNextLink??!0),super(e),this.tryNextLink=s,Object.setPrototypeOf(this,pr.prototype),r?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${e}`)}static from(e,n=!0){return Object.assign(new this(e.message,n),e)}}class lt extends pr{name="CredentialsProviderError";constructor(e,n=!0){super(e,n),Object.setPrototypeOf(this,lt.prototype)}}const zd=(t,e,n)=>{let r,s,i,o=!1;const a=async()=>{s||(s=t());try{r=await s,i=!0,o=!1}finally{s=void 0}return r};return async d=>((!i||d?.forceRefresh)&&(r=await a()),r)},jd="X-Amz-Algorithm",Vd="X-Amz-Credential",Ji="X-Amz-Date",Hd="X-Amz-SignedHeaders",qd="X-Amz-Expires",Zi="X-Amz-Signature",eo="X-Amz-Security-Token",to="authorization",no=Ji.toLowerCase(),Gd="date",Kd=[to,no,Gd],Wd=Zi.toLowerCase(),Zn="x-amz-content-sha256",Qd=eo.toLowerCase(),Yd={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Xd=/^proxy-/,Jd=/^sec-/,$n="AWS4-HMAC-SHA256",Zd="AWS4-HMAC-SHA256-PAYLOAD",eu="UNSIGNED-PAYLOAD",tu=50,ro="aws4_request",nu=3600*24*7,Xt={},Ln=[],Fn=(t,e,n)=>`${t}/${e}/${n}/${ro}`,ru=async(t,e,n,r,s)=>{const i=await As(t,e.secretAccessKey,e.accessKeyId),o=`${n}:${r}:${s}:${qe(i)}:${e.sessionToken}`;if(o in Xt)return Xt[o];for(Ln.push(o);Ln.length>tu;)delete Xt[Ln.shift()];let a=`AWS4${e.secretAccessKey}`;for(const d of[n,r,s,ro])a=await As(t,a,d);return Xt[o]=a},As=(t,e,n)=>{const r=new t(e);return r.update(Nt(n)),r.digest()},_s=({headers:t},e,n)=>{const r={};for(const s of Object.keys(t).sort()){if(t[s]==null)continue;const i=s.toLowerCase();(i in Yd||e?.has(i)||Xd.test(i)||Jd.test(i))&&(!n||n&&!n.has(i))||(r[i]=t[s].trim().replace(/\s+/g," "))}return r},su=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",Un=async({headers:t,body:e},n)=>{for(const r of Object.keys(t))if(r.toLowerCase()===Zn)return t[r];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||su(e)){const r=new n;return r.update(Nt(e)),qe(await r.digest())}return eu};class iu{format(e){const n=[];for(const i of Object.keys(e)){const o=ct(i);n.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const r=new Uint8Array(n.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,e.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const a=ct(e.value),d=new DataView(new ArrayBuffer(3+a.byteLength));d.setUint8(0,7),d.setUint16(1,a.byteLength,!1);const c=new Uint8Array(d.buffer);return c.set(a,3),c;case"timestamp":const l=new Uint8Array(9);return l[0]=8,l.set(mr.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!ou.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const f=new Uint8Array(17);return f[0]=9,f.set(Hc(e.value.replace(/\-/g,"")),1),f}}}var Is;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(Is||(Is={}));const ou=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class mr{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(e));r>-1&&s>0;r--,s/=256)n[r]=s;return e<0&&Rs(n),new mr(n)}valueOf(){const e=this.bytes.slice(0),n=e[0]&128;return n&&Rs(e),parseInt(qe(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}}function Rs(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}const au=(t,e)=>{t=t.toLowerCase();for(const n of Object.keys(e))if(t===n.toLowerCase())return!0;return!1},cu=(t,e={})=>{const{headers:n,query:r={}}=Ee.clone(t);for(const s of Object.keys(n)){const i=s.toLowerCase();(i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)||e.hoistableHeaders?.has(i))&&(r[s]=n[s],delete n[s])}return{...t,headers:n,query:r}},Cs=t=>{t=Ee.clone(t);for(const e of Object.keys(t.headers))Kd.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},du=({query:t={}})=>{const e=[],n={};for(const r of Object.keys(t)){if(r.toLowerCase()===Wd)continue;const s=He(r);e.push(s);const i=t[r];typeof i=="string"?n[s]=`${s}=${He(i)}`:Array.isArray(i)&&(n[s]=i.slice(0).reduce((o,a)=>o.concat([`${s}=${He(a)}`]),[]).sort().join("&"))}return e.sort().map(r=>n[r]).filter(r=>r).join("&")},uu=t=>lu(t).toISOString().replace(/\.\d{3}Z$/,"Z"),lu=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class fu{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:n,region:r,service:s,sha256:i,uriEscapePath:o=!0}){this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=Me(r),this.credentialProvider=Me(n)}createCanonicalRequest(e,n,r){const s=Object.keys(n).sort();return`${e.method}
${this.getCanonicalPath(e)}
${du(e)}
${s.map(i=>`${i}:${n[i]}`).join(`
`)}

${s.join(";")}
${r}`}async createStringToSign(e,n,r,s){const i=new this.sha256;i.update(Nt(r));const o=await i.digest();return`${s}
${e}
${n}
${qe(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const n=[];for(const i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?n.pop():n.push(i));const r=`${e?.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&e?.endsWith("/")?"/":""}`;return He(r).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){const n=uu(e).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class Ts extends fu{headerFormatter=new iu;constructor({applyChecksum:e,credentials:n,region:r,service:s,sha256:i,uriEscapePath:o=!0}){super({applyChecksum:e,credentials:n,region:r,service:s,sha256:i,uriEscapePath:o})}async presign(e,n={}){const{signingDate:r=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:a,hoistableHeaders:d,signingRegion:c,signingService:l}=n,f=await this.credentialProvider();this.validateResolvedCredentials(f);const u=c??await this.regionProvider(),{longDate:h,shortDate:m}=this.formatDate(r);if(s>nu)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const y=Fn(m,u,l??this.service),g=cu(Cs(e),{unhoistableHeaders:o,hoistableHeaders:d});f.sessionToken&&(g.query[eo]=f.sessionToken),g.query[jd]=$n,g.query[Vd]=`${f.accessKeyId}/${y}`,g.query[Ji]=h,g.query[qd]=s.toString(10);const x=_s(g,i,a);return g.query[Hd]=this.getCanonicalHeaderList(x),g.query[Zi]=await this.getSignature(h,y,this.getSigningKey(f,u,m,l),this.createCanonicalRequest(g,x,await Un(e,this.sha256))),g}async sign(e,n){return typeof e=="string"?this.signString(e,n):e.headers&&e.payload?this.signEvent(e,n):e.message?this.signMessage(e,n):this.signRequest(e,n)}async signEvent({headers:e,payload:n},{signingDate:r=new Date,priorSignature:s,signingRegion:i,signingService:o}){const a=i??await this.regionProvider(),{shortDate:d,longDate:c}=this.formatDate(r),l=Fn(d,a,o??this.service),f=await Un({headers:{},body:n},this.sha256),u=new this.sha256;u.update(e);const h=qe(await u.digest()),m=[Zd,c,l,s,h,f].join(`
`);return this.signString(m,{signingDate:r,signingRegion:a,signingService:o})}async signMessage(e,{signingDate:n=new Date,signingRegion:r,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:n,signingRegion:r,signingService:s,priorSignature:e.priorSignature}).then(o=>({message:e.message,signature:o}))}async signString(e,{signingDate:n=new Date,signingRegion:r,signingService:s}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const o=r??await this.regionProvider(),{shortDate:a}=this.formatDate(n),d=new this.sha256(await this.getSigningKey(i,o,a,s));return d.update(Nt(e)),qe(await d.digest())}async signRequest(e,{signingDate:n=new Date,signableHeaders:r,unsignableHeaders:s,signingRegion:i,signingService:o}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const d=i??await this.regionProvider(),c=Cs(e),{longDate:l,shortDate:f}=this.formatDate(n),u=Fn(f,d,o??this.service);c.headers[no]=l,a.sessionToken&&(c.headers[Qd]=a.sessionToken);const h=await Un(c,this.sha256);!au(Zn,c.headers)&&this.applyChecksum&&(c.headers[Zn]=h);const m=_s(c,s,r),y=await this.getSignature(l,u,this.getSigningKey(a,d,f,o),this.createCanonicalRequest(c,m,h));return c.headers[to]=`${$n} Credential=${a.accessKeyId}/${u}, SignedHeaders=${this.getCanonicalHeaderList(m)}, Signature=${y}`,c}async getSignature(e,n,r,s){const i=await this.createStringToSign(e,n,s,$n),o=new this.sha256(await r);return o.update(Nt(i)),qe(await o.digest())}getSigningKey(e,n,r,s){return ru(this.sha256,e,r,n,s||this.service)}}const hu=t=>{let e=t.credentials,n=!!t.credentials,r;Object.defineProperty(t,"credentials",{set(c){c&&c!==e&&c!==r&&(n=!0),e=c;const l=pu(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),f=mu(t,l);n&&!f.attributed?(r=async u=>f(u).then(h=>$d(h,"CREDENTIALS_CODE","e")),r.memoized=f.memoized,r.configBound=f.configBound,r.attributed=!0):r=f},get(){return r},enumerable:!0,configurable:!0}),t.credentials=e;const{signingEscapePath:s=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t;let a;return t.signer?a=_t(t.signer):t.regionInfoProvider?a=()=>_t(t.region)().then(async c=>[await t.regionInfoProvider(c,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},c]).then(([c,l])=>{const{signingRegion:f,signingService:u}=c;t.signingRegion=t.signingRegion||f||l,t.signingName=t.signingName||u||t.serviceId;const h={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},m=t.signerConstructor||Ts;return new m(h)}):a=async c=>{c=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await _t(t.region)(),properties:{}},c);const l=c.signingRegion,f=c.signingName;t.signingRegion=t.signingRegion||l,t.signingName=t.signingName||f||t.serviceId;const u={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},h=t.signerConstructor||Ts;return new h(u)},Object.assign(t,{systemClockOffset:i,signingEscapePath:s,signer:a})};function pu(t,{credentials:e,credentialDefaultProvider:n}){let r;return e?e?.memoized?r=e:r=od(e,id,zi):n?r=_t(n(Object.assign({},t,{parentClientConfig:t}))):r=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},r.memoized=!0,r}function mu(t,e){if(e.configBound)return e;const n=async r=>e({...r,callerClientConfig:t});return n.memoized=e.memoized,n.configBound=!0,n}const Ms=typeof TextEncoder=="function"?new TextEncoder:null,gu=t=>{if(typeof t=="string"){if(Ms)return Ms.encode(t).byteLength;let e=t.length;for(let n=e-1;n>=0;n--){const r=t.charCodeAt(n);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&n--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)},je=(t,e)=>{const n=[];if(t&&n.push(t),e)for(const r of e)n.push(r);return n},Be=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,dn=()=>{let t=[],e=[],n=!1;const r=new Set,s=f=>f.sort((u,h)=>Ns[h.step]-Ns[u.step]||Ps[h.priority||"normal"]-Ps[u.priority||"normal"]),i=f=>{let u=!1;const h=m=>{const y=je(m.name,m.aliases);if(y.includes(f)){u=!0;for(const g of y)r.delete(g);return!1}return!0};return t=t.filter(h),e=e.filter(h),u},o=f=>{let u=!1;const h=m=>{if(m.middleware===f){u=!0;for(const y of je(m.name,m.aliases))r.delete(y);return!1}return!0};return t=t.filter(h),e=e.filter(h),u},a=f=>(t.forEach(u=>{f.add(u.middleware,{...u})}),e.forEach(u=>{f.addRelativeTo(u.middleware,{...u})}),f.identifyOnResolve?.(l.identifyOnResolve()),f),d=f=>{const u=[];return f.before.forEach(h=>{h.before.length===0&&h.after.length===0?u.push(h):u.push(...d(h))}),u.push(f),f.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?u.push(h):u.push(...d(h))}),u},c=(f=!1)=>{const u=[],h=[],m={};return t.forEach(g=>{const x={...g,before:[],after:[]};for(const w of je(x.name,x.aliases))m[w]=x;u.push(x)}),e.forEach(g=>{const x={...g,before:[],after:[]};for(const w of je(x.name,x.aliases))m[w]=x;h.push(x)}),h.forEach(g=>{if(g.toMiddleware){const x=m[g.toMiddleware];if(x===void 0){if(f)return;throw new Error(`${g.toMiddleware} is not found when adding ${Be(g.name,g.aliases)} middleware ${g.relation} ${g.toMiddleware}`)}g.relation==="after"&&x.after.push(g),g.relation==="before"&&x.before.push(g)}}),s(u).map(d).reduce((g,x)=>(g.push(...x),g),[])},l={add:(f,u={})=>{const{name:h,override:m,aliases:y}=u,g={step:"initialize",priority:"normal",middleware:f,...u},x=je(h,y);if(x.length>0){if(x.some(w=>r.has(w))){if(!m)throw new Error(`Duplicate middleware name '${Be(h,y)}'`);for(const w of x){const v=t.findIndex(C=>C.name===w||C.aliases?.some(O=>O===w));if(v===-1)continue;const _=t[v];if(_.step!==g.step||g.priority!==_.priority)throw new Error(`"${Be(_.name,_.aliases)}" middleware with ${_.priority} priority in ${_.step} step cannot be overridden by "${Be(h,y)}" middleware with ${g.priority} priority in ${g.step} step.`);t.splice(v,1)}}for(const w of x)r.add(w)}t.push(g)},addRelativeTo:(f,u)=>{const{name:h,override:m,aliases:y}=u,g={middleware:f,...u},x=je(h,y);if(x.length>0){if(x.some(w=>r.has(w))){if(!m)throw new Error(`Duplicate middleware name '${Be(h,y)}'`);for(const w of x){const v=e.findIndex(C=>C.name===w||C.aliases?.some(O=>O===w));if(v===-1)continue;const _=e[v];if(_.toMiddleware!==g.toMiddleware||_.relation!==g.relation)throw new Error(`"${Be(_.name,_.aliases)}" middleware ${_.relation} "${_.toMiddleware}" middleware cannot be overridden by "${Be(h,y)}" middleware ${g.relation} "${g.toMiddleware}" middleware.`);e.splice(v,1)}}for(const w of x)r.add(w)}e.push(g)},clone:()=>a(dn()),use:f=>{f.applyToStack(l)},remove:f=>typeof f=="string"?i(f):o(f),removeByTag:f=>{let u=!1;const h=m=>{const{tags:y,name:g,aliases:x}=m;if(y&&y.includes(f)){const w=je(g,x);for(const v of w)r.delete(v);return u=!0,!1}return!0};return t=t.filter(h),e=e.filter(h),u},concat:f=>{const u=a(dn());return u.use(f),u.identifyOnResolve(n||u.identifyOnResolve()||(f.identifyOnResolve?.()??!1)),u},applyToStack:a,identify:()=>c(!0).map(f=>{const u=f.step??f.relation+" "+f.toMiddleware;return Be(f.name,f.aliases)+" - "+u}),identifyOnResolve(f){return typeof f=="boolean"&&(n=f),n},resolve:(f,u)=>{for(const h of c().map(m=>m.middleware).reverse())f=h(f,u);return n&&console.log(l.identify()),f}};return l},Ns={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Ps={high:3,normal:2,low:1};class so{config;middlewareStack=dn();initConfig;handlers;constructor(e){this.config=e}send(e,n,r){const s=typeof n!="function"?n:void 0,i=typeof n=="function"?n:r,o=s===void 0&&this.config.cacheMiddleware===!0;let a;if(o){this.handlers||(this.handlers=new WeakMap);const d=this.handlers;d.has(e.constructor)?a=d.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),d.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)a(e).then(d=>i(null,d.output),d=>i(d)).catch(()=>{});else return a(e).then(d=>d.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}const zn="***SensitiveInformation***";function er(t,e){if(e==null)return e;const n=Pe.of(t);if(n.getMergedTraits().sensitive)return zn;if(n.isListSchema()){if(!!n.getValueSchema().getMergedTraits().sensitive)return zn}else if(n.isMapSchema()){if(!!n.getKeySchema().getMergedTraits().sensitive||!!n.getValueSchema().getMergedTraits().sensitive)return zn}else if(n.isStructSchema()&&typeof e=="object"){const r=e,s={};for(const[i,o]of n.structIterator())r[i]!=null&&(s[i]=er(o,r[i]));return s}return e}class Qe{middlewareStack=dn();schema;static classBuilder(){return new yu}resolveMiddlewareWithContext(e,n,r,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:d,smithyContext:c,additionalContext:l,CommandCtor:f}){for(const g of s.bind(this)(f,e,n,r))this.middlewareStack.use(g);const u=e.concat(this.middlewareStack),{logger:h}=n,m={logger:h,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:d,[Yn]:{commandInstance:this,...c},...l},{requestHandler:y}=n;return u.resolve(g=>y.handle(g.request,r||{}),m)}}class yu{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,n,r={}){return this._smithyContext={service:e,operation:n,...r},this}c(e={}){return this._additionalContext=e,this}n(e,n){return this._clientName=e,this._commandName=n,this}f(e=r=>r,n=r=>r){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=n,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let n;return n=class extends Qe{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[r]){super(),this.input=r??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(r,s,i){return this.resolveMiddlewareWithContext(r,s,i,{CommandCtor:n,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(e._operationSchema?er.bind(null,e._operationSchema.input):o=>o),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(e._operationSchema?er.bind(null,e._operationSchema.output):o=>o),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}}class it extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const n=e;return it.prototype.isPrototypeOf(n)||!!n.$fault&&!!n.$metadata&&(n.$fault==="client"||n.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;const n=e;return this===it?it.isInstance(e):it.isInstance(e)?n.name&&this.name?this.prototype.isPrototypeOf(e)||n.name===this.name:this.prototype.isPrototypeOf(e):!1}}const L=(t,e={})=>{Object.entries(e).filter(([,r])=>r!==void 0).forEach(([r,s])=>{(t[r]==null||t[r]==="")&&(t[r]=s)});const n=t.message||t.Message||"UnknownError";return t.message=n,delete t.Message,t},bu=({output:t,parsedBody:e,exceptionCtor:n,errorCode:r})=>{const s=vu(t),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new n({name:e?.code||e?.Code||r||i||"UnknownError",$fault:"client",$metadata:s});throw L(o,e)},wu=t=>({output:e,parsedBody:n,errorCode:r})=>{bu({output:e,parsedBody:n,exceptionCtor:t,errorCode:r})},vu=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),Eu=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Su=t=>{const e=[];for(const n in rn){const r=rn[n];t[r]!==void 0&&e.push({algorithmId:()=>r,checksumConstructor:()=>t[r]})}return{addChecksumAlgorithm(n){e.push(n)},checksumAlgorithms(){return e}}},xu=t=>{const e={};return t.checksumAlgorithms().forEach(n=>{e[n.algorithmId()]=n.checksumConstructor()}),e},Au=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),_u=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},Iu=t=>Object.assign(Su(t),Au(t)),Ru=t=>Object.assign(xu(t),_u(t));class io{trace(){}debug(){}info(){}warn(){}error(){}}const le=(t,e)=>{const n={};for(const r in e)Cu(n,t,e,r);return n},Cu=(t,e,n,r)=>{if(e!==null){let o=n[r];typeof o=="function"&&(o=[,o]);const[a=Tu,d=Mu,c=r]=o;(typeof a=="function"&&a(e[c])||typeof a!="function"&&a)&&(t[r]=d(e[c]));return}let[s,i]=n[r];if(typeof i=="function"){let o;const a=s===void 0&&(o=i())!=null,d=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?t[r]=o:d&&(t[r]=i())}else{const o=s===void 0&&i!=null,a=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(o||a)&&(t[r]=i)}},Tu=t=>t!=null,Mu=t=>t,M=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(M);if(typeof t=="object"){const e={};for(const n of Object.keys(t))t[n]!=null&&(e[n]=M(t[n]));return e}return t},Nu=(t,e)=>qc(t,e).then(n=>(e?.utf8Encoder??ar)(n)),ft=(t,e)=>Nu(t,e).then(n=>{if(n.length)try{return JSON.parse(n)}catch(r){throw r?.name==="SyntaxError"&&Object.defineProperty(r,"$responseBodyText",{value:n}),r}return{}}),Pu=async(t,e)=>{const n=await ft(t,e);return n.message=n.message??n.Message,n},Ou=(t,e)=>{const n=(i,o)=>Object.keys(i).find(a=>a.toLowerCase()===o.toLowerCase()),r=i=>{let o=i;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},s=n(t.headers,"x-amzn-errortype");if(s!==void 0)return r(t.headers[s]);if(e&&typeof e=="object"){const i=n(e,"code");if(i&&e[i]!==void 0)return r(e[i]);if(e.__type!==void 0)return r(e.__type)}},Bt=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,Yc(t)},ku=/\d{12}\.ddb/;async function Du(t,e,n){if(n.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&xe(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const i=await e.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?xe(t,"RETRY_MODE_ADAPTIVE","F"):xe(t,"RETRY_MODE_STANDARD","E"):xe(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const i=t.endpointV2;switch(String(i?.url?.hostname).match(ku)&&xe(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":xe(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":xe(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":xe(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){const i=s;i.accountId&&xe(t,"RESOLVED_ACCOUNT_ID","T");for(const[o,a]of Object.entries(i.$source??{}))xe(t,o,a)}}const Os="user-agent",jn="x-amz-user-agent",ks=" ",Vn="/",Bu=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,$u=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Ds="-",Lu=1024;function Fu(t){let e="";for(const n in t){const r=t[n];if(e.length+r.length+1<=Lu){e.length?e+=","+r:e+=r;continue}break}return e}const Uu=t=>(e,n)=>async r=>{const{request:s}=r;if(!Ee.isInstance(s))return e(r);const{headers:i}=s,o=n?.userAgent?.map(Jt)||[],a=(await t.defaultUserAgentProvider()).map(Jt);await Du(n,t,r);const d=n;a.push(`m/${Fu(Object.assign({},n.__smithy_context?.features,d.__aws_sdk_context?.features))}`);const c=t?.customUserAgent?.map(Jt)||[],l=await t.userAgentAppId();l&&a.push(Jt([`app/${l}`]));const f=[].concat([...a,...o,...c]).join(ks),u=[...a.filter(h=>h.startsWith("aws-sdk-")),...c].join(ks);return t.runtime!=="browser"?(u&&(i[jn]=i[jn]?`${i[Os]} ${u}`:u),i[Os]=f):i[jn]=f,e({...r,request:s})},Jt=t=>{const e=t[0].split(Vn).map(o=>o.replace(Bu,Ds)).join(Vn),n=t[1]?.replace($u,Ds),r=e.indexOf(Vn),s=e.substring(0,r);let i=e.substring(r+1);return s==="api"&&(i=i.toLowerCase()),[s,i,n].filter(o=>o&&o.length>0).reduce((o,a,d)=>{switch(d){case 0:return a;case 1:return`${o}/${a}`;default:return`${o}#${a}`}},"")},zu={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},ju=t=>({applyToStack:e=>{e.add(Uu(t),zu)}}),Vu=!1,Hu=!1,oo=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),Bs=t=>oo(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,qu=t=>{const{region:e,useFipsEndpoint:n}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{if(typeof e=="string")return Bs(e);const r=await e();return Bs(r)},useFipsEndpoint:async()=>{const r=typeof e=="string"?e:await e();return oo(r)?!0:typeof n!="function"?Promise.resolve(!!n):n()}})},$s="content-length";function Gu(t){return e=>async n=>{const r=n.request;if(Ee.isInstance(r)){const{body:s,headers:i}=r;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf($s)===-1)try{const o=t(s);r.headers={...r.headers,[$s]:String(o)}}catch{}}return e({...n,request:r})}}const Ku={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Wu=t=>({applyToStack:e=>{e.add(Gu(t.bodyLengthChecker),Ku)}}),Qu=async t=>{const e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),el(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Zu(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},Yu=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Xu=/(\d+\.){3}\d+/,Ju=/\.\./,Zu=t=>Yu.test(t)&&!Xu.test(t)&&!Ju.test(t),el=t=>{const[e,n,r,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&n&&r&&s);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},tl=(t,e,n)=>{const r=async()=>{const s=n[t]??n[e];return typeof s=="function"?s():s};return t==="credentialScope"||e==="CredentialScope"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.credentialScope??s?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.accountId??s?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(n.isCustomEndpoint===!1)return;const s=await r();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:i,hostname:o,port:a,path:d}=s;return`${i}//${o}${a?":"+a:""}${d}`}}return s}:r},ao=async t=>{},co=t=>typeof t=="object"?"url"in t?cn(t.url):t:cn(t),nl=async(t,e,n,r)=>{if(!n.isCustomEndpoint){let o;n.serviceConfiguredEndpoint?o=await n.serviceConfiguredEndpoint():o=await ao(n.serviceId),o&&(n.endpoint=()=>Promise.resolve(co(o)),n.isCustomEndpoint=!0)}const s=await rl(t,e,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(s,r)},rl=async(t,e,n)=>{const r={},s=e?.getEndpointParameterInstructions?.()||{};for(const[i,o]of Object.entries(s))switch(o.type){case"staticContextParams":r[i]=o.value;break;case"contextParams":r[i]=t[o.name];break;case"clientContextParams":case"builtInParams":r[i]=await tl(o.name,i,n)();break;case"operationContextParams":r[i]=o.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(s).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()==="s3"&&await Qu(r),r},sl=({config:t,instructions:e})=>(n,r)=>async s=>{t.isCustomEndpoint&&td(r,"ENDPOINT_OVERRIDE","N");const i=await nl(s.input,{getEndpointParameterInstructions(){return e}},{...t},r);r.endpointV2=i,r.authSchemes=i.properties?.authSchemes;const o=r.authSchemes?.[0];if(o){r.signing_region=o.signingRegion,r.signing_service=o.signingName;const d=gn(r)?.selectedHttpAuthScheme?.httpAuthOption;d&&(d.signingProperties=Object.assign(d.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return n({...s})},il={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:$i.name},$t=(t,e)=>({applyToStack:n=>{n.addRelativeTo(sl({config:t,instructions:e}),il)}}),ol=t=>{const e=t.tls??!0,{endpoint:n,useDualstackEndpoint:r,useFipsEndpoint:s}=t,i=n!=null?async()=>co(await Me(n)()):void 0,a=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!n,useDualstackEndpoint:Me(r??!1),useFipsEndpoint:Me(s??!1)});let d;return a.serviceConfiguredEndpoint=async()=>(t.serviceId&&!d&&(d=ao(t.serviceId)),d),a};var dt;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(dt||(dt={}));const un=3,al=dt.STANDARD,cl=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],dl=["TimeoutError","RequestTimeout","RequestTimeoutException"],ul=[500,502,503,504],ll=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],fl=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],hl=t=>t?.$retryable!==void 0,pl=t=>t.$metadata?.clockSkewCorrected,ml=t=>{const e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},uo=t=>t.$metadata?.httpStatusCode===429||cl.includes(t.name)||t.$retryable?.throttling==!0,gr=(t,e=0)=>hl(t)||pl(t)||dl.includes(t.name)||ll.includes(t?.code||"")||fl.includes(t?.code||"")||ul.includes(t.$metadata?.httpStatusCode||0)||ml(t)||t.cause!==void 0&&e<=10&&gr(t.cause,e+1),gl=t=>{if(t.$metadata?.httpStatusCode!==void 0){const e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!gr(t)}return!1};class yr{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const n=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(r=>yr.setTimeoutFn(r,n))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const n=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=e}updateClientSendingRate(e){let n;if(this.updateMeasuredRate(),uo(e)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());const r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),n=Math.floor(e*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){const r=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(e){return parseFloat(e.toFixed(8))}}const tr=100,lo=20*1e3,yl=500,Ls=500,bl=5,wl=10,vl=1,El="amz-sdk-invocation-id",Sl="amz-sdk-request",xl=()=>{let t=tr;return{computeNextBackoffDelay:r=>Math.floor(Math.min(lo,Math.random()*2**r*t)),setDelayBase:r=>{t=r}}},Fs=({retryDelay:t,retryCount:e,retryCost:n})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(lo,t),getRetryCost:()=>n});class fo{maxAttempts;mode=dt.STANDARD;capacity=Ls;retryBackoffStrategy=xl();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return Fs({retryDelay:tr,retryCount:0})}async refreshRetryTokenForRetry(e,n){const r=await this.getMaxAttempts();if(this.shouldRetry(e,n,r)){const s=n.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?yl:tr);const i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=n.retryAfterHint?Math.max(n.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,Fs({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(Ls,this.capacity+(e.getRetryCost()??vl))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${un}`),un}}shouldRetry(e,n,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(n.errorType)&&this.isRetryableError(n.errorType)}getCapacityCost(e){return e==="TRANSIENT"?wl:bl}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class Al{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=dt.ADAPTIVE;constructor(e,n){this.maxAttemptsProvider=e;const{rateLimiter:r}=n??{};this.rateLimiter=r??new yr,this.standardRetryStrategy=new fo(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(e,n)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}const _l=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),Il=t=>{const{retryStrategy:e,retryMode:n,maxAttempts:r}=t,s=Me(r??un);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await Me(n)()===dt.ADAPTIVE?new Al(s):new fo(s))})},Rl=t=>t?.body instanceof ReadableStream,Cl=t=>(e,n)=>async r=>{let s=await t.retryStrategy();const i=await t.maxAttempts();if(Tl(s)){s=s;let o=await s.acquireInitialRetryToken(n.partition_id),a=new Error,d=0,c=0;const{request:l}=r,f=Ee.isInstance(l);for(f&&(l.headers[El]=ed());;)try{f&&(l.headers[Sl]=`attempt=${d+1}; max=${i}`);const{response:u,output:h}=await e(r);return s.recordSuccess(o),h.$metadata.attempts=d+1,h.$metadata.totalRetryDelay=c,{response:u,output:h}}catch(u){const h=Ml(u);if(a=_l(u),f&&Rl(l))throw(n.logger instanceof io?console:n.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{o=await s.refreshRetryTokenForRetry(o,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=d+1,a.$metadata.totalRetryDelay=c,a}d=o.getRetryCount();const m=o.getRetryDelay();c+=m,await new Promise(y=>setTimeout(y,m))}}else return s=s,s?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,r)},Tl=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",Ml=t=>{const e={error:t,errorType:Nl(t)},n=kl(t.$response);return n&&(e.retryAfterHint=n),e},Nl=t=>uo(t)?"THROTTLING":gr(t)?"TRANSIENT":gl(t)?"SERVER_ERROR":"CLIENT_ERROR",Pl={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Ol=t=>({applyToStack:e=>{e.add(Cl(t),Pl)}}),kl=t=>{if(!Mt.isInstance(t))return;const e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;const n=t.headers[e],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(r*1e3)},Dl=async(t,e,n)=>({operation:gn(e).operation,region:await Me(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Bl(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"dynamodb",region:t.region},propertiesExtractor:(e,n)=>({signingProperties:{config:e,context:n}})}}const $l=t=>{const e=[];switch(t.operation){default:e.push(Bl(t))}return e},Ll=t=>{const e=hu(t);return Object.assign(e,{authSchemePreference:Me(t.authSchemePreference??[])})},Fl=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"dynamodb"}),Lt={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},AccountId:{type:"builtInParams",name:"accountId"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"},AccountIdEndpointMode:{type:"builtInParams",name:"accountIdEndpointMode"}};class k extends it{constructor(e){super(e),Object.setPrototypeOf(this,k.prototype)}}class br extends k{name="BackupInUseException";$fault="client";constructor(e){super({name:"BackupInUseException",$fault:"client",...e}),Object.setPrototypeOf(this,br.prototype)}}class wr extends k{name="BackupNotFoundException";$fault="client";constructor(e){super({name:"BackupNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,wr.prototype)}}class vr extends k{name="InternalServerError";$fault="server";constructor(e){super({name:"InternalServerError",$fault:"server",...e}),Object.setPrototypeOf(this,vr.prototype)}}class Er extends k{name="RequestLimitExceeded";$fault="client";ThrottlingReasons;constructor(e){super({name:"RequestLimitExceeded",$fault:"client",...e}),Object.setPrototypeOf(this,Er.prototype),this.ThrottlingReasons=e.ThrottlingReasons}}class Sr extends k{name="ThrottlingException";$fault="client";throttlingReasons;constructor(e){super({name:"ThrottlingException",$fault:"client",...e}),Object.setPrototypeOf(this,Sr.prototype),this.throttlingReasons=e.throttlingReasons}}class xr extends k{name="InvalidEndpointException";$fault="client";Message;constructor(e){super({name:"InvalidEndpointException",$fault:"client",...e}),Object.setPrototypeOf(this,xr.prototype),this.Message=e.Message}}class Ar extends k{name="ProvisionedThroughputExceededException";$fault="client";ThrottlingReasons;constructor(e){super({name:"ProvisionedThroughputExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,Ar.prototype),this.ThrottlingReasons=e.ThrottlingReasons}}class _r extends k{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,_r.prototype)}}class Ir extends k{name="ItemCollectionSizeLimitExceededException";$fault="client";constructor(e){super({name:"ItemCollectionSizeLimitExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,Ir.prototype)}}class Rr extends k{name="ReplicatedWriteConflictException";$fault="client";$retryable={};constructor(e){super({name:"ReplicatedWriteConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,Rr.prototype)}}class Cr extends k{name="ContinuousBackupsUnavailableException";$fault="client";constructor(e){super({name:"ContinuousBackupsUnavailableException",$fault:"client",...e}),Object.setPrototypeOf(this,Cr.prototype)}}class Tr extends k{name="LimitExceededException";$fault="client";constructor(e){super({name:"LimitExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,Tr.prototype)}}class Mr extends k{name="TableInUseException";$fault="client";constructor(e){super({name:"TableInUseException",$fault:"client",...e}),Object.setPrototypeOf(this,Mr.prototype)}}class Nr extends k{name="TableNotFoundException";$fault="client";constructor(e){super({name:"TableNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,Nr.prototype)}}class Pr extends k{name="GlobalTableAlreadyExistsException";$fault="client";constructor(e){super({name:"GlobalTableAlreadyExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,Pr.prototype)}}class Or extends k{name="ResourceInUseException";$fault="client";constructor(e){super({name:"ResourceInUseException",$fault:"client",...e}),Object.setPrototypeOf(this,Or.prototype)}}class kr extends k{name="TransactionConflictException";$fault="client";constructor(e){super({name:"TransactionConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,kr.prototype)}}class Dr extends k{name="PolicyNotFoundException";$fault="client";constructor(e){super({name:"PolicyNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,Dr.prototype)}}class Br extends k{name="ExportNotFoundException";$fault="client";constructor(e){super({name:"ExportNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,Br.prototype)}}class $r extends k{name="GlobalTableNotFoundException";$fault="client";constructor(e){super({name:"GlobalTableNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,$r.prototype)}}class Lr extends k{name="ImportNotFoundException";$fault="client";constructor(e){super({name:"ImportNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,Lr.prototype)}}class Fr extends k{name="DuplicateItemException";$fault="client";constructor(e){super({name:"DuplicateItemException",$fault:"client",...e}),Object.setPrototypeOf(this,Fr.prototype)}}class Ur extends k{name="IdempotentParameterMismatchException";$fault="client";Message;constructor(e){super({name:"IdempotentParameterMismatchException",$fault:"client",...e}),Object.setPrototypeOf(this,Ur.prototype),this.Message=e.Message}}class zr extends k{name="TransactionInProgressException";$fault="client";Message;constructor(e){super({name:"TransactionInProgressException",$fault:"client",...e}),Object.setPrototypeOf(this,zr.prototype),this.Message=e.Message}}class jr extends k{name="ExportConflictException";$fault="client";constructor(e){super({name:"ExportConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,jr.prototype)}}class Vr extends k{name="InvalidExportTimeException";$fault="client";constructor(e){super({name:"InvalidExportTimeException",$fault:"client",...e}),Object.setPrototypeOf(this,Vr.prototype)}}class Hr extends k{name="PointInTimeRecoveryUnavailableException";$fault="client";constructor(e){super({name:"PointInTimeRecoveryUnavailableException",$fault:"client",...e}),Object.setPrototypeOf(this,Hr.prototype)}}class qr extends k{name="ImportConflictException";$fault="client";constructor(e){super({name:"ImportConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,qr.prototype)}}class Gr extends k{name="TableAlreadyExistsException";$fault="client";constructor(e){super({name:"TableAlreadyExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,Gr.prototype)}}class Kr extends k{name="InvalidRestoreTimeException";$fault="client";constructor(e){super({name:"InvalidRestoreTimeException",$fault:"client",...e}),Object.setPrototypeOf(this,Kr.prototype)}}class Wr extends k{name="ReplicaAlreadyExistsException";$fault="client";constructor(e){super({name:"ReplicaAlreadyExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,Wr.prototype)}}class Qr extends k{name="ReplicaNotFoundException";$fault="client";constructor(e){super({name:"ReplicaNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,Qr.prototype)}}class Yr extends k{name="IndexNotFoundException";$fault="client";constructor(e){super({name:"IndexNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,Yr.prototype)}}var nr;(function(t){t.visit=(e,n)=>e.S!==void 0?n.S(e.S):e.N!==void 0?n.N(e.N):e.B!==void 0?n.B(e.B):e.SS!==void 0?n.SS(e.SS):e.NS!==void 0?n.NS(e.NS):e.BS!==void 0?n.BS(e.BS):e.M!==void 0?n.M(e.M):e.L!==void 0?n.L(e.L):e.NULL!==void 0?n.NULL(e.NULL):e.BOOL!==void 0?n.BOOL(e.BOOL):n._(e.$unknown[0],e.$unknown[1])})(nr||(nr={}));class Xr extends k{name="ConditionalCheckFailedException";$fault="client";Item;constructor(e){super({name:"ConditionalCheckFailedException",$fault:"client",...e}),Object.setPrototypeOf(this,Xr.prototype),this.Item=e.Item}}class Jr extends k{name="TransactionCanceledException";$fault="client";Message;CancellationReasons;constructor(e){super({name:"TransactionCanceledException",$fault:"client",...e}),Object.setPrototypeOf(this,Jr.prototype),this.Message=e.Message,this.CancellationReasons=e.CancellationReasons}}const Ul=async(t,e)=>{const n=jt("DeleteItem");let r;return r=JSON.stringify(Of(t,e)),zt(e,n,"/",void 0,r)},zl=async(t,e)=>{const n=jt("DescribeEndpoints");let r;return r=JSON.stringify(M(t)),zt(e,n,"/",void 0,r)},jl=async(t,e)=>{const n=jt("GetItem");let r;return r=JSON.stringify(Bf(t,e)),zt(e,n,"/",void 0,r)},Vl=async(t,e)=>{const n=jt("PutItem");let r;return r=JSON.stringify(Uf(t,e)),zt(e,n,"/",void 0,r)},Hl=async(t,e)=>{const n=jt("Query");let r;return r=JSON.stringify(jf(t,e)),zt(e,n,"/",void 0,r)},ql=async(t,e)=>{if(t.statusCode>=300)return Ft(t,e);const n=await ft(t.body,e);let r={};return r=Kf(n,e),{$metadata:P(t),...r}},Gl=async(t,e)=>{if(t.statusCode>=300)return Ft(t,e);const n=await ft(t.body,e);let r={};return r=M(n),{$metadata:P(t),...r}},Kl=async(t,e)=>{if(t.statusCode>=300)return Ft(t,e);const n=await ft(t.body,e);let r={};return r=Wf(n,e),{$metadata:P(t),...r}},Wl=async(t,e)=>{if(t.statusCode>=300)return Ft(t,e);const n=await ft(t.body,e);let r={};return r=th(n,e),{$metadata:P(t),...r}},Ql=async(t,e)=>{if(t.statusCode>=300)return Ft(t,e);const n=await ft(t.body,e);let r={};return r=nh(n,e),{$metadata:P(t),...r}},Ft=async(t,e)=>{const n={...t,body:await Pu(t.body,e)},r=Ou(t,n.body);switch(r){case"InternalServerError":case"com.amazonaws.dynamodb#InternalServerError":throw await uf(n);case"RequestLimitExceeded":case"com.amazonaws.dynamodb#RequestLimitExceeded":throw await Sf(n);case"ThrottlingException":case"com.amazonaws.dynamodb#ThrottlingException":throw await Cf(n);case"InvalidEndpointException":case"com.amazonaws.dynamodb#InvalidEndpointException":throw await lf(n);case"ProvisionedThroughputExceededException":case"com.amazonaws.dynamodb#ProvisionedThroughputExceededException":throw await bf(n);case"ResourceNotFoundException":case"com.amazonaws.dynamodb#ResourceNotFoundException":throw await Af(n);case"ItemCollectionSizeLimitExceededException":case"com.amazonaws.dynamodb#ItemCollectionSizeLimitExceededException":throw await pf(n);case"ReplicatedWriteConflictException":case"com.amazonaws.dynamodb#ReplicatedWriteConflictException":throw await Ef(n);case"BackupInUseException":case"com.amazonaws.dynamodb#BackupInUseException":throw await Yl(n);case"ContinuousBackupsUnavailableException":case"com.amazonaws.dynamodb#ContinuousBackupsUnavailableException":throw await Zl(n);case"LimitExceededException":case"com.amazonaws.dynamodb#LimitExceededException":throw await mf(n);case"TableInUseException":case"com.amazonaws.dynamodb#TableInUseException":throw await If(n);case"TableNotFoundException":case"com.amazonaws.dynamodb#TableNotFoundException":throw await Rf(n);case"GlobalTableAlreadyExistsException":case"com.amazonaws.dynamodb#GlobalTableAlreadyExistsException":throw await rf(n);case"ResourceInUseException":case"com.amazonaws.dynamodb#ResourceInUseException":throw await xf(n);case"BackupNotFoundException":case"com.amazonaws.dynamodb#BackupNotFoundException":throw await Xl(n);case"ConditionalCheckFailedException":case"com.amazonaws.dynamodb#ConditionalCheckFailedException":throw await Jl(n,e);case"TransactionConflictException":case"com.amazonaws.dynamodb#TransactionConflictException":throw await Mf(n);case"PolicyNotFoundException":case"com.amazonaws.dynamodb#PolicyNotFoundException":throw await yf(n);case"ExportNotFoundException":case"com.amazonaws.dynamodb#ExportNotFoundException":throw await nf(n);case"GlobalTableNotFoundException":case"com.amazonaws.dynamodb#GlobalTableNotFoundException":throw await sf(n);case"ImportNotFoundException":case"com.amazonaws.dynamodb#ImportNotFoundException":throw await cf(n);case"DuplicateItemException":case"com.amazonaws.dynamodb#DuplicateItemException":throw await ef(n);case"IdempotentParameterMismatchException":case"com.amazonaws.dynamodb#IdempotentParameterMismatchException":throw await of(n);case"TransactionCanceledException":case"com.amazonaws.dynamodb#TransactionCanceledException":throw await Tf(n,e);case"TransactionInProgressException":case"com.amazonaws.dynamodb#TransactionInProgressException":throw await Nf(n);case"ExportConflictException":case"com.amazonaws.dynamodb#ExportConflictException":throw await tf(n);case"InvalidExportTimeException":case"com.amazonaws.dynamodb#InvalidExportTimeException":throw await ff(n);case"PointInTimeRecoveryUnavailableException":case"com.amazonaws.dynamodb#PointInTimeRecoveryUnavailableException":throw await gf(n);case"ImportConflictException":case"com.amazonaws.dynamodb#ImportConflictException":throw await af(n);case"TableAlreadyExistsException":case"com.amazonaws.dynamodb#TableAlreadyExistsException":throw await _f(n);case"InvalidRestoreTimeException":case"com.amazonaws.dynamodb#InvalidRestoreTimeException":throw await hf(n);case"ReplicaAlreadyExistsException":case"com.amazonaws.dynamodb#ReplicaAlreadyExistsException":throw await wf(n);case"ReplicaNotFoundException":case"com.amazonaws.dynamodb#ReplicaNotFoundException":throw await vf(n);case"IndexNotFoundException":case"com.amazonaws.dynamodb#IndexNotFoundException":throw await df(n);default:const s=n.body;return sh({output:t,parsedBody:s,errorCode:r})}},Yl=async(t,e)=>{const n=t.body,r=M(n),s=new br({$metadata:P(t),...r});return L(s,n)},Xl=async(t,e)=>{const n=t.body,r=M(n),s=new wr({$metadata:P(t),...r});return L(s,n)},Jl=async(t,e)=>{const n=t.body,r=Gf(n,e),s=new Xr({$metadata:P(t),...r});return L(s,n)},Zl=async(t,e)=>{const n=t.body,r=M(n),s=new Cr({$metadata:P(t),...r});return L(s,n)},ef=async(t,e)=>{const n=t.body,r=M(n),s=new Fr({$metadata:P(t),...r});return L(s,n)},tf=async(t,e)=>{const n=t.body,r=M(n),s=new jr({$metadata:P(t),...r});return L(s,n)},nf=async(t,e)=>{const n=t.body,r=M(n),s=new Br({$metadata:P(t),...r});return L(s,n)},rf=async(t,e)=>{const n=t.body,r=M(n),s=new Pr({$metadata:P(t),...r});return L(s,n)},sf=async(t,e)=>{const n=t.body,r=M(n),s=new $r({$metadata:P(t),...r});return L(s,n)},of=async(t,e)=>{const n=t.body,r=M(n),s=new Ur({$metadata:P(t),...r});return L(s,n)},af=async(t,e)=>{const n=t.body,r=M(n),s=new qr({$metadata:P(t),...r});return L(s,n)},cf=async(t,e)=>{const n=t.body,r=M(n),s=new Lr({$metadata:P(t),...r});return L(s,n)},df=async(t,e)=>{const n=t.body,r=M(n),s=new Yr({$metadata:P(t),...r});return L(s,n)},uf=async(t,e)=>{const n=t.body,r=M(n),s=new vr({$metadata:P(t),...r});return L(s,n)},lf=async(t,e)=>{const n=t.body,r=M(n),s=new xr({$metadata:P(t),...r});return L(s,n)},ff=async(t,e)=>{const n=t.body,r=M(n),s=new Vr({$metadata:P(t),...r});return L(s,n)},hf=async(t,e)=>{const n=t.body,r=M(n),s=new Kr({$metadata:P(t),...r});return L(s,n)},pf=async(t,e)=>{const n=t.body,r=M(n),s=new Ir({$metadata:P(t),...r});return L(s,n)},mf=async(t,e)=>{const n=t.body,r=M(n),s=new Tr({$metadata:P(t),...r});return L(s,n)},gf=async(t,e)=>{const n=t.body,r=M(n),s=new Hr({$metadata:P(t),...r});return L(s,n)},yf=async(t,e)=>{const n=t.body,r=M(n),s=new Dr({$metadata:P(t),...r});return L(s,n)},bf=async(t,e)=>{const n=t.body,r=M(n),s=new Ar({$metadata:P(t),...r});return L(s,n)},wf=async(t,e)=>{const n=t.body,r=M(n),s=new Wr({$metadata:P(t),...r});return L(s,n)},vf=async(t,e)=>{const n=t.body,r=M(n),s=new Qr({$metadata:P(t),...r});return L(s,n)},Ef=async(t,e)=>{const n=t.body,r=M(n),s=new Rr({$metadata:P(t),...r});return L(s,n)},Sf=async(t,e)=>{const n=t.body,r=M(n),s=new Er({$metadata:P(t),...r});return L(s,n)},xf=async(t,e)=>{const n=t.body,r=M(n),s=new Or({$metadata:P(t),...r});return L(s,n)},Af=async(t,e)=>{const n=t.body,r=M(n),s=new _r({$metadata:P(t),...r});return L(s,n)},_f=async(t,e)=>{const n=t.body,r=M(n),s=new Gr({$metadata:P(t),...r});return L(s,n)},If=async(t,e)=>{const n=t.body,r=M(n),s=new Mr({$metadata:P(t),...r});return L(s,n)},Rf=async(t,e)=>{const n=t.body,r=M(n),s=new Nr({$metadata:P(t),...r});return L(s,n)},Cf=async(t,e)=>{const n=t.body,r=M(n),s=new Sr({$metadata:P(t),...r});return L(s,n)},Tf=async(t,e)=>{const n=t.body,r=rh(n,e),s=new Jr({$metadata:P(t),...r});return L(s,n)},Mf=async(t,e)=>{const n=t.body,r=M(n),s=new kr({$metadata:P(t),...r});return L(s,n)},Nf=async(t,e)=>{const n=t.body,r=M(n),s=new zr({$metadata:P(t),...r});return L(s,n)},Ye=(t,e)=>nr.visit(t,{B:n=>({B:e.base64Encoder(n)}),BOOL:n=>({BOOL:n}),BS:n=>({BS:Pf(n,e)}),L:n=>({L:Lf(n,e)}),M:n=>({M:Ff(n,e)}),N:n=>({N:n}),NS:n=>({NS:M(n)}),NULL:n=>({NULL:n}),S:n=>({S:n}),SS:n=>({SS:M(n)}),_:(n,r)=>({[n]:r})}),ho=(t,e)=>t.filter(n=>n!=null).map(n=>Ye(n,e)),Pf=(t,e)=>t.filter(n=>n!=null).map(n=>e.base64Encoder(n)),po=(t,e)=>le(t,{AttributeValueList:n=>ho(n,e),ComparisonOperator:[]}),Of=(t,e)=>le(t,{ConditionExpression:[],ConditionalOperator:[],Expected:n=>mo(n,e),ExpressionAttributeNames:M,ExpressionAttributeValues:n=>Zr(n,e),Key:n=>es(n,e),ReturnConsumedCapacity:[],ReturnItemCollectionMetrics:[],ReturnValues:[],ReturnValuesOnConditionCheckFailure:[],TableName:[]}),mo=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=kf(s,e)),n),{}),kf=(t,e)=>le(t,{AttributeValueList:n=>ho(n,e),ComparisonOperator:[],Exists:[],Value:n=>Ye(n,e)}),Zr=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=Ye(s,e)),n),{}),Df=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=po(s,e)),n),{}),Bf=(t,e)=>le(t,{AttributesToGet:M,ConsistentRead:[],ExpressionAttributeNames:M,Key:n=>es(n,e),ProjectionExpression:[],ReturnConsumedCapacity:[],TableName:[]}),es=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=Ye(s,e)),n),{}),$f=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=po(s,e)),n),{}),Lf=(t,e)=>t.filter(n=>n!=null).map(n=>Ye(n,e)),Ff=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=Ye(s,e)),n),{}),Uf=(t,e)=>le(t,{ConditionExpression:[],ConditionalOperator:[],Expected:n=>mo(n,e),ExpressionAttributeNames:M,ExpressionAttributeValues:n=>Zr(n,e),Item:n=>zf(n,e),ReturnConsumedCapacity:[],ReturnItemCollectionMetrics:[],ReturnValues:[],ReturnValuesOnConditionCheckFailure:[],TableName:[]}),zf=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=Ye(s,e)),n),{}),jf=(t,e)=>le(t,{AttributesToGet:M,ConditionalOperator:[],ConsistentRead:[],ExclusiveStartKey:n=>es(n,e),ExpressionAttributeNames:M,ExpressionAttributeValues:n=>Zr(n,e),FilterExpression:[],IndexName:[],KeyConditionExpression:[],KeyConditions:n=>$f(n,e),Limit:[],ProjectionExpression:[],QueryFilter:n=>Df(n,e),ReturnConsumedCapacity:[],ScanIndexForward:[],Select:[],TableName:[]}),ht=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=Ut(Bt(s),e)),n),{}),Ut=(t,e)=>t.B!=null?{B:e.base64Decoder(t.B)}:Yt(t.BOOL)!==void 0?{BOOL:Yt(t.BOOL)}:t.BS!=null?{BS:Vf(t.BS,e)}:t.L!=null?{L:Zf(t.L,e)}:t.M!=null?{M:eh(t.M,e)}:ke(t.N)!==void 0?{N:ke(t.N)}:t.NS!=null?{NS:M(t.NS)}:Yt(t.NULL)!==void 0?{NULL:Yt(t.NULL)}:ke(t.S)!==void 0?{S:ke(t.S)}:t.SS!=null?{SS:M(t.SS)}:{$unknown:Object.entries(t)[0]},Vf=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>e.base64Decoder(r)),Hf=(t,e)=>le(t,{Code:ke,Item:n=>ht(n,e),Message:ke}),qf=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>Hf(r,e)),go=(t,e)=>le(t,{CapacityUnits:Ge,ReadCapacityUnits:Ge,WriteCapacityUnits:Ge}),Gf=(t,e)=>le(t,{Item:n=>ht(n,e),message:ke}),bn=(t,e)=>le(t,{CapacityUnits:Ge,GlobalSecondaryIndexes:n=>Us(n),LocalSecondaryIndexes:n=>Us(n),ReadCapacityUnits:Ge,Table:n=>go(n),TableName:ke,WriteCapacityUnits:Ge}),Kf=(t,e)=>le(t,{Attributes:n=>ht(n,e),ConsumedCapacity:n=>bn(n),ItemCollectionMetrics:n=>yo(n,e)}),Wf=(t,e)=>le(t,{ConsumedCapacity:n=>bn(n),Item:n=>ht(n,e)}),Qf=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=Ut(Bt(s),e)),n),{}),yo=(t,e)=>le(t,{ItemCollectionKey:n=>Qf(n,e),SizeEstimateRangeGB:n=>Yf(n)}),Yf=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>Ge(r)),Xf=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>ht(r,e)),Jf=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=Ut(Bt(s),e)),n),{}),Zf=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>Ut(Bt(r),e)),eh=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=Ut(Bt(s),e)),n),{}),th=(t,e)=>le(t,{Attributes:n=>ht(n,e),ConsumedCapacity:n=>bn(n),ItemCollectionMetrics:n=>yo(n,e)}),nh=(t,e)=>le(t,{ConsumedCapacity:n=>bn(n),Count:ws,Items:n=>Xf(n,e),LastEvaluatedKey:n=>Jf(n,e),ScannedCount:ws}),Us=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=go(s)),n),{}),rh=(t,e)=>le(t,{CancellationReasons:n=>qf(n,e),Message:ke}),P=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),sh=wu(k),zt=async(t,e,n,r,s)=>{const{hostname:i,protocol:o="https",port:a,path:d}=await t.endpoint(),c={protocol:o,hostname:i,port:a,method:"POST",path:d.endsWith("/")?d.slice(0,-1)+n:d+n,headers:e};return s!==void 0&&(c.body=s),new Ee(c)};function jt(t){return{"content-type":"application/x-amz-json-1.0","x-amz-target":`DynamoDB_20120810.${t}`}}class ih extends Qe.classBuilder().ep(Lt).m(function(e,n,r,s){return[Dt(r,this.serialize,this.deserialize),$t(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeEndpoints",{}).n("DynamoDBClient","DescribeEndpointsCommand").f(void 0,void 0).ser(zl).de(Gl).build(){}const oh="3.906.0",ah={version:oh},ch=t=>new TextEncoder().encode(t);var dh=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:ch;function kt(t){return t instanceof Uint8Array?t:typeof t=="string"?dh(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}function rr(t){return typeof t=="string"?t.length===0:t.byteLength===0}var bo={name:"SHA-256"},zs={name:"HMAC",hash:bo},uh=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);const lh={};function Zt(){return typeof window<"u"?window:typeof self<"u"?self:lh}var fh=(function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!rr(e)){var n=kt(e),r=new Uint8Array(this.toHash.byteLength+n.byteLength);r.set(this.toHash,0),r.set(n,this.toHash.byteLength),this.toHash=r}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(n){return Zt().crypto.subtle.sign(zs,n,e.toHash).then(function(r){return new Uint8Array(r)})}):rr(this.toHash)?Promise.resolve(uh):Promise.resolve().then(function(){return Zt().crypto.subtle.digest(bo,e.toHash)}).then(function(n){return Promise.resolve(new Uint8Array(n))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(n,r){Zt().crypto.subtle.importKey("raw",kt(e.secret),zs,!1,["sign"]).then(n,r)}),this.key.catch(function(){}))},t})();function hh(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{c(r.next(l))}catch(f){o(f)}}function d(l){try{c(r.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):s(l.value).then(a,d)}c((r=r.apply(t,e||[])).next())})}function ph(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return d([c,l])}}function d(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(l){c=[6,l],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var we=64,mh=32,gh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),yh=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],bh=Math.pow(2,53)-1,en=(function(){function t(){this.state=Int32Array.from(yh),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,r=e.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>bh)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=e[n++],r--,this.bufferLength===we&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(n.setUint8(this.bufferLength++,128),r%we>=we-8){for(var s=this.bufferLength;s<we;s++)n.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<we-8;s++)n.setUint8(s,0);n.setUint32(we-8,Math.floor(e/4294967296),!0),n.setUint32(we-4,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(mh),s=0;s<8;s++)i[s*4]=this.state[s]>>>24&255,i[s*4+1]=this.state[s]>>>16&255,i[s*4+2]=this.state[s]>>>8&255,i[s*4+3]=this.state[s]>>>0&255;return i},t.prototype.hashBuffer=function(){for(var e=this,n=e.buffer,r=e.state,s=r[0],i=r[1],o=r[2],a=r[3],d=r[4],c=r[5],l=r[6],f=r[7],u=0;u<we;u++){if(u<16)this.temp[u]=(n[u*4]&255)<<24|(n[u*4+1]&255)<<16|(n[u*4+2]&255)<<8|n[u*4+3]&255;else{var h=this.temp[u-2],m=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10;h=this.temp[u-15];var y=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3;this.temp[u]=(m+this.temp[u-7]|0)+(y+this.temp[u-16]|0)}var g=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&c^~d&l)|0)+(f+(gh[u]+this.temp[u]|0)|0)|0,x=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&i^s&o^i&o)|0;f=l,l=c,c=d,d=a+g|0,a=o,o=i,i=s,s=g+x|0}r[0]+=s,r[1]+=i,r[2]+=o,r[3]+=a,r[4]+=d,r[5]+=c,r[6]+=l,r[7]+=f},t})(),wh=(function(){function t(e){this.secret=e,this.hash=new en,this.reset()}return t.prototype.update=function(e){if(!(rr(e)||this.error))try{this.hash.update(kt(e))}catch(n){this.error=n}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return hh(this,void 0,void 0,function(){return ph(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new en,this.secret){this.outer=new en;var e=vh(this.secret),n=new Uint8Array(we);n.set(e);for(var r=0;r<we;r++)e[r]^=54,n[r]^=92;this.hash.update(e),this.outer.update(n);for(var r=0;r<e.byteLength;r++)e[r]=0}},t})();function vh(t){var e=kt(t);if(e.byteLength>we){var n=new en;n.update(e),e=n.digest()}var r=new Uint8Array(we);return r.set(e),r}var Eh=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function Sh(t){if(xh(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return Ah(e)}return!1}function xh(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function Ah(t){return t&&Eh.every(function(e){return typeof t[e]=="function"})}var _h=(function(){function t(e){Sh(Zt())?this.hash=new fh(e):this.hash=new wh(e)}return t.prototype.update=function(e,n){this.hash.update(kt(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t})();const Ih={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast","Pale Moon":"pale_moon",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},wo={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",pale_moon:"Pale Moon",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Q={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv",bot:"bot"},he={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},$e={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class p{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5)){if(n[0]===1&&n[1]<6)return"Cupcake";if(n[0]===1&&n[1]>=6)return"Donut";if(n[0]===2&&n[1]<2)return"Eclair";if(n[0]===2&&n[1]===2)return"Froyo";if(n[0]===2&&n[1]>2)return"Gingerbread";if(n[0]===3)return"Honeycomb";if(n[0]===4&&n[1]<1)return"Ice Cream Sandwich";if(n[0]===4&&n[1]<4)return"Jelly Bean";if(n[0]===4&&n[1]>=4)return"KitKat";if(n[0]===5)return"Lollipop";if(n[0]===6)return"Marshmallow";if(n[0]===7)return"Nougat";if(n[0]===8)return"Oreo";if(n[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const s=p.getVersionPrecision(e),i=p.getVersionPrecision(n);let o=Math.max(s,i),a=0;const d=p.map([e,n],c=>{const l=o-p.getVersionPrecision(c),f=c+new Array(l+1).join(".0");return p.map(f.split("."),u=>new Array(20-u.length).join("0")+u).reverse()});for(r&&(a=o-Math.min(s,i)),o-=1;o>=a;){if(d[0][o]>d[1][o])return 1;if(d[0][o]===d[1][o]){if(o===a)return 0;o-=1}else if(d[0][o]<d[1][o])return-1}}static map(e,n){const r=[];let s;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(s=0;s<e.length;s+=1)r.push(n(e[s]));return r}static find(e,n){let r,s;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,s=e.length;r<s;r+=1){const i=e[r];if(n(i,r))return i}}static assign(e,...n){const r=e;let s,i;if(Object.assign)return Object.assign(e,...n);for(s=0,i=n.length;s<i;s+=1){const o=n[s];typeof o=="object"&&o!==null&&Object.keys(o).forEach(d=>{r[d]=o[d]})}return e}static getBrowserAlias(e){return Ih[e]}static getBrowserTypeByAlias(e){return wo[e]||""}}const H=/version\/(\d+(\.?_?\d+)+)/i,Rh=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=p.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||p.getFirstMatch(H,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=p.getFirstMatch(H,t)||p.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=p.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||p.getFirstMatch(H,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=p.getFirstMatch(H,t)||p.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=p.getFirstMatch(H,t)||p.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/PaleMoon/i],describe(t){const e={name:"Pale Moon"},n=p.getFirstMatch(H,t)||p.getFirstMatch(/(?:PaleMoon)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=p.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||p.getFirstMatch(H,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=p.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||p.getFirstMatch(H,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=p.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||p.getFirstMatch(H,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=p.getFirstMatch(H,t)||p.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=p.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||p.getFirstMatch(H,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=p.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||p.getFirstMatch(H,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=p.getFirstMatch(H,t)||p.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=p.getFirstMatch(H,t)||p.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=p.getFirstMatch(H,t)||p.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=p.getFirstMatch(H,t)||p.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=p.getFirstMatch(H,t)||p.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=p.getFirstMatch(H,t)||p.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=p.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||p.getFirstMatch(H,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=p.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||p.getFirstMatch(H,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=p.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=p.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=p.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=p.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=p.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=p.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=p.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=p.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=p.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=p.getFirstMatch(H,t)||p.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=p.getFirstMatch(H,t)||p.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=p.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=p.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||p.getFirstMatch(H,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=p.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||p.getFirstMatch(H,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=p.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=p.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=p.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=p.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||p.getFirstMatch(H,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=p.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=p.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=p.getFirstMatch(H,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=p.getFirstMatch(H,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=p.getFirstMatch(H,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,n=/^(.*)\/(.*)[ \t]\((.*)/,s=t.search("\\(")!==-1?n:e;return{name:p.getFirstMatch(s,t),version:p.getSecondMatch(s,t)}}}],Ch=[{test:[/Roku\/DVP/],describe(t){const e=p.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:he.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=p.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:he.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=p.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=p.getWindowsVersionName(e);return{name:he.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:he.iOS},n=p.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=p.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=p.getMacOSVersionName(e),r={name:he.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=p.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:he.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=p.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=p.getAndroidVersionName(e),r={name:he.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=p.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:he.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=p.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||p.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||p.getFirstMatch(/\bbb(\d+)/i,t);return{name:he.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=p.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:he.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=p.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:he.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:he.Linux}}},{test:[/CrOS/],describe(){return{name:he.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=p.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:he.PlayStation4,version:e}}}],Th=[{test:[/googlebot/i],describe(){return{type:Q.bot,vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=p.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:Q.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:Q.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:Q.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:Q.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:Q.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:Q.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:Q.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=p.getFirstMatch(/(ipod|iphone)/i,t);return{type:Q.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:Q.mobile,vendor:"Nexus"}}},{test:[/Nokia/i],describe(t){const e=p.getFirstMatch(/Nokia\s+([0-9]+(\.[0-9]+)?)/i,t),n={type:Q.mobile,vendor:"Nokia"};return e&&(n.model=e),n}},{test:[/[^-]mobi/i],describe(){return{type:Q.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:Q.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:Q.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:Q.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:Q.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:Q.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:Q.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:Q.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:Q.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:Q.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:Q.tv}}}],Mh=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:$e.Blink};const n=p.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:$e.EdgeHTML,version:n}}},{test:[/trident/i],describe(t){const e={name:$e.Trident},n=p.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:$e.Presto},n=p.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:$e.Gecko},n=p.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:$e.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:$e.WebKit},n=p.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class js{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=p.find(Rh,n=>{if(typeof n.test=="function")return n.test(this);if(Array.isArray(n.test))return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=p.find(Ch,n=>{if(typeof n.test=="function")return n.test(this);if(Array.isArray(n.test))return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=p.find(Th,n=>{if(typeof n.test=="function")return n.test(this);if(Array.isArray(n.test))return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=p.find(Mh,n=>{if(typeof n.test=="function")return n.test(this);if(Array.isArray(n.test))return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return p.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const s={};let i=0;if(Object.keys(e).forEach(a=>{const d=e[a];typeof d=="string"?(s[a]=d,i+=1):typeof d=="object"&&(n[a]=d,r+=1)}),r>0){const a=Object.keys(n),d=p.find(a,l=>this.isOS(l));if(d){const l=this.satisfies(n[d]);if(l!==void 0)return l}const c=p.find(a,l=>this.isPlatform(l));if(c){const l=this.satisfies(n[c]);if(l!==void 0)return l}}if(i>0){const a=Object.keys(s),d=p.find(a,c=>this.isBrowser(c,!0));if(d!==void 0)return this.compareVersion(s[d])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let s=e.toLowerCase();const i=p.getBrowserTypeByAlias(s);return n&&i&&(s=i.toLowerCase()),s===r}compareVersion(e){let n=[0],r=e,s=!1;const i=this.getBrowserVersion();if(typeof i=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(s=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(s=!0,r=e.substr(1)),n.indexOf(p.compareVersions(i,r,s))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Nh{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new js(e,n)}static parse(e){return new js(e).getResult()}static get BROWSER_MAP(){return wo}static get ENGINE_MAP(){return $e}static get OS_MAP(){return he}static get PLATFORMS_MAP(){return Q}}const Ph=({serviceId:t,clientVersion:e})=>async n=>{const r=typeof window<"u"&&window?.navigator?.userAgent?Nh.parse(window.navigator.userAgent):void 0,s=[["aws-sdk-js",e],["ua","2.1"],[`os/${r?.os?.name||"other"}`,r?.os?.version],["lang/js"],["md/browser",`${r?.browser?.name??"unknown"}_${r?.browser?.version??"unknown"}`]];t&&s.push([`api/${t}`,e]);const i=await n?.userAgentAppId?.();return i&&s.push([`app/${i}`]),s},Oh=t=>()=>Promise.reject(t),ts="required",T="type",J="rules",j="conditions",I="fn",R="argv",$="ref",ln="assign",Re="url",Ce="properties",Te="headers",kh=!1,Z="error",ue="stringEquals",Vs="https://dynamodb.{Region}.{PartitionResult#dualStackDnsSuffix}",me="endpoint",re="tree",ns="dynamodb",St={[ts]:!1,[T]:"string"},Hs={[ts]:!0,default:!1,[T]:"boolean"},qs={[I]:"isSet",[R]:[{[$]:"Endpoint"}]},Dh={[$]:"Endpoint"},Gs={[I]:"isSet",[R]:[{[$]:"Region"}]},vo={[$]:"Region"},Ks={[I]:"aws.partition",[R]:[vo],[ln]:"PartitionResult"},Ws={[j]:[{[I]:"booleanEquals",[R]:[{[$]:"UseFIPS"},!0]}],[Z]:"Invalid Configuration: FIPS and custom endpoint are not supported",[T]:Z},pt={[I]:"booleanEquals",[R]:[{[$]:"UseFIPS"},!0]},Qs={[j]:[{[I]:"booleanEquals",[R]:[{[$]:"UseDualStack"},!0]}],[Z]:"Invalid Configuration: Dualstack and custom endpoint are not supported",[T]:Z},Eo={[I]:"booleanEquals",[R]:[{[$]:"UseDualStack"},!0]},Ys={[me]:{[Re]:"{Endpoint}",[Ce]:{},[Te]:{}},[T]:me},Se={},Xs={[I]:"booleanEquals",[R]:[{[I]:"getAttr",[R]:[{[$]:"PartitionResult"},"supportsFIPS"]},!0]},Js={[I]:"booleanEquals",[R]:[{[I]:"getAttr",[R]:[{[$]:"PartitionResult"},"supportsDualStack"]},!0]},Hn={[j]:[{[I]:"isSet",[R]:[{[$]:"AccountIdEndpointMode"}]},{[I]:ue,[R]:[{[$]:"AccountIdEndpointMode"},"required"]}],[J]:[{[Z]:"Invalid Configuration: AccountIdEndpointMode is required and FIPS is enabled, but FIPS account endpoints are not supported",[T]:Z}],[T]:re},Vt={[I]:"getAttr",[R]:[{[$]:"PartitionResult"},"name"]},Zs={[me]:{[Re]:"https://dynamodb.{Region}.{PartitionResult#dnsSuffix}",[Ce]:{},[Te]:{}},[T]:me},ei={[Re]:"https://{ParsedArn#accountId}.ddb.{Region}.{PartitionResult#dualStackDnsSuffix}",[Ce]:{},[Te]:{}},ti={[Z]:"Credentials-sourced account ID parameter is invalid",[T]:Z},ni={[j]:[{[I]:"isSet",[R]:[{[$]:"AccountIdEndpointMode"}]},{[I]:ue,[R]:[{[$]:"AccountIdEndpointMode"},"required"]}],[J]:[{[j]:[{[I]:"not",[R]:[pt]}],[J]:[{[j]:[{[I]:ue,[R]:[Vt,"aws"]}],[J]:[{[Z]:"AccountIdEndpointMode is required but no AccountID was provided or able to be loaded",[T]:Z}],[T]:re},{[Z]:"Invalid Configuration: AccountIdEndpointMode is required but account endpoints are not supported in this partition",[T]:Z}],[T]:re},{[Z]:"Invalid Configuration: AccountIdEndpointMode is required and FIPS is enabled, but FIPS account endpoints are not supported",[T]:Z}],[T]:re},ri={[Re]:"https://{ParsedArn#accountId}.ddb.{Region}.{PartitionResult#dnsSuffix}",[Ce]:{},[Te]:{}},si=[pt],ii=[Eo],oi=[{[I]:"isSet",[R]:[{[$]:"AccountIdEndpointMode"}]},{[I]:"not",[R]:[{[I]:ue,[R]:[{[$]:"AccountIdEndpointMode"},"disabled"]}]},{[I]:ue,[R]:[Vt,"aws"]},{[I]:"not",[R]:[pt]},{[I]:"isSet",[R]:[{[$]:"ResourceArn"}]},{[I]:"aws.parseArn",[R]:[{[$]:"ResourceArn"}],[ln]:"ParsedArn"},{[I]:ue,[R]:[{[I]:"getAttr",[R]:[{[$]:"ParsedArn"},"service"]},ns]},{[I]:"isValidHostLabel",[R]:[{[I]:"getAttr",[R]:[{[$]:"ParsedArn"},"region"]},!1]},{[I]:ue,[R]:[{[I]:"getAttr",[R]:[{[$]:"ParsedArn"},"region"]},"{Region}"]},{[I]:"isValidHostLabel",[R]:[{[I]:"getAttr",[R]:[{[$]:"ParsedArn"},"accountId"]},!1]}],ai=[{[I]:"isSet",[R]:[{[$]:"AccountIdEndpointMode"}]},{[I]:"not",[R]:[{[I]:ue,[R]:[{[$]:"AccountIdEndpointMode"},"disabled"]}]},{[I]:ue,[R]:[Vt,"aws"]},{[I]:"not",[R]:[pt]},{[I]:"isSet",[R]:[{[$]:"ResourceArnList"}]},{[I]:"getAttr",[R]:[{[$]:"ResourceArnList"},"[0]"],[ln]:"FirstArn"},{[I]:"aws.parseArn",[R]:[{[$]:"FirstArn"}],[ln]:"ParsedArn"},{[I]:ue,[R]:[{[I]:"getAttr",[R]:[{[$]:"ParsedArn"},"service"]},ns]},{[I]:"isValidHostLabel",[R]:[{[I]:"getAttr",[R]:[{[$]:"ParsedArn"},"region"]},!1]},{[I]:ue,[R]:[{[I]:"getAttr",[R]:[{[$]:"ParsedArn"},"region"]},"{Region}"]},{[I]:"isValidHostLabel",[R]:[{[I]:"getAttr",[R]:[{[$]:"ParsedArn"},"accountId"]},!1]}],ci=[{[I]:"isSet",[R]:[{[$]:"AccountIdEndpointMode"}]},{[I]:"not",[R]:[{[I]:ue,[R]:[{[$]:"AccountIdEndpointMode"},"disabled"]}]},{[I]:ue,[R]:[Vt,"aws"]},{[I]:"not",[R]:[pt]},{[I]:"isSet",[R]:[{[$]:"AccountId"}]}],di=[{[I]:"isValidHostLabel",[R]:[{[$]:"AccountId"},!1]}],Bh={parameters:{Region:St,UseDualStack:Hs,UseFIPS:Hs,Endpoint:St,AccountId:St,AccountIdEndpointMode:St,ResourceArn:St,ResourceArnList:{[ts]:kh,[T]:"stringArray"}},[J]:[{[j]:[qs,Gs,Ks],[J]:[Ws,Qs,{[j]:[{[I]:ue,[R]:[Dh,Vs]}],error:"Endpoint override is not supported for dual-stack endpoints. Please enable dual-stack functionality by enabling the configuration. For more details, see: https://docs.aws.amazon.com/sdkref/latest/guide/feature-endpoints.html",[T]:Z},Ys],[T]:re},{[j]:[qs],[J]:[Ws,Qs,Ys],[T]:re},{[j]:[Gs],[J]:[{[j]:[Ks],[J]:[{[j]:[{[I]:ue,[R]:[vo,"local"]}],[J]:[{[j]:si,error:"Invalid Configuration: FIPS and local endpoint are not supported",[T]:Z},{[j]:ii,error:"Invalid Configuration: Dualstack and local endpoint are not supported",[T]:Z},{endpoint:{[Re]:"http://localhost:8000",[Ce]:{authSchemes:[{signingRegion:"us-east-1",name:"sigv4",signingName:ns}]},[Te]:Se},[T]:me}],[T]:re},{[j]:[pt,Eo],[J]:[{[j]:[Xs,Js],[J]:[Hn,{endpoint:{[Re]:"https://dynamodb-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[Ce]:Se,[Te]:Se},[T]:me}],[T]:re},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[T]:Z}],[T]:re},{[j]:si,[J]:[{[j]:[Xs],[J]:[{[j]:[{[I]:ue,[R]:[Vt,"aws-us-gov"]}],[J]:[Hn,Zs],[T]:re},Hn,{endpoint:{[Re]:"https://dynamodb-fips.{Region}.{PartitionResult#dnsSuffix}",[Ce]:Se,[Te]:Se},[T]:me}],[T]:re},{error:"FIPS is enabled but this partition does not support FIPS",[T]:Z}],[T]:re},{[j]:ii,[J]:[{[j]:[Js],[J]:[{[j]:oi,endpoint:ei,[T]:me},{[j]:ai,endpoint:ei,[T]:me},{[j]:ci,[J]:[{[j]:di,[J]:[{endpoint:{[Re]:"https://{AccountId}.ddb.{Region}.{PartitionResult#dualStackDnsSuffix}",[Ce]:Se,[Te]:Se},[T]:me}],[T]:re},ti],[T]:re},ni,{endpoint:{[Re]:Vs,[Ce]:Se,[Te]:Se},[T]:me}],[T]:re},{error:"DualStack is enabled but this partition does not support DualStack",[T]:Z}],[T]:re},{[j]:oi,endpoint:ri,[T]:me},{[j]:ai,endpoint:ri,[T]:me},{[j]:ci,[J]:[{[j]:di,[J]:[{endpoint:{[Re]:"https://{AccountId}.ddb.{Region}.{PartitionResult#dnsSuffix}",[Ce]:Se,[Te]:Se},[T]:me}],[T]:re},ti],[T]:re},ni,Zs],[T]:re}],[T]:re},{error:"Invalid Configuration: Missing Region",[T]:Z}]},$h=Bh,Lh=new ud({size:50,params:["AccountId","AccountIdEndpointMode","Endpoint","Region","ResourceArn","ResourceArnList","UseDualStack","UseFIPS"]}),Fh=(t,e={})=>Lh.get(t,()=>Td($h,{endpointParams:t,logger:e.logger}));an.aws=Yi;const Uh=t=>({apiVersion:"2012-08-10",base64Decoder:t?.base64Decoder??or,base64Encoder:t?.base64Encoder??Fi,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??Fh,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??$l,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Ud}],logger:t?.logger??new io,serviceId:t?.serviceId??"DynamoDB",urlParser:t?.urlParser??cn,utf8Decoder:t?.utf8Decoder??ct,utf8Encoder:t?.utf8Encoder??ar}),zh=["in-region","cross-region","mobile","standard","legacy"],jh=({defaultsMode:t}={})=>zd(async()=>{const e=typeof t=="function"?await t():t;switch(e?.toLowerCase()){case"auto":return Promise.resolve(Vh()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${zh.join(", ")}, got ${e}`)}}),Vh=()=>{const t=window?.navigator;if(t?.connection){const{effectiveType:e,rtt:n,downlink:r}=t?.connection;if(typeof e=="string"&&e!=="4g"||Number(n)>100||Number(r)<10)return!0}return t?.userAgentData?.mobile||typeof t?.maxTouchPoints=="number"&&t?.maxTouchPoints>1},Hh=t=>{const e=jh(t),n=()=>e().then(Eu),r=Uh(t);return{...r,...t,runtime:"browser",defaultsMode:e,accountIdEndpointMode:t?.accountIdEndpointMode??(()=>Promise.resolve(ki)),bodyLengthChecker:t?.bodyLengthChecker??gu,credentialDefaultProvider:t?.credentialDefaultProvider??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:t?.defaultUserAgentProvider??Ph({serviceId:r.serviceId,clientVersion:ah.version}),endpointDiscoveryEnabledProvider:t?.endpointDiscoveryEnabledProvider??(()=>Promise.resolve(void 0)),maxAttempts:t?.maxAttempts??un,region:t?.region??Oh("Region is missing"),requestHandler:cr.create(t?.requestHandler??n),retryMode:t?.retryMode??(async()=>(await n()).retryMode||al),sha256:t?.sha256??_h,streamCollector:t?.streamCollector??Uc,useDualstackEndpoint:t?.useDualstackEndpoint??(()=>Promise.resolve(Vu)),useFipsEndpoint:t?.useFipsEndpoint??(()=>Promise.resolve(Hu))}},qh=t=>({setRegion(e){t.region=e},region(){return t.region}}),Gh=t=>({region:t.region()}),Kh=t=>{const e=t.httpAuthSchemes;let n=t.httpAuthSchemeProvider,r=t.credentials;return{setHttpAuthScheme(s){const i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){n=s},httpAuthSchemeProvider(){return n},setCredentials(s){r=s},credentials(){return r}}},Wh=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),Qh=(t,e)=>{const n=Object.assign(qh(t),Iu(t),ec(t),Kh(t));return e.forEach(r=>r.configure(n)),Object.assign(t,Gh(n),Ru(n),tc(n),Wh(n))};class Yh extends so{config;constructor(...[e]){const n=Hh(e||{});super(n),this.initConfig=n;const r=Fl(n),s=Za(r),i=dd(s),o=Il(i),a=qu(o),d=a,c=ol(d),l=Ll(c),f=uc(l,{endpointDiscoveryCommandCtor:ih}),u=Qh(f,e?.extensions||[]);this.config=u,this.middlewareStack.use(ju(this.config)),this.middlewareStack.use(Ol(this.config)),this.middlewareStack.use(Wu(this.config)),this.middlewareStack.use(hc(this.config)),this.middlewareStack.use(gc(this.config)),this.middlewareStack.use(wc(this.config)),this.middlewareStack.use(Ac(this.config,{httpAuthSchemeParametersProvider:Dl,identityProviderConfigProvider:async h=>new nd({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(Pc(this.config))}destroy(){super.destroy()}}class Xh extends Qe.classBuilder().ep({...Lt,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,n,r,s){return[Dt(r,this.serialize,this.deserialize),$t(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DeleteItem",{}).n("DynamoDBClient","DeleteItemCommand").f(void 0,void 0).ser(Ul).de(ql).build(){}class Jh extends Qe.classBuilder().ep({...Lt,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,n,r,s){return[Dt(r,this.serialize,this.deserialize),$t(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","GetItem",{}).n("DynamoDBClient","GetItemCommand").f(void 0,void 0).ser(jl).de(Kl).build(){}class Zh extends Qe.classBuilder().ep({...Lt,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,n,r,s){return[Dt(r,this.serialize,this.deserialize),$t(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","PutItem",{}).n("DynamoDBClient","PutItemCommand").f(void 0,void 0).ser(Vl).de(Wl).build(){}let ep=class extends Qe.classBuilder().ep({...Lt,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,n,r,s){return[Dt(r,this.serialize,this.deserialize),$t(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","Query",{}).n("DynamoDBClient","QueryCommand").f(void 0,void 0).ser(Hl).de(Ql).build(){};class Ht{value;constructor(e){typeof e=="object"&&"N"in e?this.value=String(e.N):this.value=String(e);const n=typeof e.valueOf()=="number"?e.valueOf():0;if(n>Number.MAX_SAFE_INTEGER||n<Number.MIN_SAFE_INTEGER||Math.abs(n)===1/0||Number.isNaN(n))throw new Error(`NumberValue should not be initialized with an imprecise number=${n}. Use a string instead.`)}static from(e){return new Ht(e)}toAttributeValue(){return{N:this.toString()}}toBigInt(){const e=this.toString();return BigInt(e)}toString(){return String(this.value)}valueOf(){return this.toString()}}const wn=(t,e)=>{if(t===void 0)throw new Error("Pass options.removeUndefinedValues=true to remove undefined values from map/array/set.");if(t===null&&typeof t=="object")return tn();if(Array.isArray(t))return tp(t,e);if(t?.constructor?.name==="Set")return np(t,e);if(t?.constructor?.name==="Map")return rp(t,e);if(t?.constructor?.name==="Object"||!t.constructor&&typeof t=="object")return ui(t,e);if(Io(t))return t.length===0&&e?.convertEmptyValues?tn():So(t);if(typeof t=="boolean"||t?.constructor?.name==="Boolean")return{BOOL:t.valueOf()};if(typeof t=="number"||t?.constructor?.name==="Number")return _o(t,e);if(t instanceof Ht)return t.toAttributeValue();if(typeof t=="bigint")return Ao(t);if(typeof t=="string"||t?.constructor?.name==="String")return t.length===0&&e?.convertEmptyValues?tn():xo(t);if(e?.convertClassInstanceToMap&&typeof t=="object")return ui(t,e);throw new Error(`Unsupported type passed: ${t}. Pass options.convertClassInstanceToMap=true to marshall typeof object as map attribute.`)},tp=(t,e)=>({L:t.filter(n=>typeof n!="function"&&(!e?.removeUndefinedValues||e?.removeUndefinedValues&&n!==void 0)).map(n=>wn(n,e))}),np=(t,e)=>{const n=e?.removeUndefinedValues?new Set([...t].filter(s=>s!==void 0)):t;if(!e?.removeUndefinedValues&&n.has(void 0))throw new Error("Pass options.removeUndefinedValues=true to remove undefined values from map/array/set.");if(n.size===0){if(e?.convertEmptyValues)return tn();throw new Error("Pass a non-empty set, or options.convertEmptyValues=true.")}const r=n.values().next().value;if(r instanceof Ht)return{NS:Array.from(n).map(s=>s.toString())};if(typeof r=="number")return{NS:Array.from(n).map(s=>_o(s,e)).map(s=>s.N)};if(typeof r=="bigint")return{NS:Array.from(n).map(Ao).map(s=>s.N)};if(typeof r=="string")return{SS:Array.from(n).map(xo).map(s=>s.S)};if(Io(r))return{BS:Array.from(n).map(So).map(s=>s.B)};throw new Error("Only Number Set (NS), Binary Set (BS) or String Set (SS) are allowed.")},rp=(t,e)=>({M:(n=>{const r={};for(const[s,i]of n)typeof i!="function"&&(i!==void 0||!e?.removeUndefinedValues)&&(r[s]=wn(i,e));return r})(t)}),ui=(t,e)=>({M:(n=>{const r={};for(const s in n){const i=n[s];typeof i!="function"&&(i!==void 0||!e?.removeUndefinedValues)&&(r[s]=wn(i,e))}return r})(t)}),tn=()=>({NULL:!0}),So=t=>({B:t}),xo=t=>({S:t.toString()}),Ao=t=>({N:t.toString()}),li=t=>{throw new Error(`${t} Use NumberValue from @aws-sdk/lib-dynamodb.`)},_o=(t,e)=>{if([Number.NaN,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY].map(n=>n.toString()).includes(t.toString()))throw new Error(`Special numeric value ${t.toString()} is not allowed`);return e?.allowImpreciseNumbers||(Number(t)>Number.MAX_SAFE_INTEGER?li(`Number ${t.toString()} is greater than Number.MAX_SAFE_INTEGER.`):Number(t)<Number.MIN_SAFE_INTEGER&&li(`Number ${t.toString()} is lesser than Number.MIN_SAFE_INTEGER.`)),{N:t.toString()}},Io=t=>{const e=["ArrayBuffer","Blob","Buffer","DataView","File","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];return t?.constructor?e.includes(t.constructor.name):!1},fn=(t,e)=>{for(const[n,r]of Object.entries(t))if(r!==void 0)switch(n){case"NULL":return null;case"BOOL":return!!r;case"N":return fi(r,e);case"B":return pi(r);case"S":return hi(r);case"L":return sp(r,e);case"M":return ip(r,e);case"NS":return new Set(r.map(s=>fi(s,e)));case"BS":return new Set(r.map(pi));case"SS":return new Set(r.map(hi));default:throw new Error(`Unsupported type passed: ${n}`)}throw new Error(`No value defined: ${JSON.stringify(t)}`)},fi=(t,e)=>{if(typeof e?.wrapNumbers=="function")return e?.wrapNumbers(t);if(e?.wrapNumbers)return Ht.from(t);const n=Number(t),r=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];if((n>Number.MAX_SAFE_INTEGER||n<Number.MIN_SAFE_INTEGER)&&!r.includes(n))if(typeof BigInt=="function")try{return BigInt(t)}catch{throw new Error(`${t} can't be converted to BigInt. Set options.wrapNumbers to get string value.`)}else throw new Error(`${t} is outside SAFE_INTEGER bounds. Set options.wrapNumbers to get string value.`);return n},hi=t=>t,pi=t=>t,sp=(t,e)=>t.map(n=>fn(n,e)),ip=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(n[r]=fn(s,e),n),{});function op(t,e){const n=wn(t,e),[r,s]=Object.entries(n)[0];switch(r){case"M":case"L":return e?.convertTopLevelContainer?n:s;case"SS":case"NS":case"BS":case"S":case"N":case"B":case"NULL":case"BOOL":case"$unknown":default:return n}}const ap=(t,e)=>e?.convertWithoutMapWrapper?fn(t,e):fn({M:t},e),rs=null,ge={},hn=[],mi="*",pn=(t,e,n)=>{if(t!==void 0){if(n==null)return e(t);{const r=Object.keys(n),s=r.length===1&&r[0]===mi,i=r.length>=1&&!s,o=r.length===0;if(i)return ss(t,e,n);if(o)return cp(t,e,rs);if(s)return Object.entries(t??{}).reduce((a,[d,c])=>(typeof c!="function"&&(a[d]=pn(c,e,n[mi])),a),Array.isArray(t)?[]:{})}}},ss=(t,e,n)=>{let r;if(Array.isArray(t))r=t.filter(s=>typeof s!="function");else{r={};for(const[s,i]of Object.entries(t))typeof i!="function"&&(r[s]=i)}for(const[s,i]of Object.entries(n)){if(typeof t[s]=="function")continue;const o=pn(t[s],e,i);o!==void 0&&typeof o!="function"&&(r[s]=o)}return r},cp=(t,e,n)=>Array.isArray(t)?t.filter(r=>typeof r!="function").map(r=>pn(r,e,n)):Object.entries(t).reduce((r,[s,i])=>{if(typeof i=="function")return r;const o=pn(i,e,n);return o!==void 0&&typeof o!="function"&&(r[s]=o),r},{}),dp=(t,e,n)=>ss(t,s=>op(s,n),e),up=(t,e,n)=>ss(t,s=>ap(s,n),e);class vn extends Qe{addMarshallingMiddleware(e){const{marshallOptions:n={},unmarshallOptions:r={}}=e.translateConfig||{};n.convertTopLevelContainer=n.convertTopLevelContainer??!0,r.convertWithoutMapWrapper=r.convertWithoutMapWrapper??!0,this.clientCommand.middlewareStack.addRelativeTo((s,i)=>async o=>(xe(i,"DDB_MAPPER","d"),s({...o,input:dp(o.input,this.inputKeyNodes,n)})),{name:"DocumentMarshall",relation:"before",toMiddleware:"serializerMiddleware",override:!0}),this.clientCommand.middlewareStack.addRelativeTo((s,i)=>async o=>{const a=await s(o);return a.output=up(a.output,this.outputKeyNodes,r),a},{name:"DocumentUnmarshall",relation:"before",toMiddleware:"deserializerMiddleware",override:!0})}}class lp extends vn{input;inputKeyNodes={Key:ge,Expected:{"*":{Value:rs,AttributeValueList:hn}},ExpressionAttributeValues:ge};outputKeyNodes={Attributes:ge,ItemCollectionMetrics:{ItemCollectionKey:ge}};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new Xh(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),i=this.clientCommand.resolveMiddleware(s,n,r);return async()=>i(this.clientCommand)}}class fp extends vn{input;inputKeyNodes={Key:ge};outputKeyNodes={Item:ge};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new Jh(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),i=this.clientCommand.resolveMiddleware(s,n,r);return async()=>i(this.clientCommand)}}class gi extends vn{input;inputKeyNodes={Item:ge,Expected:{"*":{Value:rs,AttributeValueList:hn}},ExpressionAttributeValues:ge};outputKeyNodes={Attributes:ge,ItemCollectionMetrics:{ItemCollectionKey:ge}};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new Zh(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),i=this.clientCommand.resolveMiddleware(s,n,r);return async()=>i(this.clientCommand)}}class yi extends vn{input;inputKeyNodes={KeyConditions:{"*":{AttributeValueList:hn}},QueryFilter:{"*":{AttributeValueList:hn}},ExclusiveStartKey:ge,ExpressionAttributeValues:ge};outputKeyNodes={Items:{"*":ge},LastEvaluatedKey:ge};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new ep(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),i=this.clientCommand.resolveMiddleware(s,n,r);return async()=>i(this.clientCommand)}}class is extends so{config;constructor(e,n){if(super(e.config),this.config=e.config,this.config.translateConfig=n,this.middlewareStack=e.middlewareStack,this.config?.cacheMiddleware)throw new Error("@aws-sdk/lib-dynamodb - cacheMiddleware=true is not compatible with the DynamoDBDocumentClient. This option must be set to false.")}static from(e,n){return new is(e,n)}destroy(){}}function Ro(t){return Promise.all(Object.keys(t).reduce((e,n)=>{const r=t[n];return typeof r=="string"?e.push([n,r]):e.push(r().then(s=>[n,s])),e},[])).then(e=>e.reduce((n,[r,s])=>(n[r]=s,n),{}))}function hp(t){return async e=>{t.logger?.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");const{GetCredentialsForIdentityCommand:n,CognitoIdentityClient:r}=await Ri(async()=>{const{GetCredentialsForIdentityCommand:c,CognitoIdentityClient:l}=await import("./BcPrnPwa.js");return{GetCredentialsForIdentityCommand:c,CognitoIdentityClient:l}},[],import.meta.url),s=c=>t.clientConfig?.[c]??t.parentClientConfig?.[c]??e?.callerClientConfig?.[c],{Credentials:{AccessKeyId:i=pp(t.logger),Expiration:o,SecretKey:a=gp(t.logger),SessionToken:d}=mp(t.logger)}=await(t.client??new r(Object.assign({},t.clientConfig??{},{region:s("region"),profile:s("profile")}))).send(new n({CustomRoleArn:t.customRoleArn,IdentityId:t.identityId,Logins:t.logins?await Ro(t.logins):void 0}));return{identityId:t.identityId,accessKeyId:i,secretAccessKey:a,sessionToken:d,expiration:o}}}function pp(t){throw new lt("Response from Amazon Cognito contained no access key ID",{logger:t})}function mp(t){throw new lt("Response from Amazon Cognito contained no credentials",{logger:t})}function gp(t){throw new lt("Response from Amazon Cognito contained no secret key",{logger:t})}const qn="IdentityIds";class yp{dbName;constructor(e="aws:cognito-identity-ids"){this.dbName=e}getItem(e){return this.withObjectStore("readonly",n=>{const r=n.get(e);return new Promise(s=>{r.onerror=()=>s(null),r.onsuccess=()=>s(r.result?r.result.value:null)})}).catch(()=>null)}removeItem(e){return this.withObjectStore("readwrite",n=>{const r=n.delete(e);return new Promise((s,i)=>{r.onerror=()=>i(r.error),r.onsuccess=()=>s()})})}setItem(e,n){return this.withObjectStore("readwrite",r=>{const s=r.put({id:e,value:n});return new Promise((i,o)=>{s.onerror=()=>o(s.error),s.onsuccess=()=>i()})})}getDb(){const e=self.indexedDB.open(this.dbName,1);return new Promise((n,r)=>{e.onsuccess=()=>{n(e.result)},e.onerror=()=>{r(e.error)},e.onblocked=()=>{r(new Error("Unable to access DB"))},e.onupgradeneeded=()=>{const s=e.result;s.onerror=()=>{r(new Error("Failed to create object store"))},s.createObjectStore(qn,{keyPath:"id"})}})}withObjectStore(e,n){return this.getDb().then(r=>{const s=r.transaction(qn,e);return s.oncomplete=()=>r.close(),new Promise((i,o)=>{s.onerror=()=>o(s.error),i(n(s.objectStore(qn)))}).catch(i=>{throw r.close(),i})})}}class bp{store;constructor(e={}){this.store=e}getItem(e){return e in this.store?this.store[e]:null}removeItem(e){delete this.store[e]}setItem(e,n){this.store[e]=n}}const wp=new bp;function vp(){return typeof self=="object"&&self.indexedDB?new yp:typeof window=="object"&&window.localStorage?window.localStorage:wp}function Ep({accountId:t,cache:e=vp(),client:n,clientConfig:r,customRoleArn:s,identityPoolId:i,logins:o,userIdentifier:a=!o||Object.keys(o).length===0?"ANONYMOUS":void 0,logger:d,parentClientConfig:c}){d?.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");const l=a?`aws:cognito-identity-credentials:${i}:${a}`:void 0;let f=async u=>{const{GetIdCommand:h,CognitoIdentityClient:m}=await Ri(async()=>{const{GetIdCommand:w,CognitoIdentityClient:v}=await import("./BcPrnPwa.js");return{GetIdCommand:w,CognitoIdentityClient:v}},[],import.meta.url),y=w=>r?.[w]??c?.[w]??u?.callerClientConfig?.[w],g=n??new m(Object.assign({},r??{},{region:y("region"),profile:y("profile")}));let x=l&&await e.getItem(l);if(!x){const{IdentityId:w=Sp(d)}=await g.send(new h({AccountId:t,IdentityPoolId:i,Logins:o?await Ro(o):void 0}));x=w,l&&Promise.resolve(e.setItem(l,x)).catch(()=>{})}return f=hp({client:g,customRoleArn:s,logins:o,identityId:x}),f(u)};return u=>f(u).catch(async h=>{throw l&&Promise.resolve(e.removeItem(l)).catch(()=>{}),h})}function Sp(t){throw new lt("Response from Amazon Cognito contained no identity ID",{logger:t})}class os{#e=se(Ct(new Date));get currentDate(){return b(this.#e)}set currentDate(e){D(this.#e,e,!0)}#t=Ae(()=>this.currentDate.getFullYear());get currentYear(){return b(this.#t)}set currentYear(e){D(this.#t,e)}#n=Ae(()=>this.currentDate.getMonth()+1);get currentMonth(){return b(this.#n)}set currentMonth(e){D(this.#n,e)}static singleton;client;tableName="socialitix_items";#r=se(!1);get isLoading(){return b(this.#r)}set isLoading(e){D(this.#r,e,!0)}#s=se(Ct([]));get budgets(){return b(this.#s)}set budgets(e){D(this.#s,e,!0)}db;budgetInsertParams=`{
        "TableName": "${this.tableName}",
        "Item": {
            "PK": "SPND#{year}#{month}",
            "SK": "{category}",
            "year":{year},
            "month":{month},
            "category": "{category}",
            "type": "B",
            "spent": {spent},
            "limit": {limit}
        }
    }`;budgetGetParams=`{
        "TableName": "${this.tableName}",
        "Key": {
            "PK": "SPND#{year}#{month}",
            "SK": "{category}"
        }
    }`;budgetQueryParams=`{
        "TableName": "${this.tableName}",
        "KeyConditionExpression": "PK = :pk",
        "ExpressionAttributeValues": {
            ":pk":  "SPND#{year}#{month}"
        }
    }`;txnInsertParams=`{
        "TableName": "${this.tableName}",
        "Item": {
            "PK": "SPND#{date}",
            "SK": "{time}#{id}",
            "category": "{category}",
            "year": {year},
            "month": {month},
            "date" : "{date}",
            "time" : "{time}",
            "type": "T",
            "id": "{id}",
            "amount": {amount},
            "notes": "{notes}"
        }
    }`;txnQueryParams=`{
        "TableName": "${this.tableName}",
        "KeyConditionExpression": "PK = :pk",
        "ExpressionAttributeValues": {
            ":pk":  "SPND#{date}"
        }
    }`;txnDeleteParams=`{
        "TableName": "${this.tableName}",
        "Key": {
            "PK":  "SPND#{date}",
            "SK":  "{time}#{id}"
        }
    }`;static init=()=>{if(console.log("Initializing budget store..."),this.singleton)return console.log("Found a singleton.."),this.singleton;let e=localStorage.getItem("IdentityPoolId");if(!e)if(e=prompt("Enter the credential: "),e)localStorage.setItem("IdentityPoolId",e);else{alert("Need credential to connect to database..");return}return this.singleton=new os(e),this.singleton};constructor(e){this.isLoading=!0,this.db=new Yh({region:"ap-south-1",credentials:Ep({identityPoolId:e,clientConfig:{region:"ap-south-1"}})}),this.client=is.from(this.db),console.log("Connected to dynamo db successfully..."),this.loadBudgets()}loadBudgets=async()=>{this.isLoading=!0,console.log("Loading budgets from database.."),this.budgets.length=0,this.budgets=await this.getBudgets(this.currentYear,this.currentMonth),this.isLoading=!1};nextMonth=()=>{console.log("Loading next month.."),this.currentDate.setMonth(this.currentDate.getMonth()+1),this.currentMonth=this.currentDate.getMonth()+1,this.currentYear=this.currentDate.getFullYear(),this.loadBudgets()};previousMonth=()=>{console.log("Loading previous month.."),this.currentDate.setMonth(this.currentDate.getMonth()-1),this.currentMonth=this.currentDate.getMonth()+1,this.currentYear=this.currentDate.getFullYear(),this.loadBudgets()};addOrUpdate=async e=>{const n=tt(this.budgetInsertParams,e);if(await this.client.send(new gi(n)),console.log("Item created successfully..."),this.currentYear==e.year&&this.currentMonth==e.month){const r=this.budgets.findIndex(s=>s.category==e.category);r>-1?this.budgets[r]=e:this.budgets.push(e),this.budgets.sort((s,i)=>s.category.localeCompare(i.category))}};getBudgets=async(e,n)=>{const r=tt(this.budgetQueryParams,{year:e,month:n}),s=await this.client.send(new yi(r));let i=[];for(const o of s.Items||[])o.type=="B"&&i.push(o);return i};getBudget=async(e,n,r)=>{const s=tt(this.budgetGetParams,{year:e,month:n,category:r});console.log(s);const i=await this.client.send(new fp(s));if(i.Item)return i.Item};addTransaction=async(e,n)=>{const r=tt(this.txnInsertParams,n);await this.client.send(new gi(r)),e.spent+=n.amount,this.addOrUpdate(e),console.log("Transaction created successfully..")};fetchTransactions=async e=>{const n=tt(this.txnQueryParams,{date:e}),r=await this.client.send(new yi(n));let s=[];for(const i of r.Items||[])i.type=="T"&&s.push(i);return s};deleteTransaction=async e=>{const n=await this.getBudget(e.year,e.month,e.category);if(!n){alert("Cannot delete transaction because budget cant be found");return}n.spent-=e.amount,await this.addOrUpdate(n);const r=tt(this.txnDeleteParams,{id:e.id,date:e.date,time:e.time}),s=new lp(r),i=await this.client.send(s);console.log("Item deleted successfully:",i)}}function xp(t,e){e.setViewState(1)}var Ap=W('<div class="fixed flex flex-col inset-0 z-50 flex items-center justify-center bg-black/70"><span>Loading current budget...</span> <span class="loading loading-infinity loading-lg text-primary"></span></div>'),_p=(t,e,n)=>e.addTransaction(b(n)),Ip=W('<button class="card w-full bg-base-100 shadow-sm"><div class="card-body p-3 w-full"><div class="flex justify-between w-full items-start gap-1 mb-1.5"><h3 class="font-medium !text-start text-sm truncate flex-1"> </h3> <div> </div></div> <div class="text-xs text-base-content/70 mb-2"> </div> <div class="w-full flex items-center gap-1"><progress max="100"></progress> <span class="text-xs w-3"><!></span></div></div></button>'),Rp=W('<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2"></div>'),Cp=W('<div class="card bg-base-100"><div class="card-body text-center"><p class="text-base-content/60 text-sm">No budgets available</p> <p class="text-xs text-base-content/40 mt-1">Click "Add Budget" above to get started</p></div></div>'),Tp=W('<!> <div class="min-h-screen bg-base-200 pb-16"><div class="sticky top-0 z-10 bg-base-100 shadow-md"><div class="p-4"><div class="flex justify-between items-center mb-3"><a class="text-lg font-bold" href="/">ðŸ“… Spendle</a> <div class="flex flex-row gap-1"><button class="btn btn-xs btn-ghost">&lt; prev</button> <button class="btn btn-xs btn-ghost">+ Add Budget</button> <button class="btn btn-xs btn-ghost">next &gt;</button></div></div> <div class="bg-base-200 rounded-lg p-3"><div class="flex justify-between items-center mb-1"><span class="text-sm font-medium"> </span> <span class="text-sm font-bold"> </span></div> <progress max="100"></progress></div></div></div> <div class="p-4 "><!></div></div>',1);function Mp(t,e){Ke(e,!0);let n=mn("BudgetsStore"),r=Ae(()=>n.budgets.reduce((N,q)=>N+q.spent,0)),s=Ae(()=>n.budgets.reduce((N,q)=>N+q.limit,0)),i=Ae(()=>b(s)>0?Math.round(b(r)/b(s)*100):0);function o(N,q){return Math.round(N/q*100)}function a(N){return N>100?"text-error bg-error/20":N>80?"text-warning bg-warning/20":N>60?"text-info bg-info/20":"text-success bg-success/20"}function d(N){return N>100?"progress-error":N>80?"progress-warning":N>60?"progress-info":"progress-success"}var c=Tp(),l=Oe(c);{var f=N=>{var q=Ap();z(N,q)};ie(l,N=>{n.isLoading&&N(f)})}var u=A(l,2),h=S(u),m=S(h),y=S(m),g=A(S(y),2),x=S(g);x.__click=function(...N){n.previousMonth?.apply(this,N)};var w=A(x,2);w.__click=[xp,e];var v=A(w,2);v.__click=function(...N){n.nextMonth?.apply(this,N)},E(g),E(y);var _=A(y,2),C=S(_),O=S(C),K=S(O);E(O);var F=A(O,2),V=S(F);E(F),E(C);var ee=A(C,2);E(_),E(m),E(h);var te=A(h,2),ne=S(te);{var B=N=>{var q=Rp();ir(q,21,()=>n.budgets,sr,(ye,Y)=>{const ae=Ae(()=>o(b(Y).spent,b(Y).limit)),X=Ae(()=>b(ae)>100);var oe=Ip();oe.__click=[_p,e,Y];var Xe=S(oe),G=S(Xe),fe=S(G),Je=S(fe);E(fe);var pe=A(fe,2),ze=S(pe);E(pe),E(G);var De=A(G,2),qt=S(De);E(De);var Ze=A(De,2),mt=S(Ze),et=A(mt,2),Gt=S(et);{var gt=Ne=>{var yt=_i("âš ï¸");z(Ne,yt)};ie(Gt,Ne=>{b(X)&&Ne(gt)})}E(et),E(Ze),E(Xe),E(oe),ve((Ne,yt,En,Sn,Kt)=>{de(Je,`${Ne??""} ${b(Y).category??""}`),ot(pe,1,`badge badge-xs ${yt??""} font-bold flex-shrink-0`),de(ze,`${b(ae)??""}%`),de(qt,`â‚¹${En??""} / â‚¹${b(Y).limit??""}`),ot(mt,1,`progress ${Sn??""} w-full h-1.5 flex-1`),Wn(mt,Kt)},[()=>Oi(b(Y).category),()=>a(b(ae)),()=>b(Y).spent.toFixed(2),()=>d(b(ae)),()=>Math.min(b(ae),100)]),z(ye,oe)}),E(q),z(N,q)},U=N=>{var q=Cp();z(N,q)};ie(ne,N=>{n.budgets.length>0?N(B):N(U,!1)})}E(te),E(u),ve((N,q,ye)=>{de(K,`For ${Ni[n.currentMonth-1]??""} ${n.currentYear??""}`),de(V,`â‚¹${N??""} / â‚¹${b(s)??""}`),ot(ee,1,`progress ${q??""} w-full h-2`),Wn(ee,ye)},[()=>b(r).toFixed(2),()=>d(b(i)),()=>Math.min(b(i),100)]),z(t,c),We()}ut(["click"]);var Np=W("<div><!></div> <!>",1);function jp(t,e){Ke(e,!0);const n=os.init();da("BudgetsStore",n);let r=se(0);const s=m=>{D(r,m,!0)};let i=se(void 0);function o(m){console.log("Add transaction clicked",m.category),D(i,m,!0),s(2)}function a(m){switch(console.log("Navigate to:",m),m){case"dashboard":s(0);break;case"daywise":s(3);break}}var d=Np(),c=Oe(d),l=S(c);{var f=m=>{Mp(m,{setViewState:s,addTransaction:o})},u=m=>{var y=xt(),g=Oe(y);{var x=v=>{Ia(v,{setViewState:s})},w=v=>{var _=xt(),C=Oe(_);{var O=F=>{Pa(F,{setViewState:s,get selectedBudget(){return b(i)}})},K=F=>{var V=xt(),ee=Oe(V);{var te=ne=>{Ya(ne,{})};ie(ee,ne=>{b(r)==3&&ne(te)},!0)}z(F,V)};ie(C,F=>{b(r)==2&&b(i)?F(O):F(K,!1)},!0)}z(v,_)};ie(g,v=>{b(r)==1?v(x):v(w,!1)},!0)}z(m,y)};ie(l,m=>{b(r)==0?m(f):m(u,!1)})}E(c);var h=A(c,2);Ba(h,{activeTab:"dashboard",onNavigate:a}),z(t,d),We()}export{Ou as $,Ud as A,tc as B,so as C,al as D,ud as E,cr as F,dd as G,Il as H,qu as I,ol as J,Lp as K,ju as L,Ol as M,io as N,Wu as O,hc as P,gc as Q,wc as R,_h as S,Ac as T,nd as U,Pc as V,it as W,ft as X,Ee as Y,Pu as Z,M as _,Td as a,wu as a0,L as a1,le as a2,ke as a3,Fp as a4,Jn as a5,Qe as a6,Dt as a7,$t as a8,jp as a9,Yi as b,an as c,Fi as d,or as e,ct as f,gn as g,jh as h,Uc as i,Oh as j,un as k,Ph as l,gu as m,Me as n,Hu as o,cn as p,Vu as q,hu as r,Up as s,ar as t,Eu as u,qh as v,Iu as w,ec as x,Gh as y,Ru as z};
