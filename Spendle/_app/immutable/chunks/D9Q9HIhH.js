import"./DsnmJJEf.js";import{d as Ee,s as F,e as Tr,o as ji,a as io}from"./BWICHPko.js";import{m as Wn,i as _e,at as ao,q as $i,j as oo,h as co,I as l,O as lo,k as uo,H as fo,l as ks,o as Qn,z as Ht,a8 as ho,aB as mo,u as gr,w as po,v as Et,ay as Vi,ap as go,Z as bo,a5 as Ms,a7 as yo,x as Hi,y as vo,aM as wo,aN as Xn,ah as Gi,aO as xo,aP as Eo,an as So,aQ as _o,ax as Ao,aR as Io,L as Co,D as To,aS as Ro,aT as ko,aU as Mo,aV as No,aW as Po,aX as qi,a1 as Oo,C as Ki,B as Wi,aY as Do,p as me,b as P,e as p,g as x,t as ee,a as R,d as pe,r as m,a0 as U,K as E,J as ut,a2 as z,c as ft,f as Ce,ai as et,$ as Nn,a3 as at,aZ as Qi}from"./ClDFpglj.js";import{p as It,_ as Xi,i as X,b as br}from"./Dg7Zngft.js";function Bo(t,e,n){for(var r=t.items,s=[],i=e.length,a=0;a<i;a++)_o(e[a].e,s,!0);var o=i>0&&s.length===0&&n!==null;if(o){var d=n.parentNode;Ao(d),d.append(n),r.clear(),je(t,e[0].prev,e[i-1].next)}Io(s,()=>{for(var c=0;c<i;c++){var f=e[c];o||(r.delete(f.k),je(t,f.prev,f.next)),Gi(f.e,!o)}})}function Pn(t,e,n,r,s,i=null){var a=t,o={flags:e,items:new Map,first:null};{var d=t;a=_e?Wn(ao(d)):d.appendChild($i())}_e&&oo();var c=null,f=!1,u=new Map,h=lo(()=>{var b=n();return go(b)?b:b==null?[]:Vi(b)}),g,y;function v(){Lo(y,g,o,u,a,s,e,r,n),i!==null&&(g.length===0?c?Hi(c):c=gr(()=>i(a)):c!==null&&vo(c,()=>{c=null}))}co(()=>{y??=Co,g=l(h);var b=g.length;if(f&&b===0)return;f=b===0;let _=!1;if(_e){var w=uo(a)===fo;w!==(b===0)&&(a=ks(),Wn(a),Qn(!1),_=!0)}if(_e){for(var A=null,C,I=0;I<b;I++){if(Ht.nodeType===ho&&Ht.data===mo){a=Ht,_=!0,Qn(!1);break}var N=g[I],B=r(N,I);C=yr(Ht,o,A,null,N,B,I,s,e,n),o.items.set(B,C),A=C}b>0&&Wn(ks())}if(_e)b===0&&i&&(c=gr(()=>i(a)));else if(po()){var j=new Set,O=Et;for(I=0;I<b;I+=1){N=g[I],B=r(N,I);var Z=o.items.get(B)??u.get(B);Z?Yi(Z,N,I):(C=yr(null,o,null,null,N,B,I,s,e,n,!0),u.set(B,C)),j.add(B)}for(const[te,q]of o.items)j.has(te)||O.skipped_effects.add(q.e);O.add_callback(v)}else v();_&&Qn(!0),l(h)}),_e&&(a=Ht)}function Lo(t,e,n,r,s,i,a,o,d){var c=e.length,f=n.items,u=n.first,h=u,g,y=null,v=[],b=[],_,w,A,C;for(C=0;C<c;C+=1){if(_=e[C],w=o(_,C),A=f.get(w),A===void 0){var I=r.get(w);if(I!==void 0){r.delete(w),f.set(w,I);var N=y?y.next:h;je(n,y,I),je(n,I,N),Yn(I,N,s),y=I}else{var B=h?h.e.nodes_start:s;y=yr(B,n,y,y===null?n.first:y.next,_,w,C,i,a,d)}f.set(w,y),v=[],b=[],h=y.next;continue}if(Yi(A,_,C),(A.e.f&Xn)!==0&&Hi(A.e),A!==h){if(g!==void 0&&g.has(A)){if(v.length<b.length){var j=b[0],O;y=j.prev;var Z=v[0],te=v[v.length-1];for(O=0;O<v.length;O+=1)Yn(v[O],j,s);for(O=0;O<b.length;O+=1)g.delete(b[O]);je(n,Z.prev,te.next),je(n,y,Z),je(n,te,j),h=j,y=te,C-=1,v=[],b=[]}else g.delete(A),Yn(A,h,s),je(n,A.prev,A.next),je(n,A,y===null?n.first:y.next),je(n,y,A),y=A;continue}for(v=[],b=[];h!==null&&h.k!==w;)(h.e.f&Xn)===0&&(g??=new Set).add(h),b.push(h),h=h.next;if(h===null)continue;A=h}v.push(A),y=A,h=A.next}if(h!==null||g!==void 0){for(var q=g===void 0?[]:Vi(g);h!==null;)(h.e.f&Xn)===0&&q.push(h),h=h.next;var V=q.length;if(V>0){var se=c===0?s:null;Bo(n,q,se)}}t.first=n.first&&n.first.e,t.last=y&&y.e;for(var ve of r.values())Gi(ve.e);r.clear()}function Yi(t,e,n,r){yo(t.v,e),t.i=n}function yr(t,e,n,r,s,i,a,o,d,c,f){var u=(d&xo)!==0,h=(d&Eo)===0,g=u?h?bo(s,!1,!1):Ms(s):s,y=(d&wo)===0?a:Ms(a),v={i:y,v:g,k:i,a:null,e:null,prev:n,next:r};try{if(t===null){var b=document.createDocumentFragment();b.append(t=$i())}return v.e=gr(()=>o(t,g,y,c),_e),v.e.prev=n&&n.e,v.e.next=r&&r.e,n===null?f||(e.first=v):(n.next=v,n.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function Yn(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,s=e?e.e.nodes_start:n,i=t.e.nodes_start;i!==null&&i!==r;){var a=So(i);s.before(i),i=a}}function je(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}const Ns=[...` 	
\r\fÂ \v\uFEFF`];function Fo(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var i=s.length,a=0;(a=r.indexOf(s,a))>=0;){var o=a+i;(a===0||Ns.includes(r[a-1]))&&(o===r.length||Ns.includes(r[o]))?r=(a===0?"":r.substring(0,a))+r.substring(o+1):a=o}}return r===""?null:r}function Uo(t,e){return t==null?null:String(t)}function ye(t,e,n,r,s,i){var a=t.__className;if(_e||a!==n||a===void 0){var o=Fo(n,r,i);(!_e||o!==t.getAttribute("class"))&&(o==null?t.removeAttribute("class"):t.className=o),t.__className=n}else if(i&&s!==i)for(var d in i){var c=!!i[d];(s==null||c!==!!s[d])&&t.classList.toggle(d,c)}return i}function rn(t,e,n,r){var s=t.__style;if(_e||s!==e){var i=Uo(e);(!_e||i!==t.getAttribute("style"))&&(i==null?t.removeAttribute("style"):t.style.cssText=i),t.__style=e}return r}const zo=Symbol("is custom element"),jo=Symbol("is html");function Ne(t){if(_e){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;vr(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var s=t.checked;vr(t,"checked",null),t.checked=s}}};t.__on_r=n,To(n),Ro()}}function $o(t,e){var n=Ji(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function vr(t,e,n,r){var s=Ji(t);_e&&(s[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||s[e]!==(s[e]=n)&&(e==="loading"&&(t[Mo]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Vo(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Ji(t){return t.__attributes??={[zo]:t.nodeName.includes("-"),[jo]:t.namespaceURI===ko}}var Ps=new Map;function Vo(t){var e=t.getAttribute("is")||t.nodeName,n=Ps.get(e);if(n)return n;Ps.set(e,n=[]);for(var r,s=t,i=Element.prototype;i!==s;){r=Po(s);for(var a in r)r[a].set&&n.push(a);s=No(s)}return n}function Fe(t,e,n=e){var r=new WeakSet;qi(t,"input",async s=>{var i=s?t.defaultValue:t.value;if(i=Jn(t)?Zn(i):i,n(i),Et!==null&&r.add(Et),await Oo(),i!==(i=e())){var a=t.selectionStart,o=t.selectionEnd;t.value=i??"",o!==null&&(t.selectionStart=a,t.selectionEnd=Math.min(o,t.value.length))}}),(_e&&t.defaultValue!==t.value||Ki(e)==null&&t.value)&&(n(Jn(t)?Zn(t.value):t.value),Et!==null&&r.add(Et)),Wi(()=>{var s=e();if(t===document.activeElement){var i=Do??Et;if(r.has(i))return}Jn(t)&&s===Zn(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Ho(t,e,n=e){qi(t,"change",r=>{var s=r?t.defaultChecked:t.checked;n(s)}),(_e&&t.defaultChecked!==t.checked||Ki(e)==null)&&n(t.checked),Wi(()=>{var r=e();t.checked=!!r})}function Jn(t){var e=t.type;return e==="number"||e==="range"}function Zn(t){return t===""?null:+t}var Go=(t,e)=>e("budgets"),qo=(t,e)=>e("transactions"),Ko=(t,e)=>e("savings"),Wo=P('<nav class="fixed bottom-0 left-0 right-0 z-50 lg:hidden bg-base-100 shadow-lg"><div class="grid grid-cols-3 h-20 items-start pt-3"><button><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg> <span class="text-xs font-medium">Budget</span></button> <button><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <span class="text-xs font-medium">Transactions</span></button> <button><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-xs font-medium">Savings</span></button></div></nav>');function Qo(t,e){me(e,!0);let n=It(e,"activeTab",7,"budgets"),r=It(e,"onNavigate",3,f=>{});function s(f){n(f),r()(f)}var i=Wo(),a=p(i),o=p(a);o.__click=[Go,s];var d=x(o,2);d.__click=[qo,s];var c=x(d,2);c.__click=[Ko,s],m(a),m(i),ee(()=>{ye(o,1,`flex flex-col items-center justify-center gap-1 transition-colors
                   ${n()==="budgets"?"text-primary":"text-base-content/70 hover:text-base-content"}`),ye(d,1,`flex flex-col items-center justify-center gap-1 transition-colors
                   ${n()==="transactions"?"text-primary":"text-base-content/70 hover:text-base-content"}`),ye(c,1,`flex flex-col items-center justify-center gap-1 transition-colors
                   ${n()==="savings"?"text-primary":"text-base-content/70 hover:text-base-content"}`)}),R(t,i),pe()}Ee(["click"]);class Xo{#e=U(0);get amount(){return l(this.#e)}set amount(e){E(this.#e,e,!0)}#t=U("");get updatedAt(){return l(this.#t)}set updatedAt(e){E(this.#t,e,!0)}#n=U(!1);get loading(){return l(this.#n)}set loading(e){E(this.#n,e,!0)}set(e){this.amount=e.amount,this.updatedAt=e.updatedAt}update(e){this.amount+=e}reset(){this.amount=0,this.updatedAt=""}}class Yo{#e=U(ut({}));get state(){return l(this.#e)}set state(e){E(this.#e,e,!0)}#t=U(!1);get loading(){return l(this.#t)}set loading(e){E(this.#t,e,!0)}#n=U("");get currentDate(){return l(this.#n)}set currentDate(e){E(this.#n,e,!0)}#r=z(()=>this.state[this.currentDate]??[]);get current(){return l(this.#r)}set current(e){E(this.#r,e)}#s=z(()=>(this.state[this.currentDate]??[]).filter(e=>!e.isIncome).reduce((e,n)=>e+n.amount,0));get currentTotal(){return l(this.#s)}set currentTotal(e){E(this.#s,e)}getByDate(e){return this.state[e]??[]}setForDate(e,n){this.state={...this.state,[e]:n}}add(e){const n=this.state[e.date]??[];this.state={...this.state,[e.date]:[...n,e]}}remove(e,n){const r=this.state[e];if(!r)return;const s=r.find(i=>i.id===n);if(s)return this.state={...this.state,[e]:r.filter(i=>i.id!==n)},s}clearDate(e){const{[e]:n,...r}=this.state;this.state=r}reset(){this.state={},this.currentDate=""}}class Jo{#e=U(ut({}));get state(){return l(this.#e)}set state(e){E(this.#e,e,!0)}#t=U(!1);get loading(){return l(this.#t)}set loading(e){E(this.#t,e,!0)}#n=U("");get currentMonth(){return l(this.#n)}set currentMonth(e){E(this.#n,e,!0)}#r=z(()=>this.state[this.currentMonth]??[]);get current(){return l(this.#r)}set current(e){E(this.#r,e)}#s=z(()=>(this.state[this.currentMonth]??[]).map(e=>({...e,remaining:e.expected-e.actual})));get currentWithRemaining(){return l(this.#s)}set currentWithRemaining(e){E(this.#s,e)}#i=z(()=>(this.state[this.currentMonth]??[]).filter(e=>e.isIncome).reduce((e,n)=>e+n.actual,0));get totalIncome(){return l(this.#i)}set totalIncome(e){E(this.#i,e)}#a=z(()=>(this.state[this.currentMonth]??[]).filter(e=>!e.isIncome).reduce((e,n)=>e+n.expected,0));get totalBudget(){return l(this.#a)}set totalBudget(e){E(this.#a,e)}#o=z(()=>(this.state[this.currentMonth]??[]).filter(e=>!e.isIncome).reduce((e,n)=>e+n.actual,0));get totalSpent(){return l(this.#o)}set totalSpent(e){E(this.#o,e)}getByMonth(e){return this.state[e]??[]}get(e,n){return this.getByMonth(e).find(r=>r.category===n)}setForMonth(e,n){this.state={...this.state,[e]:n}}add(e){const n=this.state[e.month]??[];this.state={...this.state,[e.month]:[...n,e]}}remove(e,n){const r=this.state[e];r&&(this.state={...this.state,[e]:r.filter(s=>s.category!==n)})}updateActual(e,n,r){const s=this.state[e];if(!s)return;const i=s.findIndex(o=>o.category===n);if(i===-1)return;const a=[...s];a[i]={...a[i],actual:a[i].actual+r},this.state={...this.state,[e]:a}}clearMonth(e){const{[e]:n,...r}=this.state;this.state=r}reset(){this.state={},this.currentMonth=""}}class Zo{#e=U(ut([]));get goals(){return l(this.#e)}set goals(e){E(this.#e,e,!0)}#t=U(ut({}));get transactions(){return l(this.#t)}set transactions(e){E(this.#t,e,!0)}#n=U(!1);get loading(){return l(this.#n)}set loading(e){E(this.#n,e,!0)}#r=U("");get currentGoalType(){return l(this.#r)}set currentGoalType(e){E(this.#r,e,!0)}#s=z(()=>this.goals.map(e=>({...e,progress:e.targetAmount>0?e.currentAmount/e.targetAmount*100:0,remaining:e.targetAmount-e.currentAmount})));get goalsWithProgress(){return l(this.#s)}set goalsWithProgress(e){E(this.#s,e)}#i=z(()=>this.goals.reduce((e,n)=>e+n.currentAmount,0));get totalSaved(){return l(this.#i)}set totalSaved(e){E(this.#i,e)}#a=z(()=>this.goals.reduce((e,n)=>e+n.targetAmount,0));get totalTarget(){return l(this.#a)}set totalTarget(e){E(this.#a,e)}#o=z(()=>this.transactions[this.currentGoalType]??[]);get currentTransactions(){return l(this.#o)}set currentTransactions(e){E(this.#o,e)}getGoal(e){return this.goals.find(n=>n.type===e)}setGoals(e){this.goals=e}addGoal(e){this.goals=[...this.goals,e]}removeGoal(e){this.goals=this.goals.filter(s=>s.type!==e);const{[e]:n,...r}=this.transactions;this.transactions=r}updateGoalAmount(e,n){const r=this.goals.findIndex(i=>i.type===e);if(r===-1)return;const s=[...this.goals];s[r]={...s[r],currentAmount:s[r].currentAmount+n},this.goals=s}clearGoals(){this.goals=[]}getTransactions(e){return this.transactions[e]??[]}setTransactions(e,n){this.transactions={...this.transactions,[e]:n}}addTransaction(e,n){const r=this.transactions[e]??[];this.transactions={...this.transactions,[e]:[...r,n]}}removeTransaction(e,n){const r=this.transactions[e];if(!r)return;const s=r.find(i=>i.id===n);if(s)return this.transactions={...this.transactions,[e]:r.filter(i=>i.id!==n)},s}clearTransactions(e){const{[e]:n,...r}=this.transactions;this.transactions=r}reset(){this.goals=[],this.transactions={},this.currentGoalType=""}}class ec{balance=new Xo;transactions=new Yo;budgets=new Jo;savings=new Zo;#e=U("");get userId(){return l(this.#e)}set userId(e){E(this.#e,e,!0)}setCurrentMonth(e){this.budgets.currentMonth=e}get currentMonth(){return this.budgets.currentMonth}setCurrentDate(e){this.transactions.currentDate=e;const n=e.slice(0,7);n!==this.budgets.currentMonth&&(this.budgets.currentMonth=n)}get currentDate(){return console.log("Returning",this.transactions.currentDate),this.transactions.currentDate}setCurrentGoalType(e){this.savings.currentGoalType=e}get currentGoalType(){return this.savings.currentGoalType}reset(){this.balance.reset(),this.transactions.reset(),this.budgets.reset(),this.savings.reset(),this.userId=""}}const T=new ec;function Ue(t=new Date){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`}function ht(t=new Date){const e=Ue(t),n=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${e}T${n}:${r}:${s}`}function sn(t){return t.substring(0,7)}function Zi(){return`${Date.now()}-${Math.random().toString(36).substring(2,9)}`}function ea(t){const[e,n,r]=t.split("-").map(Number);return new Date(e,n-1,r)}function tc(t){const[e,n]=t.split("-").map(Number),r=n===12?1:n+1;return`${n===12?e+1:e}-${String(r).padStart(2,"0")}`}function nc(t){const[e,n]=t.split("-").map(Number),r=n===1?12:n-1;return`${n===1?e-1:e}-${String(r).padStart(2,"0")}`}function rc(t){const[e,n]=t.split("-").map(Number);return new Date(e,n-1,1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}function sc(t){const e=ea(t);return e.setDate(e.getDate()+1),Ue(e)}function ic(t){const e=ea(t);return e.setDate(e.getDate()-1),Ue(e)}function ac(t){const e=t.split("T")[1];return e?e.substring(0,5):""}const oc={groceries:"ðŸ›’",essentials:"ðŸ§´","rent & utilities":"ðŸ ",entertainment:"ðŸŽ¬",transportation:"ðŸšŒ",car:"ðŸš—",restaurant:"ðŸ½ï¸","eat-outs":"ðŸ”",food:"ðŸ”",utilities:"ðŸ’¡",max:"ðŸ¶",sooms:"ðŸ’ƒ",ashwini:"ðŸ‘°ðŸ»","ramapuram rent":"ðŸ˜ï¸",home:"ðŸ¡",shopping:"ðŸ›ï¸",health:"ðŸ’Š",healthcare:"ðŸ’Š",travel:"âœˆï¸",coffee:"â˜•",tea:"â˜•","tea & coffee":"â˜•",gas:"â›½",fuel:"â›½",gym:"ðŸ’ª",subscription:"ðŸ“±",others:"ðŸ“¦",repairs:"ðŸ› ï¸",maid:"ðŸ§¹"};function ta(t){const e=t.toLowerCase().trim();return oc[e]||"ðŸ’¸"}var Yt;(function(t){t.HTTP="http",t.HTTPS="https"})(Yt||(Yt={}));var xn;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(xn||(xn={}));const wr="__smithy_context",On=t=>t[wr]||(t[wr]={}),Ge=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},na="preferred",cc=["disabled","preferred","required"];function dc(t){return cc.includes(t)}const lc=t=>{const{accountIdEndpointMode:e}=t,n=Ge(e??na);return Object.assign(t,{accountIdEndpointMode:async()=>{const r=await n();if(!dc(r))throw new Error(`Invalid value for accountIdEndpointMode: ${r}. Valid values are: "required", "preferred", "disabled".`);return r}})},uc=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,n){t.httpHandler?.updateHttpClientConfig(e,n)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),fc=t=>({httpHandler:t.httpHandler()});class Pe{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const n=new Pe({...e,headers:{...e.headers}});return n.query&&(n.query=hc(n.query)),n}static isInstance(e){if(!e)return!1;const n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){return Pe.clone(this)}}function hc(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{})}class Jt{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const n=e;return typeof n.statusCode=="number"&&typeof n.headers=="object"}}function mc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var er,Os;function pc(){if(Os)return er;Os=1;function t(e){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:e}),this.done=!1}return t.prototype.next=function(){if(this.done)return{done:!0};var e=this._next();return e.done&&(this.done=!0),e},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=function(){return this}),t.of=function(){var e=arguments,n=e.length,r=0;return new t(function(){return r>=n?{done:!0}:{done:!1,value:e[r++]}})},t.empty=function(){var e=new t(null);return e.done=!0,e},t.is=function(e){return e instanceof t?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},er=t,er}var tr,Ds;function ra(){if(Ds)return tr;Ds=1;var t=typeof ArrayBuffer<"u",e=typeof Symbol<"u";function n(r,s){var i,a,o,d,c;if(!r)throw new Error("obliterator/forEach: invalid iterable.");if(typeof s!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(r)||t&&ArrayBuffer.isView(r)||typeof r=="string"||r.toString()==="[object Arguments]"){for(o=0,d=r.length;o<d;o++)s(r[o],o);return}if(typeof r.forEach=="function"){r.forEach(s);return}if(e&&Symbol.iterator in r&&typeof r.next!="function"&&(r=r[Symbol.iterator]()),typeof r.next=="function"){for(i=r,o=0;c=i.next(),c.done!==!0;)s(c.value,o),o++;return}for(a in r)r.hasOwnProperty(a)&&s(r[a],a)}return n.forEachWithNullKeys=function(r,s){var i,a,o,d,c;if(!r)throw new Error("obliterator/forEachWithNullKeys: invalid iterable.");if(typeof s!="function")throw new Error("obliterator/forEachWithNullKeys: expecting a callback.");if(Array.isArray(r)||t&&ArrayBuffer.isView(r)||typeof r=="string"||r.toString()==="[object Arguments]"){for(o=0,d=r.length;o<d;o++)s(r[o],null);return}if(r instanceof Set){r.forEach(function(f){s(f,null)});return}if(typeof r.forEach=="function"){r.forEach(s);return}if(e&&Symbol.iterator in r&&typeof r.next!="function"&&(r=r[Symbol.iterator]()),typeof r.next=="function"){for(i=r,o=0;c=i.next(),c.done!==!0;)s(c.value,null),o++;return}for(a in r)r.hasOwnProperty(a)&&s(r[a],a)},tr=n,tr}var nr={},Bs;function sa(){return Bs||(Bs=1,(function(t){var e=Math.pow(2,8)-1,n=Math.pow(2,16)-1,r=Math.pow(2,32)-1,s=Math.pow(2,7)-1,i=Math.pow(2,15)-1,a=Math.pow(2,31)-1;t.getPointerArray=function(d){var c=d-1;return c<=e?Uint8Array:c<=n?Uint16Array:c<=r?Uint32Array:Float64Array},t.getSignedPointerArray=function(d){var c=d-1;return c<=s?Int8Array:c<=i?Int16Array:c<=a?Int32Array:Float64Array},t.getNumberType=function(d){return d===(d|0)?Math.sign(d)===-1?d<=127&&d>=-128?Int8Array:d<=32767&&d>=-32768?Int16Array:Int32Array:d<=255?Uint8Array:d<=65535?Uint16Array:Uint32Array:Float64Array};var o={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};t.getMinimalRepresentation=function(d,c){var f=null,u=0,h,g,y,v,b;for(v=0,b=d.length;v<b;v++)y=c?c(d[v]):d[v],g=t.getNumberType(y),h=o[g.name],h>u&&(u=h,f=g);return f},t.isTypedArray=function(d){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(d)},t.concat=function(){var d=0,c,f,u;for(c=0,u=arguments.length;c<u;c++)d+=arguments[c].length;var h=new arguments[0].constructor(d);for(c=0,f=0;c<u;c++)h.set(arguments[c],f),f+=arguments[c].length;return h},t.indices=function(d){for(var c=t.getPointerArray(d),f=new c(d),u=0;u<d;u++)f[u]=u;return f}})(nr)),nr}var xt={},Ls;function gc(){if(Ls)return xt;Ls=1;var t=ra(),e=sa();function n(a){return Array.isArray(a)||e.isTypedArray(a)}function r(a){if(typeof a.length=="number")return a.length;if(typeof a.size=="number")return a.size}function s(a){var o=r(a),d=typeof o=="number"?new Array(o):[],c=0;return t(a,function(f){d[c++]=f}),d}function i(a){var o=r(a),d=typeof o=="number"?e.getPointerArray(o):Array,c=typeof o=="number"?new Array(o):[],f=typeof o=="number"?new d(o):[],u=0;return t(a,function(h){c[u]=h,f[u]=u++}),[c,f]}return xt.isArrayLike=n,xt.guessLength=r,xt.toArray=s,xt.toArrayWithIndices=i,xt}var rr,Fs;function bc(){if(Fs)return rr;Fs=1;var t=pc(),e=ra(),n=sa(),r=gc();function s(i,a,o){if(arguments.length<2&&(o=i,i=null,a=null),this.capacity=o,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");var d=n.getPointerArray(o);this.forward=new d(o),this.backward=new d(o),this.K=typeof i=="function"?new i(o):new Array(o),this.V=typeof a=="function"?new a(o):new Array(o),this.size=0,this.head=0,this.tail=0,this.items={}}return s.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}},s.prototype.splayOnTop=function(i){var a=this.head;if(this.head===i)return this;var o=this.backward[i],d=this.forward[i];return this.tail===i?this.tail=o:this.backward[d]=o,this.forward[o]=d,this.backward[a]=i,this.head=i,this.forward[i]=a,this},s.prototype.set=function(i,a){var o=this.items[i];if(typeof o<"u"){this.splayOnTop(o),this.V[o]=a;return}this.size<this.capacity?o=this.size++:(o=this.tail,this.tail=this.backward[o],delete this.items[this.K[o]]),this.items[i]=o,this.K[o]=i,this.V[o]=a,this.forward[o]=this.head,this.backward[this.head]=o,this.head=o},s.prototype.setpop=function(i,a){var o=null,d=null,c=this.items[i];return typeof c<"u"?(this.splayOnTop(c),o=this.V[c],this.V[c]=a,{evicted:!1,key:i,value:o}):(this.size<this.capacity?c=this.size++:(c=this.tail,this.tail=this.backward[c],o=this.V[c],d=this.K[c],delete this.items[this.K[c]]),this.items[i]=c,this.K[c]=i,this.V[c]=a,this.forward[c]=this.head,this.backward[this.head]=c,this.head=c,d?{evicted:!0,key:d,value:o}:null)},s.prototype.has=function(i){return i in this.items},s.prototype.get=function(i){var a=this.items[i];if(!(typeof a>"u"))return this.splayOnTop(a),this.V[a]},s.prototype.peek=function(i){var a=this.items[i];if(!(typeof a>"u"))return this.V[a]},s.prototype.forEach=function(i,a){a=arguments.length>1?a:this;for(var o=0,d=this.size,c=this.head,f=this.K,u=this.V,h=this.forward;o<d;)i.call(a,u[c],f[c],this),c=h[c],o++},s.prototype.keys=function(){var i=0,a=this.size,o=this.head,d=this.K,c=this.forward;return new t(function(){if(i>=a)return{done:!0};var f=d[o];return i++,i<a&&(o=c[o]),{done:!1,value:f}})},s.prototype.values=function(){var i=0,a=this.size,o=this.head,d=this.V,c=this.forward;return new t(function(){if(i>=a)return{done:!0};var f=d[o];return i++,i<a&&(o=c[o]),{done:!1,value:f}})},s.prototype.entries=function(){var i=0,a=this.size,o=this.head,d=this.K,c=this.V,f=this.forward;return new t(function(){if(i>=a)return{done:!0};var u=d[o],h=c[o];return i++,i<a&&(o=f[o]),{done:!1,value:[u,h]}})},typeof Symbol<"u"&&(s.prototype[Symbol.iterator]=s.prototype.entries),s.prototype.inspect=function(){for(var i=new Map,a=this.entries(),o;o=a.next(),!o.done;)i.set(o.value[0],o.value[1]);return Object.defineProperty(i,"constructor",{value:s,enumerable:!1}),i},typeof Symbol<"u"&&(s.prototype[Symbol.for("nodejs.util.inspect.custom")]=s.prototype.inspect),s.from=function(i,a,o,d){if(arguments.length<2){if(d=r.guessLength(i),typeof d!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(d=a,a=null,o=null);var c=new s(a,o,d);return e(i,function(f,u){c.set(u,f)}),c},rr=s,rr}var yc=bc();const vc=mc(yc);let wc=class{cache;constructor(e){this.cache=new vc(e)}getEndpoint(e){const n=this.get(e);if(!n||n.length===0)return;const r=n.map(s=>s.Address);return r[Math.floor(Math.random()*r.length)]}get(e){if(!this.has(e))return;const n=this.cache.get(e);if(!n)return;const r=Date.now(),s=n.filter(i=>r<i.Expires);if(s.length===0){this.delete(e);return}return s}set(e,n){const r=Date.now();this.cache.set(e,n.map(({Address:s,CachePeriodInMinutes:i})=>({Address:s,Expires:r+i*60*1e3})))}delete(e){this.cache.set(e,[])}has(e){if(!this.cache.has(e))return!1;const n=this.cache.peek(e);return n?n.length>0:!1}clear(){this.cache.clear()}};const xc=(t,{endpointDiscoveryCommandCtor:e})=>{const{endpointCacheSize:n,endpointDiscoveryEnabled:r,endpointDiscoveryEnabledProvider:s}=t;return Object.assign(t,{endpointDiscoveryCommandCtor:e,endpointCache:new wc(n??1e3),endpointDiscoveryEnabled:r!==void 0?()=>Promise.resolve(r):s,isClientEndpointDiscoveryEnabled:r!==void 0})};function ob(t){return t}const Ec=t=>e=>async n=>{if(!Pe.isInstance(n.request))return e(n);const{request:r}=n,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!r.headers[":authority"])delete r.headers.host,r.headers[":authority"]=r.hostname+(r.port?":"+r.port:"");else if(!r.headers.host){let i=r.hostname;r.port!=null&&(i+=`:${r.port}`),r.headers.host=i}return e(n)},Sc={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},_c=t=>({applyToStack:e=>{e.add(Ec(t),Sc)}}),Ac=()=>(t,e)=>async n=>{try{const r=await t(n),{clientName:s,commandName:i,logger:a,dynamoDbDocumentClientOptions:o={}}=e,{overrideInputFilterSensitiveLog:d,overrideOutputFilterSensitiveLog:c}=o,f=d??e.inputFilterSensitiveLog,u=c??e.outputFilterSensitiveLog,{$metadata:h,...g}=r.output;return a?.info?.({clientName:s,commandName:i,input:f(n.input),output:u(g),metadata:h}),r}catch(r){const{clientName:s,commandName:i,logger:a,dynamoDbDocumentClientOptions:o={}}=e,{overrideInputFilterSensitiveLog:d}=o,c=d??e.inputFilterSensitiveLog;throw a?.error?.({clientName:s,commandName:i,input:c(n.input),error:r,metadata:r.$metadata}),r}},Ic={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Cc=t=>({applyToStack:e=>{e.add(Ac(),Ic)}}),Tc={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Rc=()=>t=>async e=>t(e),kc=t=>({applyToStack:e=>{e.add(Rc(),Tc)}}),Mc=(t,e)=>{if(!e||e.length===0)return t;const n=[];for(const r of e)for(const s of t)s.schemeId.split("#")[1]===r&&n.push(s);for(const r of t)n.find(({schemeId:s})=>s===r.schemeId)||n.push(r);return n};function Nc(t){const e=new Map;for(const n of t)e.set(n.schemeId,n);return e}const Pc=(t,e)=>(n,r)=>async s=>{const i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,r,s.input)),a=t.authSchemePreference?await t.authSchemePreference():[],o=Mc(i,a),d=Nc(t.httpAuthSchemes),c=On(r),f=[];for(const u of o){const h=d.get(u.schemeId);if(!h){f.push(`HttpAuthScheme \`${u.schemeId}\` was not enabled for this service.`);continue}const g=h.identityProvider(await e.identityProviderConfigProvider(t));if(!g){f.push(`HttpAuthScheme \`${u.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:y={},signingProperties:v={}}=u.propertiesExtractor?.(t,r)||{};u.identityProperties=Object.assign(u.identityProperties||{},y),u.signingProperties=Object.assign(u.signingProperties||{},v),c.selectedHttpAuthScheme={httpAuthOption:u,identity:await g(u.identityProperties),signer:h.signer};break}if(!c.selectedHttpAuthScheme)throw new Error(f.join(`
`));return n(s)},Oc={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Dc=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(Pc(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n}),Oc)}}),Bc=(t,e)=>(n,r)=>async s=>{const{response:i}=await n(s);try{const a=await e(i,t);return{response:i,output:a}}catch(a){if(Object.defineProperty(a,"$response",{value:i}),!("$metadata"in a)){const o="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{a.message+=`
  `+o}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(o):r.logger?.warn?.(o)}typeof a.$responseBodyText<"u"&&a.$response&&(a.$response.body=a.$responseBodyText);try{if(Jt.isInstance(i)){const{headers:d={}}=i,c=Object.entries(d);a.$metadata={httpStatusCode:i.statusCode,requestId:sr(/^x-[\w-]+-request-?id$/,c),extendedRequestId:sr(/^x-[\w-]+-id-2$/,c),cfId:sr(/^x-[\w-]+-cf-id$/,c)}}}catch{}}throw a}},sr=(t,e)=>(e.find(([n])=>n.match(t))||[void 0,void 0])[1],Lc=(t,e)=>(n,r)=>async s=>{const i=t,a=r.endpointV2?.url&&i.urlParser?async()=>i.urlParser(r.endpointV2.url):i.endpoint;if(!a)throw new Error("No valid endpoint provider available.");const o=await e(s.input,{...t,endpoint:a});return n({...s,request:o})},Fc={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},ia={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Rt(t,e,n){return{applyToStack:r=>{r.add(Bc(t,n),Fc),r.add(Lc(t,e),ia)}}}const Uc=t=>e=>{throw e},zc=(t,e)=>{},jc=t=>(e,n)=>async r=>{if(!Pe.isInstance(r.request))return e(r);const i=On(n).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:a={}},identity:o,signer:d}=i,c=await e({...r,request:await d.sign(r.request,o,a)}).catch((d.errorHandler||Uc)(a));return(d.successHandler||zc)(c.response,a),c},$c={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Vc=t=>({applyToStack:e=>{e.addRelativeTo(jc(),$c)}}),Wt=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},aa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Us=Object.entries(aa).reduce((t,[e,n])=>(t[n]=Number(e),t),{}),Hc=aa.split(""),At=6,Qt=8,Gc=63,Rr=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const n=new ArrayBuffer(e),r=new DataView(n);for(let s=0;s<t.length;s+=4){let i=0,a=0;for(let c=s,f=s+3;c<=f;c++)if(t[c]!=="="){if(!(t[c]in Us))throw new TypeError(`Invalid character ${t[c]} in base64 string.`);i|=Us[t[c]]<<(f-c)*At,a+=At}else i>>=At;const o=s/4*3;i>>=a%Qt;const d=Math.floor(a/Qt);for(let c=0;c<d;c++){const f=(d-c-1)*Qt;r.setUint8(o+c,(i&255<<f)>>f)}}return new Uint8Array(n)},Ct=t=>new TextEncoder().encode(t),Zt=t=>typeof t=="string"?Ct(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),kr=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)};function oa(t){let e;typeof t=="string"?e=Ct(t):e=t;const n=typeof e=="object"&&typeof e.length=="number",r=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!n&&!r)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let i=0;i<e.length;i+=3){let a=0,o=0;for(let c=i,f=Math.min(i+3,e.length);c<f;c++)a|=e[c]<<(f-c-1)*Qt,o+=Qt;const d=Math.ceil(o/At);a<<=d*At-o;for(let c=1;c<=d;c++){const f=(d-c)*At;s+=Hc[(a&Gc<<f)>>f]}s+="==".slice(0,4-d)}return s}function qc(t,e="utf-8"){return e==="base64"?oa(t):kr(t)}function Kc(t,e){return e==="base64"?ot.mutate(Rr(t)):ot.mutate(Ct(t))}class ot extends Uint8Array{static fromString(e,n="utf-8"){if(typeof e=="string")return Kc(e,n);throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,ot.prototype),e}transformToString(e="utf-8"){return qc(this,e)}}const ct=t=>encodeURIComponent(t).replace(/[!'()*]/g,Wc),Wc=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function Qc(t){const e=[];for(let n of Object.keys(t).sort()){const r=t[n];if(n=ct(n),Array.isArray(r))for(let s=0,i=r.length;s<i;s++)e.push(`${n}=${ct(r[s])}`);else{let s=n;(r||typeof r=="string")&&(s+=`=${ct(r)}`),e.push(s)}}return e.join("&")}function zs(t,e){return new Request(t,e)}function Xc(t=0){return new Promise((e,n)=>{t&&setTimeout(()=>{const r=new Error(`Request did not complete within ${t} ms`);r.name="TimeoutError",n(r)},t)})}const ir={supported:void 0};class Mr{config;configProvider;static create(e){return typeof e?.handle=="function"?e:new Mr(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(n=>n||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),ir.supported===void 0&&(ir.supported=typeof Request<"u"&&"keepalive"in zs("https://[::1]"))}destroy(){}async handle(e,{abortSignal:n,requestTimeout:r}={}){this.config||(this.config=await this.configProvider);const s=r??this.config.requestTimeout,i=this.config.keepAlive===!0,a=this.config.credentials;if(n?.aborted){const w=new Error("Request aborted");return w.name="AbortError",Promise.reject(w)}let o=e.path;const d=Qc(e.query||{});d&&(o+=`?${d}`),e.fragment&&(o+=`#${e.fragment}`);let c="";if(e.username!=null||e.password!=null){const w=e.username??"",A=e.password??"";c=`${w}:${A}@`}const{port:f,method:u}=e,h=`${e.protocol}//${c}${e.hostname}${f?`:${f}`:""}${o}`,g=u==="GET"||u==="HEAD"?void 0:e.body,y={body:g,headers:new Headers(e.headers),method:u,credentials:a};this.config?.cache&&(y.cache=this.config.cache),g&&(y.duplex="half"),typeof AbortController<"u"&&(y.signal=n),ir.supported&&(y.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(y,this.config.requestInit(e));let v=()=>{};const b=zs(h,y),_=[fetch(b).then(w=>{const A=w.headers,C={};for(const N of A.entries())C[N[0]]=N[1];return w.body!=null?{response:new Jt({headers:C,reason:w.statusText,statusCode:w.status,body:w.body})}:w.blob().then(N=>({response:new Jt({headers:C,reason:w.statusText,statusCode:w.status,body:N})}))}),Xc(s)];return n&&_.push(new Promise((w,A)=>{const C=()=>{const I=new Error("Request aborted");I.name="AbortError",A(I)};if(typeof n.addEventListener=="function"){const I=n;I.addEventListener("abort",C,{once:!0}),v=()=>I.removeEventListener("abort",C)}else n.onabort=C})),Promise.race(_).finally(v)}updateHttpClientConfig(e,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[e]=n,r))}httpHandlerConfigs(){return this.config??{}}}const Yc=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):Jc(t):Zc(t);async function Jc(t){const e=await ed(t),n=Rr(e);return new Uint8Array(n)}async function Zc(t){const e=[],n=t.getReader();let r=!1,s=0;for(;!r;){const{done:o,value:d}=await n.read();d&&(e.push(d),s+=d.length),r=o}const i=new Uint8Array(s);let a=0;for(const o of e)i.set(o,a),a+=o.length;return i}function ed(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{if(r.readyState!==2)return n(new Error("Reader aborted too early"));const s=r.result??"",i=s.indexOf(","),a=i>-1?i+1:s.length;e(s.substring(a))},r.onabort=()=>n(new Error("Read aborted")),r.onerror=()=>n(r.error),r.readAsDataURL(t)})}const ca={},xr={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),ca[t]=e,xr[e]=t}function td(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2){const r=t.slice(n,n+2).toLowerCase();if(r in xr)e[n/2]=xr[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return e}function dt(t){let e="";for(let n=0;n<t.byteLength;n++)e+=ca[t[n]];return e}const nd=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return ot.mutate(t);if(!t)return ot.mutate(new Uint8Array);const n=e.streamCollector(t);return ot.mutate(await n)},hn=t=>typeof t=="function"?t():t;class St{namespace;schemas;exceptions;static registries=new Map;constructor(e,n=new Map,r=new Map){this.namespace=e,this.schemas=n,this.exceptions=r}static for(e){return St.registries.has(e)||St.registries.set(e,new St(e)),St.registries.get(e)}register(e,n){const r=this.normalizeShapeId(e);this.schemas.set(r,n)}getSchema(e){const n=this.normalizeShapeId(e);if(!this.schemas.has(n))throw new Error(`@smithy/core/schema - schema not found for ${n}`);return this.schemas.get(n)}registerError(e,n){this.exceptions.set(e,n)}getErrorCtor(e){return this.exceptions.get(e)}getBaseException(){for(const[e,n]of this.schemas.entries())if(e.startsWith("smithy.ts.sdk.synthetic.")&&e.endsWith("ServiceException"))return n}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}getNamespace(e){return this.normalizeShapeId(e).split("#")[0]}}class en{name;namespace;traits;static assign(e,n){const r=Object.assign(e,n);return St.for(r.namespace).register(r.name,r),r}static[Symbol.hasInstance](e){const n=this.prototype.isPrototypeOf(e);return!n&&typeof e=="object"&&e!==null?e.symbol===this.symbol:n}getName(){return this.namespace+"#"+this.name}}class Nr extends en{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=Nr.symbol}class Pr extends en{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=Pr.symbol}class Or extends en{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=Or.symbol}function mn(t){if(typeof t=="object")return t;t=t|0;const e={};let n=0;for(const r of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>n++&1)===1&&(e[r]=1);return e}class Xe{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=Xe.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,n){this.ref=e,this.memberName=n;const r=[];let s=e,i=e;for(this._isMemberSchema=!1;Array.isArray(s);)r.push(s[1]),s=s[0],i=hn(s),this._isMemberSchema=!0;if(r.length>0){this.memberTraits={};for(let a=r.length-1;a>=0;--a){const o=r[a];Object.assign(this.memberTraits,mn(o))}}else this.memberTraits=0;if(i instanceof Xe){const a=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},a,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=n??i.memberName;return}if(this.schema=hn(i),this.schema&&typeof this.schema=="object"?this.traits=this.schema?.traits??{}:this.traits=0,this.name=(this.schema instanceof en?this.schema.getName?.():void 0)??this.memberName??String(i),this._isMemberSchema&&!n)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){return en[Symbol.hasInstance].bind(this)(e)}static of(e){const n=hn(e);if(n instanceof Xe)return n;if(Array.isArray(n)){const[r,s]=n;if(r instanceof Xe)return Object.assign(r.getMergedTraits(),mn(s)),r;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new Xe(n)}getSchema(){return hn(this.schema?.schemaRef??this.schema)}getName(e=!1){const{name:n}=this;return!e&&n&&n.includes("#")?n.split("#")[1]:n||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){const e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e instanceof Nr}isMapSchema(){const e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e instanceof Pr}isStructSchema(){const e=this.getSchema();return e!==null&&typeof e=="object"&&"members"in e||e instanceof Or}isBlobSchema(){const e=this.getSchema();return e===21||e===42}isTimestampSchema(){const e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){const{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){const e=i=>(i&4)===4||!!i?.idempotencyToken,{normalizedTraits:n,traits:r,memberTraits:s}=this;return e(n)||e(r)||e(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return mn(this.memberTraits)}getOwnTraits(){return mn(this.traits)}getKeySchema(){const[e,n]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!n)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);const r=this.getSchema(),s=e?15:r?.keySchema??0;return Gt([s,0],"key")}getValueSchema(){const e=this.getSchema(),[n,r,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(r||s)?e.valueSchema:n?15:void 0;if(i!=null)return Gt([i,0],r?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){const n=this.getSchema();if(this.isStructSchema()&&n.memberNames.includes(e)){const r=n.memberNames.indexOf(e),s=n.memberList[r];return Gt(Array.isArray(s)?s:[s,0],e)}if(this.isDocumentSchema())return Gt([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){const e={};try{for(const[n,r]of this.structIterator())e[n]=r}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(const[e,n]of this.structIterator())if(n.isStreaming()&&n.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");const e=this.getSchema();for(let n=0;n<e.memberNames.length;++n)yield[e.memberNames[n],Gt([e.memberList[n],0],e.memberNames[n])]}}function Gt(t,e){if(t instanceof Xe)return Object.assign(t,{memberName:e,_isMemberSchema:!0});const n=Xe;return new n(t,e)}const pn=t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&Sn.warn(En(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){const e=t.toLowerCase();if((e==="false"||e==="true")&&Sn.warn(En(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},Er=t=>{if(t!=null){if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&Sn.warn(En(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},rd=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},js=t=>sd(t,32),sd=(t,e)=>{const n=rd(t);if(n!==void 0&&id(n,e)!==n)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return n},id=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},cb=(t,e)=>{if(t==null)throw new TypeError("Expected a non-null value");return t},ad=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;const e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},Ye=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return Sn.warn(En(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},od=t=>{if(t==null)return;const e=ad(t),n=Object.entries(e).filter(([,r])=>r!=null).map(([r])=>r);if(n.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(n.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${n} were not null.`);return e},db=t=>Er(typeof t=="string"?dd(t):t),cd=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,dd=t=>{const e=t.match(cd);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},lt=t=>typeof t=="string"?ld(t):Er(t),ld=t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},En=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),Sn={warn:console.warn},$s=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),we=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),da=()=>{if($s)return $s();const t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,we[t[0]]+we[t[1]]+we[t[2]]+we[t[3]]+"-"+we[t[4]]+we[t[5]]+"-"+we[t[6]]+we[t[7]]+"-"+we[t[8]]+we[t[9]]+"-"+we[t[10]]+we[t[11]]+we[t[12]]+we[t[13]]+we[t[14]]+we[t[15]]};function ud(t,e,n){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=n}class fd{authSchemes=new Map;constructor(e){for(const[n,r]of Object.entries(e))r!==void 0&&this.authSchemes.set(n,r)}getIdentityProvider(e){return this.authSchemes.get(e)}}const hd=t=>function(n){return la(n)&&n.expiration.getTime()-Date.now()<t},md=3e5,pd=hd(md),la=t=>t.expiration!==void 0,gd=(t,e,n)=>{if(t===void 0)return;const r=typeof t!="function"?async()=>Promise.resolve(t):t;let s,i,a,o=!1;const d=async c=>{i||(i=r(c));try{s=await i,a=!0,o=!1}finally{i=void 0}return s};return e===void 0?async c=>((!a||c?.forceRefresh)&&(s=await d(c)),s):async c=>((!a||c?.forceRefresh)&&(s=await d(c)),o?s:n(s)?(e(s)&&await d(c),s):(o=!0,s))},bd=void 0;function yd(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function vd(t){const e=Wt(t.userAgentAppId??bd),{customUserAgent:n}=t;return Object.assign(t,{customUserAgent:typeof n=="string"?[[n]]:n,userAgentAppId:async()=>{const r=await e();if(!yd(r)){const s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof r!="string"?s?.warn("userAgentAppId must be a string or undefined."):r.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return r}})}class wd{capacity;data=new Map;parameters=[];constructor({size:e,params:n}){this.capacity=e??50,n&&(this.parameters=n)}get(e,n){const r=this.hash(e);if(r===!1)return n();if(!this.data.has(r)){if(this.data.size>this.capacity+10){const s=this.data.keys();let i=0;for(;;){const{value:a,done:o}=s.next();if(this.data.delete(a),o||++i>10)break}}this.data.set(r,n())}return this.data.get(r)}size(){return this.data.size}hash(e){let n="";const{parameters:r}=this;if(r.length===0)return!1;for(const s of r){const i=String(e[s]??"");if(i.includes("|;"))return!1;n+=i+"|;"}return n}}const xd=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),ua=t=>xd.test(t)||t.startsWith("[")&&t.endsWith("]"),Ed=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Dr=(t,e=!1)=>{if(!e)return Ed.test(t);const n=t.split(".");for(const r of n)if(!Dr(r))return!1;return!0},_n={},tn="endpoints";function tt(t){return typeof t!="object"||t==null?t:"ref"in t?`$${tt(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(tt).join(", ")})`:JSON.stringify(t,null,2)}class Re extends Error{constructor(e){super(e),this.name="EndpointError"}}const Sd=(t,e)=>t===e,_d=t=>{const e=t.split("."),n=[];for(const r of e){const s=r.indexOf("[");if(s!==-1){if(r.indexOf("]")!==r.length-1)throw new Re(`Path: '${t}' does not end with ']'`);const i=r.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new Re(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&n.push(r.slice(0,s)),n.push(i)}else n.push(r)}return n},fa=(t,e)=>_d(e).reduce((n,r)=>{if(typeof n!="object")throw new Re(`Index '${r}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]},t),Ad=t=>t!=null,Id=t=>!t,ar={[Yt.HTTP]:80,[Yt.HTTPS]:443},Cd=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:h,port:g,protocol:y="",path:v="",query:b={}}=t,_=new URL(`${y}//${h}${g?`:${g}`:""}${v}`);return _.search=Object.entries(b).map(([w,A])=>`${w}=${A}`).join("&"),_}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const n=e.href,{host:r,hostname:s,pathname:i,protocol:a,search:o}=e;if(o)return null;const d=a.slice(0,-1);if(!Object.values(Yt).includes(d))return null;const c=ua(s),f=n.includes(`${r}:${ar[d]}`)||typeof t=="string"&&t.includes(`${r}:${ar[d]}`),u=`${r}${f?`:${ar[d]}`:""}`;return{scheme:d,authority:u,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:c}},Td=(t,e)=>t===e,Rd=(t,e,n,r)=>e>=n||t.length<n?null:r?t.substring(t.length-n,t.length-e):t.substring(e,n),kd=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Md={booleanEquals:Sd,getAttr:fa,isSet:Ad,isValidHostLabel:Dr,not:Id,parseURL:Cd,stringEquals:Td,substring:Rd,uriEncode:kd},ha=(t,e)=>{const n=[],r={...e.endpointParams,...e.referenceRecord};let s=0;for(;s<t.length;){const i=t.indexOf("{",s);if(i===-1){n.push(t.slice(s));break}n.push(t.slice(s,i));const a=t.indexOf("}",i);if(a===-1){n.push(t.slice(i));break}t[i+1]==="{"&&t[a+1]==="}"&&(n.push(t.slice(i+1,a)),s=a+2);const o=t.substring(i+1,a);if(o.includes("#")){const[d,c]=o.split("#");n.push(fa(r[d],c))}else n.push(r[o]);s=a+1}return n.join("")},Nd=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],Dn=(t,e,n)=>{if(typeof t=="string")return ha(t,n);if(t.fn)return ma(t,n);if(t.ref)return Nd(t,n);throw new Re(`'${e}': ${String(t)} is not a string, function or reference.`)},ma=({fn:t,argv:e},n)=>{const r=e.map(i=>["boolean","number"].includes(typeof i)?i:Dn(i,"arg",n)),s=t.split(".");return s[0]in _n&&s[1]!=null?_n[s[0]][s[1]](...r):Md[t](...r)},Pd=({assign:t,...e},n)=>{if(t&&t in n.referenceRecord)throw new Re(`'${t}' is already defined in Reference Record.`);const r=ma(e,n);return n.logger?.debug?.(`${tn} evaluateCondition: ${tt(e)} = ${tt(r)}`),{result:r===""?!0:!!r,...t!=null&&{toAssign:{name:t,value:r}}}},Br=(t=[],e)=>{const n={};for(const r of t){const{result:s,toAssign:i}=Pd(r,{...e,referenceRecord:{...e.referenceRecord,...n}});if(!s)return{result:s};i&&(n[i.name]=i.value,e.logger?.debug?.(`${tn} assign: ${i.name} := ${tt(i.value)}`))}return{result:!0,referenceRecord:n}},Od=(t,e)=>Object.entries(t).reduce((n,[r,s])=>({...n,[r]:s.map(i=>{const a=Dn(i,"Header value entry",e);if(typeof a!="string")throw new Re(`Header '${r}' value '${a}' is not a string`);return a})}),{}),pa=(t,e)=>{if(Array.isArray(t))return t.map(n=>pa(n,e));switch(typeof t){case"string":return ha(t,e);case"object":if(t===null)throw new Re(`Unexpected endpoint property: ${t}`);return ga(t,e);case"boolean":return t;default:throw new Re(`Unexpected endpoint property type: ${typeof t}`)}},ga=(t,e)=>Object.entries(t).reduce((n,[r,s])=>({...n,[r]:pa(s,e)}),{}),Dd=(t,e)=>{const n=Dn(t,"Endpoint URL",e);if(typeof n=="string")try{return new URL(n)}catch(r){throw console.error(`Failed to construct URL with ${n}`,r),r}throw new Re(`Endpoint URL must be a string, got ${typeof n}`)},Bd=(t,e)=>{const{conditions:n,endpoint:r}=t,{result:s,referenceRecord:i}=Br(n,e);if(!s)return;const a={...e,referenceRecord:{...e.referenceRecord,...i}},{url:o,properties:d,headers:c}=r;return e.logger?.debug?.(`${tn} Resolving endpoint from template: ${tt(r)}`),{...c!=null&&{headers:Od(c,a)},...d!=null&&{properties:ga(d,a)},url:Dd(o,a)}},Ld=(t,e)=>{const{conditions:n,error:r}=t,{result:s,referenceRecord:i}=Br(n,e);if(s)throw new Re(Dn(r,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},Fd=(t,e)=>{const{conditions:n,rules:r}=t,{result:s,referenceRecord:i}=Br(n,e);if(s)return ba(r,{...e,referenceRecord:{...e.referenceRecord,...i}})},ba=(t,e)=>{for(const n of t)if(n.type==="endpoint"){const r=Bd(n,e);if(r)return r}else if(n.type==="error")Ld(n,e);else if(n.type==="tree"){const r=Fd(n,e);if(r)return r}else throw new Re(`Unknown endpoint rule: ${n}`);throw new Re("Rules evaluation failed")},Ud=(t,e)=>{const{endpointParams:n,logger:r}=e,{parameters:s,rules:i}=t;e.logger?.debug?.(`${tn} Initial EndpointParams: ${tt(n)}`);const a=Object.entries(s).filter(([,c])=>c.default!=null).map(([c,f])=>[c,f.default]);if(a.length>0)for(const[c,f]of a)n[c]=n[c]??f;const o=Object.entries(s).filter(([,c])=>c.required).map(([c])=>c);for(const c of o)if(n[c]==null)throw new Re(`Missing required parameter: '${c}'`);const d=ba(i,{endpointParams:n,logger:r,referenceRecord:{}});return e.logger?.debug?.(`${tn} Resolved endpoint: ${tt(d)}`),d},ya=(t,e=!1)=>{if(e){for(const n of t.split("."))if(!ya(n))return!1;return!0}return!(!Dr(t)||t.length<3||t.length>63||t!==t.toLowerCase()||ua(t))},Vs=":",zd="/",jd=t=>{const e=t.split(Vs);if(e.length<6)return null;const[n,r,s,i,a,...o]=e;if(n!=="arn"||r===""||s===""||o.join(Vs)==="")return null;const d=o.map(c=>c.split(zd)).flat();return{partition:r,service:s,region:i,accountId:a,resourceId:d}},$d=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],Vd={partitions:$d};let Hd=Vd;const Gd=t=>{const{partitions:e}=Hd;for(const r of e){const{regions:s,outputs:i}=r;for(const[a,o]of Object.entries(s))if(a===t)return{...i,...o}}for(const r of e){const{regionRegex:s,outputs:i}=r;if(new RegExp(s).test(t))return{...i}}const n=e.find(r=>r.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}},va={isVirtualHostableS3Bucket:ya,parseArn:jd,partition:Gd};_n.aws=va;function qd(t){const e={};if(t=t.replace(/^\?/,""),t)for(const n of t.split("&")){let[r,s=null]=n.split("=");r=decodeURIComponent(r),s&&(s=decodeURIComponent(s)),r in e?Array.isArray(e[r])?e[r].push(s):e[r]=[e[r],s]:e[r]=s}return e}const An=t=>{if(typeof t=="string")return An(new URL(t));const{hostname:e,pathname:n,port:r,protocol:s,search:i}=t;let a;return i&&(a=qd(i)),{hostname:e,port:r?parseInt(r):void 0,protocol:s,path:n,query:a}};function Kd(t,e,n){return t.$source||(t.$source={}),t.$source[e]=n,t}function Le(t,e,n){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=n}const Hs=t=>Jt.isInstance(t)?t.headers?.date??t.headers?.Date:void 0,wa=t=>new Date(Date.now()+t),Wd=(t,e)=>Math.abs(wa(e).getTime()-t)>=3e5,Gs=(t,e)=>{const n=Date.parse(t);return Wd(n,e)?n-Date.now():e},Xt=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},Qd=async t=>{const e=Xt("context",t.context),n=Xt("config",t.config),r=e.endpointV2?.properties?.authSchemes?.[0],i=await Xt("signer",n.signer)(r),a=t?.signingRegion,o=t?.signingRegionSet,d=t?.signingName;return{config:n,signer:i,signingRegion:a,signingRegionSet:o,signingName:d}};class Xd{async sign(e,n,r){if(!Pe.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await Qd(r),{config:i,signer:a}=s;let{signingRegion:o,signingName:d}=s;const c=r.context;if(c?.authSchemes?.length??!1){const[u,h]=c.authSchemes;u?.name==="sigv4a"&&h?.name==="sigv4"&&(o=h?.signingRegion??o,d=h?.signingName??d)}return await a.sign(e,{signingDate:wa(i.systemClockOffset),signingRegion:o,signingService:d})}errorHandler(e){return n=>{const r=n.ServerTime??Hs(n.$response);if(r){const s=Xt("config",e.config),i=s.systemClockOffset;s.systemClockOffset=Gs(r,s.systemClockOffset),s.systemClockOffset!==i&&n.$metadata&&(n.$metadata.clockSkewCorrected=!0)}throw n}}successHandler(e,n){const r=Hs(e);if(r){const s=Xt("config",n.config);s.systemClockOffset=Gs(r,s.systemClockOffset)}}}class Lr extends Error{name="ProviderError";tryNextLink;constructor(e,n=!0){let r,s=!0;typeof n=="boolean"?(r=void 0,s=n):n!=null&&typeof n=="object"&&(r=n.logger,s=n.tryNextLink??!0),super(e),this.tryNextLink=s,Object.setPrototypeOf(this,Lr.prototype),r?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${e}`)}static from(e,n=!0){return Object.assign(new this(e.message,n),e)}}class kt extends Lr{name="CredentialsProviderError";constructor(e,n=!0){super(e,n),Object.setPrototypeOf(this,kt.prototype)}}const Yd=(t,e,n)=>{let r,s,i,a=!1;const o=async()=>{s||(s=t());try{r=await s,i=!0,a=!1}finally{s=void 0}return r};return async d=>((!i||d?.forceRefresh)&&(r=await o()),r)},Jd="X-Amz-Algorithm",Zd="X-Amz-Credential",xa="X-Amz-Date",el="X-Amz-SignedHeaders",tl="X-Amz-Expires",Ea="X-Amz-Signature",Sa="X-Amz-Security-Token",_a="authorization",Aa=xa.toLowerCase(),nl="date",rl=[_a,Aa,nl],sl=Ea.toLowerCase(),Sr="x-amz-content-sha256",il=Sa.toLowerCase(),al={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},ol=/^proxy-/,cl=/^sec-/,or="AWS4-HMAC-SHA256",dl="AWS4-HMAC-SHA256-PAYLOAD",ll="UNSIGNED-PAYLOAD",ul=50,Ia="aws4_request",fl=3600*24*7,gn={},cr=[],dr=(t,e,n)=>`${t}/${e}/${n}/${Ia}`,hl=async(t,e,n,r,s)=>{const i=await qs(t,e.secretAccessKey,e.accessKeyId),a=`${n}:${r}:${s}:${dt(i)}:${e.sessionToken}`;if(a in gn)return gn[a];for(cr.push(a);cr.length>ul;)delete gn[cr.shift()];let o=`AWS4${e.secretAccessKey}`;for(const d of[n,r,s,Ia])o=await qs(t,o,d);return gn[a]=o},qs=(t,e,n)=>{const r=new t(e);return r.update(Zt(n)),r.digest()},Ks=({headers:t},e,n)=>{const r={};for(const s of Object.keys(t).sort()){if(t[s]==null)continue;const i=s.toLowerCase();(i in al||e?.has(i)||ol.test(i)||cl.test(i))&&(!n||n&&!n.has(i))||(r[i]=t[s].trim().replace(/\s+/g," "))}return r},ml=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",lr=async({headers:t,body:e},n)=>{for(const r of Object.keys(t))if(r.toLowerCase()===Sr)return t[r];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||ml(e)){const r=new n;return r.update(Zt(e)),dt(await r.digest())}return ll};class pl{format(e){const n=[];for(const i of Object.keys(e)){const a=Ct(i);n.push(Uint8Array.from([a.byteLength]),a,this.formatHeaderValue(e[i]))}const r=new Uint8Array(n.reduce((i,a)=>i+a.byteLength,0));let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,e.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const a=new Uint8Array(i.buffer);return a.set(e.value,3),a;case"string":const o=Ct(e.value),d=new DataView(new ArrayBuffer(3+o.byteLength));d.setUint8(0,7),d.setUint16(1,o.byteLength,!1);const c=new Uint8Array(d.buffer);return c.set(o,3),c;case"timestamp":const f=new Uint8Array(9);return f[0]=8,f.set(Fr.fromNumber(e.value.valueOf()).bytes,1),f;case"uuid":if(!gl.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const u=new Uint8Array(17);return u[0]=9,u.set(td(e.value.replace(/\-/g,"")),1),u}}}var Ws;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(Ws||(Ws={}));const gl=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class Fr{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(e));r>-1&&s>0;r--,s/=256)n[r]=s;return e<0&&Qs(n),new Fr(n)}valueOf(){const e=this.bytes.slice(0),n=e[0]&128;return n&&Qs(e),parseInt(dt(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}}function Qs(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}const bl=(t,e)=>{t=t.toLowerCase();for(const n of Object.keys(e))if(t===n.toLowerCase())return!0;return!1},yl=(t,e={})=>{const{headers:n,query:r={}}=Pe.clone(t);for(const s of Object.keys(n)){const i=s.toLowerCase();(i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)||e.hoistableHeaders?.has(i))&&(r[s]=n[s],delete n[s])}return{...t,headers:n,query:r}},Xs=t=>{t=Pe.clone(t);for(const e of Object.keys(t.headers))rl.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},vl=({query:t={}})=>{const e=[],n={};for(const r of Object.keys(t)){if(r.toLowerCase()===sl)continue;const s=ct(r);e.push(s);const i=t[r];typeof i=="string"?n[s]=`${s}=${ct(i)}`:Array.isArray(i)&&(n[s]=i.slice(0).reduce((a,o)=>a.concat([`${s}=${ct(o)}`]),[]).sort().join("&"))}return e.sort().map(r=>n[r]).filter(r=>r).join("&")},wl=t=>xl(t).toISOString().replace(/\.\d{3}Z$/,"Z"),xl=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class El{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:n,region:r,service:s,sha256:i,uriEscapePath:a=!0}){this.service=s,this.sha256=i,this.uriEscapePath=a,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=Ge(r),this.credentialProvider=Ge(n)}createCanonicalRequest(e,n,r){const s=Object.keys(n).sort();return`${e.method}
${this.getCanonicalPath(e)}
${vl(e)}
${s.map(i=>`${i}:${n[i]}`).join(`
`)}

${s.join(";")}
${r}`}async createStringToSign(e,n,r,s){const i=new this.sha256;i.update(Zt(r));const a=await i.digest();return`${s}
${e}
${n}
${dt(a)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const n=[];for(const i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?n.pop():n.push(i));const r=`${e?.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&e?.endsWith("/")?"/":""}`;return ct(r).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){const n=wl(e).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class Ys extends El{headerFormatter=new pl;constructor({applyChecksum:e,credentials:n,region:r,service:s,sha256:i,uriEscapePath:a=!0}){super({applyChecksum:e,credentials:n,region:r,service:s,sha256:i,uriEscapePath:a})}async presign(e,n={}){const{signingDate:r=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:a,signableHeaders:o,hoistableHeaders:d,signingRegion:c,signingService:f}=n,u=await this.credentialProvider();this.validateResolvedCredentials(u);const h=c??await this.regionProvider(),{longDate:g,shortDate:y}=this.formatDate(r);if(s>fl)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const v=dr(y,h,f??this.service),b=yl(Xs(e),{unhoistableHeaders:a,hoistableHeaders:d});u.sessionToken&&(b.query[Sa]=u.sessionToken),b.query[Jd]=or,b.query[Zd]=`${u.accessKeyId}/${v}`,b.query[xa]=g,b.query[tl]=s.toString(10);const _=Ks(b,i,o);return b.query[el]=this.getCanonicalHeaderList(_),b.query[Ea]=await this.getSignature(g,v,this.getSigningKey(u,h,y,f),this.createCanonicalRequest(b,_,await lr(e,this.sha256))),b}async sign(e,n){return typeof e=="string"?this.signString(e,n):e.headers&&e.payload?this.signEvent(e,n):e.message?this.signMessage(e,n):this.signRequest(e,n)}async signEvent({headers:e,payload:n},{signingDate:r=new Date,priorSignature:s,signingRegion:i,signingService:a}){const o=i??await this.regionProvider(),{shortDate:d,longDate:c}=this.formatDate(r),f=dr(d,o,a??this.service),u=await lr({headers:{},body:n},this.sha256),h=new this.sha256;h.update(e);const g=dt(await h.digest()),y=[dl,c,f,s,g,u].join(`
`);return this.signString(y,{signingDate:r,signingRegion:o,signingService:a})}async signMessage(e,{signingDate:n=new Date,signingRegion:r,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:n,signingRegion:r,signingService:s,priorSignature:e.priorSignature}).then(a=>({message:e.message,signature:a}))}async signString(e,{signingDate:n=new Date,signingRegion:r,signingService:s}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const a=r??await this.regionProvider(),{shortDate:o}=this.formatDate(n),d=new this.sha256(await this.getSigningKey(i,a,o,s));return d.update(Zt(e)),dt(await d.digest())}async signRequest(e,{signingDate:n=new Date,signableHeaders:r,unsignableHeaders:s,signingRegion:i,signingService:a}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const d=i??await this.regionProvider(),c=Xs(e),{longDate:f,shortDate:u}=this.formatDate(n),h=dr(u,d,a??this.service);c.headers[Aa]=f,o.sessionToken&&(c.headers[il]=o.sessionToken);const g=await lr(c,this.sha256);!bl(Sr,c.headers)&&this.applyChecksum&&(c.headers[Sr]=g);const y=Ks(c,s,r),v=await this.getSignature(f,h,this.getSigningKey(o,d,u,a),this.createCanonicalRequest(c,y,g));return c.headers[_a]=`${or} Credential=${o.accessKeyId}/${h}, SignedHeaders=${this.getCanonicalHeaderList(y)}, Signature=${v}`,c}async getSignature(e,n,r,s){const i=await this.createStringToSign(e,n,s,or),a=new this.sha256(await r);return a.update(Zt(i)),dt(await a.digest())}getSigningKey(e,n,r,s){return hl(this.sha256,e,r,n,s||this.service)}}const Sl=t=>{let e=t.credentials,n=!!t.credentials,r;Object.defineProperty(t,"credentials",{set(c){c&&c!==e&&c!==r&&(n=!0),e=c;const f=_l(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),u=Al(t,f);n&&!u.attributed?(r=async h=>u(h).then(g=>Kd(g,"CREDENTIALS_CODE","e")),r.memoized=u.memoized,r.configBound=u.configBound,r.attributed=!0):r=u},get(){return r},enumerable:!0,configurable:!0}),t.credentials=e;const{signingEscapePath:s=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:a}=t;let o;return t.signer?o=Wt(t.signer):t.regionInfoProvider?o=()=>Wt(t.region)().then(async c=>[await t.regionInfoProvider(c,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},c]).then(([c,f])=>{const{signingRegion:u,signingService:h}=c;t.signingRegion=t.signingRegion||u||f,t.signingName=t.signingName||h||t.serviceId;const g={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:a,uriEscapePath:s},y=t.signerConstructor||Ys;return new y(g)}):o=async c=>{c=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Wt(t.region)(),properties:{}},c);const f=c.signingRegion,u=c.signingName;t.signingRegion=t.signingRegion||f,t.signingName=t.signingName||u||t.serviceId;const h={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:a,uriEscapePath:s},g=t.signerConstructor||Ys;return new g(h)},Object.assign(t,{systemClockOffset:i,signingEscapePath:s,signer:o})};function _l(t,{credentials:e,credentialDefaultProvider:n}){let r;return e?e?.memoized?r=e:r=gd(e,pd,la):n?r=Wt(n(Object.assign({},t,{parentClientConfig:t}))):r=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},r.memoized=!0,r}function Al(t,e){if(e.configBound)return e;const n=async r=>e({...r,callerClientConfig:t});return n.memoized=e.memoized,n.configBound=!0,n}const Js=typeof TextEncoder=="function"?new TextEncoder:null,Il=t=>{if(typeof t=="string"){if(Js)return Js.encode(t).byteLength;let e=t.length;for(let n=e-1;n>=0;n--){const r=t.charCodeAt(n);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&n--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)},it=(t,e)=>{const n=[];if(t&&n.push(t),e)for(const r of e)n.push(r);return n},Je=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,In=()=>{let t=[],e=[],n=!1;const r=new Set,s=u=>u.sort((h,g)=>Zs[g.step]-Zs[h.step]||ei[g.priority||"normal"]-ei[h.priority||"normal"]),i=u=>{let h=!1;const g=y=>{const v=it(y.name,y.aliases);if(v.includes(u)){h=!0;for(const b of v)r.delete(b);return!1}return!0};return t=t.filter(g),e=e.filter(g),h},a=u=>{let h=!1;const g=y=>{if(y.middleware===u){h=!0;for(const v of it(y.name,y.aliases))r.delete(v);return!1}return!0};return t=t.filter(g),e=e.filter(g),h},o=u=>(t.forEach(h=>{u.add(h.middleware,{...h})}),e.forEach(h=>{u.addRelativeTo(h.middleware,{...h})}),u.identifyOnResolve?.(f.identifyOnResolve()),u),d=u=>{const h=[];return u.before.forEach(g=>{g.before.length===0&&g.after.length===0?h.push(g):h.push(...d(g))}),h.push(u),u.after.reverse().forEach(g=>{g.before.length===0&&g.after.length===0?h.push(g):h.push(...d(g))}),h},c=(u=!1)=>{const h=[],g=[],y={};return t.forEach(b=>{const _={...b,before:[],after:[]};for(const w of it(_.name,_.aliases))y[w]=_;h.push(_)}),e.forEach(b=>{const _={...b,before:[],after:[]};for(const w of it(_.name,_.aliases))y[w]=_;g.push(_)}),g.forEach(b=>{if(b.toMiddleware){const _=y[b.toMiddleware];if(_===void 0){if(u)return;throw new Error(`${b.toMiddleware} is not found when adding ${Je(b.name,b.aliases)} middleware ${b.relation} ${b.toMiddleware}`)}b.relation==="after"&&_.after.push(b),b.relation==="before"&&_.before.push(b)}}),s(h).map(d).reduce((b,_)=>(b.push(..._),b),[])},f={add:(u,h={})=>{const{name:g,override:y,aliases:v}=h,b={step:"initialize",priority:"normal",middleware:u,...h},_=it(g,v);if(_.length>0){if(_.some(w=>r.has(w))){if(!y)throw new Error(`Duplicate middleware name '${Je(g,v)}'`);for(const w of _){const A=t.findIndex(I=>I.name===w||I.aliases?.some(N=>N===w));if(A===-1)continue;const C=t[A];if(C.step!==b.step||b.priority!==C.priority)throw new Error(`"${Je(C.name,C.aliases)}" middleware with ${C.priority} priority in ${C.step} step cannot be overridden by "${Je(g,v)}" middleware with ${b.priority} priority in ${b.step} step.`);t.splice(A,1)}}for(const w of _)r.add(w)}t.push(b)},addRelativeTo:(u,h)=>{const{name:g,override:y,aliases:v}=h,b={middleware:u,...h},_=it(g,v);if(_.length>0){if(_.some(w=>r.has(w))){if(!y)throw new Error(`Duplicate middleware name '${Je(g,v)}'`);for(const w of _){const A=e.findIndex(I=>I.name===w||I.aliases?.some(N=>N===w));if(A===-1)continue;const C=e[A];if(C.toMiddleware!==b.toMiddleware||C.relation!==b.relation)throw new Error(`"${Je(C.name,C.aliases)}" middleware ${C.relation} "${C.toMiddleware}" middleware cannot be overridden by "${Je(g,v)}" middleware ${b.relation} "${b.toMiddleware}" middleware.`);e.splice(A,1)}}for(const w of _)r.add(w)}e.push(b)},clone:()=>o(In()),use:u=>{u.applyToStack(f)},remove:u=>typeof u=="string"?i(u):a(u),removeByTag:u=>{let h=!1;const g=y=>{const{tags:v,name:b,aliases:_}=y;if(v&&v.includes(u)){const w=it(b,_);for(const A of w)r.delete(A);return h=!0,!1}return!0};return t=t.filter(g),e=e.filter(g),h},concat:u=>{const h=o(In());return h.use(u),h.identifyOnResolve(n||h.identifyOnResolve()||(u.identifyOnResolve?.()??!1)),h},applyToStack:o,identify:()=>c(!0).map(u=>{const h=u.step??u.relation+" "+u.toMiddleware;return Je(u.name,u.aliases)+" - "+h}),identifyOnResolve(u){return typeof u=="boolean"&&(n=u),n},resolve:(u,h)=>{for(const g of c().map(y=>y.middleware).reverse())u=g(u,h);return n&&console.log(f.identify()),u}};return f},Zs={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},ei={high:3,normal:2,low:1};class Ca{config;middlewareStack=In();initConfig;handlers;constructor(e){this.config=e}send(e,n,r){const s=typeof n!="function"?n:void 0,i=typeof n=="function"?n:r,a=s===void 0&&this.config.cacheMiddleware===!0;let o;if(a){this.handlers||(this.handlers=new WeakMap);const d=this.handlers;d.has(e.constructor)?o=d.get(e.constructor):(o=e.resolveMiddleware(this.middlewareStack,this.config,s),d.set(e.constructor,o))}else delete this.handlers,o=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)o(e).then(d=>i(null,d.output),d=>i(d)).catch(()=>{});else return o(e).then(d=>d.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}const ur="***SensitiveInformation***";function _r(t,e){if(e==null)return e;const n=Xe.of(t);if(n.getMergedTraits().sensitive)return ur;if(n.isListSchema()){if(!!n.getValueSchema().getMergedTraits().sensitive)return ur}else if(n.isMapSchema()){if(!!n.getKeySchema().getMergedTraits().sensitive||!!n.getValueSchema().getMergedTraits().sensitive)return ur}else if(n.isStructSchema()&&typeof e=="object"){const r=e,s={};for(const[i,a]of n.structIterator())r[i]!=null&&(s[i]=_r(a,r[i]));return s}return e}class nt{middlewareStack=In();schema;static classBuilder(){return new Cl}resolveMiddlewareWithContext(e,n,r,{middlewareFn:s,clientName:i,commandName:a,inputFilterSensitiveLog:o,outputFilterSensitiveLog:d,smithyContext:c,additionalContext:f,CommandCtor:u}){for(const b of s.bind(this)(u,e,n,r))this.middlewareStack.use(b);const h=e.concat(this.middlewareStack),{logger:g}=n,y={logger:g,clientName:i,commandName:a,inputFilterSensitiveLog:o,outputFilterSensitiveLog:d,[wr]:{commandInstance:this,...c},...f},{requestHandler:v}=n;return h.resolve(b=>v.handle(b.request,r||{}),y)}}class Cl{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,n,r={}){return this._smithyContext={service:e,operation:n,...r},this}c(e={}){return this._additionalContext=e,this}n(e,n){return this._clientName=e,this._commandName=n,this}f(e=r=>r,n=r=>r){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=n,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let n;return n=class extends nt{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[r]){super(),this.input=r??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(r,s,i){return this.resolveMiddlewareWithContext(r,s,i,{CommandCtor:n,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(e._operationSchema?_r.bind(null,e._operationSchema.input):a=>a),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(e._operationSchema?_r.bind(null,e._operationSchema.output):a=>a),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}}class _t extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const n=e;return _t.prototype.isPrototypeOf(n)||!!n.$fault&&!!n.$metadata&&(n.$fault==="client"||n.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;const n=e;return this===_t?_t.isInstance(e):_t.isInstance(e)?n.name&&this.name?this.prototype.isPrototypeOf(e)||n.name===this.name:this.prototype.isPrototypeOf(e):!1}}const Q=(t,e={})=>{Object.entries(e).filter(([,r])=>r!==void 0).forEach(([r,s])=>{(t[r]==null||t[r]==="")&&(t[r]=s)});const n=t.message||t.Message||"UnknownError";return t.message=n,delete t.Message,t},Tl=({output:t,parsedBody:e,exceptionCtor:n,errorCode:r})=>{const s=kl(t),i=s.httpStatusCode?s.httpStatusCode+"":void 0,a=new n({name:e?.code||e?.Code||r||i||"UnknownError",$fault:"client",$metadata:s});throw Q(a,e)},Rl=t=>({output:e,parsedBody:n,errorCode:r})=>{Tl({output:e,parsedBody:n,exceptionCtor:t,errorCode:r})},kl=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),Ml=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Nl=t=>{const e=[];for(const n in xn){const r=xn[n];t[r]!==void 0&&e.push({algorithmId:()=>r,checksumConstructor:()=>t[r]})}return{addChecksumAlgorithm(n){e.push(n)},checksumAlgorithms(){return e}}},Pl=t=>{const e={};return t.checksumAlgorithms().forEach(n=>{e[n.algorithmId()]=n.checksumConstructor()}),e},Ol=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),Dl=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},Bl=t=>Object.assign(Nl(t),Ol(t)),Ll=t=>Object.assign(Pl(t),Dl(t));class Ta{trace(){}debug(){}info(){}warn(){}error(){}}const de=(t,e)=>{const n={};for(const r in e)Fl(n,t,e,r);return n},Fl=(t,e,n,r)=>{if(e!==null){let a=n[r];typeof a=="function"&&(a=[,a]);const[o=Ul,d=zl,c=r]=a;(typeof o=="function"&&o(e[c])||typeof o!="function"&&o)&&(t[r]=d(e[c]));return}let[s,i]=n[r];if(typeof i=="function"){let a;const o=s===void 0&&(a=i())!=null,d=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;o?t[r]=a:d&&(t[r]=i())}else{const a=s===void 0&&i!=null,o=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(a||o)&&(t[r]=i)}},Ul=t=>t!=null,zl=t=>t,D=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(D);if(typeof t=="object"){const e={};for(const n of Object.keys(t))t[n]!=null&&(e[n]=D(t[n]));return e}return t},jl=(t,e)=>nd(t,e).then(n=>(e?.utf8Encoder??kr)(n)),mt=(t,e)=>jl(t,e).then(n=>{if(n.length)try{return JSON.parse(n)}catch(r){throw r?.name==="SyntaxError"&&Object.defineProperty(r,"$responseBodyText",{value:n}),r}return{}}),$l=async(t,e)=>{const n=await mt(t,e);return n.message=n.message??n.Message,n},Vl=(t,e)=>{const n=(i,a)=>Object.keys(i).find(o=>o.toLowerCase()===a.toLowerCase()),r=i=>{let a=i;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},s=n(t.headers,"x-amzn-errortype");if(s!==void 0)return r(t.headers[s]);if(e&&typeof e=="object"){const i=n(e,"code");if(i&&e[i]!==void 0)return r(e[i]);if(e.__type!==void 0)return r(e.__type)}},an=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,od(t)},Hl=/\d{12}\.ddb/;async function Gl(t,e,n){if(n.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Le(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const i=await e.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?Le(t,"RETRY_MODE_ADAPTIVE","F"):Le(t,"RETRY_MODE_STANDARD","E"):Le(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const i=t.endpointV2;switch(String(i?.url?.hostname).match(Hl)&&Le(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":Le(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Le(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Le(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){const i=s;i.accountId&&Le(t,"RESOLVED_ACCOUNT_ID","T");for(const[a,o]of Object.entries(i.$source??{}))Le(t,a,o)}}const ti="user-agent",fr="x-amz-user-agent",ni=" ",hr="/",ql=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Kl=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,ri="-",Wl=1024;function Ql(t){let e="";for(const n in t){const r=t[n];if(e.length+r.length+1<=Wl){e.length?e+=","+r:e+=r;continue}break}return e}const Xl=t=>(e,n)=>async r=>{const{request:s}=r;if(!Pe.isInstance(s))return e(r);const{headers:i}=s,a=n?.userAgent?.map(bn)||[],o=(await t.defaultUserAgentProvider()).map(bn);await Gl(n,t,r);const d=n;o.push(`m/${Ql(Object.assign({},n.__smithy_context?.features,d.__aws_sdk_context?.features))}`);const c=t?.customUserAgent?.map(bn)||[],f=await t.userAgentAppId();f&&o.push(bn([`app/${f}`]));const u=[].concat([...o,...a,...c]).join(ni),h=[...o.filter(g=>g.startsWith("aws-sdk-")),...c].join(ni);return t.runtime!=="browser"?(h&&(i[fr]=i[fr]?`${i[ti]} ${h}`:h),i[ti]=u):i[fr]=u,e({...r,request:s})},bn=t=>{const e=t[0].split(hr).map(a=>a.replace(ql,ri)).join(hr),n=t[1]?.replace(Kl,ri),r=e.indexOf(hr),s=e.substring(0,r);let i=e.substring(r+1);return s==="api"&&(i=i.toLowerCase()),[s,i,n].filter(a=>a&&a.length>0).reduce((a,o,d)=>{switch(d){case 0:return o;case 1:return`${a}/${o}`;default:return`${a}#${o}`}},"")},Yl={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Jl=t=>({applyToStack:e=>{e.add(Xl(t),Yl)}}),Zl=!1,eu=!1,Ra=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),si=t=>Ra(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,tu=t=>{const{region:e,useFipsEndpoint:n}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{if(typeof e=="string")return si(e);const r=await e();return si(r)},useFipsEndpoint:async()=>{const r=typeof e=="string"?e:await e();return Ra(r)?!0:typeof n!="function"?Promise.resolve(!!n):n()}})},ii="content-length";function nu(t){return e=>async n=>{const r=n.request;if(Pe.isInstance(r)){const{body:s,headers:i}=r;if(s&&Object.keys(i).map(a=>a.toLowerCase()).indexOf(ii)===-1)try{const a=t(s);r.headers={...r.headers,[ii]:String(a)}}catch{}}return e({...n,request:r})}}const ru={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},su=t=>({applyToStack:e=>{e.add(nu(t.bodyLengthChecker),ru)}}),iu=async t=>{const e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),lu(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!du(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},au=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,ou=/(\d+\.){3}\d+/,cu=/\.\./,du=t=>au.test(t)&&!ou.test(t)&&!cu.test(t),lu=t=>{const[e,n,r,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,a=!!(i&&n&&r&&s);if(i&&!a)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return a},uu=(t,e,n)=>{const r=async()=>{const s=n[t]??n[e];return typeof s=="function"?s():s};return t==="credentialScope"||e==="CredentialScope"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.credentialScope??s?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.accountId??s?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(n.isCustomEndpoint===!1)return;const s=await r();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:i,hostname:a,port:o,path:d}=s;return`${i}//${a}${o?":"+o:""}${d}`}}return s}:r},ka=async t=>{},Ma=t=>typeof t=="object"?"url"in t?An(t.url):t:An(t),fu=async(t,e,n,r)=>{if(!n.isCustomEndpoint){let a;n.serviceConfiguredEndpoint?a=await n.serviceConfiguredEndpoint():a=await ka(n.serviceId),a&&(n.endpoint=()=>Promise.resolve(Ma(a)),n.isCustomEndpoint=!0)}const s=await hu(t,e,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(s,r)},hu=async(t,e,n)=>{const r={},s=e?.getEndpointParameterInstructions?.()||{};for(const[i,a]of Object.entries(s))switch(a.type){case"staticContextParams":r[i]=a.value;break;case"contextParams":r[i]=t[a.name];break;case"clientContextParams":case"builtInParams":r[i]=await uu(a.name,i,n)();break;case"operationContextParams":r[i]=a.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(s).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()==="s3"&&await iu(r),r},mu=({config:t,instructions:e})=>(n,r)=>async s=>{t.isCustomEndpoint&&ud(r,"ENDPOINT_OVERRIDE","N");const i=await fu(s.input,{getEndpointParameterInstructions(){return e}},{...t},r);r.endpointV2=i,r.authSchemes=i.properties?.authSchemes;const a=r.authSchemes?.[0];if(a){r.signing_region=a.signingRegion,r.signing_service=a.signingName;const d=On(r)?.selectedHttpAuthScheme?.httpAuthOption;d&&(d.signingProperties=Object.assign(d.signingProperties||{},{signing_region:a.signingRegion,signingRegion:a.signingRegion,signing_service:a.signingName,signingName:a.signingName,signingRegionSet:a.signingRegionSet},a.properties))}return n({...s})},pu={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:ia.name},Mt=(t,e)=>({applyToStack:n=>{n.addRelativeTo(mu({config:t,instructions:e}),pu)}}),gu=t=>{const e=t.tls??!0,{endpoint:n,useDualstackEndpoint:r,useFipsEndpoint:s}=t,i=n!=null?async()=>Ma(await Ge(n)()):void 0,o=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!n,useDualstackEndpoint:Ge(r??!1),useFipsEndpoint:Ge(s??!1)});let d;return o.serviceConfiguredEndpoint=async()=>(t.serviceId&&!d&&(d=ka(t.serviceId)),d),o};var Tt;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(Tt||(Tt={}));const Cn=3,bu=Tt.STANDARD,yu=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],vu=["TimeoutError","RequestTimeout","RequestTimeoutException"],wu=[500,502,503,504],xu=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Eu=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],Su=t=>t?.$retryable!==void 0,_u=t=>t.$metadata?.clockSkewCorrected,Au=t=>{const e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},Na=t=>t.$metadata?.httpStatusCode===429||yu.includes(t.name)||t.$retryable?.throttling==!0,Ur=(t,e=0)=>Su(t)||_u(t)||vu.includes(t.name)||xu.includes(t?.code||"")||Eu.includes(t?.code||"")||wu.includes(t.$metadata?.httpStatusCode||0)||Au(t)||t.cause!==void 0&&e<=10&&Ur(t.cause,e+1),Iu=t=>{if(t.$metadata?.httpStatusCode!==void 0){const e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!Ur(t)}return!1};class zr{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const n=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(r=>zr.setTimeoutFn(r,n))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const n=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=e}updateClientSendingRate(e){let n;if(this.updateMeasuredRate(),Na(e)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());const r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),n=Math.floor(e*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){const r=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(e){return parseFloat(e.toFixed(8))}}const Ar=100,Pa=20*1e3,Cu=500,ai=500,Tu=5,Ru=10,ku=1,Mu="amz-sdk-invocation-id",Nu="amz-sdk-request",Pu=()=>{let t=Ar;return{computeNextBackoffDelay:r=>Math.floor(Math.min(Pa,Math.random()*2**r*t)),setDelayBase:r=>{t=r}}},oi=({retryDelay:t,retryCount:e,retryCost:n})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(Pa,t),getRetryCost:()=>n});class Oa{maxAttempts;mode=Tt.STANDARD;capacity=ai;retryBackoffStrategy=Pu();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return oi({retryDelay:Ar,retryCount:0})}async refreshRetryTokenForRetry(e,n){const r=await this.getMaxAttempts();if(this.shouldRetry(e,n,r)){const s=n.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?Cu:Ar);const i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),a=n.retryAfterHint?Math.max(n.retryAfterHint.getTime()-Date.now()||0,i):i,o=this.getCapacityCost(s);return this.capacity-=o,oi({retryDelay:a,retryCount:e.getRetryCount()+1,retryCost:o})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(ai,this.capacity+(e.getRetryCost()??ku))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Cn}`),Cn}}shouldRetry(e,n,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(n.errorType)&&this.isRetryableError(n.errorType)}getCapacityCost(e){return e==="TRANSIENT"?Ru:Tu}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class Ou{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=Tt.ADAPTIVE;constructor(e,n){this.maxAttemptsProvider=e;const{rateLimiter:r}=n??{};this.rateLimiter=r??new zr,this.standardRetryStrategy=new Oa(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(e,n)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}const Du=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),Bu=t=>{const{retryStrategy:e,retryMode:n,maxAttempts:r}=t,s=Ge(r??Cn);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await Ge(n)()===Tt.ADAPTIVE?new Ou(s):new Oa(s))})},Lu=t=>t?.body instanceof ReadableStream,Fu=t=>(e,n)=>async r=>{let s=await t.retryStrategy();const i=await t.maxAttempts();if(Uu(s)){s=s;let a=await s.acquireInitialRetryToken(n.partition_id),o=new Error,d=0,c=0;const{request:f}=r,u=Pe.isInstance(f);for(u&&(f.headers[Mu]=da());;)try{u&&(f.headers[Nu]=`attempt=${d+1}; max=${i}`);const{response:h,output:g}=await e(r);return s.recordSuccess(a),g.$metadata.attempts=d+1,g.$metadata.totalRetryDelay=c,{response:h,output:g}}catch(h){const g=zu(h);if(o=Du(h),u&&Lu(f))throw(n.logger instanceof Ta?console:n.logger)?.warn("An error was encountered in a non-retryable streaming request."),o;try{a=await s.refreshRetryTokenForRetry(a,g)}catch{throw o.$metadata||(o.$metadata={}),o.$metadata.attempts=d+1,o.$metadata.totalRetryDelay=c,o}d=a.getRetryCount();const y=a.getRetryDelay();c+=y,await new Promise(v=>setTimeout(v,y))}}else return s=s,s?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,r)},Uu=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",zu=t=>{const e={error:t,errorType:ju(t)},n=Hu(t.$response);return n&&(e.retryAfterHint=n),e},ju=t=>Na(t)?"THROTTLING":Ur(t)?"TRANSIENT":Iu(t)?"SERVER_ERROR":"CLIENT_ERROR",$u={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Vu=t=>({applyToStack:e=>{e.add(Fu(t),$u)}}),Hu=t=>{if(!Jt.isInstance(t))return;const e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;const n=t.headers[e],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(r*1e3)},Gu=async(t,e,n)=>({operation:On(e).operation,region:await Ge(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function qu(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"dynamodb",region:t.region},propertiesExtractor:(e,n)=>({signingProperties:{config:e,context:n}})}}const Ku=t=>{const e=[];switch(t.operation){default:e.push(qu(t))}return e},Wu=t=>{const e=Sl(t);return Object.assign(e,{authSchemePreference:Ge(t.authSchemePreference??[])})},Qu=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"dynamodb"}),Nt={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},AccountId:{type:"builtInParams",name:"accountId"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"},AccountIdEndpointMode:{type:"builtInParams",name:"accountIdEndpointMode"}};class K extends _t{constructor(e){super(e),Object.setPrototypeOf(this,K.prototype)}}class jr extends K{name="BackupInUseException";$fault="client";constructor(e){super({name:"BackupInUseException",$fault:"client",...e}),Object.setPrototypeOf(this,jr.prototype)}}class $r extends K{name="BackupNotFoundException";$fault="client";constructor(e){super({name:"BackupNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,$r.prototype)}}class Vr extends K{name="InternalServerError";$fault="server";constructor(e){super({name:"InternalServerError",$fault:"server",...e}),Object.setPrototypeOf(this,Vr.prototype)}}class Hr extends K{name="RequestLimitExceeded";$fault="client";ThrottlingReasons;constructor(e){super({name:"RequestLimitExceeded",$fault:"client",...e}),Object.setPrototypeOf(this,Hr.prototype),this.ThrottlingReasons=e.ThrottlingReasons}}class Gr extends K{name="ThrottlingException";$fault="client";throttlingReasons;constructor(e){super({name:"ThrottlingException",$fault:"client",...e}),Object.setPrototypeOf(this,Gr.prototype),this.throttlingReasons=e.throttlingReasons}}class qr extends K{name="InvalidEndpointException";$fault="client";Message;constructor(e){super({name:"InvalidEndpointException",$fault:"client",...e}),Object.setPrototypeOf(this,qr.prototype),this.Message=e.Message}}class Kr extends K{name="ProvisionedThroughputExceededException";$fault="client";ThrottlingReasons;constructor(e){super({name:"ProvisionedThroughputExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,Kr.prototype),this.ThrottlingReasons=e.ThrottlingReasons}}class Wr extends K{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,Wr.prototype)}}class Qr extends K{name="ItemCollectionSizeLimitExceededException";$fault="client";constructor(e){super({name:"ItemCollectionSizeLimitExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,Qr.prototype)}}class Xr extends K{name="ReplicatedWriteConflictException";$fault="client";$retryable={};constructor(e){super({name:"ReplicatedWriteConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,Xr.prototype)}}class Yr extends K{name="ContinuousBackupsUnavailableException";$fault="client";constructor(e){super({name:"ContinuousBackupsUnavailableException",$fault:"client",...e}),Object.setPrototypeOf(this,Yr.prototype)}}class Jr extends K{name="LimitExceededException";$fault="client";constructor(e){super({name:"LimitExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,Jr.prototype)}}class Zr extends K{name="TableInUseException";$fault="client";constructor(e){super({name:"TableInUseException",$fault:"client",...e}),Object.setPrototypeOf(this,Zr.prototype)}}class es extends K{name="TableNotFoundException";$fault="client";constructor(e){super({name:"TableNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,es.prototype)}}class ts extends K{name="GlobalTableAlreadyExistsException";$fault="client";constructor(e){super({name:"GlobalTableAlreadyExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,ts.prototype)}}class ns extends K{name="ResourceInUseException";$fault="client";constructor(e){super({name:"ResourceInUseException",$fault:"client",...e}),Object.setPrototypeOf(this,ns.prototype)}}class rs extends K{name="TransactionConflictException";$fault="client";constructor(e){super({name:"TransactionConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,rs.prototype)}}class ss extends K{name="PolicyNotFoundException";$fault="client";constructor(e){super({name:"PolicyNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,ss.prototype)}}class is extends K{name="ExportNotFoundException";$fault="client";constructor(e){super({name:"ExportNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,is.prototype)}}class as extends K{name="GlobalTableNotFoundException";$fault="client";constructor(e){super({name:"GlobalTableNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,as.prototype)}}class os extends K{name="ImportNotFoundException";$fault="client";constructor(e){super({name:"ImportNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,os.prototype)}}class cs extends K{name="DuplicateItemException";$fault="client";constructor(e){super({name:"DuplicateItemException",$fault:"client",...e}),Object.setPrototypeOf(this,cs.prototype)}}class ds extends K{name="IdempotentParameterMismatchException";$fault="client";Message;constructor(e){super({name:"IdempotentParameterMismatchException",$fault:"client",...e}),Object.setPrototypeOf(this,ds.prototype),this.Message=e.Message}}class ls extends K{name="TransactionInProgressException";$fault="client";Message;constructor(e){super({name:"TransactionInProgressException",$fault:"client",...e}),Object.setPrototypeOf(this,ls.prototype),this.Message=e.Message}}class us extends K{name="ExportConflictException";$fault="client";constructor(e){super({name:"ExportConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,us.prototype)}}class fs extends K{name="InvalidExportTimeException";$fault="client";constructor(e){super({name:"InvalidExportTimeException",$fault:"client",...e}),Object.setPrototypeOf(this,fs.prototype)}}class hs extends K{name="PointInTimeRecoveryUnavailableException";$fault="client";constructor(e){super({name:"PointInTimeRecoveryUnavailableException",$fault:"client",...e}),Object.setPrototypeOf(this,hs.prototype)}}class ms extends K{name="ImportConflictException";$fault="client";constructor(e){super({name:"ImportConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,ms.prototype)}}class ps extends K{name="TableAlreadyExistsException";$fault="client";constructor(e){super({name:"TableAlreadyExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,ps.prototype)}}class gs extends K{name="InvalidRestoreTimeException";$fault="client";constructor(e){super({name:"InvalidRestoreTimeException",$fault:"client",...e}),Object.setPrototypeOf(this,gs.prototype)}}class bs extends K{name="ReplicaAlreadyExistsException";$fault="client";constructor(e){super({name:"ReplicaAlreadyExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,bs.prototype)}}class ys extends K{name="ReplicaNotFoundException";$fault="client";constructor(e){super({name:"ReplicaNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,ys.prototype)}}class vs extends K{name="IndexNotFoundException";$fault="client";constructor(e){super({name:"IndexNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,vs.prototype)}}var Ir;(function(t){t.visit=(e,n)=>e.S!==void 0?n.S(e.S):e.N!==void 0?n.N(e.N):e.B!==void 0?n.B(e.B):e.SS!==void 0?n.SS(e.SS):e.NS!==void 0?n.NS(e.NS):e.BS!==void 0?n.BS(e.BS):e.M!==void 0?n.M(e.M):e.L!==void 0?n.L(e.L):e.NULL!==void 0?n.NULL(e.NULL):e.BOOL!==void 0?n.BOOL(e.BOOL):n._(e.$unknown[0],e.$unknown[1])})(Ir||(Ir={}));class ws extends K{name="ConditionalCheckFailedException";$fault="client";Item;constructor(e){super({name:"ConditionalCheckFailedException",$fault:"client",...e}),Object.setPrototypeOf(this,ws.prototype),this.Item=e.Item}}class xs extends K{name="TransactionCanceledException";$fault="client";Message;CancellationReasons;constructor(e){super({name:"TransactionCanceledException",$fault:"client",...e}),Object.setPrototypeOf(this,xs.prototype),this.Message=e.Message,this.CancellationReasons=e.CancellationReasons}}const Xu=async(t,e)=>{const n=Lt("DeleteItem");let r;return r=JSON.stringify(Kf(t,e)),Bt(e,n,"/",void 0,r)},Yu=async(t,e)=>{const n=Lt("DescribeEndpoints");let r;return r=JSON.stringify(D(t)),Bt(e,n,"/",void 0,r)},Ju=async(t,e)=>{const n=Lt("GetItem");let r;return r=JSON.stringify(Xf(t,e)),Bt(e,n,"/",void 0,r)},Zu=async(t,e)=>{const n=Lt("PutItem");let r;return r=JSON.stringify(th(t,e)),Bt(e,n,"/",void 0,r)},ef=async(t,e)=>{const n=Lt("Query");let r;return r=JSON.stringify(nh(t,e)),Bt(e,n,"/",void 0,r)},tf=async(t,e)=>{const n=Lt("TransactWriteItems");let r;return r=JSON.stringify(ih(t,e)),Bt(e,n,"/",void 0,r)},nf=async(t,e)=>{if(t.statusCode>=300)return Pt(t,e);const n=await mt(t.body,e);let r={};return r=fh(n,e),{$metadata:H(t),...r}},rf=async(t,e)=>{if(t.statusCode>=300)return Pt(t,e);const n=await mt(t.body,e);let r={};return r=D(n),{$metadata:H(t),...r}},sf=async(t,e)=>{if(t.statusCode>=300)return Pt(t,e);const n=await mt(t.body,e);let r={};return r=hh(n,e),{$metadata:H(t),...r}},af=async(t,e)=>{if(t.statusCode>=300)return Pt(t,e);const n=await mt(t.body,e);let r={};return r=Eh(n,e),{$metadata:H(t),...r}},of=async(t,e)=>{if(t.statusCode>=300)return Pt(t,e);const n=await mt(t.body,e);let r={};return r=Sh(n,e),{$metadata:H(t),...r}},cf=async(t,e)=>{if(t.statusCode>=300)return Pt(t,e);const n=await mt(t.body,e);let r={};return r=Ah(n,e),{$metadata:H(t),...r}},Pt=async(t,e)=>{const n={...t,body:await $l(t.body,e)},r=Vl(t,n.body);switch(r){case"InternalServerError":case"com.amazonaws.dynamodb#InternalServerError":throw await Ef(n);case"RequestLimitExceeded":case"com.amazonaws.dynamodb#RequestLimitExceeded":throw await Of(n);case"ThrottlingException":case"com.amazonaws.dynamodb#ThrottlingException":throw await zf(n);case"InvalidEndpointException":case"com.amazonaws.dynamodb#InvalidEndpointException":throw await Sf(n);case"ProvisionedThroughputExceededException":case"com.amazonaws.dynamodb#ProvisionedThroughputExceededException":throw await kf(n);case"ResourceNotFoundException":case"com.amazonaws.dynamodb#ResourceNotFoundException":throw await Bf(n);case"ItemCollectionSizeLimitExceededException":case"com.amazonaws.dynamodb#ItemCollectionSizeLimitExceededException":throw await If(n);case"ReplicatedWriteConflictException":case"com.amazonaws.dynamodb#ReplicatedWriteConflictException":throw await Pf(n);case"BackupInUseException":case"com.amazonaws.dynamodb#BackupInUseException":throw await df(n);case"ContinuousBackupsUnavailableException":case"com.amazonaws.dynamodb#ContinuousBackupsUnavailableException":throw await ff(n);case"LimitExceededException":case"com.amazonaws.dynamodb#LimitExceededException":throw await Cf(n);case"TableInUseException":case"com.amazonaws.dynamodb#TableInUseException":throw await Ff(n);case"TableNotFoundException":case"com.amazonaws.dynamodb#TableNotFoundException":throw await Uf(n);case"GlobalTableAlreadyExistsException":case"com.amazonaws.dynamodb#GlobalTableAlreadyExistsException":throw await gf(n);case"ResourceInUseException":case"com.amazonaws.dynamodb#ResourceInUseException":throw await Df(n);case"BackupNotFoundException":case"com.amazonaws.dynamodb#BackupNotFoundException":throw await lf(n);case"ConditionalCheckFailedException":case"com.amazonaws.dynamodb#ConditionalCheckFailedException":throw await uf(n,e);case"TransactionConflictException":case"com.amazonaws.dynamodb#TransactionConflictException":throw await $f(n);case"PolicyNotFoundException":case"com.amazonaws.dynamodb#PolicyNotFoundException":throw await Rf(n);case"ExportNotFoundException":case"com.amazonaws.dynamodb#ExportNotFoundException":throw await pf(n);case"GlobalTableNotFoundException":case"com.amazonaws.dynamodb#GlobalTableNotFoundException":throw await bf(n);case"ImportNotFoundException":case"com.amazonaws.dynamodb#ImportNotFoundException":throw await wf(n);case"DuplicateItemException":case"com.amazonaws.dynamodb#DuplicateItemException":throw await hf(n);case"IdempotentParameterMismatchException":case"com.amazonaws.dynamodb#IdempotentParameterMismatchException":throw await yf(n);case"TransactionCanceledException":case"com.amazonaws.dynamodb#TransactionCanceledException":throw await jf(n,e);case"TransactionInProgressException":case"com.amazonaws.dynamodb#TransactionInProgressException":throw await Vf(n);case"ExportConflictException":case"com.amazonaws.dynamodb#ExportConflictException":throw await mf(n);case"InvalidExportTimeException":case"com.amazonaws.dynamodb#InvalidExportTimeException":throw await _f(n);case"PointInTimeRecoveryUnavailableException":case"com.amazonaws.dynamodb#PointInTimeRecoveryUnavailableException":throw await Tf(n);case"ImportConflictException":case"com.amazonaws.dynamodb#ImportConflictException":throw await vf(n);case"TableAlreadyExistsException":case"com.amazonaws.dynamodb#TableAlreadyExistsException":throw await Lf(n);case"InvalidRestoreTimeException":case"com.amazonaws.dynamodb#InvalidRestoreTimeException":throw await Af(n);case"ReplicaAlreadyExistsException":case"com.amazonaws.dynamodb#ReplicaAlreadyExistsException":throw await Mf(n);case"ReplicaNotFoundException":case"com.amazonaws.dynamodb#ReplicaNotFoundException":throw await Nf(n);case"IndexNotFoundException":case"com.amazonaws.dynamodb#IndexNotFoundException":throw await xf(n);default:const s=n.body;return Ih({output:t,parsedBody:s,errorCode:r})}},df=async(t,e)=>{const n=t.body,r=D(n),s=new jr({$metadata:H(t),...r});return Q(s,n)},lf=async(t,e)=>{const n=t.body,r=D(n),s=new $r({$metadata:H(t),...r});return Q(s,n)},uf=async(t,e)=>{const n=t.body,r=lh(n,e),s=new ws({$metadata:H(t),...r});return Q(s,n)},ff=async(t,e)=>{const n=t.body,r=D(n),s=new Yr({$metadata:H(t),...r});return Q(s,n)},hf=async(t,e)=>{const n=t.body,r=D(n),s=new cs({$metadata:H(t),...r});return Q(s,n)},mf=async(t,e)=>{const n=t.body,r=D(n),s=new us({$metadata:H(t),...r});return Q(s,n)},pf=async(t,e)=>{const n=t.body,r=D(n),s=new is({$metadata:H(t),...r});return Q(s,n)},gf=async(t,e)=>{const n=t.body,r=D(n),s=new ts({$metadata:H(t),...r});return Q(s,n)},bf=async(t,e)=>{const n=t.body,r=D(n),s=new as({$metadata:H(t),...r});return Q(s,n)},yf=async(t,e)=>{const n=t.body,r=D(n),s=new ds({$metadata:H(t),...r});return Q(s,n)},vf=async(t,e)=>{const n=t.body,r=D(n),s=new ms({$metadata:H(t),...r});return Q(s,n)},wf=async(t,e)=>{const n=t.body,r=D(n),s=new os({$metadata:H(t),...r});return Q(s,n)},xf=async(t,e)=>{const n=t.body,r=D(n),s=new vs({$metadata:H(t),...r});return Q(s,n)},Ef=async(t,e)=>{const n=t.body,r=D(n),s=new Vr({$metadata:H(t),...r});return Q(s,n)},Sf=async(t,e)=>{const n=t.body,r=D(n),s=new qr({$metadata:H(t),...r});return Q(s,n)},_f=async(t,e)=>{const n=t.body,r=D(n),s=new fs({$metadata:H(t),...r});return Q(s,n)},Af=async(t,e)=>{const n=t.body,r=D(n),s=new gs({$metadata:H(t),...r});return Q(s,n)},If=async(t,e)=>{const n=t.body,r=D(n),s=new Qr({$metadata:H(t),...r});return Q(s,n)},Cf=async(t,e)=>{const n=t.body,r=D(n),s=new Jr({$metadata:H(t),...r});return Q(s,n)},Tf=async(t,e)=>{const n=t.body,r=D(n),s=new hs({$metadata:H(t),...r});return Q(s,n)},Rf=async(t,e)=>{const n=t.body,r=D(n),s=new ss({$metadata:H(t),...r});return Q(s,n)},kf=async(t,e)=>{const n=t.body,r=D(n),s=new Kr({$metadata:H(t),...r});return Q(s,n)},Mf=async(t,e)=>{const n=t.body,r=D(n),s=new bs({$metadata:H(t),...r});return Q(s,n)},Nf=async(t,e)=>{const n=t.body,r=D(n),s=new ys({$metadata:H(t),...r});return Q(s,n)},Pf=async(t,e)=>{const n=t.body,r=D(n),s=new Xr({$metadata:H(t),...r});return Q(s,n)},Of=async(t,e)=>{const n=t.body,r=D(n),s=new Hr({$metadata:H(t),...r});return Q(s,n)},Df=async(t,e)=>{const n=t.body,r=D(n),s=new ns({$metadata:H(t),...r});return Q(s,n)},Bf=async(t,e)=>{const n=t.body,r=D(n),s=new Wr({$metadata:H(t),...r});return Q(s,n)},Lf=async(t,e)=>{const n=t.body,r=D(n),s=new ps({$metadata:H(t),...r});return Q(s,n)},Ff=async(t,e)=>{const n=t.body,r=D(n),s=new Zr({$metadata:H(t),...r});return Q(s,n)},Uf=async(t,e)=>{const n=t.body,r=D(n),s=new es({$metadata:H(t),...r});return Q(s,n)},zf=async(t,e)=>{const n=t.body,r=D(n),s=new Gr({$metadata:H(t),...r});return Q(s,n)},jf=async(t,e)=>{const n=t.body,r=_h(n,e),s=new xs({$metadata:H(t),...r});return Q(s,n)},$f=async(t,e)=>{const n=t.body,r=D(n),s=new rs({$metadata:H(t),...r});return Q(s,n)},Vf=async(t,e)=>{const n=t.body,r=D(n),s=new ls({$metadata:H(t),...r});return Q(s,n)},pt=(t,e)=>Ir.visit(t,{B:n=>({B:e.base64Encoder(n)}),BOOL:n=>({BOOL:n}),BS:n=>({BS:Hf(n,e)}),L:n=>({L:Jf(n,e)}),M:n=>({M:Zf(n,e)}),N:n=>({N:n}),NS:n=>({NS:D(n)}),NULL:n=>({NULL:n}),S:n=>({S:n}),SS:n=>({SS:D(n)}),_:(n,r)=>({[n]:r})}),Da=(t,e)=>t.filter(n=>n!=null).map(n=>pt(n,e)),Hf=(t,e)=>t.filter(n=>n!=null).map(n=>e.base64Encoder(n)),Ba=(t,e)=>de(t,{AttributeValueList:n=>Da(n,e),ComparisonOperator:[]}),Gf=(t,e)=>de(t,{ConditionExpression:[],ExpressionAttributeNames:D,ExpressionAttributeValues:n=>gt(n,e),Key:n=>Ot(n,e),ReturnValuesOnConditionCheckFailure:[],TableName:[]}),qf=(t,e)=>de(t,{ConditionExpression:[],ExpressionAttributeNames:D,ExpressionAttributeValues:n=>gt(n,e),Key:n=>Ot(n,e),ReturnValuesOnConditionCheckFailure:[],TableName:[]}),Kf=(t,e)=>de(t,{ConditionExpression:[],ConditionalOperator:[],Expected:n=>La(n,e),ExpressionAttributeNames:D,ExpressionAttributeValues:n=>gt(n,e),Key:n=>Ot(n,e),ReturnConsumedCapacity:[],ReturnItemCollectionMetrics:[],ReturnValues:[],ReturnValuesOnConditionCheckFailure:[],TableName:[]}),La=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=Wf(s,e)),n),{}),Wf=(t,e)=>de(t,{AttributeValueList:n=>Da(n,e),ComparisonOperator:[],Exists:[],Value:n=>pt(n,e)}),gt=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=pt(s,e)),n),{}),Qf=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=Ba(s,e)),n),{}),Xf=(t,e)=>de(t,{AttributesToGet:D,ConsistentRead:[],ExpressionAttributeNames:D,Key:n=>Ot(n,e),ProjectionExpression:[],ReturnConsumedCapacity:[],TableName:[]}),Ot=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=pt(s,e)),n),{}),Yf=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=Ba(s,e)),n),{}),Jf=(t,e)=>t.filter(n=>n!=null).map(n=>pt(n,e)),Zf=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=pt(s,e)),n),{}),eh=(t,e)=>de(t,{ConditionExpression:[],ExpressionAttributeNames:D,ExpressionAttributeValues:n=>gt(n,e),Item:n=>Fa(n,e),ReturnValuesOnConditionCheckFailure:[],TableName:[]}),th=(t,e)=>de(t,{ConditionExpression:[],ConditionalOperator:[],Expected:n=>La(n,e),ExpressionAttributeNames:D,ExpressionAttributeValues:n=>gt(n,e),Item:n=>Fa(n,e),ReturnConsumedCapacity:[],ReturnItemCollectionMetrics:[],ReturnValues:[],ReturnValuesOnConditionCheckFailure:[],TableName:[]}),Fa=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=pt(s,e)),n),{}),nh=(t,e)=>de(t,{AttributesToGet:D,ConditionalOperator:[],ConsistentRead:[],ExclusiveStartKey:n=>Ot(n,e),ExpressionAttributeNames:D,ExpressionAttributeValues:n=>gt(n,e),FilterExpression:[],IndexName:[],KeyConditionExpression:[],KeyConditions:n=>Yf(n,e),Limit:[],ProjectionExpression:[],QueryFilter:n=>Qf(n,e),ReturnConsumedCapacity:[],ScanIndexForward:[],Select:[],TableName:[]}),rh=(t,e)=>de(t,{ConditionCheck:n=>Gf(n,e),Delete:n=>qf(n,e),Put:n=>eh(n,e),Update:n=>ah(n,e)}),sh=(t,e)=>t.filter(n=>n!=null).map(n=>rh(n,e)),ih=(t,e)=>de(t,{ClientRequestToken:[!0,n=>n??da()],ReturnConsumedCapacity:[],ReturnItemCollectionMetrics:[],TransactItems:n=>sh(n,e)}),ah=(t,e)=>de(t,{ConditionExpression:[],ExpressionAttributeNames:D,ExpressionAttributeValues:n=>gt(n,e),Key:n=>Ot(n,e),ReturnValuesOnConditionCheckFailure:[],TableName:[],UpdateExpression:[]}),Dt=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=on(an(s),e)),n),{}),on=(t,e)=>t.B!=null?{B:e.base64Decoder(t.B)}:pn(t.BOOL)!==void 0?{BOOL:pn(t.BOOL)}:t.BS!=null?{BS:oh(t.BS,e)}:t.L!=null?{L:wh(t.L,e)}:t.M!=null?{M:xh(t.M,e)}:Ye(t.N)!==void 0?{N:Ye(t.N)}:t.NS!=null?{NS:D(t.NS)}:pn(t.NULL)!==void 0?{NULL:pn(t.NULL)}:Ye(t.S)!==void 0?{S:Ye(t.S)}:t.SS!=null?{SS:D(t.SS)}:{$unknown:Object.entries(t)[0]},oh=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>e.base64Decoder(r)),ch=(t,e)=>de(t,{Code:Ye,Item:n=>Dt(n,e),Message:Ye}),dh=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>ch(r,e)),Ua=(t,e)=>de(t,{CapacityUnits:lt,ReadCapacityUnits:lt,WriteCapacityUnits:lt}),lh=(t,e)=>de(t,{Item:n=>Dt(n,e),message:Ye}),cn=(t,e)=>de(t,{CapacityUnits:lt,GlobalSecondaryIndexes:n=>ci(n),LocalSecondaryIndexes:n=>ci(n),ReadCapacityUnits:lt,Table:n=>Ua(n),TableName:Ye,WriteCapacityUnits:lt}),uh=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>cn(r)),fh=(t,e)=>de(t,{Attributes:n=>Dt(n,e),ConsumedCapacity:n=>cn(n),ItemCollectionMetrics:n=>Es(n,e)}),hh=(t,e)=>de(t,{ConsumedCapacity:n=>cn(n),Item:n=>Dt(n,e)}),mh=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=on(an(s),e)),n),{}),Es=(t,e)=>de(t,{ItemCollectionKey:n=>mh(n,e),SizeEstimateRangeGB:n=>bh(n)}),ph=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>Es(r,e)),gh=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=ph(s,e)),n),{}),bh=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>lt(r)),yh=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>Dt(r,e)),vh=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=on(an(s),e)),n),{}),wh=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>on(an(r),e)),xh=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=on(an(s),e)),n),{}),Eh=(t,e)=>de(t,{Attributes:n=>Dt(n,e),ConsumedCapacity:n=>cn(n),ItemCollectionMetrics:n=>Es(n,e)}),Sh=(t,e)=>de(t,{ConsumedCapacity:n=>cn(n),Count:js,Items:n=>yh(n,e),LastEvaluatedKey:n=>vh(n,e),ScannedCount:js}),ci=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=Ua(s)),n),{}),_h=(t,e)=>de(t,{CancellationReasons:n=>dh(n,e),Message:Ye}),Ah=(t,e)=>de(t,{ConsumedCapacity:n=>uh(n),ItemCollectionMetrics:n=>gh(n,e)}),H=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),Ih=Rl(K),Bt=async(t,e,n,r,s)=>{const{hostname:i,protocol:a="https",port:o,path:d}=await t.endpoint(),c={protocol:a,hostname:i,port:o,method:"POST",path:d.endsWith("/")?d.slice(0,-1)+n:d+n,headers:e};return s!==void 0&&(c.body=s),new Pe(c)};function Lt(t){return{"content-type":"application/x-amz-json-1.0","x-amz-target":`DynamoDB_20120810.${t}`}}class Ch extends nt.classBuilder().ep(Nt).m(function(e,n,r,s){return[Rt(r,this.serialize,this.deserialize),Mt(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeEndpoints",{}).n("DynamoDBClient","DescribeEndpointsCommand").f(void 0,void 0).ser(Yu).de(rf).build(){}const Th="3.906.0",Rh={version:Th},kh=t=>new TextEncoder().encode(t);var Mh=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:kh;function nn(t){return t instanceof Uint8Array?t:typeof t=="string"?Mh(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}function Cr(t){return typeof t=="string"?t.length===0:t.byteLength===0}var za={name:"SHA-256"},di={name:"HMAC",hash:za},Nh=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);const Ph={};function yn(){return typeof window<"u"?window:typeof self<"u"?self:Ph}var Oh=(function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!Cr(e)){var n=nn(e),r=new Uint8Array(this.toHash.byteLength+n.byteLength);r.set(this.toHash,0),r.set(n,this.toHash.byteLength),this.toHash=r}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(n){return yn().crypto.subtle.sign(di,n,e.toHash).then(function(r){return new Uint8Array(r)})}):Cr(this.toHash)?Promise.resolve(Nh):Promise.resolve().then(function(){return yn().crypto.subtle.digest(za,e.toHash)}).then(function(n){return Promise.resolve(new Uint8Array(n))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(n,r){yn().crypto.subtle.importKey("raw",nn(e.secret),di,!1,["sign"]).then(n,r)}),this.key.catch(function(){}))},t})();function Dh(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(f){try{c(r.next(f))}catch(u){a(u)}}function d(f){try{c(r.throw(f))}catch(u){a(u)}}function c(f){f.done?i(f.value):s(f.value).then(o,d)}c((r=r.apply(t,e||[])).next())})}function Bh(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(f){return d([c,f])}}function d(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(f){c=[6,f],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Me=64,Lh=32,Fh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Uh=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],zh=Math.pow(2,53)-1,vn=(function(){function t(){this.state=Int32Array.from(Uh),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,r=e.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>zh)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=e[n++],r--,this.bufferLength===Me&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(n.setUint8(this.bufferLength++,128),r%Me>=Me-8){for(var s=this.bufferLength;s<Me;s++)n.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<Me-8;s++)n.setUint8(s,0);n.setUint32(Me-8,Math.floor(e/4294967296),!0),n.setUint32(Me-4,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(Lh),s=0;s<8;s++)i[s*4]=this.state[s]>>>24&255,i[s*4+1]=this.state[s]>>>16&255,i[s*4+2]=this.state[s]>>>8&255,i[s*4+3]=this.state[s]>>>0&255;return i},t.prototype.hashBuffer=function(){for(var e=this,n=e.buffer,r=e.state,s=r[0],i=r[1],a=r[2],o=r[3],d=r[4],c=r[5],f=r[6],u=r[7],h=0;h<Me;h++){if(h<16)this.temp[h]=(n[h*4]&255)<<24|(n[h*4+1]&255)<<16|(n[h*4+2]&255)<<8|n[h*4+3]&255;else{var g=this.temp[h-2],y=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10;g=this.temp[h-15];var v=(g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3;this.temp[h]=(y+this.temp[h-7]|0)+(v+this.temp[h-16]|0)}var b=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&c^~d&f)|0)+(u+(Fh[h]+this.temp[h]|0)|0)|0,_=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&i^s&a^i&a)|0;u=f,f=c,c=d,d=o+b|0,o=a,a=i,i=s,s=b+_|0}r[0]+=s,r[1]+=i,r[2]+=a,r[3]+=o,r[4]+=d,r[5]+=c,r[6]+=f,r[7]+=u},t})(),jh=(function(){function t(e){this.secret=e,this.hash=new vn,this.reset()}return t.prototype.update=function(e){if(!(Cr(e)||this.error))try{this.hash.update(nn(e))}catch(n){this.error=n}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return Dh(this,void 0,void 0,function(){return Bh(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new vn,this.secret){this.outer=new vn;var e=$h(this.secret),n=new Uint8Array(Me);n.set(e);for(var r=0;r<Me;r++)e[r]^=54,n[r]^=92;this.hash.update(e),this.outer.update(n);for(var r=0;r<e.byteLength;r++)e[r]=0}},t})();function $h(t){var e=nn(t);if(e.byteLength>Me){var n=new vn;n.update(e),e=n.digest()}var r=new Uint8Array(Me);return r.set(e),r}var Vh=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function Hh(t){if(Gh(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return qh(e)}return!1}function Gh(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function qh(t){return t&&Vh.every(function(e){return typeof t[e]=="function"})}var Kh=(function(){function t(e){Hh(yn())?this.hash=new Oh(e):this.hash=new jh(e)}return t.prototype.update=function(e,n){this.hash.update(nn(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t})();const Wh={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast","Pale Moon":"pale_moon",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},ja={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",pale_moon:"Pale Moon",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},oe={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv",bot:"bot"},Se={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ze={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class S{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5)){if(n[0]===1&&n[1]<6)return"Cupcake";if(n[0]===1&&n[1]>=6)return"Donut";if(n[0]===2&&n[1]<2)return"Eclair";if(n[0]===2&&n[1]===2)return"Froyo";if(n[0]===2&&n[1]>2)return"Gingerbread";if(n[0]===3)return"Honeycomb";if(n[0]===4&&n[1]<1)return"Ice Cream Sandwich";if(n[0]===4&&n[1]<4)return"Jelly Bean";if(n[0]===4&&n[1]>=4)return"KitKat";if(n[0]===5)return"Lollipop";if(n[0]===6)return"Marshmallow";if(n[0]===7)return"Nougat";if(n[0]===8)return"Oreo";if(n[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const s=S.getVersionPrecision(e),i=S.getVersionPrecision(n);let a=Math.max(s,i),o=0;const d=S.map([e,n],c=>{const f=a-S.getVersionPrecision(c),u=c+new Array(f+1).join(".0");return S.map(u.split("."),h=>new Array(20-h.length).join("0")+h).reverse()});for(r&&(o=a-Math.min(s,i)),a-=1;a>=o;){if(d[0][a]>d[1][a])return 1;if(d[0][a]===d[1][a]){if(a===o)return 0;a-=1}else if(d[0][a]<d[1][a])return-1}}static map(e,n){const r=[];let s;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(s=0;s<e.length;s+=1)r.push(n(e[s]));return r}static find(e,n){let r,s;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,s=e.length;r<s;r+=1){const i=e[r];if(n(i,r))return i}}static assign(e,...n){const r=e;let s,i;if(Object.assign)return Object.assign(e,...n);for(s=0,i=n.length;s<i;s+=1){const a=n[s];typeof a=="object"&&a!==null&&Object.keys(a).forEach(d=>{r[d]=a[d]})}return e}static getBrowserAlias(e){return Wh[e]}static getBrowserTypeByAlias(e){return ja[e]||""}}const re=/version\/(\d+(\.?_?\d+)+)/i,Qh=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=S.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||S.getFirstMatch(re,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=S.getFirstMatch(re,t)||S.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=S.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||S.getFirstMatch(re,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=S.getFirstMatch(re,t)||S.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=S.getFirstMatch(re,t)||S.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/PaleMoon/i],describe(t){const e={name:"Pale Moon"},n=S.getFirstMatch(re,t)||S.getFirstMatch(/(?:PaleMoon)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=S.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||S.getFirstMatch(re,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=S.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||S.getFirstMatch(re,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=S.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||S.getFirstMatch(re,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=S.getFirstMatch(re,t)||S.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=S.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||S.getFirstMatch(re,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=S.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||S.getFirstMatch(re,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=S.getFirstMatch(re,t)||S.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=S.getFirstMatch(re,t)||S.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=S.getFirstMatch(re,t)||S.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=S.getFirstMatch(re,t)||S.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=S.getFirstMatch(re,t)||S.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=S.getFirstMatch(re,t)||S.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=S.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||S.getFirstMatch(re,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=S.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||S.getFirstMatch(re,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=S.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=S.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=S.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=S.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=S.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=S.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=S.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=S.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=S.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=S.getFirstMatch(re,t)||S.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=S.getFirstMatch(re,t)||S.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=S.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=S.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||S.getFirstMatch(re,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=S.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||S.getFirstMatch(re,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=S.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=S.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=S.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=S.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||S.getFirstMatch(re,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=S.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=S.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=S.getFirstMatch(re,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=S.getFirstMatch(re,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=S.getFirstMatch(re,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,n=/^(.*)\/(.*)[ \t]\((.*)/,s=t.search("\\(")!==-1?n:e;return{name:S.getFirstMatch(s,t),version:S.getSecondMatch(s,t)}}}],Xh=[{test:[/Roku\/DVP/],describe(t){const e=S.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:Se.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=S.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:Se.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=S.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=S.getWindowsVersionName(e);return{name:Se.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:Se.iOS},n=S.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=S.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=S.getMacOSVersionName(e),r={name:Se.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=S.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:Se.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=S.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=S.getAndroidVersionName(e),r={name:Se.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=S.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:Se.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=S.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||S.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||S.getFirstMatch(/\bbb(\d+)/i,t);return{name:Se.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=S.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:Se.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=S.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:Se.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:Se.Linux}}},{test:[/CrOS/],describe(){return{name:Se.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=S.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:Se.PlayStation4,version:e}}}],Yh=[{test:[/googlebot/i],describe(){return{type:oe.bot,vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=S.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:oe.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:oe.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:oe.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:oe.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:oe.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:oe.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:oe.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=S.getFirstMatch(/(ipod|iphone)/i,t);return{type:oe.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:oe.mobile,vendor:"Nexus"}}},{test:[/Nokia/i],describe(t){const e=S.getFirstMatch(/Nokia\s+([0-9]+(\.[0-9]+)?)/i,t),n={type:oe.mobile,vendor:"Nokia"};return e&&(n.model=e),n}},{test:[/[^-]mobi/i],describe(){return{type:oe.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:oe.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:oe.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:oe.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:oe.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:oe.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:oe.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:oe.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:oe.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:oe.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:oe.tv}}}],Jh=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:Ze.Blink};const n=S.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:Ze.EdgeHTML,version:n}}},{test:[/trident/i],describe(t){const e={name:Ze.Trident},n=S.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:Ze.Presto},n=S.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:Ze.Gecko},n=S.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Ze.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:Ze.WebKit},n=S.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class li{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=S.find(Qh,n=>{if(typeof n.test=="function")return n.test(this);if(Array.isArray(n.test))return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=S.find(Xh,n=>{if(typeof n.test=="function")return n.test(this);if(Array.isArray(n.test))return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=S.find(Yh,n=>{if(typeof n.test=="function")return n.test(this);if(Array.isArray(n.test))return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=S.find(Jh,n=>{if(typeof n.test=="function")return n.test(this);if(Array.isArray(n.test))return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return S.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const s={};let i=0;if(Object.keys(e).forEach(o=>{const d=e[o];typeof d=="string"?(s[o]=d,i+=1):typeof d=="object"&&(n[o]=d,r+=1)}),r>0){const o=Object.keys(n),d=S.find(o,f=>this.isOS(f));if(d){const f=this.satisfies(n[d]);if(f!==void 0)return f}const c=S.find(o,f=>this.isPlatform(f));if(c){const f=this.satisfies(n[c]);if(f!==void 0)return f}}if(i>0){const o=Object.keys(s),d=S.find(o,c=>this.isBrowser(c,!0));if(d!==void 0)return this.compareVersion(s[d])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let s=e.toLowerCase();const i=S.getBrowserTypeByAlias(s);return n&&i&&(s=i.toLowerCase()),s===r}compareVersion(e){let n=[0],r=e,s=!1;const i=this.getBrowserVersion();if(typeof i=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(s=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(s=!0,r=e.substr(1)),n.indexOf(S.compareVersions(i,r,s))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Zh{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new li(e,n)}static parse(e){return new li(e).getResult()}static get BROWSER_MAP(){return ja}static get ENGINE_MAP(){return Ze}static get OS_MAP(){return Se}static get PLATFORMS_MAP(){return oe}}const em=({serviceId:t,clientVersion:e})=>async n=>{const r=typeof window<"u"&&window?.navigator?.userAgent?Zh.parse(window.navigator.userAgent):void 0,s=[["aws-sdk-js",e],["ua","2.1"],[`os/${r?.os?.name||"other"}`,r?.os?.version],["lang/js"],["md/browser",`${r?.browser?.name??"unknown"}_${r?.browser?.version??"unknown"}`]];t&&s.push([`api/${t}`,e]);const i=await n?.userAgentAppId?.();return i&&s.push([`app/${i}`]),s},tm=t=>()=>Promise.reject(t),Ss="required",L="type",fe="rules",ne="conditions",k="fn",M="argv",W="ref",Tn="assign",$e="url",Ve="properties",He="headers",nm=!1,he="error",xe="stringEquals",ui="https://dynamodb.{Region}.{PartitionResult#dualStackDnsSuffix}",Ie="endpoint",be="tree",_s="dynamodb",qt={[Ss]:!1,[L]:"string"},fi={[Ss]:!0,default:!1,[L]:"boolean"},hi={[k]:"isSet",[M]:[{[W]:"Endpoint"}]},rm={[W]:"Endpoint"},mi={[k]:"isSet",[M]:[{[W]:"Region"}]},$a={[W]:"Region"},pi={[k]:"aws.partition",[M]:[$a],[Tn]:"PartitionResult"},gi={[ne]:[{[k]:"booleanEquals",[M]:[{[W]:"UseFIPS"},!0]}],[he]:"Invalid Configuration: FIPS and custom endpoint are not supported",[L]:he},Ft={[k]:"booleanEquals",[M]:[{[W]:"UseFIPS"},!0]},bi={[ne]:[{[k]:"booleanEquals",[M]:[{[W]:"UseDualStack"},!0]}],[he]:"Invalid Configuration: Dualstack and custom endpoint are not supported",[L]:he},Va={[k]:"booleanEquals",[M]:[{[W]:"UseDualStack"},!0]},yi={[Ie]:{[$e]:"{Endpoint}",[Ve]:{},[He]:{}},[L]:Ie},Be={},vi={[k]:"booleanEquals",[M]:[{[k]:"getAttr",[M]:[{[W]:"PartitionResult"},"supportsFIPS"]},!0]},wi={[k]:"booleanEquals",[M]:[{[k]:"getAttr",[M]:[{[W]:"PartitionResult"},"supportsDualStack"]},!0]},mr={[ne]:[{[k]:"isSet",[M]:[{[W]:"AccountIdEndpointMode"}]},{[k]:xe,[M]:[{[W]:"AccountIdEndpointMode"},"required"]}],[fe]:[{[he]:"Invalid Configuration: AccountIdEndpointMode is required and FIPS is enabled, but FIPS account endpoints are not supported",[L]:he}],[L]:be},dn={[k]:"getAttr",[M]:[{[W]:"PartitionResult"},"name"]},xi={[Ie]:{[$e]:"https://dynamodb.{Region}.{PartitionResult#dnsSuffix}",[Ve]:{},[He]:{}},[L]:Ie},Ei={[$e]:"https://{ParsedArn#accountId}.ddb.{Region}.{PartitionResult#dualStackDnsSuffix}",[Ve]:{},[He]:{}},Si={[he]:"Credentials-sourced account ID parameter is invalid",[L]:he},_i={[ne]:[{[k]:"isSet",[M]:[{[W]:"AccountIdEndpointMode"}]},{[k]:xe,[M]:[{[W]:"AccountIdEndpointMode"},"required"]}],[fe]:[{[ne]:[{[k]:"not",[M]:[Ft]}],[fe]:[{[ne]:[{[k]:xe,[M]:[dn,"aws"]}],[fe]:[{[he]:"AccountIdEndpointMode is required but no AccountID was provided or able to be loaded",[L]:he}],[L]:be},{[he]:"Invalid Configuration: AccountIdEndpointMode is required but account endpoints are not supported in this partition",[L]:he}],[L]:be},{[he]:"Invalid Configuration: AccountIdEndpointMode is required and FIPS is enabled, but FIPS account endpoints are not supported",[L]:he}],[L]:be},Ai={[$e]:"https://{ParsedArn#accountId}.ddb.{Region}.{PartitionResult#dnsSuffix}",[Ve]:{},[He]:{}},Ii=[Ft],Ci=[Va],Ti=[{[k]:"isSet",[M]:[{[W]:"AccountIdEndpointMode"}]},{[k]:"not",[M]:[{[k]:xe,[M]:[{[W]:"AccountIdEndpointMode"},"disabled"]}]},{[k]:xe,[M]:[dn,"aws"]},{[k]:"not",[M]:[Ft]},{[k]:"isSet",[M]:[{[W]:"ResourceArn"}]},{[k]:"aws.parseArn",[M]:[{[W]:"ResourceArn"}],[Tn]:"ParsedArn"},{[k]:xe,[M]:[{[k]:"getAttr",[M]:[{[W]:"ParsedArn"},"service"]},_s]},{[k]:"isValidHostLabel",[M]:[{[k]:"getAttr",[M]:[{[W]:"ParsedArn"},"region"]},!1]},{[k]:xe,[M]:[{[k]:"getAttr",[M]:[{[W]:"ParsedArn"},"region"]},"{Region}"]},{[k]:"isValidHostLabel",[M]:[{[k]:"getAttr",[M]:[{[W]:"ParsedArn"},"accountId"]},!1]}],Ri=[{[k]:"isSet",[M]:[{[W]:"AccountIdEndpointMode"}]},{[k]:"not",[M]:[{[k]:xe,[M]:[{[W]:"AccountIdEndpointMode"},"disabled"]}]},{[k]:xe,[M]:[dn,"aws"]},{[k]:"not",[M]:[Ft]},{[k]:"isSet",[M]:[{[W]:"ResourceArnList"}]},{[k]:"getAttr",[M]:[{[W]:"ResourceArnList"},"[0]"],[Tn]:"FirstArn"},{[k]:"aws.parseArn",[M]:[{[W]:"FirstArn"}],[Tn]:"ParsedArn"},{[k]:xe,[M]:[{[k]:"getAttr",[M]:[{[W]:"ParsedArn"},"service"]},_s]},{[k]:"isValidHostLabel",[M]:[{[k]:"getAttr",[M]:[{[W]:"ParsedArn"},"region"]},!1]},{[k]:xe,[M]:[{[k]:"getAttr",[M]:[{[W]:"ParsedArn"},"region"]},"{Region}"]},{[k]:"isValidHostLabel",[M]:[{[k]:"getAttr",[M]:[{[W]:"ParsedArn"},"accountId"]},!1]}],ki=[{[k]:"isSet",[M]:[{[W]:"AccountIdEndpointMode"}]},{[k]:"not",[M]:[{[k]:xe,[M]:[{[W]:"AccountIdEndpointMode"},"disabled"]}]},{[k]:xe,[M]:[dn,"aws"]},{[k]:"not",[M]:[Ft]},{[k]:"isSet",[M]:[{[W]:"AccountId"}]}],Mi=[{[k]:"isValidHostLabel",[M]:[{[W]:"AccountId"},!1]}],sm={parameters:{Region:qt,UseDualStack:fi,UseFIPS:fi,Endpoint:qt,AccountId:qt,AccountIdEndpointMode:qt,ResourceArn:qt,ResourceArnList:{[Ss]:nm,[L]:"stringArray"}},[fe]:[{[ne]:[hi,mi,pi],[fe]:[gi,bi,{[ne]:[{[k]:xe,[M]:[rm,ui]}],error:"Endpoint override is not supported for dual-stack endpoints. Please enable dual-stack functionality by enabling the configuration. For more details, see: https://docs.aws.amazon.com/sdkref/latest/guide/feature-endpoints.html",[L]:he},yi],[L]:be},{[ne]:[hi],[fe]:[gi,bi,yi],[L]:be},{[ne]:[mi],[fe]:[{[ne]:[pi],[fe]:[{[ne]:[{[k]:xe,[M]:[$a,"local"]}],[fe]:[{[ne]:Ii,error:"Invalid Configuration: FIPS and local endpoint are not supported",[L]:he},{[ne]:Ci,error:"Invalid Configuration: Dualstack and local endpoint are not supported",[L]:he},{endpoint:{[$e]:"http://localhost:8000",[Ve]:{authSchemes:[{signingRegion:"us-east-1",name:"sigv4",signingName:_s}]},[He]:Be},[L]:Ie}],[L]:be},{[ne]:[Ft,Va],[fe]:[{[ne]:[vi,wi],[fe]:[mr,{endpoint:{[$e]:"https://dynamodb-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[Ve]:Be,[He]:Be},[L]:Ie}],[L]:be},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[L]:he}],[L]:be},{[ne]:Ii,[fe]:[{[ne]:[vi],[fe]:[{[ne]:[{[k]:xe,[M]:[dn,"aws-us-gov"]}],[fe]:[mr,xi],[L]:be},mr,{endpoint:{[$e]:"https://dynamodb-fips.{Region}.{PartitionResult#dnsSuffix}",[Ve]:Be,[He]:Be},[L]:Ie}],[L]:be},{error:"FIPS is enabled but this partition does not support FIPS",[L]:he}],[L]:be},{[ne]:Ci,[fe]:[{[ne]:[wi],[fe]:[{[ne]:Ti,endpoint:Ei,[L]:Ie},{[ne]:Ri,endpoint:Ei,[L]:Ie},{[ne]:ki,[fe]:[{[ne]:Mi,[fe]:[{endpoint:{[$e]:"https://{AccountId}.ddb.{Region}.{PartitionResult#dualStackDnsSuffix}",[Ve]:Be,[He]:Be},[L]:Ie}],[L]:be},Si],[L]:be},_i,{endpoint:{[$e]:ui,[Ve]:Be,[He]:Be},[L]:Ie}],[L]:be},{error:"DualStack is enabled but this partition does not support DualStack",[L]:he}],[L]:be},{[ne]:Ti,endpoint:Ai,[L]:Ie},{[ne]:Ri,endpoint:Ai,[L]:Ie},{[ne]:ki,[fe]:[{[ne]:Mi,[fe]:[{endpoint:{[$e]:"https://{AccountId}.ddb.{Region}.{PartitionResult#dnsSuffix}",[Ve]:Be,[He]:Be},[L]:Ie}],[L]:be},Si],[L]:be},_i,xi],[L]:be}],[L]:be},{error:"Invalid Configuration: Missing Region",[L]:he}]},im=sm,am=new wd({size:50,params:["AccountId","AccountIdEndpointMode","Endpoint","Region","ResourceArn","ResourceArnList","UseDualStack","UseFIPS"]}),om=(t,e={})=>am.get(t,()=>Ud(im,{endpointParams:t,logger:e.logger}));_n.aws=va;const cm=t=>({apiVersion:"2012-08-10",base64Decoder:t?.base64Decoder??Rr,base64Encoder:t?.base64Encoder??oa,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??om,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??Ku,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Xd}],logger:t?.logger??new Ta,serviceId:t?.serviceId??"DynamoDB",urlParser:t?.urlParser??An,utf8Decoder:t?.utf8Decoder??Ct,utf8Encoder:t?.utf8Encoder??kr}),dm=["in-region","cross-region","mobile","standard","legacy"],lm=({defaultsMode:t}={})=>Yd(async()=>{const e=typeof t=="function"?await t():t;switch(e?.toLowerCase()){case"auto":return Promise.resolve(um()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${dm.join(", ")}, got ${e}`)}}),um=()=>{const t=window?.navigator;if(t?.connection){const{effectiveType:e,rtt:n,downlink:r}=t?.connection;if(typeof e=="string"&&e!=="4g"||Number(n)>100||Number(r)<10)return!0}return t?.userAgentData?.mobile||typeof t?.maxTouchPoints=="number"&&t?.maxTouchPoints>1},fm=t=>{const e=lm(t),n=()=>e().then(Ml),r=cm(t);return{...r,...t,runtime:"browser",defaultsMode:e,accountIdEndpointMode:t?.accountIdEndpointMode??(()=>Promise.resolve(na)),bodyLengthChecker:t?.bodyLengthChecker??Il,credentialDefaultProvider:t?.credentialDefaultProvider??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:t?.defaultUserAgentProvider??em({serviceId:r.serviceId,clientVersion:Rh.version}),endpointDiscoveryEnabledProvider:t?.endpointDiscoveryEnabledProvider??(()=>Promise.resolve(void 0)),maxAttempts:t?.maxAttempts??Cn,region:t?.region??tm("Region is missing"),requestHandler:Mr.create(t?.requestHandler??n),retryMode:t?.retryMode??(async()=>(await n()).retryMode||bu),sha256:t?.sha256??Kh,streamCollector:t?.streamCollector??Yc,useDualstackEndpoint:t?.useDualstackEndpoint??(()=>Promise.resolve(Zl)),useFipsEndpoint:t?.useFipsEndpoint??(()=>Promise.resolve(eu))}},hm=t=>({setRegion(e){t.region=e},region(){return t.region}}),mm=t=>({region:t.region()}),pm=t=>{const e=t.httpAuthSchemes;let n=t.httpAuthSchemeProvider,r=t.credentials;return{setHttpAuthScheme(s){const i=e.findIndex(a=>a.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){n=s},httpAuthSchemeProvider(){return n},setCredentials(s){r=s},credentials(){return r}}},gm=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),bm=(t,e)=>{const n=Object.assign(hm(t),Bl(t),uc(t),pm(t));return e.forEach(r=>r.configure(n)),Object.assign(t,mm(n),Ll(n),fc(n),gm(n))};class ym extends Ca{config;constructor(...[e]){const n=fm(e||{});super(n),this.initConfig=n;const r=Qu(n),s=lc(r),i=vd(s),a=Bu(i),o=tu(a),d=o,c=gu(d),f=Wu(c),u=xc(f,{endpointDiscoveryCommandCtor:Ch}),h=bm(u,e?.extensions||[]);this.config=h,this.middlewareStack.use(Jl(this.config)),this.middlewareStack.use(Vu(this.config)),this.middlewareStack.use(su(this.config)),this.middlewareStack.use(_c(this.config)),this.middlewareStack.use(Cc(this.config)),this.middlewareStack.use(kc(this.config)),this.middlewareStack.use(Dc(this.config,{httpAuthSchemeParametersProvider:Gu,identityProviderConfigProvider:async g=>new fd({"aws.auth#sigv4":g.credentials})})),this.middlewareStack.use(Vc(this.config))}destroy(){super.destroy()}}class vm extends nt.classBuilder().ep({...Nt,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,n,r,s){return[Rt(r,this.serialize,this.deserialize),Mt(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DeleteItem",{}).n("DynamoDBClient","DeleteItemCommand").f(void 0,void 0).ser(Xu).de(nf).build(){}class wm extends nt.classBuilder().ep({...Nt,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,n,r,s){return[Rt(r,this.serialize,this.deserialize),Mt(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","GetItem",{}).n("DynamoDBClient","GetItemCommand").f(void 0,void 0).ser(Ju).de(sf).build(){}class xm extends nt.classBuilder().ep({...Nt,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,n,r,s){return[Rt(r,this.serialize,this.deserialize),Mt(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","PutItem",{}).n("DynamoDBClient","PutItemCommand").f(void 0,void 0).ser(Zu).de(af).build(){}let Em=class extends nt.classBuilder().ep({...Nt,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,n,r,s){return[Rt(r,this.serialize,this.deserialize),Mt(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","Query",{}).n("DynamoDBClient","QueryCommand").f(void 0,void 0).ser(ef).de(of).build(){};class Sm extends nt.classBuilder().ep({...Nt,ResourceArnList:{type:"operationContextParams",get:e=>e?.TransactItems?.map(n=>[n?.ConditionCheck?.TableName,n?.Put?.TableName,n?.Delete?.TableName,n?.Update?.TableName].filter(r=>r)).flat()}}).m(function(e,n,r,s){return[Rt(r,this.serialize,this.deserialize),Mt(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","TransactWriteItems",{}).n("DynamoDBClient","TransactWriteItemsCommand").f(void 0,void 0).ser(tf).de(cf).build(){}function Ha(t){return Promise.all(Object.keys(t).reduce((e,n)=>{const r=t[n];return typeof r=="string"?e.push([n,r]):e.push(r().then(s=>[n,s])),e},[])).then(e=>e.reduce((n,[r,s])=>(n[r]=s,n),{}))}function _m(t){return async e=>{t.logger?.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");const{GetCredentialsForIdentityCommand:n,CognitoIdentityClient:r}=await Xi(async()=>{const{GetCredentialsForIdentityCommand:c,CognitoIdentityClient:f}=await import("./lDp0G0dA.js");return{GetCredentialsForIdentityCommand:c,CognitoIdentityClient:f}},[],import.meta.url),s=c=>t.clientConfig?.[c]??t.parentClientConfig?.[c]??e?.callerClientConfig?.[c],{Credentials:{AccessKeyId:i=Am(t.logger),Expiration:a,SecretKey:o=Cm(t.logger),SessionToken:d}=Im(t.logger)}=await(t.client??new r(Object.assign({},t.clientConfig??{},{region:s("region"),profile:s("profile")}))).send(new n({CustomRoleArn:t.customRoleArn,IdentityId:t.identityId,Logins:t.logins?await Ha(t.logins):void 0}));return{identityId:t.identityId,accessKeyId:i,secretAccessKey:o,sessionToken:d,expiration:a}}}function Am(t){throw new kt("Response from Amazon Cognito contained no access key ID",{logger:t})}function Im(t){throw new kt("Response from Amazon Cognito contained no credentials",{logger:t})}function Cm(t){throw new kt("Response from Amazon Cognito contained no secret key",{logger:t})}const pr="IdentityIds";class Tm{dbName;constructor(e="aws:cognito-identity-ids"){this.dbName=e}getItem(e){return this.withObjectStore("readonly",n=>{const r=n.get(e);return new Promise(s=>{r.onerror=()=>s(null),r.onsuccess=()=>s(r.result?r.result.value:null)})}).catch(()=>null)}removeItem(e){return this.withObjectStore("readwrite",n=>{const r=n.delete(e);return new Promise((s,i)=>{r.onerror=()=>i(r.error),r.onsuccess=()=>s()})})}setItem(e,n){return this.withObjectStore("readwrite",r=>{const s=r.put({id:e,value:n});return new Promise((i,a)=>{s.onerror=()=>a(s.error),s.onsuccess=()=>i()})})}getDb(){const e=self.indexedDB.open(this.dbName,1);return new Promise((n,r)=>{e.onsuccess=()=>{n(e.result)},e.onerror=()=>{r(e.error)},e.onblocked=()=>{r(new Error("Unable to access DB"))},e.onupgradeneeded=()=>{const s=e.result;s.onerror=()=>{r(new Error("Failed to create object store"))},s.createObjectStore(pr,{keyPath:"id"})}})}withObjectStore(e,n){return this.getDb().then(r=>{const s=r.transaction(pr,e);return s.oncomplete=()=>r.close(),new Promise((i,a)=>{s.onerror=()=>a(s.error),i(n(s.objectStore(pr)))}).catch(i=>{throw r.close(),i})})}}class Rm{store;constructor(e={}){this.store=e}getItem(e){return e in this.store?this.store[e]:null}removeItem(e){delete this.store[e]}setItem(e,n){this.store[e]=n}}const km=new Rm;function Mm(){return typeof self=="object"&&self.indexedDB?new Tm:typeof window=="object"&&window.localStorage?window.localStorage:km}function Nm({accountId:t,cache:e=Mm(),client:n,clientConfig:r,customRoleArn:s,identityPoolId:i,logins:a,userIdentifier:o=!a||Object.keys(a).length===0?"ANONYMOUS":void 0,logger:d,parentClientConfig:c}){d?.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");const f=o?`aws:cognito-identity-credentials:${i}:${o}`:void 0;let u=async h=>{const{GetIdCommand:g,CognitoIdentityClient:y}=await Xi(async()=>{const{GetIdCommand:w,CognitoIdentityClient:A}=await import("./lDp0G0dA.js");return{GetIdCommand:w,CognitoIdentityClient:A}},[],import.meta.url),v=w=>r?.[w]??c?.[w]??h?.callerClientConfig?.[w],b=n??new y(Object.assign({},r??{},{region:v("region"),profile:v("profile")}));let _=f&&await e.getItem(f);if(!_){const{IdentityId:w=Pm(d)}=await b.send(new g({AccountId:t,IdentityPoolId:i,Logins:a?await Ha(a):void 0}));_=w,f&&Promise.resolve(e.setItem(f,_)).catch(()=>{})}return u=_m({client:b,customRoleArn:s,logins:a,identityId:_}),u(h)};return h=>u(h).catch(async g=>{throw f&&Promise.resolve(e.removeItem(f)).catch(()=>{}),g})}function Pm(t){throw new kt("Response from Amazon Cognito contained no identity ID",{logger:t})}class ln{value;constructor(e){typeof e=="object"&&"N"in e?this.value=String(e.N):this.value=String(e);const n=typeof e.valueOf()=="number"?e.valueOf():0;if(n>Number.MAX_SAFE_INTEGER||n<Number.MIN_SAFE_INTEGER||Math.abs(n)===1/0||Number.isNaN(n))throw new Error(`NumberValue should not be initialized with an imprecise number=${n}. Use a string instead.`)}static from(e){return new ln(e)}toAttributeValue(){return{N:this.toString()}}toBigInt(){const e=this.toString();return BigInt(e)}toString(){return String(this.value)}valueOf(){return this.toString()}}const Bn=(t,e)=>{if(t===void 0)throw new Error("Pass options.removeUndefinedValues=true to remove undefined values from map/array/set.");if(t===null&&typeof t=="object")return wn();if(Array.isArray(t))return Om(t,e);if(t?.constructor?.name==="Set")return Dm(t,e);if(t?.constructor?.name==="Map")return Bm(t,e);if(t?.constructor?.name==="Object"||!t.constructor&&typeof t=="object")return Ni(t,e);if(Qa(t))return t.length===0&&e?.convertEmptyValues?wn():Ga(t);if(typeof t=="boolean"||t?.constructor?.name==="Boolean")return{BOOL:t.valueOf()};if(typeof t=="number"||t?.constructor?.name==="Number")return Wa(t,e);if(t instanceof ln)return t.toAttributeValue();if(typeof t=="bigint")return Ka(t);if(typeof t=="string"||t?.constructor?.name==="String")return t.length===0&&e?.convertEmptyValues?wn():qa(t);if(e?.convertClassInstanceToMap&&typeof t=="object")return Ni(t,e);throw new Error(`Unsupported type passed: ${t}. Pass options.convertClassInstanceToMap=true to marshall typeof object as map attribute.`)},Om=(t,e)=>({L:t.filter(n=>typeof n!="function"&&(!e?.removeUndefinedValues||e?.removeUndefinedValues&&n!==void 0)).map(n=>Bn(n,e))}),Dm=(t,e)=>{const n=e?.removeUndefinedValues?new Set([...t].filter(s=>s!==void 0)):t;if(!e?.removeUndefinedValues&&n.has(void 0))throw new Error("Pass options.removeUndefinedValues=true to remove undefined values from map/array/set.");if(n.size===0){if(e?.convertEmptyValues)return wn();throw new Error("Pass a non-empty set, or options.convertEmptyValues=true.")}const r=n.values().next().value;if(r instanceof ln)return{NS:Array.from(n).map(s=>s.toString())};if(typeof r=="number")return{NS:Array.from(n).map(s=>Wa(s,e)).map(s=>s.N)};if(typeof r=="bigint")return{NS:Array.from(n).map(Ka).map(s=>s.N)};if(typeof r=="string")return{SS:Array.from(n).map(qa).map(s=>s.S)};if(Qa(r))return{BS:Array.from(n).map(Ga).map(s=>s.B)};throw new Error("Only Number Set (NS), Binary Set (BS) or String Set (SS) are allowed.")},Bm=(t,e)=>({M:(n=>{const r={};for(const[s,i]of n)typeof i!="function"&&(i!==void 0||!e?.removeUndefinedValues)&&(r[s]=Bn(i,e));return r})(t)}),Ni=(t,e)=>({M:(n=>{const r={};for(const s in n){const i=n[s];typeof i!="function"&&(i!==void 0||!e?.removeUndefinedValues)&&(r[s]=Bn(i,e))}return r})(t)}),wn=()=>({NULL:!0}),Ga=t=>({B:t}),qa=t=>({S:t.toString()}),Ka=t=>({N:t.toString()}),Pi=t=>{throw new Error(`${t} Use NumberValue from @aws-sdk/lib-dynamodb.`)},Wa=(t,e)=>{if([Number.NaN,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY].map(n=>n.toString()).includes(t.toString()))throw new Error(`Special numeric value ${t.toString()} is not allowed`);return e?.allowImpreciseNumbers||(Number(t)>Number.MAX_SAFE_INTEGER?Pi(`Number ${t.toString()} is greater than Number.MAX_SAFE_INTEGER.`):Number(t)<Number.MIN_SAFE_INTEGER&&Pi(`Number ${t.toString()} is lesser than Number.MIN_SAFE_INTEGER.`)),{N:t.toString()}},Qa=t=>{const e=["ArrayBuffer","Blob","Buffer","DataView","File","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];return t?.constructor?e.includes(t.constructor.name):!1},Rn=(t,e)=>{for(const[n,r]of Object.entries(t))if(r!==void 0)switch(n){case"NULL":return null;case"BOOL":return!!r;case"N":return Oi(r,e);case"B":return Bi(r);case"S":return Di(r);case"L":return Lm(r,e);case"M":return Fm(r,e);case"NS":return new Set(r.map(s=>Oi(s,e)));case"BS":return new Set(r.map(Bi));case"SS":return new Set(r.map(Di));default:throw new Error(`Unsupported type passed: ${n}`)}throw new Error(`No value defined: ${JSON.stringify(t)}`)},Oi=(t,e)=>{if(typeof e?.wrapNumbers=="function")return e?.wrapNumbers(t);if(e?.wrapNumbers)return ln.from(t);const n=Number(t),r=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];if((n>Number.MAX_SAFE_INTEGER||n<Number.MIN_SAFE_INTEGER)&&!r.includes(n))if(typeof BigInt=="function")try{return BigInt(t)}catch{throw new Error(`${t} can't be converted to BigInt. Set options.wrapNumbers to get string value.`)}else throw new Error(`${t} is outside SAFE_INTEGER bounds. Set options.wrapNumbers to get string value.`);return n},Di=t=>t,Bi=t=>t,Lm=(t,e)=>t.map(n=>Rn(n,e)),Fm=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(n[r]=Rn(s,e),n),{});function Um(t,e){const n=Bn(t,e),[r,s]=Object.entries(n)[0];switch(r){case"M":case"L":return e?.convertTopLevelContainer?n:s;case"SS":case"NS":case"BS":case"S":case"N":case"B":case"NULL":case"BOOL":case"$unknown":default:return n}}const zm=(t,e)=>e?.convertWithoutMapWrapper?Rn(t,e):Rn({M:t},e),As=null,ce={},kn=[],Li="*",Mn=(t,e,n)=>{if(t!==void 0){if(n==null)return e(t);{const r=Object.keys(n),s=r.length===1&&r[0]===Li,i=r.length>=1&&!s,a=r.length===0;if(i)return Is(t,e,n);if(a)return jm(t,e,As);if(s)return Object.entries(t??{}).reduce((o,[d,c])=>(typeof c!="function"&&(o[d]=Mn(c,e,n[Li])),o),Array.isArray(t)?[]:{})}}},Is=(t,e,n)=>{let r;if(Array.isArray(t))r=t.filter(s=>typeof s!="function");else{r={};for(const[s,i]of Object.entries(t))typeof i!="function"&&(r[s]=i)}for(const[s,i]of Object.entries(n)){if(typeof t[s]=="function")continue;const a=Mn(t[s],e,i);a!==void 0&&typeof a!="function"&&(r[s]=a)}return r},jm=(t,e,n)=>Array.isArray(t)?t.filter(r=>typeof r!="function").map(r=>Mn(r,e,n)):Object.entries(t).reduce((r,[s,i])=>{if(typeof i=="function")return r;const a=Mn(i,e,n);return a!==void 0&&typeof a!="function"&&(r[s]=a),r},{}),$m=(t,e,n)=>Is(t,s=>Um(s,n),e),Vm=(t,e,n)=>Is(t,s=>zm(s,n),e);class un extends nt{addMarshallingMiddleware(e){const{marshallOptions:n={},unmarshallOptions:r={}}=e.translateConfig||{};n.convertTopLevelContainer=n.convertTopLevelContainer??!0,r.convertWithoutMapWrapper=r.convertWithoutMapWrapper??!0,this.clientCommand.middlewareStack.addRelativeTo((s,i)=>async a=>(Le(i,"DDB_MAPPER","d"),s({...a,input:$m(a.input,this.inputKeyNodes,n)})),{name:"DocumentMarshall",relation:"before",toMiddleware:"serializerMiddleware",override:!0}),this.clientCommand.middlewareStack.addRelativeTo((s,i)=>async a=>{const o=await s(a);return o.output=Vm(o.output,this.outputKeyNodes,r),o},{name:"DocumentUnmarshall",relation:"before",toMiddleware:"deserializerMiddleware",override:!0})}}class Xa extends un{input;inputKeyNodes={Key:ce,Expected:{"*":{Value:As,AttributeValueList:kn}},ExpressionAttributeValues:ce};outputKeyNodes={Attributes:ce,ItemCollectionMetrics:{ItemCollectionKey:ce}};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new vm(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),i=this.clientCommand.resolveMiddleware(s,n,r);return async()=>i(this.clientCommand)}}class Hm extends un{input;inputKeyNodes={Key:ce};outputKeyNodes={Item:ce};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new wm(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),i=this.clientCommand.resolveMiddleware(s,n,r);return async()=>i(this.clientCommand)}}class Cs extends un{input;inputKeyNodes={Item:ce,Expected:{"*":{Value:As,AttributeValueList:kn}},ExpressionAttributeValues:ce};outputKeyNodes={Attributes:ce,ItemCollectionMetrics:{ItemCollectionKey:ce}};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new xm(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),i=this.clientCommand.resolveMiddleware(s,n,r);return async()=>i(this.clientCommand)}}class Ln extends un{input;inputKeyNodes={KeyConditions:{"*":{AttributeValueList:kn}},QueryFilter:{"*":{AttributeValueList:kn}},ExclusiveStartKey:ce,ExpressionAttributeValues:ce};outputKeyNodes={Items:{"*":ce},LastEvaluatedKey:ce};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new Em(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),i=this.clientCommand.resolveMiddleware(s,n,r);return async()=>i(this.clientCommand)}}class Fn extends un{input;inputKeyNodes={TransactItems:{"*":{ConditionCheck:{Key:ce,ExpressionAttributeValues:ce},Put:{Item:ce,ExpressionAttributeValues:ce},Delete:{Key:ce,ExpressionAttributeValues:ce},Update:{Key:ce,ExpressionAttributeValues:ce}}}};outputKeyNodes={ItemCollectionMetrics:{"*":{"*":{ItemCollectionKey:ce}}}};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new Sm(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),i=this.clientCommand.resolveMiddleware(s,n,r);return async()=>i(this.clientCommand)}}class Ts extends Ca{config;constructor(e,n){if(super(e.config),this.config=e.config,this.config.translateConfig=n,this.middlewareStack=e.middlewareStack,this.config?.cacheMiddleware)throw new Error("@aws-sdk/lib-dynamodb - cacheMiddleware=true is not compatible with the DynamoDBDocumentClient. This option must be set to false.")}static from(e,n){return new Ts(e,n)}destroy(){}}class Un{static singleton;static tableName="socialitix_items";static pkPrefix="DOAB";db;client;static init=()=>{if(console.log("Initializing database connections..."),this.singleton)return console.log("Found database singleton.."),this.singleton;let e=localStorage.getItem("IdentityPoolId");if(!e)if(e=prompt("Enter the credential: "),e)localStorage.setItem("IdentityPoolId",e);else throw alert("Need credential to connect to database.."),new Error("Cannot connect without credential...");return this.singleton=new Un(e),this.singleton};constructor(e){this.db=new ym({region:"ap-south-1",credentials:Nm({identityPoolId:e,clientConfig:{region:"ap-south-1"}})}),this.client=Ts.from(this.db,{marshallOptions:{removeUndefinedValues:!0}}),console.log("Connected to dynamo db successfully...")}}const Gm=Un.init(),Te=Gm.client,le=Un.tableName,Kt="SPD",G={balance:{pk:t=>`${Kt}#BALANCE#${t}`,sk:()=>"META"},transaction:{pk:(t,e)=>`${Kt}#TXN#${t}#${e}`,sk:t=>t},budget:{pk:(t,e)=>`${Kt}#BUDGET#${t}#${e}`,sk:t=>t},savings:{pk:t=>`${Kt}#SAVINGS#${t}`,sk:t=>t},savingsTransaction:{pk:(t,e)=>`${Kt}#SAVTXN#${t}#${e}`,sk:t=>t}};async function qm(t){const e=await Te.send(new Hm({TableName:le,Key:{PK:G.balance.pk(t),SK:G.balance.sk()}}));if(!e.Item)return null;const n=e.Item;return{amount:n.amount,updatedAt:n.updatedAt}}async function Km(t,e=0){const n=ht(),r={amount:e,updatedAt:n};return await Te.send(new Cs({TableName:le,Item:{PK:G.balance.pk(t),SK:G.balance.sk(),...r}})),r}async function Wm(t){const e=await qm(t);return e||Km(t,0)}async function Qm(t,e){const n=await Te.send(new Ln({TableName:le,KeyConditionExpression:"PK = :pk",ExpressionAttributeValues:{":pk":G.budget.pk(t,e)}}));return!n.Items||n.Items.length===0?[]:n.Items.map(r=>{const s=r;return{category:s.SK,month:s.month,expected:s.expected,actual:s.actual,isIncome:s.isIncome,createdAt:s.createdAt,updatedAt:s.updatedAt}})}async function Xm(t,e){const n=ht(),r={category:e.category,month:e.month,expected:e.expected,actual:0,isIncome:e.isIncome,createdAt:n,updatedAt:n};return await Te.send(new Cs({TableName:le,Item:{PK:G.budget.pk(t,e.month),SK:G.budget.sk(e.category),month:r.month,expected:r.expected,actual:r.actual,isIncome:r.isIncome,createdAt:r.createdAt,updatedAt:r.updatedAt},ConditionExpression:"attribute_not_exists(PK)"})),r}async function Ym(t,e,n){await Te.send(new Xa({TableName:le,Key:{PK:G.budget.pk(t,e),SK:G.budget.sk(n)}}))}async function Jm(t,e){const n=await Te.send(new Ln({TableName:le,KeyConditionExpression:"PK = :pk",ExpressionAttributeValues:{":pk":G.transaction.pk(t,e)}}));return!n.Items||n.Items.length===0?[]:n.Items.map(r=>{const s=r;return{id:s.SK,isIncome:s.isIncome,amount:s.amount,category:s.category,description:s.description,date:s.date,createdAt:s.createdAt}})}async function Zm(t,e,n){const r=ht(),s=Zi(),i=sn(e.date),a={id:s,amount:e.amount,isIncome:n.isIncome,category:e.category,description:e.description,date:e.date,createdAt:r},o=n.isIncome?e.amount:-e.amount,d=[{Put:{TableName:le,Item:{PK:G.transaction.pk(t,e.date),SK:G.transaction.sk(s),amount:a.amount,category:a.category,description:a.description,date:a.date,createdAt:a.createdAt}}},{Update:{TableName:le,Key:{PK:G.budget.pk(t,i),SK:G.budget.sk(e.category)},UpdateExpression:"SET actual = actual + :amount, updatedAt = :now",ExpressionAttributeValues:{":amount":e.amount,":now":r}}},{Update:{TableName:le,Key:{PK:G.balance.pk(t),SK:G.balance.sk()},UpdateExpression:"SET amount = amount + :delta, updatedAt = :now",ExpressionAttributeValues:{":delta":o,":now":r}}}];return n.isIncome||(d[2].Update.ConditionExpression="amount >= :required",d[2].Update.ExpressionAttributeValues[":required"]=e.amount),await Te.send(new Fn({TransactItems:d})),{transaction:a,balanceDelta:o}}async function ep(t,e,n){const r=ht(),s=sn(e.date),i=n.isIncome?-e.amount:e.amount;return await Te.send(new Fn({TransactItems:[{Delete:{TableName:le,Key:{PK:G.transaction.pk(t,e.date),SK:G.transaction.sk(e.id)}}},{Update:{TableName:le,Key:{PK:G.budget.pk(t,s),SK:G.budget.sk(e.category)},UpdateExpression:"SET actual = actual - :amount, updatedAt = :now",ExpressionAttributeValues:{":amount":e.amount,":now":r}}},{Update:{TableName:le,Key:{PK:G.balance.pk(t),SK:G.balance.sk()},UpdateExpression:"SET amount = amount + :delta, updatedAt = :now",ExpressionAttributeValues:{":delta":i,":now":r}}}]})),{balanceDelta:i}}async function tp(t){const e=await Te.send(new Ln({TableName:le,KeyConditionExpression:"PK = :pk",ExpressionAttributeValues:{":pk":G.savings.pk(t)}}));return!e.Items||e.Items.length===0?[]:e.Items.map(n=>{const r=n;return{type:r.SK,targetAmount:r.targetAmount,currentAmount:r.currentAmount,createdAt:r.createdAt,updatedAt:r.updatedAt}})}async function np(t,e){const n=ht(),r={type:e.type,targetAmount:e.targetAmount,currentAmount:0,createdAt:n,updatedAt:n};return await Te.send(new Cs({TableName:le,Item:{PK:G.savings.pk(t),SK:G.savings.sk(e.type),targetAmount:r.targetAmount,currentAmount:r.currentAmount,createdAt:r.createdAt,updatedAt:r.updatedAt},ConditionExpression:"attribute_not_exists(PK)"})),r}async function rp(t,e){await Te.send(new Xa({TableName:le,Key:{PK:G.savings.pk(t),SK:G.savings.sk(e)}}))}async function sp(t,e){const n=await Te.send(new Ln({TableName:le,KeyConditionExpression:"PK = :pk",ExpressionAttributeValues:{":pk":G.savingsTransaction.pk(t,e)}}));return!n.Items||n.Items.length===0?[]:n.Items.map(r=>{const s=r;return{id:s.SK,amount:s.amount,description:s.description,date:s.date,createdAt:s.createdAt}})}async function ip(t,e){const n=ht(),r=Zi(),s={id:r,amount:e.amount,description:e.description,date:e.date,createdAt:n},i=-e.amount;return await Te.send(new Fn({TransactItems:[{Put:{TableName:le,Item:{PK:G.savingsTransaction.pk(t,e.savingsType),SK:G.savingsTransaction.sk(r),amount:s.amount,description:s.description,date:s.date,createdAt:s.createdAt}}},{Update:{TableName:le,Key:{PK:G.savings.pk(t),SK:G.savings.sk(e.savingsType)},UpdateExpression:"SET currentAmount = currentAmount + :amount, updatedAt = :now",ExpressionAttributeValues:{":amount":e.amount,":now":n}}},{Update:{TableName:le,Key:{PK:G.balance.pk(t),SK:G.balance.sk()},UpdateExpression:"SET amount = amount + :delta, updatedAt = :now",ConditionExpression:"amount >= :required",ExpressionAttributeValues:{":delta":i,":now":n,":required":e.amount}}}]})),{transaction:s,balanceDelta:i}}async function ap(t,e,n){const r=ht(),s=n.amount;return await Te.send(new Fn({TransactItems:[{Delete:{TableName:le,Key:{PK:G.savingsTransaction.pk(t,e),SK:G.savingsTransaction.sk(n.id)}}},{Update:{TableName:le,Key:{PK:G.savings.pk(t),SK:G.savings.sk(e)},UpdateExpression:"SET currentAmount = currentAmount - :amount, updatedAt = :now",ExpressionAttributeValues:{":amount":n.amount,":now":r}}},{Update:{TableName:le,Key:{PK:G.balance.pk(t),SK:G.balance.sk()},UpdateExpression:"SET amount = amount + :delta, updatedAt = :now",ExpressionAttributeValues:{":delta":s,":now":r}}}]})),{balanceDelta:s}}async function op(t,e){T.userId=t,T.setCurrentDate(e);const n=sn(e);Ja(e),T.balance.loading=!0,T.budgets.loading=!0;try{await Promise.all([cp(),Ya(n)])}finally{T.balance.loading=!1,T.budgets.loading=!1}}async function cp(){const t=T.userId;if(!t)throw new Error("User not initialized");const e=await Wm(t);T.balance.set(e)}async function Ya(t){const e=T.userId;if(!e)throw new Error("User not initialized");const n=await Qm(e,t);T.budgets.setForMonth(t,n)}async function dp(t){try{T.budgets.loading=!0,await Ya(t)}finally{T.budgets.loading=!1}}async function lp(t){const e=T.userId;if(!e)throw new Error("User not initialized");const n=await Xm(e,t);T.budgets.add(n)}async function up(t,e){const n=T.userId;if(!n)throw new Error("User not initialized");const r=T.budgets.get(t,e);if(r&&r.actual>0)throw new Error("Cannot delete budget with transactions. Delete all transactions first.");await Ym(n,t,e),T.budgets.remove(t,e)}async function Ja(t){const e=T.userId;if(!e)throw new Error("User not initialized");try{T.transactions.loading=!0;const n=await Jm(e,t);T.transactions.setForDate(t,n)}finally{T.transactions.loading=!1}}async function fp(t){const e=T.userId;if(!e)throw new Error("User not initialized");const n=sn(t.date),r=T.budgets.get(n,t.category);if(!r)throw new Error(`Budget not found for category: ${t.category}`);if(!r.isIncome&&T.balance.amount<t.amount)throw new Error("Insufficient balance");const{transaction:s,balanceDelta:i}=await Zm(e,t,r);T.transactions.add(s),T.budgets.updateActual(n,t.category,t.amount),T.balance.update(i)}async function hp(t,e){const n=T.userId;if(!n)throw new Error("User not initialized");const s=T.transactions.getByDate(t).find(d=>d.id===e);if(!s)throw new Error("Transaction not found in store");const i=sn(t),a=T.budgets.get(i,s.category);if(!a)throw new Error(`Budget not found for category: ${s.category}`);const{balanceDelta:o}=await ep(n,s,a);T.transactions.remove(t,e),T.budgets.updateActual(i,s.category,-s.amount),T.balance.update(o)}async function mp(){const t=T.userId;if(!t)throw new Error("User not initialized");try{T.savings.loading=!0;const e=await tp(t);T.savings.setGoals(e)}finally{T.savings.loading=!1}}async function pp(t){const e=T.userId;if(!e)throw new Error("User not initialized");const n=await np(e,t);T.savings.addGoal(n)}async function gp(t){const e=T.userId;if(!e)throw new Error("User not initialized");const n=T.savings.getGoal(t);if(n&&n.currentAmount>0)throw new Error("Cannot delete savings goal with transactions. Delete all transactions first.");await rp(e,t),T.savings.removeGoal(t)}async function bp(t){const e=T.userId;if(!e)throw new Error("User not initialized");try{T.savings.loading=!0;const n=await sp(e,t);T.savings.setTransactions(t,n)}finally{T.savings.loading=!1}}async function yp(t){const e=T.userId;if(!e)throw new Error("User not initialized");if(T.balance.amount<t.amount)throw new Error("Insufficient balance");const{transaction:n,balanceDelta:r}=await ip(e,t);T.savings.addTransaction(t.savingsType,n),T.savings.updateGoalAmount(t.savingsType,t.amount),T.balance.update(r)}async function vp(t,e){const n=T.userId;if(!n)throw new Error("User not initialized");const s=T.savings.getTransactions(t).find(a=>a.id===e);if(!s)throw new Error("Savings transaction not found in store");const{balanceDelta:i}=await ap(n,t,s);T.savings.removeTransaction(t,e),T.savings.updateGoalAmount(t,-s.amount),T.balance.update(i)}function wp(t,e){e.onMonthChange(nc(e.month))}function xp(t,e){e.onMonthChange(tc(e.month))}var Ep=P('<div class="px-4 py-3 flex items-center justify-between bg-base-100"><button class="btn btn-sm btn-ghost btn-square"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"></path></svg></button> <h2 class="text-base font-semibold"> </h2> <button class="btn btn-sm btn-ghost btn-square"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"></path></svg></button></div>');function Sp(t,e){me(e,!0);const n=z(()=>rc(e.month));var r=Ep(),s=p(r);s.__click=[wp,e];var i=x(s,2),a=p(i,!0);m(i);var o=x(i,2);o.__click=[xp,e],m(r),ee(()=>F(a,l(n))),R(t,r),pe()}Ee(["click"]);var _p=P('<div class="px-4 py-3 bg-base-300"><div class="bg-base-100 rounded-2xl p-4 shadow-sm"><div class="flex items-start justify-between mb-4"><div><p class="text-xs text-base-content/60 mb-1">Bank Balance</p> <p> </p></div> <div> </div></div> <progress max="100"></progress> <div class="flex justify-between text-xs text-base-content/60"><span> </span> <span> </span></div></div></div>');function Ap(t,e){me(e,!0);const n=z(()=>T.balance.amount),r=z(()=>T.budgets.totalBudget),s=z(()=>T.budgets.totalSpent),i=z(()=>l(r)>0?Math.round(l(s)/l(r)*100):0),a=z(()=>l(i)>100),o=z(()=>Math.min(l(i),100));var d=_p(),c=p(d),f=p(c),u=p(f),h=x(p(u),2);let g;var y=p(h);m(h),m(u);var v=x(u,2);let b;var _=p(v);m(v),m(f);var w=x(f,2);let A;var C=x(w,2),I=p(C),N=p(I);m(I);var B=x(I,2),j=p(B);m(B),m(C),m(c),m(d),ee((O,Z,te,q,V,se)=>{g=ye(h,1,"text-2xl font-bold tabular-nums",null,g,O),F(y,`â‚¹${Z??""}`),b=ye(v,1,"badge font-semibold",null,b,te),F(_,`${l(i)??""}% used`),$o(w,l(o)),A=ye(w,1,"progress w-full h-2.5 mb-2",null,A,q),F(N,`â‚¹${V??""} spent`),F(j,`â‚¹${se??""} total`)},[()=>({"text-error":l(n)<0}),()=>l(n).toLocaleString("en-IN",{minimumFractionDigits:2}),()=>({"badge-error":l(a),"badge-success":!l(a)&&l(i)<80,"badge-warning":!l(a)&&l(i)>=80}),()=>({"progress-error":l(a),"progress-success":!l(a)&&l(i)<80,"progress-warning":!l(a)&&l(i)>=80}),()=>l(s).toLocaleString("en-IN"),()=>l(r).toLocaleString("en-IN")]),R(t,d),pe()}var Ip=P('<button class="w-full relative h-12 rounded-lg overflow-hidden bg-base-100 font-medium active:scale-[0.99] transition-transform"><div></div> <div class="relative h-full px-3 flex items-center justify-between"><div class="flex items-center gap-2"><span class="w-8 h-8 flex items-center justify-center rounded-full bg-base-100 text-lg flex-shrink-0"> </span> <span class="font-medium text-sm"> </span></div> <div class="flex items-center gap-3"><span class="text-sm tabular-nums"> <span class="text-base-content/50"> </span></span></div></div></button>');function Cp(t,e){me(e,!0),It(e,"icon",3,"ðŸ’°");const n=z(()=>e.budget.expected>0?Math.min(e.budget.actual/e.budget.expected*100,100):0),r=z(()=>!e.budget.isIncome&&e.budget.actual>e.budget.expected),s=z(()=>e.budget.isIncome?"bg-success":l(r)?"bg-error":e.budget.actual/e.budget.expected>.6?"bg-warning":"bg-primary");var i=Ip();i.__click=function(...w){e.onclick?.apply(this,w)};var a=p(i),o=x(a,2),d=p(o),c=p(d),f=p(c,!0);m(c);var u=x(c,2),h=p(u,!0);m(u),m(d);var g=x(d,2),y=p(g),v=p(y),b=x(v),_=p(b);m(b),m(y),m(g),m(o),m(i),ee((w,A,C)=>{ye(a,1,`absolute inset-y-0 left-0 ${l(s)??""} opacity-25`),rn(a,`width: ${l(n)??""}%`),F(f,w),F(h,e.budget.category),F(v,`â‚¹${A??""} `),F(_,`/ â‚¹${C??""}`)},[()=>ta(e.budget.category),()=>e.budget.actual.toLocaleString("en-IN"),()=>e.budget.expected.toLocaleString("en-IN")]),R(t,i),pe()}Ee(["click"]);var Tp=(t,e)=>E(e,"expense"),Rp=(t,e)=>E(e,"income"),kp=P('<div class="fixed flex flex-col inset-0 z-50 items-center justify-center bg-black/70 gap-3"><span class="text-sm">Loading current budget...</span> <span class="loading loading-infinity loading-lg text-primary"></span></div>'),Mp=P('<div class="space-y-2"></div>'),Np=P('<div class="bg-base-100 rounded-xl p-8 text-center"><div class="text-4xl mb-3"> </div> <p class="text-base-content/60 text-sm mb-1"> </p> <p class="text-xs text-base-content/40">Tap "+ Budget" to create one</p></div>'),Pp=P('<div class="flex-1 overflow-y-auto pb-24"><div class="px-4 pb-3"><div class="bg-base-100 rounded-lg p-1 flex"><button>Expenses</button> <button>Income</button></div></div> <div class="px-4"><!></div></div>');function Op(t,e){me(e,!0);let n=It(e,"loading",3,!1),r=U("expense");const s=z(()=>e.budgets.filter(y=>l(r)==="income"?y.isIncome:!y.isIncome));var i=Pp(),a=p(i),o=p(a),d=p(o);d.__click=[Tp,r];var c=x(d,2);c.__click=[Rp,r],m(o),m(a);var f=x(a,2),u=p(f);{var h=y=>{var v=kp();R(y,v)},g=y=>{var v=ft(),b=Ce(v);{var _=A=>{var C=Mp();Pn(C,21,()=>l(s),I=>I.category,(I,N)=>{Cp(I,{get budget(){return l(N)},onclick:()=>e.onBudgetClick(l(N))})}),m(C),R(A,C)},w=A=>{var C=Np(),I=p(C),N=p(I,!0);m(I);var B=x(I,2),j=p(B);m(B),et(2),m(C),ee(()=>{F(N,l(r)==="income"?"ðŸ’°":"ðŸ“Š"),F(j,`No ${l(r)??""} budgets yet`)}),R(A,C)};X(b,A=>{l(s).length>0?A(_):A(w,!1)},!0)}R(y,v)};X(u,y=>{n()?y(h):y(g,!1)})}m(f),m(i),ee(()=>{ye(d,1,`flex-1 py-2 text-sm font-medium rounded-md transition-colors
                       ${l(r)==="expense"?"bg-primary text-primary-content":"text-base-content/60"}`),ye(c,1,`flex-1 py-2 text-sm font-medium rounded-md transition-colors
                       ${l(r)==="income"?"bg-success text-success-content":"text-base-content/60"}`)}),R(t,i),pe()}Ee(["click"]);function Fi(t,e,n){e(),n.onClose()}var Dp=P('<div class="alert alert-error mb-4"><span> </span></div>'),Bp=P('<span class="loading loading-spinner loading-sm"></span>'),Lp=P('<dialog><div class="modal-box"><h3 class="font-bold text-lg mb-4">Add Budget</h3> <form><!> <div class="form-control mb-3"><label class="label" for="category"><span class="label-text">Category</span></label> <input id="category" type="text" class="input input-bordered" placeholder="e.g., Groceries, Rent, Salary"/></div> <div class="form-control mb-3"><label class="label" for="expected"><span class="label-text">Expected Amount (â‚¹)</span></label> <input id="expected" type="number" class="input input-bordered" placeholder="0" min="1"/></div> <div class="form-control mb-4"><label class="label cursor-pointer justify-start gap-3"><input type="checkbox" class="checkbox checkbox-success"/> <span class="label-text">This is income</span></label></div> <div class="modal-action"><button type="button" class="btn btn-ghost">Cancel</button> <button type="submit" class="btn btn-primary"><!> Add Budget</button></div></form></div> <form method="dialog" class="modal-backdrop"><button>close</button></form></dialog>');function Fp(t,e){me(e,!0);let n=U(""),r=U(null),s=U(!1),i=U(!1),a=U("");function o(){E(n,""),E(r,null),E(s,!1),E(a,"")}async function d(V){if(V.preventDefault(),!l(n).trim()){E(a,"Category is required");return}if(!l(r)||l(r)<=0){E(a,"Amount must be greater than 0");return}E(i,!0),E(a,"");try{await e.onSubmit({category:l(n).trim(),month:e.month,expected:l(r),isIncome:l(s)}),o(),e.onClose()}catch(se){E(a,se instanceof Error?se.message:"Failed to create budget",!0)}finally{E(i,!1)}}var c=Lp();let f;var u=p(c),h=x(p(u),2),g=p(h);{var y=V=>{var se=Dp(),ve=p(se),Ae=p(ve,!0);m(ve),m(se),ee(()=>F(Ae,l(a))),R(V,se)};X(g,V=>{l(a)&&V(y)})}var v=x(g,2),b=x(p(v),2);Ne(b),m(v);var _=x(v,2),w=x(p(_),2);Ne(w),m(_);var A=x(_,2),C=p(A),I=p(C);Ne(I),et(2),m(C),m(A);var N=x(A,2),B=p(N);B.__click=[Fi,o,e];var j=x(B,2),O=p(j);{var Z=V=>{var se=Bp();R(V,se)};X(O,V=>{l(i)&&V(Z)})}et(),m(j),m(N),m(h),m(u);var te=x(u,2),q=p(te);q.__click=[Fi,o,e],m(te),m(c),ee(V=>{f=ye(c,1,"modal",null,f,V),b.disabled=l(i),w.disabled=l(i),I.disabled=l(i),B.disabled=l(i),j.disabled=l(i)},[()=>({"modal-open":e.open})]),Tr("submit",h,d),Fe(b,()=>l(n),V=>E(n,V)),Fe(w,()=>l(r),V=>E(r,V)),Ho(I,()=>l(s),V=>E(s,V)),R(t,c),pe()}Ee(["click"]);async function Up(t,e,n){const s=t.target.files?.[0];if(s){if("BarcodeDetector"in window)try{const i=await createImageBitmap(s),o=await new BarcodeDetector({formats:["qr_code"]}).detect(i);if(o.length>0){e(o[0].rawValue);return}}catch(i){console.error("File scan error:",i)}E(n,"Could not read QR from image.")}}var zp=P('<div class="absolute bottom-4 left-4 right-4"><div class="alert alert-error"><span> </span></div></div>'),jp=P('<div class="fixed inset-0 z-50 bg-black flex flex-col"><div class="flex-shrink-0 p-4 flex justify-between items-center bg-black/80"><span class="text-white font-medium">Scan UPI QR Code</span> <button class="btn btn-ghost btn-sm btn-circle text-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 relative overflow-hidden"><video class="absolute inset-0 w-full h-full object-cover" playsinline=""></video> <canvas class="hidden"></canvas> <div class="absolute inset-0 flex items-center justify-center"><div class="w-64 h-64 border-2 border-white/50 rounded-2xl relative"><div class="absolute -top-1 -left-1 w-8 h-8 border-t-4 border-l-4 border-primary rounded-tl-xl"></div> <div class="absolute -top-1 -right-1 w-8 h-8 border-t-4 border-r-4 border-primary rounded-tr-xl"></div> <div class="absolute -bottom-1 -left-1 w-8 h-8 border-b-4 border-l-4 border-primary rounded-bl-xl"></div> <div class="absolute -bottom-1 -right-1 w-8 h-8 border-b-4 border-r-4 border-primary rounded-br-xl"></div></div></div> <!></div> <div class="flex-shrink-0 p-4 bg-black/80"><p class="text-white/60 text-center text-sm mb-3">Position the QR code within the frame</p> <label class="btn btn-ghost btn-sm w-full text-white/80"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> Upload QR Image <input type="file" accept="image/*" class="hidden"/></label></div></div>',2);function $p(t,e){me(e,!0);let n,r,s=null,i=U(!0),a=U("");ji(async()=>{try{s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),n.srcObject=s,await n.play(),requestAnimationFrame(o)}catch(I){E(a,"Camera access denied. Please allow camera permissions."),console.error("Camera error:",I)}}),io(()=>{E(i,!1),s&&s.getTracks().forEach(I=>I.stop())});async function o(){if(!l(i)||!n||n.readyState!==n.HAVE_ENOUGH_DATA){l(i)&&requestAnimationFrame(o);return}const I=r.getContext("2d");if(!I)return;r.width=n.videoWidth,r.height=n.videoHeight,I.drawImage(n,0,0);const N=I.getImageData(0,0,r.width,r.height);if("BarcodeDetector"in window)try{const j=await new BarcodeDetector({formats:["qr_code"]}).detect(N);if(j.length>0){const O=j[0].rawValue;d(O);return}}catch{}l(i)&&requestAnimationFrame(o)}function d(I){E(i,!1);try{if(I.startsWith("upi://")||I.startsWith("phonepe://")){const N=new URL(I),B=N.searchParams.get("pa")||"",j=N.searchParams.get("pn")||"";if(B){s&&s.getTracks().forEach(O=>O.stop()),e.onScan(B,decodeURIComponent(j));return}}E(a,"Invalid QR code. Please scan a UPI QR code."),E(i,!0),requestAnimationFrame(o)}catch{E(a,"Could not read QR code. Try again."),E(i,!0),requestAnimationFrame(o)}}function c(){E(i,!1),s&&s.getTracks().forEach(I=>I.stop()),e.onClose()}var f=jp(),u=p(f),h=x(p(u),2);h.__click=c,m(u);var g=x(u,2),y=p(g);y.muted=!0,br(y,I=>n=I,()=>n);var v=x(y,2);br(v,I=>r=I,()=>r);var b=x(v,4);{var _=I=>{var N=zp(),B=p(N),j=p(B),O=p(j,!0);m(j),m(B),m(N),ee(()=>F(O,l(a))),R(I,N)};X(b,I=>{l(a)&&I(_)})}m(g);var w=x(g,2),A=x(p(w),2),C=x(p(A),2);C.__change=[Up,d,a],m(A),m(w),m(f),R(t,f),pe()}Ee(["click","change"]);async function Vp(t,e,n,r,s,i,a,o,d){if(e()){E(n,!0),E(r,"");try{await s.onAddTransaction({amount:l(i),category:s.budget.category,description:l(a).trim(),date:l(o)}),d(),s.onBack()}catch(c){E(r,c instanceof Error?c.message:"Failed to create transaction",!0)}finally{E(n,!1)}}}function Hp(t,e,n){e()&&E(n,!0)}async function Gp(t,e,n,r){if(e.budget.actual>0){E(n,"Delete all transactions first");return}E(r,!0);try{await e.onDelete(e.budget),e.onBack()}catch(s){E(n,s instanceof Error?s.message:"Failed to delete",!0)}finally{E(r,!1)}}var qp=P('<div class="alert alert-error mb-3 py-2"><span class="text-sm"> </span></div>'),Kp=P('<span class="loading loading-spinner loading-sm"></span>'),Wp=P('<button type="button" class="btn btn-secondary w-full">ðŸ“· Add & Pay (Scan QR)</button> <button type="button" class="btn btn-outline w-full" title="Coming soon">ðŸ‘¤ Add & Pay (Saved Payee)</button>',1),Qp=P('<div class="mt-8 pt-4 border-t border-base-300"><button class="btn btn-ghost btn-sm text-error w-full">Delete Budget</button></div>'),Xp=P(`<!> <div class="h-screen flex flex-col bg-base-300"><header class="flex-shrink-0 bg-base-100/95 backdrop-blur-sm border-b border-base-300"><div class="px-4 py-3 flex items-center gap-3"><button class="btn btn-ghost btn-sm btn-circle"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg></button> <div><h1 class="text-lg font-bold"> </h1> <p class="text-xs text-base-content/60"> </p></div></div></header> <div class="flex-shrink-0 px-4 py-4 bg-base-100 border-b border-base-300"><div class="flex justify-between items-center mb-2"><span class="text-sm text-base-content/70"> </span> <span> </span></div> <div class="w-full h-3 bg-base-300 rounded-full overflow-hidden mb-3"><div></div></div> <div class="flex justify-between items-baseline"><span class="text-2xl font-bold"> </span> <span class="text-sm text-base-content/50"> </span></div> <p><!></p></div> <div class="flex-1 overflow-y-auto px-4 py-4"><h4 class="font-medium mb-3"> </h4> <!> <div class="form-control mb-3"><label class="label" for="amount"><span class="label-text">Amount (â‚¹)</span></label> <input id="amount" placeholder="0.00" step="0.01" min="0.01" required inputmode="decimal" type="number" class="input input-bordered"/></div> <div class="form-control mb-3"><label class="label" for="description"><span class="label-text">Description</span></label> <input id="description" type="text" class="input input-bordered" placeholder="What's this for?"/></div> <div class="form-control mb-6"><label class="label" for="date"><span class="label-text">Date</span></label> <input id="date" type="date" class="input input-bordered"/></div> <div class="space-y-3"><button type="button" class="btn btn-primary w-full"><!> </button> <!></div> <!></div></div>`,1);function Yp(t,e){me(e,!0);let n,r=U(null),s=U(""),i=U(ut(Ue())),a=U(!1),o=U(""),d=U(!1);const c=z(()=>e.budget.actual>e.budget.expected),f=z(()=>e.budget.expected>0?Math.min(e.budget.actual/e.budget.expected*100,100):0),u=z(()=>e.budget.isIncome?"bg-success":l(c)?"bg-error":e.budget.actual/e.budget.expected>.8?"bg-warning":"bg-primary");Nn(()=>{setTimeout(()=>n?.focus(),100)});function h(){E(r,null),E(s,""),E(i,Ue(),!0),E(o,"")}function g(){return!l(r)||l(r)<=0?(E(o,"Amount must be greater than 0"),!1):l(s).trim()?!0:(E(o,"Description is required"),!1)}async function y($,ie){E(d,!1),await v($,ie)}async function v($,ie){if(l(r)){E(a,!0),E(o,"");try{await e.onAddTransaction({amount:l(r),category:e.budget.category,description:l(s).trim()||ie||e.budget.category,date:l(i)});const ge=new URLSearchParams({pa:$,pn:ie||l(s)||e.budget.category,am:l(r).toString(),cu:"INR",tn:l(s)||e.budget.category});h(),window.location.href=`upi://pay?${ge.toString()}`}catch(ge){E(o,ge instanceof Error?ge.message:"Failed to create transaction",!0)}finally{E(a,!1)}}}var b=Xp(),_=Ce(b);{var w=$=>{$p($,{onScan:y,onClose:()=>E(d,!1)})};X(_,$=>{l(d)&&$(w)})}var A=x(_,2),C=p(A),I=p(C),N=p(I);N.__click=function(...$){e.onBack?.apply(this,$)};var B=x(N,2),j=p(B),O=p(j,!0);m(j);var Z=x(j,2),te=p(Z);m(Z),m(B),m(I),m(C);var q=x(C,2),V=p(q),se=p(V),ve=p(se,!0);m(se);var Ae=x(se,2);let qe;var bt=p(Ae,!0);m(Ae),m(V);var Ke=x(V,2),We=p(Ke);m(Ke);var Qe=x(Ke,2),rt=p(Qe),Ut=p(rt);m(rt);var yt=x(rt,2),vt=p(yt);m(yt),m(Qe);var Y=x(Qe,2);let ue;var Oe=p(Y);{var ze=$=>{var ie=at();ee(ge=>F(ie,`â‚¹${ge??""} remaining to earn`),[()=>e.budget.remaining.toLocaleString("en-IN")]),R($,ie)},zt=$=>{var ie=ft(),ge=Ce(ie);{var st=wt=>{var Vt=at();ee(Kn=>F(Vt,`â‚¹${Kn??""} over budget`),[()=>Math.abs(e.budget.remaining).toLocaleString("en-IN")]),R(wt,Vt)},qn=wt=>{var Vt=at();ee(Kn=>F(Vt,`â‚¹${Kn??""} remaining`),[()=>e.budget.remaining.toLocaleString("en-IN")]),R(wt,Vt)};X(ge,wt=>{l(c)?wt(st):wt(qn,!1)},!0)}R($,ie)};X(Oe,$=>{e.budget.isIncome?$(ze):$(zt,!1)})}m(Y),m(q);var ke=x(q,2),De=p(ke),J=p(De);m(De);var ae=x(De,2);{var jt=$=>{var ie=qp(),ge=p(ie),st=p(ge,!0);m(ge),m(ie),ee(()=>F(st,l(o))),R($,ie)};X(ae,$=>{l(o)&&$(jt)})}var zn=x(ae,2),fn=x(p(zn),2);Ne(fn),br(fn,$=>n=$,()=>n),m(zn);var jn=x(zn,2),$n=x(p(jn),2);Ne($n),m(jn);var Vn=x(jn,2),Hn=x(p(Vn),2);Ne(Hn),m(Vn);var Gn=x(Vn,2),$t=p(Gn);$t.__click=[Vp,g,a,o,e,r,s,i,h];var Rs=p($t);{var Za=$=>{var ie=Kp();R($,ie)};X(Rs,$=>{l(a)&&$(Za)})}var eo=x(Rs);m($t);var to=x($t,2);{var no=$=>{var ie=Wp(),ge=Ce(ie);ge.__click=[Hp,g,d];var st=x(ge,2);st.disabled=!0,ee(()=>ge.disabled=l(a)),R($,ie)};X(to,$=>{e.budget.isIncome||$(no)})}m(Gn);var ro=x(Gn,2);{var so=$=>{var ie=Qp(),ge=p(ie);ge.__click=[Gp,e,o,a],m(ie),ee(()=>ge.disabled=l(a)),R($,ie)};X(ro,$=>{e.budget.actual===0&&$(so)})}m(ke),m(A),ee(($,ie,ge,st,qn)=>{F(O,e.budget.category),F(te,`${e.budget.isIncome?"Income":"Expense"} Budget`),F(ve,e.budget.isIncome?"Earned":"Spent"),qe=ye(Ae,1,"text-sm font-medium",null,qe,$),F(bt,ie),ye(We,1,`h-full ${l(u)??""} transition-all duration-300`),rn(We,`width: ${l(f)??""}%`),F(Ut,`â‚¹${ge??""}`),F(vt,`of â‚¹${st??""}`),ue=ye(Y,1,"text-xs text-base-content/50 mt-1",null,ue,qn),F(J,`Add ${e.budget.isIncome?"Income":"Expense"}`),fn.disabled=l(a),$n.disabled=l(a),Hn.disabled=l(a),$t.disabled=l(a),F(eo,` ðŸ’¾ Just Add ${e.budget.isIncome?"Income":"Expense"}`)},[()=>({"text-error":l(c)&&!e.budget.isIncome}),()=>l(c)&&!e.budget.isIncome?"Over budget!":`${l(f).toFixed(0)}%`,()=>e.budget.actual.toLocaleString("en-IN"),()=>e.budget.expected.toLocaleString("en-IN"),()=>({"text-error":l(c)&&!e.budget.isIncome})]),Fe(fn,()=>l(r),$=>E(r,$)),Fe($n,()=>l(s),$=>E(s,$)),Fe(Hn,()=>l(i),$=>E(i,$)),R(t,b),pe()}Ee(["click"]);function Jp(t,e){E(e,!0)}var Zp=P('<div class="fixed flex flex-col inset-0 z-50 items-center justify-center bg-black/70 gap-3"><span class="text-sm">Loading current budget...</span> <span class="loading loading-infinity loading-lg text-primary"></span></div>'),eg=P('<!> <div class="h-screen flex flex-col bg-base-300"><div class="flex-shrink-0"><header class="bg-base-100/95 backdrop-blur-sm border-b border-base-300"><div class="px-4 py-3 flex items-center justify-between"><a class="text-lg font-bold flex items-center gap-2" href="/"><span>ðŸ“…</span> <span>Spendle</span></a> <button class="btn btn-sm btn-primary gap-1"><span class="text-lg leading-none">+</span> <span>Budget</span></button></div></header> <!> <!> <div class="px-4 pt-2 pb-3 bg-base-300"><h3 class="text-sm font-medium text-base-content/70">Categories</h3></div></div> <!> <!></div>',1);function tg(t,e){me(e,!0);let n=U("list"),r=U(null),s=U(!1);const i=z(()=>T.currentMonth),a=z(()=>T.budgets.loading),o=z(()=>T.budgets.currentWithRemaining);async function d(w){T.setCurrentMonth(w),await dp(w)}function c(w){E(r,w,!0),E(n,"detail")}function f(){E(n,"list"),E(r,null)}async function u(w){await lp(w)}async function h(w){await fp(w)}async function g(w){await up(w.month,w.category)}var y=ft(),v=Ce(y);{var b=w=>{Yp(w,{get budget(){return l(r)},onBack:f,onAddTransaction:h,onDelete:g})},_=w=>{var A=eg(),C=Ce(A);{var I=ve=>{var Ae=Zp();R(ve,Ae)};X(C,ve=>{l(a)&&ve(I)})}var N=x(C,2),B=p(N),j=p(B),O=p(j),Z=x(p(O),2);Z.__click=[Jp,s],m(O),m(j);var te=x(j,2);Sp(te,{get month(){return l(i)},onMonthChange:d});var q=x(te,2);Ap(q,{}),et(2),m(B);var V=x(B,2);Op(V,{get budgets(){return l(o)},get loading(){return l(a)},onBudgetClick:c});var se=x(V,2);Fp(se,{get open(){return l(s)},get month(){return l(i)},onClose:()=>E(s,!1),onSubmit:u}),m(N),R(w,A)};X(v,w=>{l(n)==="detail"&&l(r)?w(b):w(_,!1)})}R(t,y),pe()}Ee(["click"]);function ng(t,e){e.onDateChange(ic(e.date))}function rg(t,e){e.onDateChange(sc(e.date))}function sg(t,e){e.onDateChange(Ue())}function ig(t,e,n){e.onDateChange(Ue(new Date(l(n))))}var ag=P('<div class="p-4"><div class="flex justify-between items-center mb-3"><h1 class="text-lg font-bold">Daily Transactions</h1> <button class="btn btn-xs btn-ghost">Today</button></div> <div class="flex items-center gap-2"><button class="btn btn-circle btn-sm btn-ghost"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <div class="flex-1"><input type="date" class="input input-bordered w-full"/></div> <button class="btn btn-circle btn-sm btn-ghost"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div></div>');function og(t,e){me(e,!0);const n=Ue();let r=U(ut(e.date));Nn(()=>{E(r,e.date,!0)});var s=ag(),i=p(s),a=x(p(i),2);a.__click=[sg,e],m(i);var o=x(i,2),d=p(o);d.__click=[ng,e];var c=x(d,2),f=p(c);Ne(f),f.__change=[ig,e,r],m(c);var u=x(c,2);u.__click=[rg,e],m(o),m(s),ee(()=>{a.disabled=e.date==n,u.disabled=e.date>=n}),Fe(f,()=>l(r),h=>E(r,h)),R(t,s),pe()}Ee(["click","change"]);var cg=(t,e)=>e.onDelete(e.transaction),dg=P('<div class="flex items-center justify-between bg-base-100 rounded-xl p-3"><div class="flex items-center gap-3"><span class="text-2xl"> </span> <div class="me-1"><p class="font-medium text-sm"> </p> <p class="text-xs text-base-content/60"> </p></div></div> <div class="flex items-center gap-3"><div class="text-right"><p class="font-semibold text-sm tracking-wider"> </p> <p class="text-xs text-base-content/60"> </p></div> <button class="btn btn-ghost btn-sm btn-circle"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div>');function lg(t,e){me(e,!0);let n=It(e,"icon",3,"ðŸ’°");const r=z(()=>ac(e.transaction.createdAt));var s=dg(),i=p(s),a=p(i),o=p(a,!0);m(a);var d=x(a,2),c=p(d),f=p(c,!0);m(c);var u=x(c,2),h=p(u,!0);m(u),m(d),m(i);var g=x(i,2),y=p(g),v=p(y),b=p(v);m(v);var _=x(v,2),w=p(_,!0);m(_),m(y);var A=x(y,2);A.__click=[cg,e],m(g),m(s),ee(C=>{F(o,n()),F(f,e.transaction.category),F(h,e.transaction.description),F(b,`â‚¹${C??""}`),F(w,l(r))},[()=>e.transaction.amount.toLocaleString()]),R(t,s),pe()}Ee(["click"]);var ug=P('<div class="flex justify-center py-8"><span class="loading loading-spinner loading-lg"></span></div>'),fg=P('<div class="card bg-base-100"><div class="card-body text-center py-12"><div class="text-6xl mb-4 opacity-20">ðŸ“­</div> <p class="text-base-content/60">No transactions for selected date</p> <p class="text-xs text-base-content/40 mt-1">Add a transaction to get started</p></div></div>'),hg=P('<div class="flex flex-col gap-2"></div>'),mg=P('<div class="flex justify-between items-center pb-3"><span class="text-base-content/70">Total Spent</span> <span class="text-xl font-bold text-primary"> </span></div> <!>',1),pg=P('<div class="p-4 pb-24"><!></div>');function gg(t,e){me(e,!0);let n=It(e,"loading",3,!1);const r=z(()=>T.transactions.currentTotal);var s=pg(),i=p(s);{var a=d=>{var c=ug();R(d,c)},o=d=>{var c=mg(),f=Ce(c),u=x(p(f),2),h=p(u);m(u),m(f);var g=x(f,2);{var y=b=>{var _=fg();R(b,_)},v=b=>{var _=hg();Pn(_,21,()=>e.transactions,w=>w.id,(w,A)=>{{let C=z(()=>ta(l(A).category));lg(w,{get transaction(){return l(A)},get icon(){return l(C)},get onDelete(){return e.onDelete}})}}),m(_),R(b,_)};X(g,b=>{e.transactions.length===0?b(y):b(v,!1)})}ee(b=>F(h,`â‚¹${b??""}`),[()=>l(r).toLocaleString()]),R(d,c)};X(i,d=>{n()?d(a):d(o,!1)})}m(s),R(t,s),pe()}var bg=P('<div class="min-h-screen bg-base-300"><div class="sticky top-0 z-10 bg-base-100 shadow-md"><!></div> <!></div>');function yg(t,e){me(e,!0);const n=z(()=>T.currentDate),r=z(()=>T.transactions.loading),s=z(()=>T.transactions.current);async function i(u){T.setCurrentDate(u),await Ja(u)}async function a(u){confirm(`Delete "${u.description}"?`)&&await hp(u.date,u.id)}var o=bg(),d=p(o),c=p(d);og(c,{get date(){return l(n)},onDateChange:i}),m(d);var f=x(d,2);gg(f,{get transactions(){return l(s)},get loading(){return l(r)},onDelete:a}),m(o),R(t,o),pe()}var vg=P('â‚¹â€¢â€¢â€¢â€¢ <span class="text-base-content/50">/ â‚¹â€¢â€¢â€¢â€¢</span>',1),wg=P(' <span class="text-base-content/50"> </span>',1),xg=P('<button class="w-full relative h-16 rounded-lg overflow-hidden bg-base-100 font-medium active:scale-[0.99] transition-transform"><div></div> <div class="relative h-full p-2 flex flex-col "><div class="flex flex-row items-center gap-2"><div class="size-10 flex items-center justify-center rounded-full bg-base-100 text-lg flex-shrink-0">ðŸŽ¯</div> <div class="flex flex-col gap-2"><div class="text-left font-medium text-sm"> </div> <div class="flex items-center"><span class="text-xs tabular-nums"><!></span></div></div></div></div></button>');function Eg(t,e){me(e,!0);const n=z(()=>e.goal.progress>=100?"bg-success":e.goal.progress>=75?"bg-info":e.goal.progress>=50?"bg-warning":"bg-primary");var r=xg();r.__click=function(...v){e.onclick?.apply(this,v)};var s=p(r),i=x(s,2),a=p(i),o=x(p(a),2),d=p(o),c=p(d,!0);m(d);var f=x(d,2),u=p(f),h=p(u);{var g=v=>{var b=vg();et(),R(v,b)},y=v=>{var b=wg(),_=Ce(b),w=x(_),A=p(w);m(w),ee((C,I)=>{F(_,`â‚¹${C??""} `),F(A,`/ â‚¹${I??""}`)},[()=>e.goal.currentAmount.toLocaleString("en-IN"),()=>e.goal.targetAmount.toLocaleString("en-IN")]),R(v,b)};X(h,v=>{e.privacyMode?v(g):v(y,!1)})}m(u),m(f),m(o),m(a),m(i),m(r),ee(v=>{ye(s,1,`absolute inset-y-0 left-0 ${l(n)??""} opacity-25`),rn(s,`width: ${v??""}%`),F(c,e.goal.type)},[()=>Math.min(e.goal.progress,100)]),R(t,r),pe()}Ee(["click"]);var Sg=P('<div class="flex flex-col items-center justify-center py-12 text-base-content/50"><span class="text-4xl mb-3">ðŸŽ¯</span> <p class="text-sm">No savings goals yet</p> <p class="text-xs">Add your first goal to start saving!</p></div>'),_g=P('<div class="flex flex-col gap-2"></div>'),Ag=P('<div class="flex-1 overflow-y-auto px-4 pb-24"><!></div>');function Ig(t,e){me(e,!0);var n=Ag(),r=p(n);{var s=a=>{var o=Sg();R(a,o)},i=a=>{var o=_g();Pn(o,21,()=>e.goals,d=>d.type,(d,c)=>{Eg(d,{get goal(){return l(c)},get privacyMode(){return e.privacyMode},onclick:()=>e.onGoalClick(l(c))})}),m(o),R(a,o)};X(r,a=>{e.goals.length===0&&!e.loading?a(s):a(i,!1)})}m(n),R(t,n),pe()}function Ui(t,e,n){e(),n.onClose()}var Cg=P('<div class="alert alert-error mb-4"><span> </span></div>'),Tg=P('<span class="loading loading-spinner loading-sm"></span>'),Rg=P('<dialog><div class="modal-box"><h3 class="font-bold text-lg mb-4">Add Savings Goal</h3> <form><!> <div class="form-control mb-3"><label class="label" for="goal-type"><span class="label-text">Goal Name</span></label> <input id="goal-type" type="text" class="input input-bordered" placeholder="e.g., Emergency Fund, Vacation, New Car"/></div> <div class="form-control mb-4"><label class="label" for="target-amount"><span class="label-text">Target Amount (â‚¹)</span></label> <input id="target-amount" type="number" class="input input-bordered" placeholder="0" step="0.01" min="1"/></div> <div class="modal-action"><button type="button" class="btn btn-ghost">Cancel</button> <button type="submit" class="btn btn-primary"><!> Add Goal</button></div></form></div> <form method="dialog" class="modal-backdrop"><button>close</button></form></dialog>');function kg(t,e){me(e,!0);let n=U(""),r=U(null),s=U(!1),i=U("");function a(){E(n,""),E(r,null),E(i,"")}async function o(O){if(O.preventDefault(),!l(n).trim()){E(i,"Goal name is required");return}if(!l(r)||l(r)<=0){E(i,"Target amount must be greater than 0");return}E(s,!0),E(i,"");try{await e.onSubmit({type:l(n).trim(),targetAmount:l(r)}),a(),e.onClose()}catch(Z){E(i,Z instanceof Error?Z.message:"Failed to create savings goal",!0)}finally{E(s,!1)}}var d=Rg();let c;var f=p(d),u=x(p(f),2),h=p(u);{var g=O=>{var Z=Cg(),te=p(Z),q=p(te,!0);m(te),m(Z),ee(()=>F(q,l(i))),R(O,Z)};X(h,O=>{l(i)&&O(g)})}var y=x(h,2),v=x(p(y),2);Ne(v),m(y);var b=x(y,2),_=x(p(b),2);Ne(_),m(b);var w=x(b,2),A=p(w);A.__click=[Ui,a,e];var C=x(A,2),I=p(C);{var N=O=>{var Z=Tg();R(O,Z)};X(I,O=>{l(s)&&O(N)})}et(),m(C),m(w),m(u),m(f);var B=x(f,2),j=p(B);j.__click=[Ui,a,e],m(B),m(d),ee(O=>{c=ye(d,1,"modal",null,c,O),v.disabled=l(s),_.disabled=l(s),A.disabled=l(s),C.disabled=l(s)},[()=>({"modal-open":e.open})]),Tr("submit",u,o),Fe(v,()=>l(n),O=>E(n,O)),Fe(_,()=>l(r),O=>E(r,O)),R(t,d),pe()}Ee(["click"]);var Mg=P('<button class="btn btn-ghost btn-xs btn-circle text-error" title="Delete transaction">âœ•</button>'),Ng=P('<div class="flex items-center justify-between p-3 border-b border-base-300 last:border-0"><div class="flex items-center gap-3"><div class="flex flex-col"><span class="text-sm font-medium"> </span> <span class="text-xs text-base-content/50"> </span></div></div> <div class="flex items-center gap-2"><span class="text-sm font-medium text-success tabular-nums"> </span> <!></div></div>');function Pg(t,e){me(e,!0);const n=z(()=>new Date(e.transaction.date).toLocaleDateString("en-IN",{day:"numeric",month:"short"}));var r=Ng(),s=p(r),i=p(s),a=p(i),o=p(a,!0);m(a);var d=x(a,2),c=p(d,!0);m(d),m(i),m(s);var f=x(s,2),u=p(f),h=p(u);m(u);var g=x(u,2);{var y=v=>{var b=Mg();b.__click=function(..._){e.onDelete?.apply(this,_)},R(v,b)};X(g,v=>{e.onDelete&&v(y)})}m(f),m(r),ee(v=>{F(o,e.transaction.description||"Deposit"),F(c,l(n)),F(h,`+â‚¹${v??""}`)},[()=>e.transaction.amount.toLocaleString("en-IN")]),R(t,r),pe()}Ee(["click"]);function zi(t,e,n){e(),n.onClose()}var Og=P('<div class="alert alert-error mb-4"><span> </span></div>'),Dg=P('<span class="loading loading-spinner loading-sm"></span>'),Bg=P('<dialog><div class="modal-box"><h3 class="font-bold text-lg mb-4">Add Deposit</h3> <form><!> <div class="form-control mb-3"><label class="label" for="amount"><span class="label-text">Amount (â‚¹)</span></label> <input id="amount" type="number" class="input input-bordered" placeholder="0" step="0.01" min="1"/></div> <div class="form-control mb-3"><label class="label" for="description"><span class="label-text">Description (optional)</span></label> <input id="description" type="text" class="input input-bordered" placeholder="e.g., Monthly contribution"/></div> <div class="form-control mb-4"><label class="label" for="date"><span class="label-text">Date</span></label> <input id="date" type="date" class="input input-bordered"/></div> <div class="modal-action"><button type="button" class="btn btn-ghost">Cancel</button> <button type="submit" class="btn btn-primary"><!> Add Deposit</button></div></form></div> <form method="dialog" class="modal-backdrop"><button>close</button></form></dialog>');function Lg(t,e){me(e,!0);let n=U(null),r=U(""),s=U(ut(Ue())),i=U(!1),a=U("");function o(){E(n,null),E(r,""),E(s,Ue(),!0),E(a,"")}async function d(q){if(q.preventDefault(),!l(n)||l(n)<=0){E(a,"Amount must be greater than 0");return}E(i,!0),E(a,"");try{await e.onSubmit({savingsType:e.goalType,amount:l(n),description:l(r).trim(),date:l(s)}),o(),e.onClose()}catch(V){E(a,V instanceof Error?V.message:"Failed to add deposit",!0)}finally{E(i,!1)}}var c=Bg();let f;var u=p(c),h=x(p(u),2),g=p(h);{var y=q=>{var V=Og(),se=p(V),ve=p(se,!0);m(se),m(V),ee(()=>F(ve,l(a))),R(q,V)};X(g,q=>{l(a)&&q(y)})}var v=x(g,2),b=x(p(v),2);Ne(b),m(v);var _=x(v,2),w=x(p(_),2);Ne(w),m(_);var A=x(_,2),C=x(p(A),2);Ne(C),m(A);var I=x(A,2),N=p(I);N.__click=[zi,o,e];var B=x(N,2),j=p(B);{var O=q=>{var V=Dg();R(q,V)};X(j,q=>{l(i)&&q(O)})}et(),m(B),m(I),m(h),m(u);var Z=x(u,2),te=p(Z);te.__click=[zi,o,e],m(Z),m(c),ee(q=>{f=ye(c,1,"modal",null,f,q),b.disabled=l(i),w.disabled=l(i),C.disabled=l(i),N.disabled=l(i),B.disabled=l(i)},[()=>({"modal-open":e.open})]),Tr("submit",h,d),Fe(b,()=>l(n),q=>E(n,q)),Fe(w,()=>l(r),q=>E(r,q)),Fe(C,()=>l(s),q=>E(s,q)),R(t,c),pe()}Ee(["click"]);async function Fg(t,e){await gp(e.goal.type),e.onBack()}var Ug=(t,e)=>E(e,!0),zg=P('<p class="text-xs text-base-content/50 mt-1"> </p>'),jg=P('<p class="text-xs text-success mt-1">ðŸŽ‰ Goal achieved!</p>'),$g=P('<div class="flex justify-center py-8"><span class="loading loading-spinner loading-md"></span></div>'),Vg=P('<div class="flex flex-col items-center justify-center py-12 text-base-content/50"><span class="text-4xl mb-3">ðŸ’°</span> <p class="text-sm">No deposits yet</p> <p class="text-xs">Add your first deposit to start saving!</p></div>'),Hg=P('<div class="bg-base-100 rounded-lg divide-y divide-base-300"></div>'),Gg=P('<div class="mt-6 pt-4 border-t border-base-300"><button class="btn btn-ghost btn-sm text-error w-full">Delete Goal</button></div>'),qg=P('<div class="h-screen flex flex-col bg-base-300"><header class="flex-shrink-0 bg-base-100/95 backdrop-blur-sm border-b border-base-300"><div class="px-4 py-3 flex items-center justify-between"><div class="flex items-center gap-3"><button aria-label="back" class="btn btn-ghost btn-sm btn-circle"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg></button> <div class="flex items-center gap-2"><span class="text-xl">ðŸŽ¯</span> <span class="text-lg font-bold"> </span></div></div> <button class="btn btn-sm btn-primary gap-1"><span class="text-lg leading-none">+</span> <span>Deposit</span></button></div></header> <div class="flex-shrink-0 px-4 py-4 bg-base-100 border-b border-base-300"><div class="flex justify-between items-center mb-2"><span class="text-sm text-base-content/70">Progress</span> <span class="text-sm font-medium"> </span></div> <div class="w-full h-3 bg-base-300 rounded-full overflow-hidden mb-3"><div></div></div> <div class="flex justify-between items-baseline"><span class="text-2xl font-bold"> </span> <span class="text-sm text-base-content/50"> </span></div> <!></div> <div class="flex-shrink-0 px-4 pt-3 pb-2 bg-base-300 flex justify-between items-center"><h3 class="text-sm font-medium text-base-content/70">Deposits</h3> <span class="text-xs text-base-content/50"> </span></div> <div class="flex-1 overflow-y-auto px-4 pb-24"><!> <!></div> <!></div>');function Kg(t,e){me(e,!0);let n=U(!1);const r=z(()=>T.savings.loading),s=z(()=>T.savings.currentTransactions),i=z(()=>T.savings.goalsWithProgress.find(Y=>Y.type===e.goal.type)??e.goal);Nn(()=>{T.savings.currentGoalType=e.goal.type,bp(e.goal.type)});async function a(Y){await yp(Y)}async function o(Y){await vp(e.goal.type,Y.id)}const d=z(()=>l(i).progress>=100?"bg-success":l(i).progress>=75?"bg-info":l(i).progress>=50?"bg-warning":"bg-primary");var c=qg(),f=p(c),u=p(f),h=p(u),g=p(h);g.__click=function(...Y){e.onBack?.apply(this,Y)};var y=x(g,2),v=x(p(y),2),b=p(v,!0);m(v),m(y),m(h);var _=x(h,2);_.__click=[Ug,n],m(u),m(f);var w=x(f,2),A=p(w),C=x(p(A),2),I=p(C);m(C),m(A);var N=x(A,2),B=p(N);m(N);var j=x(N,2),O=p(j),Z=p(O);m(O);var te=x(O,2),q=p(te);m(te),m(j);var V=x(j,2);{var se=Y=>{var ue=zg(),Oe=p(ue);m(ue),ee(ze=>F(Oe,`â‚¹${ze??""} remaining`),[()=>l(i).remaining.toLocaleString("en-IN")]),R(Y,ue)},ve=Y=>{var ue=jg();R(Y,ue)};X(V,Y=>{l(i).remaining>0?Y(se):Y(ve,!1)})}m(w);var Ae=x(w,2),qe=x(p(Ae),2),bt=p(qe);m(qe),m(Ae);var Ke=x(Ae,2),We=p(Ke);{var Qe=Y=>{var ue=$g();R(Y,ue)},rt=Y=>{var ue=ft(),Oe=Ce(ue);{var ze=ke=>{var De=Vg();R(ke,De)},zt=ke=>{var De=Hg();Pn(De,21,()=>l(s),J=>J.id,(J,ae)=>{Pg(J,{get transaction(){return l(ae)},onDelete:()=>o(l(ae))})}),m(De),R(ke,De)};X(Oe,ke=>{l(s).length===0?ke(ze):ke(zt,!1)},!0)}R(Y,ue)};X(We,Y=>{l(r)?Y(Qe):Y(rt,!1)})}var Ut=x(We,2);{var yt=Y=>{var ue=Gg(),Oe=p(ue);Oe.__click=[Fg,e],m(ue),R(Y,ue)};X(Ut,Y=>{l(i).currentAmount===0&&Y(yt)})}m(Ke);var vt=x(Ke,2);Lg(vt,{get open(){return l(n)},get goalType(){return e.goal.type},onClose:()=>E(n,!1),onSubmit:a}),m(c),ee((Y,ue,Oe,ze)=>{F(b,l(i).type),F(I,`${Y??""}%`),ye(B,1,`h-full ${l(d)??""} transition-all duration-300`),rn(B,`width: ${ue??""}%`),F(Z,`â‚¹${Oe??""}`),F(q,`of â‚¹${ze??""}`),F(bt,`${l(s).length??""} transactions`)},[()=>l(i).progress.toFixed(0),()=>Math.min(l(i).progress,100),()=>l(i).currentAmount.toLocaleString("en-IN"),()=>l(i).targetAmount.toLocaleString("en-IN")]),R(t,c),pe()}Ee(["click"]);function Wg(t,e){E(e,!0)}var Qg=P('<div class="fixed flex flex-col inset-0 z-50 items-center justify-center bg-black/70 gap-3"><span class="text-sm">Loading savings goals...</span> <span class="loading loading-infinity loading-lg text-primary"></span></div>'),Xg=(t,e)=>E(e,!l(e)),Yg=Qi('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path></svg>'),Jg=Qi('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>'),Zg=P('<!> <div class="h-screen flex flex-col bg-base-300"><div class="flex-shrink-0"><header class="bg-base-100/95 backdrop-blur-sm border-b border-base-300"><div class="px-4 py-3 flex items-center justify-between"><a class="text-lg font-bold flex items-center gap-2" href="/"><span>ðŸŽ¯</span> <span>Savings</span></a> <div class="flex items-center gap-2"><button class="btn btn-ghost btn-sm btn-circle"><!></button> <button class="btn btn-sm btn-primary gap-1"><span class="text-lg leading-none">+</span> <span>Goal</span></button></div></div></header> <div class="px-4 py-4 bg-base-100 border-b border-base-300"><div class="flex justify-between items-center mb-2"><span class="text-sm text-base-content/70">Total Saved</span> <span class="text-sm text-base-content/70"> </span></div> <div class="flex justify-between items-baseline mb-2"><span class="text-2xl font-bold"><!></span> <span class="text-sm text-base-content/50">of <!></span></div> <div class="w-full h-2 bg-base-300 rounded-full overflow-hidden"><div class="h-full bg-primary transition-all duration-300"></div></div></div> <div class="px-4 pt-2 pb-3 bg-base-300"><h3 class="text-sm font-medium text-base-content/70">Goals</h3></div></div> <!> <!></div>',1);function eb(t,e){me(e,!0);let n=U(!0),r=U("list"),s=U(null),i=U(!1);const a=z(()=>T.savings.loading),o=z(()=>T.savings.goalsWithProgress),d=z(()=>T.savings.totalSaved),c=z(()=>T.savings.totalTarget);Nn(()=>{mp()});function f(w){E(s,w,!0),E(r,"detail")}function u(){E(r,"list"),E(s,null),T.savings.currentGoalType=""}async function h(w){await pp(w)}const g=z(()=>l(c)>0?l(d)/l(c)*100:0);var y=ft(),v=Ce(y);{var b=w=>{Kg(w,{get goal(){return l(s)},onBack:u})},_=w=>{var A=Zg(),C=Ce(A);{var I=J=>{var ae=Qg();R(J,ae)};X(C,J=>{l(a)&&J(I)})}var N=x(C,2),B=p(N),j=p(B),O=p(j),Z=x(p(O),2),te=p(Z);te.__click=[Xg,n];var q=p(te);{var V=J=>{var ae=Yg();R(J,ae)},se=J=>{var ae=Jg();R(J,ae)};X(q,J=>{l(n)?J(V):J(se,!1)})}m(te);var ve=x(te,2);ve.__click=[Wg,i],m(Z),m(O),m(j);var Ae=x(j,2),qe=p(Ae),bt=x(p(qe),2),Ke=p(bt,!0);m(bt),m(qe);var We=x(qe,2),Qe=p(We),rt=p(Qe);{var Ut=J=>{var ae=at("â‚¹â€¢â€¢â€¢â€¢â€¢â€¢");R(J,ae)},yt=J=>{var ae=at();ee(jt=>F(ae,`â‚¹${jt??""}`),[()=>l(d).toLocaleString("en-IN")]),R(J,ae)};X(rt,J=>{l(n)?J(Ut):J(yt,!1)})}m(Qe);var vt=x(Qe,2),Y=x(p(vt));{var ue=J=>{var ae=at("â‚¹â€¢â€¢â€¢â€¢â€¢â€¢");R(J,ae)},Oe=J=>{var ae=at();ee(jt=>F(ae,`â‚¹${jt??""}`),[()=>l(c).toLocaleString("en-IN")]),R(J,ae)};X(Y,J=>{l(n)?J(ue):J(Oe,!1)})}m(vt),m(We);var ze=x(We,2),zt=p(ze);m(ze),m(Ae),et(2),m(B);var ke=x(B,2);Ig(ke,{get privacyMode(){return l(n)},get goals(){return l(o)},get loading(){return l(a)},onGoalClick:f});var De=x(ke,2);kg(De,{get open(){return l(i)},onClose:()=>E(i,!1),onSubmit:h}),m(N),ee((J,ae)=>{vr(te,"title",l(n)?"Show amounts":"Hide amounts"),F(Ke,J),rn(zt,`width: ${ae??""}%`)},[()=>l(n)?"â€¢â€¢":`${l(g).toFixed(0)}%`,()=>l(n)?50:Math.min(l(g),100)]),R(w,A)};X(v,w=>{l(r)==="detail"&&l(s)?w(b):w(_,!1)})}R(t,y),pe()}Ee(["click"]);var tb=P("<!> <!>",1);function ub(t,e){me(e,!0);let n=U("budgets");ji(()=>op("rhari",Ue()));function r(c){console.log("Navigate to:",c),E(n,c,!0)}var s=tb(),i=Ce(s);{var a=c=>{tg(c,{})},o=c=>{var f=ft(),u=Ce(f);{var h=y=>{yg(y,{})},g=y=>{var v=ft(),b=Ce(v);{var _=w=>{eb(w,{})};X(b,w=>{l(n)=="savings"&&w(_)},!0)}R(y,v)};X(u,y=>{l(n)=="transactions"?y(h):y(g,!1)},!0)}R(c,f)};X(i,c=>{l(n)=="budgets"?c(a):c(o,!1)})}var d=x(i,2);Qo(d,{get activeTab(){return l(n)},onNavigate:r}),R(t,s),pe()}export{Vl as $,Xd as A,fc as B,Ca as C,bu as D,wd as E,Mr as F,vd as G,Bu as H,tu as I,gu as J,ob as K,Jl as L,Vu as M,Ta as N,su as O,_c as P,Cc as Q,kc as R,Kh as S,Dc as T,fd as U,Vc as V,_t as W,mt as X,Pe as Y,$l as Z,D as _,Ud as a,Rl as a0,Q as a1,de as a2,Ye as a3,cb as a4,Er as a5,nt as a6,Rt as a7,Mt as a8,ub as a9,va as b,_n as c,oa as d,Rr as e,Ct as f,On as g,lm as h,Yc as i,tm as j,Cn as k,em as l,Il as m,Ge as n,eu as o,An as p,Zl as q,Sl as r,db as s,kr as t,Ml as u,hm as v,Bl as w,uc as x,mm as y,Ll as z};
