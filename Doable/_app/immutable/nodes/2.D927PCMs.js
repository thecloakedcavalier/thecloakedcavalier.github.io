import{d as me,f as W,a as E,s as U,c as de,t as _a,b as bt,e as Jt}from"../chunks/B_UuPxXH.js";import{y as mr,E as tn,K as hr,A as Me,aq as rn,F as an,g as n,T as nn,H as on,I as sn,J as qr,L as _r,B as Vt,aa as ln,aE as cn,ah as Kr,o as mt,aG as Qe,z as Ir,D as dn,a8 as Xr,a4 as un,aC as Wr,aH as vn,aI as fn,aJ as bn,aK as gn,v as xa,x as ya,aL as xr,ay as pn,aB as mn,w as hn,aM as wa,q as Mt,aN as _n,W as xn,aO as yn,aP as Et,e as wn,u as ka,r as zr,h as kn,aQ as Tn,aR as Dn,aS as En,aT as An,aU as In,aV as On,aW as Ta,a5 as Sn,aX as jn,aY as Cn,ao as Mn,p as xe,l as ye,n as l,m as u,s as _,t as K,k as ae,O as X,N as O,a6 as ee,b as ft,U as yt,ai as Qt}from"../chunks/DI0gOZ3T.js";import{i as V}from"../chunks/kcmh4k54.js";import{a as Pn}from"../chunks/BHiV0Znd.js";import{p as st}from"../chunks/Dp8UEEZl.js";import{a1 as qt,a2 as Nn,a3 as Rn,a4 as Ln,a5 as Da,a6 as Ea,a7 as ut,a8 as Fn,a9 as Ft,aa as Bn,ab as dt,ac as Ye,ad as Bt,ae as Aa,af as Wn,ag as Ia,ah as zn,ai as Gn,aj as Un,ak as Hn,al as Vn,am as Zn,an as Yn,ao as qn,ap as Jr,aq as Oa,ar as Kn,as as Xn,at as Jn,au as Qr,av as Sa,aw as $r}from"../chunks/CUqpiYYE.js";import{b as Pt}from"../chunks/Amjc5eun.js";function Re(e,t){return t}function Qn(e,t,r){for(var a=[],i=t.length,o,s=t.length,v=0;v<i;v++){let y=t[v];ya(y,()=>{if(o){if(o.pending.delete(y),o.done.add(y),o.pending.size===0){var d=e.outrogroups;Or(Wr(o.done)),d.delete(o),d.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var c=a.length===0&&r!==null;if(c){var b=r,f=b.parentNode;mn(f),f.append(b),e.items.clear()}Or(t,!c)}else o={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(o)}function Or(e,t=!0){for(var r=0;r<e.length;r++)hn(e[r],t)}var ea;function Ie(e,t,r,a,i,o=null){var s=e,v=new Map,c=(t&wa)!==0;if(c){var b=e;s=Me?hr(rn(b)):b.appendChild(mr())}Me&&an();var f=null,y=nn(()=>{var x=r();return vn(x)?x:x==null?[]:Wr(x)}),d,m=!0;function g(){p.fallback=f,$n(p,d,s,t,a),f!==null&&(d.length===0?(f.f&Qe)===0?xa(f):(f.f^=Qe,St(f,null,s)):ya(f,()=>{f=null}))}var h=tn(()=>{d=n(y);var x=d.length;let T=!1;if(Me){var A=on(s)===sn;A!==(x===0)&&(s=qr(),hr(s),_r(!1),T=!0)}for(var S=new Set,M=mt,F=dn(),D=0;D<x;D+=1){Me&&Vt.nodeType===ln&&Vt.data===cn&&(s=Vt,T=!0,_r(!1));var k=d[D],w=a(k,D),I=m?null:v.get(w);I?(I.v&&Kr(I.v,k),I.i&&Kr(I.i,D),F&&M.skipped_effects.delete(I.e)):(I=eo(v,m?s:ea??=mr(),k,w,D,i,t,r),m||(I.e.f|=Qe),v.set(w,I)),S.add(w)}if(x===0&&o&&!f&&(m?f=Ir(()=>o(s)):(f=Ir(()=>o(ea??=mr())),f.f|=Qe)),Me&&x>0&&hr(qr()),!m)if(F){for(const[P,z]of v)S.has(P)||M.skipped_effects.add(z.e);M.oncommit(g),M.ondiscard(()=>{})}else g();T&&_r(!0),n(y)}),p={effect:h,items:v,outrogroups:null,fallback:f};m=!1,Me&&(s=Vt)}function $n(e,t,r,a,i){var o=(a&_n)!==0,s=t.length,v=e.items,c=e.effect.first,b,f=null,y,d=[],m=[],g,h,p,x;if(o)for(x=0;x<s;x+=1)g=t[x],h=i(g,x),p=v.get(h).e,(p.f&Qe)===0&&(p.nodes?.a?.measure(),(y??=new Set).add(p));for(x=0;x<s;x+=1){if(g=t[x],h=i(g,x),p=v.get(h).e,e.outrogroups!==null)for(const I of e.outrogroups)I.pending.delete(p),I.done.delete(p);if((p.f&Qe)!==0)if(p.f^=Qe,p===c)St(p,null,r);else{var T=f?f.next:c;p===e.effect.last&&(e.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),et(e,f,p),et(e,p,T),St(p,T,r),f=p,d=[],m=[],c=f.next;continue}if((p.f&xr)!==0&&(xa(p),o&&(p.nodes?.a?.unfix(),(y??=new Set).delete(p))),p!==c){if(b!==void 0&&b.has(p)){if(d.length<m.length){var A=m[0],S;f=A.prev;var M=d[0],F=d[d.length-1];for(S=0;S<d.length;S+=1)St(d[S],A,r);for(S=0;S<m.length;S+=1)b.delete(m[S]);et(e,M.prev,F.next),et(e,f,M),et(e,F,A),c=A,f=F,x-=1,d=[],m=[]}else b.delete(p),St(p,c,r),et(e,p.prev,p.next),et(e,p,f===null?e.effect.first:f.next),et(e,f,p),f=p;continue}for(d=[],m=[];c!==null&&c!==p;)(b??=new Set).add(c),m.push(c),c=c.next;if(c===null)continue}(p.f&Qe)===0&&d.push(p),f=p,c=p.next}if(e.outrogroups!==null){for(const I of e.outrogroups)I.pending.size===0&&(Or(Wr(I.done)),e.outrogroups?.delete(I));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||b!==void 0){var D=[];if(b!==void 0)for(p of b)(p.f&xr)===0&&D.push(p);for(;c!==null;)(c.f&xr)===0&&c!==e.fallback&&D.push(c),c=c.next;var k=D.length;if(k>0){var w=(a&wa)!==0&&s===0?r:null;if(o){for(x=0;x<k;x+=1)D[x].nodes?.a?.measure();for(x=0;x<k;x+=1)D[x].nodes?.a?.fix()}Qn(e,D,w)}}o&&Mt(()=>{if(y!==void 0)for(p of y)p.nodes?.a?.apply()})}function eo(e,t,r,a,i,o,s,v){var c=(s&fn)!==0?(s&bn)===0?un(r,!1,!1):Xr(r):null,b=(s&gn)!==0?Xr(i):null;return{v:c,i:b,e:Ir(()=>(o(t,c??r,b??i,v),()=>{e.delete(a)}))}}function St(e,t,r){if(e.nodes)for(var a=e.nodes.start,i=e.nodes.end,o=t&&(t.f&Qe)===0?t.nodes.start:r;a!==null;){var s=pn(a);if(o.before(a),a===i)return;a=s}}function et(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}const to=()=>performance.now(),Je={tick:e=>requestAnimationFrame(e),now:()=>to(),tasks:new Set};function ja(){const e=Je.now();Je.tasks.forEach(t=>{t.c(e)||(Je.tasks.delete(t),t.f())}),Je.tasks.size!==0&&Je.tick(ja)}function ro(e){let t;return Je.tasks.size===0&&Je.tick(ja),{promise:new Promise(r=>{Je.tasks.add(t={c:e,f:r})}),abort(){Je.tasks.delete(t)}}}function ao(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function ta(e){const t={},r=e.split(";");for(const a of r){const[i,o]=a.split(":");if(!i||o===void 0)break;const s=ao(i.trim());t[s]=o.trim()}return t}const no=e=>e;function Ca(e,t,r){var a=xn,i=a.nodes,o,s,v,c=null;i.a??={element:e,measure(){o=this.element.getBoundingClientRect()},apply(){if(v?.abort(),s=this.element.getBoundingClientRect(),o.left!==s.left||o.right!==s.right||o.top!==s.top||o.bottom!==s.bottom){const b=t()(this.element,{from:o,to:s},r?.());v=Ma(this.element,b,void 0,1,()=>{v?.abort(),v=void 0})}},fix(){if(!e.getAnimations().length){var{position:b,width:f,height:y}=getComputedStyle(e);if(b!=="absolute"&&b!=="fixed"){var d=e.style;c={position:d.position,width:d.width,height:d.height,transform:d.transform},d.position="absolute",d.width=f,d.height=y;var m=e.getBoundingClientRect();if(o.left!==m.left||o.top!==m.top){var g=`translate(${o.left-m.left}px, ${o.top-m.top}px)`;d.transform=d.transform?`${d.transform} ${g}`:g}}}},unfix(){if(c){var b=e.style;b.position=c.position,b.width=c.width,b.height=c.height,b.transform=c.transform}}},i.a.element=e}function Ma(e,t,r,a,i){if(yn(t)){var o,s=!1;return Mt(()=>{if(!s){var h=t({direction:"in"});o=Ma(e,h,r,a,i)}}),{abort:()=>{s=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(!t?.duration)return i(),{abort:Et,deactivate:Et,reset:Et,t:()=>a};const{delay:v=0,css:c,tick:b,easing:f=no}=t;var y=[];if(b&&b(0,1),c){var d=ta(c(0,1));y.push(d,d)}var m=()=>1-a,g=e.animate(y,{duration:v,fill:"forwards"});return g.onfinish=()=>{g.cancel();var h=1-a,p=a-h,x=t.duration*Math.abs(p),T=[];if(x>0){var A=!1;if(c)for(var S=Math.ceil(x/16.666666666666668),M=0;M<=S;M+=1){var F=h+p*f(M/S),D=ta(c(F,1-F));T.push(D),A||=D.overflow==="hidden"}A&&(e.style.overflow="hidden"),m=()=>{var k=g.currentTime;return h+p*f(k/x)},b&&ro(()=>{if(g.playState!=="running")return!1;var k=m();return b(k,1-k),!0})}g=e.animate(T,{duration:x,fill:"forwards"}),g.onfinish=()=>{m=()=>a,b?.(a,1-a),i()}},{abort:()=>{g&&(g.cancel(),g.effect=null,g.onfinish=Et)},deactivate:()=>{i=Et},reset:()=>{},t:()=>m()}}function Pa(e,t,r){wn(()=>{var a=ka(()=>t(e,r?.())||{});if(r&&a?.update){var i=!1,o={};zr(()=>{var s=r();kn(s),i&&Tn(o,s)&&(o=s,a.update(s))}),i=!0}if(a?.destroy)return()=>a.destroy()})}const ra=[...` 	
\r\fÂ \v\uFEFF`];function oo(e,t,r){var a=e==null?"":""+e;if(t&&(a=a?a+" "+t:t),r){for(var i in r)if(r[i])a=a?a+" "+i:i;else if(a.length)for(var o=i.length,s=0;(s=a.indexOf(i,s))>=0;){var v=s+o;(s===0||ra.includes(a[s-1]))&&(v===a.length||ra.includes(a[v]))?a=(s===0?"":a.substring(0,s))+a.substring(v+1):s=v}}return a===""?null:a}function aa(e,t=!1){var r=t?" !important;":";",a="";for(var i in e){var o=e[i];o!=null&&o!==""&&(a+=" "+i+": "+o+r)}return a}function yr(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function io(e,t){if(t){var r="",a,i;if(Array.isArray(t)?(a=t[0],i=t[1]):a=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,v=!1,c=[];a&&c.push(...Object.keys(a).map(yr)),i&&c.push(...Object.keys(i).map(yr));var b=0,f=-1;const h=e.length;for(var y=0;y<h;y++){var d=e[y];if(v?d==="/"&&e[y-1]==="*"&&(v=!1):o?o===d&&(o=!1):d==="/"&&e[y+1]==="*"?v=!0:d==='"'||d==="'"?o=d:d==="("?s++:d===")"&&s--,!v&&o===!1&&s===0){if(d===":"&&f===-1)f=y;else if(d===";"||y===h-1){if(f!==-1){var m=yr(e.substring(b,f).trim());if(!c.includes(m)){d!==";"&&y++;var g=e.substring(b,y).trim();r+=" "+g+";"}}b=y+1,f=-1}}}}return a&&(r+=aa(a)),i&&(r+=aa(i,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function oe(e,t,r,a,i,o){var s=e.__className;if(Me||s!==r||s===void 0){var v=oo(r,a,o);(!Me||v!==e.getAttribute("class"))&&(v==null?e.removeAttribute("class"):e.className=v),e.__className=r}else if(o&&i!==o)for(var c in o){var b=!!o[c];(i==null||b!==!!i[c])&&e.classList.toggle(c,b)}return o}function wr(e,t={},r,a){for(var i in r){var o=r[i];t[i]!==o&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,a))}}function Wt(e,t,r,a){var i=e.__style;if(Me||i!==t){var o=io(t,a);(!Me||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}else a&&(Array.isArray(a)?(wr(e,r?.[0],a[0]),wr(e,r?.[1],a[1],"important")):wr(e,r,a));return a}const so=Symbol("is custom element"),lo=Symbol("is html");function at(e){if(Me){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var a=e.value;Sr(e,"value",null),e.value=a}if(e.hasAttribute("checked")){var i=e.checked;Sr(e,"checked",null),e.checked=i}}};e.__on_r=r,Mt(r),Dn()}}function Sr(e,t,r,a){var i=co(e);Me&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=r)&&(t==="loading"&&(e[En]=r),r==null?e.removeAttribute(t):typeof r!="string"&&uo(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function co(e){return e.__attributes??={[so]:e.nodeName.includes("-"),[lo]:e.namespaceURI===An}}var na=new Map;function uo(e){var t=e.getAttribute("is")||e.nodeName,r=na.get(t);if(r)return r;na.set(t,r=[]);for(var a,i=e,o=Element.prototype;o!==i;){a=On(i);for(var s in a)a[s].set&&r.push(s);i=In(i)}return r}function sr(e,t,r=t){var a=new WeakSet;Ta(e,"input",async i=>{var o=i?e.defaultValue:e.value;if(o=Tr(e)?Dr(o):o,r(o),mt!==null&&a.add(mt),await Sn(),o!==(o=t())){var s=e.selectionStart,v=e.selectionEnd,c=e.value.length;if(e.value=o??"",v!==null){var b=e.value.length;s===v&&v===c&&b>c?(e.selectionStart=b,e.selectionEnd=b):(e.selectionStart=s,e.selectionEnd=Math.min(v,b))}}}),(Me&&e.defaultValue!==e.value||ka(t)==null&&e.value)&&(r(Tr(e)?Dr(e.value):e.value),mt!==null&&a.add(mt)),zr(()=>{var i=t();if(e===document.activeElement){var o=jn??mt;if(a.has(o))return}Tr(e)&&i===Dr(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}const kr=new Set;function $t(e,t,r,a,i=a){var o=r.getAttribute("type")==="checkbox",s=e;let v=!1;if(t!==null)for(var c of t)s=s[c]??=[];s.push(r),Ta(r,"change",()=>{var b=r.__value;o&&(b=oa(s,b,r.checked)),i(b)},()=>i(o?[]:null)),zr(()=>{var b=a();if(Me&&r.defaultChecked!==r.checked){v=!0;return}o?(b=b||[],r.checked=b.includes(r.__value)):r.checked=Cn(r.__value,b)}),Mn(()=>{var b=s.indexOf(r);b!==-1&&s.splice(b,1)}),kr.has(s)||(kr.add(s),Mt(()=>{s.sort((b,f)=>b.compareDocumentPosition(f)===4?-1:1),kr.delete(s)})),Mt(()=>{if(v){var b;if(o)b=oa(s,b,r.checked);else{var f=s.find(y=>y.checked);b=f?.__value}i(b)}})}function oa(e,t,r){for(var a=new Set,i=0;i<e.length;i+=1)e[i].checked&&a.add(e[i].__value);return r||a.delete(t),Array.from(a)}function Tr(e){var t=e.type;return t==="number"||t==="range"}function Dr(e){return e===""?null:+e}const At={regular:{sev1:"Core to who I am or want to become",sev2:"Significant progress toward a major goal",sev3:"Meaningful but not defining",sev4:"Nice to do, no real deadline",sev5:"Pure exploration or fun"},maintenance:{sev1:"Immediate risk if ignored (safety, legal, financial)",sev2:"Disrupts daily life if neglected",sev3:"Routine upkeep, flexible timing",sev4:"Minor improvement, no consequences",sev5:"Cosmetic or nice-to-have"}},vo=["ðŸ’¼","ðŸ ","ðŸ’ª","ðŸ“š","ðŸ’°","â¤ï¸","ðŸŽ¯","ðŸš€","ðŸŽ¨","ðŸŽµ","âœˆï¸","ðŸŽ","ðŸ§˜","ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦","ðŸ¤","ðŸ“±","ðŸ’»","ðŸ”§","ðŸ“","ðŸŽ“","ðŸƒ","ðŸ§ ","ðŸŒ±","â­","ðŸ”¥","ðŸ’¡","ðŸŽ®","ðŸ“¸","ðŸ›’","ðŸ¦","ðŸš—","ðŸ‹ï¸"];me(["click","keydown"]);var fo=W('<button><span class="text-lg"> </span> <span class="text-[10px] font-medium truncate"> </span></button>'),bo=W('<nav class="pb-6 fixed bottom-0 left-0 right-0 bg-base-200 border-t border-base-content/10 flex justify-around pt-2 px-1 safe-bottom"></nav>');function go(e,t){xe(t,!0);const r=[{id:"areas",icon:"ðŸ“",label:"Areas"},{id:"week",icon:"ðŸ“…",label:"Week"},{id:"today",icon:"â˜€ï¸",label:"Today"}];var a=bo();Ie(a,21,()=>r,Re,(i,o)=>{var s=fo();let v;s.__click=()=>t.onTabChange(n(o).id);let c;var b=u(s),f=u(b,!0);l(b);var y=_(b,2),d=u(y,!0);l(y),l(s),K(()=>{v=oe(s,1,"flex flex-col items-center gap-1 px-3 py-1 rounded-lg transition-colors min-w-0 flex-1",null,v,{"text-primary":t.activeTab===n(o).id,"text-base-content":t.activeTab!==n(o).id}),c=Wt(s,"",c,{opacity:t.activeTab===n(o).id?1:.4}),U(f,n(o).icon),U(d,n(o).label)}),E(i,s)}),l(a),E(e,a),ye()}me(["click"]);var po=W('<button type="button"><span class="text-xs font-medium"> </span> <span class="text-lg"> </span></button>'),mo=W('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><div><h2 class="text-lg font-semibold">Assign to Day</h2> <p class="text-xs text-base-content/50 truncate"> </p></div> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 grid grid-cols-7 gap-1"></div> <div class="p-4 pt-0"><button type="button" class="w-full p-3 text-sm text-base-content/50 hover:text-base-content rounded-lg border border-base-content/10 hover:border-primary transition-colors">Remove from all days</button></div></div></div>');function ho(e,t){xe(t,!0);let r=X(!1),a=X(null);function i(d,m,g,h){d.stopPropagation(),O(a,{task:m,project:g,area:h},!0),O(r,!0)}function o(){O(r,!1),O(a,null)}function s(){return Rn(t.currentWeekOf).map(d=>({date:d,dayName:Da(d),isToday:Ln(d)}))}async function v(d){if(!n(a))return;const{task:m,project:g,area:h}=n(a);o();const p=t.isTaskAssignedToDay(m.id);p===d?await qt(m.id,g.id,t.currentWeekOf,d):(p&&await qt(m.id,g.id,t.currentWeekOf,p),await Nn(m.id,g.id,h.id,m.name,t.currentWeekOf,d,!1))}var c={openDayPicker:i},b=de(),f=ae(b);{var y=d=>{var m=mo(),g=u(m);g.__click=o,g.__keydown=k=>k.key==="Escape"&&o();var h=_(g,2),p=u(h),x=u(p),T=_(u(x),2),A=u(T,!0);l(T),l(x);var S=_(x,2);S.__click=o,l(p);var M=_(p,2);Ie(M,21,s,Re,(k,w)=>{const I=ee(()=>t.isTaskAssignedToDay(n(a).task.id)===n(w).date);var P=po();P.__click=()=>v(n(w).date);var z=u(P),N=u(z,!0);l(z);var C=_(z,2),j=u(C,!0);l(C),l(P),K(B=>{oe(P,1,`flex flex-col items-center p-2 rounded-lg border transition-colors ${n(I)?"bg-primary text-primary-content border-primary":n(w).isToday?"border-primary/50 hover:border-primary":"border-base-content/10 hover:border-primary"}`),U(N,n(w).dayName),U(j,B)},[()=>n(w).date.split("-")[2]]),E(k,P)}),l(M);var F=_(M,2),D=u(F);D.__click=()=>{const k=t.isTaskAssignedToDay(n(a).task.id);k&&qt(n(a).task.id,n(a).project.id,t.currentWeekOf,k),o()},l(F),l(h),l(m),K(()=>U(A,n(a).task.name)),E(d,m)};V(f,d=>{n(r)&&n(a)&&d(y)})}return E(e,b),ye(c)}me(["click","keydown"]);function ia(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ia(Object(r),!0).forEach(function(a){wt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ia(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ht(e){"@babel/helpers - typeof";return ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(e)}function wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _o(e,t){if(e==null)return{};var r={},a=Object.keys(e),i,o;for(o=0;o<a.length;o++)i=a[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function xo(e,t){if(e==null)return{};var r=_o(e,t),a,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)a=o[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function yo(e,t){return ko(e)||Do(e,t)||Gr(e,t)||Ao()}function Be(e){return wo(e)||To(e)||Gr(e)||Eo()}function wo(e){if(Array.isArray(e))return jr(e)}function ko(e){if(Array.isArray(e))return e}function To(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Do(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a=[],i=!0,o=!1,s,v;try{for(r=r.call(e);!(i=(s=r.next()).done)&&(a.push(s.value),!(t&&a.length===t));i=!0);}catch(c){o=!0,v=c}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw v}}return a}}function Gr(e,t){if(e){if(typeof e=="string")return jr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jr(e,t)}}function jr(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Eo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ao(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zt(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Gr(e))||t){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,v;return{s:function(){r=r.call(e)},n:function(){var c=r.next();return o=c.done,c},e:function(c){s=!0,v=c},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw v}}}}var Io="finalize",Oo="consider";function kt(e,t,r){e.dispatchEvent(new CustomEvent(Io,{detail:{items:t,info:r}}))}function ot(e,t,r){e.dispatchEvent(new CustomEvent(Oo,{detail:{items:t,info:r}}))}var lr="draggedEntered",Gt="draggedLeft",cr="draggedOverIndex",Ur="draggedLeftDocument",tr={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function So(e,t,r){e.dispatchEvent(new CustomEvent(lr,{detail:{indexObj:t,draggedEl:r}}))}function jo(e,t,r){e.dispatchEvent(new CustomEvent(Gt,{detail:{draggedEl:t,type:tr.LEFT_FOR_ANOTHER,theOtherDz:r}}))}function Co(e,t){e.dispatchEvent(new CustomEvent(Gt,{detail:{draggedEl:t,type:tr.OUTSIDE_OF_ANY}}))}function Mo(e,t,r){e.dispatchEvent(new CustomEvent(cr,{detail:{indexObj:t,draggedEl:r}}))}function Po(e){window.dispatchEvent(new CustomEvent(Ur,{detail:{draggedEl:e}}))}var Oe={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:lr,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:cr,DRAGGED_LEFT:Gt,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Ne={POINTER:"pointer",KEYBOARD:"keyboard"},dr="isDndShadowItem",ur="data-is-dnd-shadow-item-internal",No="data-is-dnd-shadow-item-hint",Na="id:dnd-shadow-placeholder-0000",Ro="dnd-action-dragged-el",pe="id",Cr=0;function Ra(){Cr++}function La(){if(Cr===0)throw new Error("Bug! trying to decrement when there are no dropzones");Cr--}var Hr=typeof window>"u";function Mr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r,a=t?Bo(e):e.getBoundingClientRect(),i=getComputedStyle(e),o=i.transform;if(o){var s,v,c,b;if(o.startsWith("matrix3d("))r=o.slice(9,-1).split(/, /),s=+r[0],v=+r[5],c=+r[12],b=+r[13];else if(o.startsWith("matrix("))r=o.slice(7,-1).split(/, /),s=+r[0],v=+r[3],c=+r[4],b=+r[5];else return a;var f=i.transformOrigin,y=a.x-c-(1-s)*parseFloat(f),d=a.y-b-(1-v)*parseFloat(f.slice(f.indexOf(" ")+1)),m=s?a.width/s:e.offsetWidth,g=v?a.height/v:e.offsetHeight;return{x:y,y:d,width:m,height:g,top:d,right:y+m,bottom:d+g,left:y}}else return a}function Fa(e){var t=Mr(e);return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function Ba(e){var t=e.getBoundingClientRect();return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function Wa(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Lo(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function vr(e,t){return e.y<=t.bottom&&e.y>=t.top&&e.x>=t.left&&e.x<=t.right}function Nt(e){return Wa(Ba(e))}function sa(e,t){var r=Nt(e),a=Fa(t);return vr(r,a)}function la(e,t){var r=Nt(e),a=Nt(t);return Lo(r,a)}function Fo(e){var t=Ba(e);return t.right<0||t.left>document.documentElement.scrollWidth||t.bottom<0||t.top>document.documentElement.scrollHeight}function Bo(e){for(var t=e.getBoundingClientRect(),r={top:t.top,bottom:t.bottom,left:t.left,right:t.right},a=!1,i=!1,o=e.parentElement;o&&o!==document.body;){var s=window.getComputedStyle(o),v=s.overflowY,c=s.overflowX,b=v==="scroll"||v==="auto",f=c==="scroll"||c==="auto";if(b||f){var y=o.getBoundingClientRect();if(b){var d=Math.max(r.top,y.top),m=Math.min(r.bottom,y.bottom);(d!==r.top||m!==r.bottom)&&(a=!0),r.top=d,r.bottom=m}if(f){var g=Math.max(r.left,y.left),h=Math.min(r.right,y.right);(g!==r.left||h!==r.right)&&(i=!0),r.left=g,r.right=h}}o=o.parentElement}return a||i?{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}:{top:t.top,bottom:t.bottom,left:t.left,right:t.right,width:Math.max(0,t.right-t.left),height:Math.max(0,t.bottom-t.top)}}var _t;function Vr(){_t=new Map}Vr();function Wo(e){var t=Array.from(e.children).findIndex(function(r){return r.getAttribute(ur)});if(t>=0)return _t.has(e)||_t.set(e,new Map),_t.get(e).set(t,Fa(e.children[t])),t}function zo(e,t){if(!sa(e,t))return null;var r=t.children;if(r.length===0)return{index:0,isProximityBased:!0};for(var a=Wo(t),i=0;i<r.length;i++)if(sa(e,r[i])){var o=_t.has(t)&&_t.get(t).get(i);return o&&!vr(Nt(e),o)?{index:a,isProximityBased:!1}:{index:i,isProximityBased:!1}}for(var s=Number.MAX_VALUE,v=void 0,c=0;c<r.length;c++){var b=la(e,r[c]);b<s&&(s=b,v=c)}if(r.length>0){var f=r.length,y=r[f-1],d=y.cloneNode(!1);d.style.visibility="hidden",d.style.pointerEvents="none",t.appendChild(d);var m=la(e,d);m<s&&(v=f),t.removeChild(d)}return{index:v,isProximityBased:!0}}function It(e){return JSON.stringify(e,null,2)}function rr(e){if(!e)throw new Error("cannot get depth of a falsy node");return za(e,0)}function za(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?za(e.parentElement,t+1):t-1}function Go(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!{}.hasOwnProperty.call(t,r)||t[r]!==e[r])return!1;return!0}function Uo(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var Ho=200,ca=10,Pr;function Vo(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ho,a=arguments.length>3?arguments[3]:void 0,i,o,s=!1,v,c=Array.from(t).sort(function(f,y){return rr(y)-rr(f)});function b(){var f=Nt(e),y=a.multiScrollIfNeeded();if(!y&&v&&Math.abs(v.x-f.x)<ca&&Math.abs(v.y-f.y)<ca){Pr=window.setTimeout(b,r);return}if(Fo(e)){Po(e);return}v=f;var d=!1,m=zt(c),g;try{for(m.s();!(g=m.n()).done;){var h=g.value;y&&Vr();var p=zo(e,h);if(p!==null){var x=p.index;d=!0,h!==i?(i&&jo(i,e,h),So(h,p,e),i=h):x!==o&&(Mo(h,p,e),o=x);break}}}catch(T){m.e(T)}finally{m.f()}!d&&s&&i?(Co(i,e),i=void 0,o=void 0,s=!1):s=!0,Pr=window.setTimeout(b,r)}b()}function Zo(){clearTimeout(Pr),Vr()}var Ot=30;function Yo(){var e;function t(){e={directionObj:void 0,stepPx:0}}t();function r(o){var s=e,v=s.directionObj,c=s.stepPx;v&&(o.scrollBy(v.x*c,v.y*c),window.requestAnimationFrame(function(){return r(o)}))}function a(o){return Ot-o}function i(o,s){if(!s)return!1;var v=qo(o,s),c=!!e.directionObj;if(v===null)return c&&t(),!1;var b=!1,f=!1;return s.scrollHeight>s.clientHeight&&(v.bottom<Ot?(b=!0,e.directionObj={x:0,y:1},e.stepPx=a(v.bottom)):v.top<Ot&&(b=!0,e.directionObj={x:0,y:-1},e.stepPx=a(v.top)),!c&&b)||s.scrollWidth>s.clientWidth&&(v.right<Ot?(f=!0,e.directionObj={x:1,y:0},e.stepPx=a(v.right)):v.left<Ot&&(f=!0,e.directionObj={x:-1,y:0},e.stepPx=a(v.left)),!c&&f)?(r(s),!0):(t(),!1)}return{scrollIfNeeded:i,resetScrolling:t}}function qo(e,t){var r=t===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:t.getBoundingClientRect();return vr(e,r)?{top:e.y-r.top,bottom:r.bottom-e.y,left:e.x-r.left,right:r.right-e.x}:null}function Ko(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=Jo(e),a=Array.from(r).sort(function(c,b){return rr(b)-rr(c)}),i=Yo(),o=i.scrollIfNeeded,s=i.resetScrolling;function v(){var c=t();if(!c||!a)return!1;for(var b=a.filter(function(d){return vr(c,d.getBoundingClientRect())||d===document.scrollingElement}),f=0;f<b.length;f++){var y=o(c,b[f]);if(y)return!0}return!1}return{multiScrollIfNeeded:r.size>0?v:function(){return!1},destroy:function(){return s()}}}function Xo(e){if(!e)return[];for(var t=[],r=e;r;){var a=window.getComputedStyle(r),i=a.overflow;i.split(" ").some(function(o){return o.includes("auto")||o.includes("scroll")})&&t.push(r),r=r.parentElement}return t}function Jo(e){var t=new Set,r=zt(e),a;try{for(r.s();!(a=r.n()).done;){var i=a.value;Xo(i).forEach(function(o){return t.add(o)})}}catch(o){r.e(o)}finally{r.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&t.add(document.scrollingElement),t}function Qo(e){var t=e.cloneNode(!0),r=[],a=e.tagName==="SELECT",i=a?[e]:Be(e.querySelectorAll("select")),o=zt(i),s;try{for(o.s();!(s=o.n()).done;){var v=s.value;r.push(v.value)}}catch(A){o.e(A)}finally{o.f()}if(i.length>0)for(var c=a?[t]:Be(t.querySelectorAll("select")),b=0;b<c.length;b++){var f=c[b],y=r[b],d=f.querySelector('option[value="'.concat(y,'"'));d&&d.setAttribute("selected",!0)}var m=e.tagName==="CANVAS",g=m?[e]:Be(e.querySelectorAll("canvas"));if(g.length>0)for(var h=m?[t]:Be(t.querySelectorAll("canvas")),p=0;p<h.length;p++){var x=g[p],T=h[p];T.width=x.width,T.height=x.height,x.width>0&&x.height>0&&T.getContext("2d").drawImage(x,0,0)}return t}var Rt=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),$o=wt({},Rt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function Ga(e){if(!Rt[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(Rt)));return $o[e]}var ei=.2;function lt(e){return"".concat(e," ").concat(ei,"s ease")}function ti(e,t){var r=e.getBoundingClientRect(),a=Qo(e);Ua(e,a),a.id=Ro,a.style.position="fixed";var i=r.top,o=r.left;if(a.style.top="".concat(i,"px"),a.style.left="".concat(o,"px"),t){var s=Wa(r);i-=s.y-t.y,o-=s.x-t.x,window.setTimeout(function(){a.style.top="".concat(i,"px"),a.style.left="".concat(o,"px")},0)}return a.style.margin="0",a.style.boxSizing="border-box",a.style.height="".concat(r.height,"px"),a.style.width="".concat(r.width,"px"),a.style.transition="".concat(lt("top"),", ").concat(lt("left"),", ").concat(lt("background-color"),", ").concat(lt("opacity"),", ").concat(lt("color")," "),window.setTimeout(function(){return a.style.transition+=", ".concat(lt("width"),", ").concat(lt("height"))},0),a.style.zIndex="9999",a.style.cursor="grabbing",a}function ri(e){e.style.cursor="grab"}function ai(e,t,r,a){Ua(t,e);var i=t.getBoundingClientRect(),o=e.getBoundingClientRect(),s=i.width-o.width,v=i.height-o.height;if(s||v){var c={left:(r-o.left)/o.width,top:(a-o.top)/o.height};Ga(Rt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(i.height,"px"),e.style.width="".concat(i.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-c.left*s,"px"),e.style.top="".concat(parseFloat(e.style.top)-c.top*v,"px")}}function Ua(e,t){var r=window.getComputedStyle(e);Array.from(r).filter(function(a){return a.startsWith("background")||a.startsWith("padding")||a.startsWith("font")||a.startsWith("text")||a.startsWith("align")||a.startsWith("justify")||a.startsWith("display")||a.startsWith("flex")||a.startsWith("border")||a==="opacity"||a==="color"||a==="list-style-type"||Ga(Rt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(a==="width"||a==="height")}).forEach(function(a){return t.style.setProperty(a,r.getPropertyValue(a),r.getPropertyPriority(a))})}function ni(e,t){e.draggable=!1,e.ondragstart=function(){return!1},t?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function Ha(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function oi(e){e.style.visibility="hidden",e.setAttribute(ur,"true")}function ii(e){e.style.visibility="",e.removeAttribute(ur)}function Kt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(a){var i=t(a);Object.keys(i).forEach(function(o){a.style[o]=i[o]}),r(a).forEach(function(o){return a.classList.add(o)})})}function ar(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(a){var i=t(a);Object.keys(i).forEach(function(o){a.style[o]=""}),r(a).forEach(function(o){return a.classList.contains(o)&&a.classList.remove(o)})})}function si(e){var t=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var r=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=t,e.style.minWidth=r}}var li="--any--",ci=100,di=20,Zt=3,ui=80,da={outline:"rgba(255, 255, 102, 0.7) solid 2px"},ua="data-is-dnd-original-dragged-item",Ce,_e,Pe,fr,ve,br,nt,ke,He,Te,tt=!1,Zr=!1,Yr,Ut=!1,Xt=[],Ct,Ve,jt=!1,Ue=new Map,fe=new Map,Er=new WeakMap;function vi(e,t){Ue.has(t)||Ue.set(t,new Set),Ue.get(t).has(e)||(Ue.get(t).add(e),Ra())}function va(e,t){Ue.get(t).delete(e),La(),Ue.get(t).size===0&&Ue.delete(t)}function fi(){var e=Ue.get(fr),t=zt(e),r;try{for(t.s();!(r=t.n()).done;){var a=r.value;a.addEventListener(lr,Va),a.addEventListener(Gt,Za),a.addEventListener(cr,Ya)}}catch(s){t.e(s)}finally{t.f()}window.addEventListener(Ur,Tt);var i=Math.max.apply(Math,Be(Array.from(e.keys()).map(function(s){return fe.get(s).dropAnimationDurationMs}))),o=i===0?di:Math.max(i,ci);Ct=Ko(e,function(){return Te}),Vo(_e,e,o*1.07,Ct)}function bi(){var e=Ue.get(fr),t=zt(e),r;try{for(t.s();!(r=t.n()).done;){var a=r.value;a.removeEventListener(lr,Va),a.removeEventListener(Gt,Za),a.removeEventListener(cr,Ya)}}catch(i){t.e(i)}finally{t.f()}window.removeEventListener(Ur,Tt),Ct&&(Ct.destroy(),Ct=void 0),Zo()}function gr(e){return e.findIndex(function(t){return!!t[dr]})}function gi(e){var t;return er(er({},e),{},(t={},wt(t,dr,!0),wt(t,pe,Na),t))}function Va(e){var t=fe.get(e.currentTarget),r=t.items,a=t.dropFromOthersDisabled;if(!(a&&e.currentTarget!==ve)){if(Ut=!1,r=r.filter(function(v){return v[pe]!==nt[pe]&&v[pe]!==Na}),ve!==e.currentTarget){var i=fe.get(ve).items,o=i.filter(function(v){return!v[dr]});ot(ve,o,{trigger:Oe.DRAGGED_ENTERED_ANOTHER,id:Pe[pe],source:Ne.POINTER})}var s=e.detail.indexObj.index;ke=e.currentTarget,r.splice(s,0,nt),ot(e.currentTarget,r,{trigger:Oe.DRAGGED_ENTERED,id:Pe[pe],source:Ne.POINTER})}}function Za(e){if(tt){var t=fe.get(e.currentTarget),r=t.items,a=t.dropFromOthersDisabled;if(!(a&&e.currentTarget!==ve&&e.currentTarget!==ke)){var i=Be(r),o=gr(i);o!==-1&&i.splice(o,1);var s=ke;ke=void 0;var v=e.detail,c=v.type,b=v.theOtherDz;if(c===tr.OUTSIDE_OF_ANY||c===tr.LEFT_FOR_ANOTHER&&b!==ve&&fe.get(b).dropFromOthersDisabled){Ut=!0,ke=ve;var f=s===ve?i:Be(fe.get(ve).items);f.splice(br,0,nt),ot(ve,f,{trigger:Oe.DRAGGED_LEFT_ALL,id:Pe[pe],source:Ne.POINTER})}ot(e.currentTarget,i,{trigger:Oe.DRAGGED_LEFT,id:Pe[pe],source:Ne.POINTER})}}}function Ya(e){var t=fe.get(e.currentTarget),r=t.items,a=t.dropFromOthersDisabled;if(!(a&&e.currentTarget!==ve)){var i=Be(r);Ut=!1;var o=e.detail.indexObj.index,s=gr(i);s!==-1&&i.splice(s,1),i.splice(o,0,nt),ot(e.currentTarget,i,{trigger:Oe.DRAGGED_OVER_INDEX,id:Pe[pe],source:Ne.POINTER})}}function nr(e){e.preventDefault();var t=e.touches?e.touches[0]:e;Te={x:t.clientX,y:t.clientY},_e.style.transform="translate3d(".concat(Te.x-He.x,"px, ").concat(Te.y-He.y,"px, 0)")}function Tt(){Zr=!0,window.removeEventListener("mousemove",nr),window.removeEventListener("touchmove",nr),window.removeEventListener("mouseup",Tt),window.removeEventListener("touchend",Tt),bi(),ri(_e),ke||(ke=ve);var e=fe.get(ke),t=e.items,r=e.type;ar(Ue.get(r),function(o){return fe.get(o).dropTargetStyle},function(o){return fe.get(o).dropTargetClasses});var a=gr(t);a===-1&&ke===ve&&(a=br),t=t.map(function(o){return o[dr]?Pe:o});function i(){Yr(),kt(ke,t,{trigger:Ut?Oe.DROPPED_OUTSIDE_OF_ANY:Oe.DROPPED_INTO_ZONE,id:Pe[pe],source:Ne.POINTER}),ke!==ve&&kt(ve,fe.get(ve).items,{trigger:Oe.DROPPED_INTO_ANOTHER,id:Pe[pe],source:Ne.POINTER});var o=Array.from(ke.children).find(function(s){return s.getAttribute(ur)});o&&ii(o),hi()}fe.get(ke).dropAnimationDisabled?i():pi(a,i)}function pi(e,t){var r=e>-1?Mr(ke.children[e],!1):Mr(ke,!1),a={x:r.left-parseFloat(_e.style.left),y:r.top-parseFloat(_e.style.top)},i=fe.get(ke),o=i.dropAnimationDurationMs,s="transform ".concat(o,"ms ease");_e.style.transition=_e.style.transition?_e.style.transition+","+s:s,_e.style.transform="translate3d(".concat(a.x,"px, ").concat(a.y,"px, 0)"),window.setTimeout(t,o)}function mi(e,t){Xt.push({dz:e,destroy:t}),window.requestAnimationFrame(function(){Ha(e),document.body.appendChild(e)})}function hi(){_e&&_e.remove&&_e.remove(),Ce&&Ce.remove&&Ce.remove(),_e=void 0,Ce=void 0,Pe=void 0,fr=void 0,ve=void 0,br=void 0,nt=void 0,ke=void 0,He=void 0,Te=void 0,tt=!1,Zr=!1,Yr=void 0,Ut=!1,Ve&&clearTimeout(Ve),Ve=void 0,jt=!1,Xt.length&&(Xt.forEach(function(e){var t=e.dz,r=e.destroy;r(),t.remove()}),Xt=[])}function _i(e,t){var r=!1,a={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:da,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},i=new Map;function o(){window.addEventListener("mousemove",c,{passive:!1}),window.addEventListener("touchmove",c,{passive:!1,capture:!1}),window.addEventListener("mouseup",v,{passive:!1}),window.addEventListener("touchend",v,{passive:!1})}function s(){window.removeEventListener("mousemove",c),window.removeEventListener("touchmove",c),window.removeEventListener("mouseup",v),window.removeEventListener("touchend",v),Ve&&(clearTimeout(Ve),Ve=void 0,jt=!1)}function v(d){if(s(),Ce=void 0,He=void 0,Te=void 0,d.type==="touchend"){var m=new Event("click",{bubbles:!0,cancelable:!0});d.target.dispatchEvent(m)}}function c(d){var m=!!d.touches,g=m?d.touches[0]:d;if(m&&a.delayTouchStartMs>0&&!jt){Te={x:g.clientX,y:g.clientY},(Math.abs(Te.x-He.x)>=Zt||Math.abs(Te.y-He.y)>=Zt)&&(Ve&&(clearTimeout(Ve),Ve=void 0),v(d));return}d.preventDefault(),Te={x:g.clientX,y:g.clientY},(Math.abs(Te.x-He.x)>=Zt||Math.abs(Te.y-He.y)>=Zt)&&(s(),f())}function b(d){if(!(d.target!==d.currentTarget&&(d.target.value!==void 0||d.target.isContentEditable))&&!d.button&&!tt){var m=!!d.touches,g=m&&a.delayTouchStartMs>0;g||d.preventDefault(),d.stopPropagation();var h=m?d.touches[0]:d;He={x:h.clientX,y:h.clientY},Te=er({},He),Ce=d.currentTarget,g&&(jt=!1,Ve=window.setTimeout(function(){Ce&&(jt=!0,s(),f())},a.delayTouchStartMs)),o()}}function f(){tt=!0;var d=i.get(Ce);br=d,ve=Ce.parentElement;var m=ve.closest("dialog")||ve.closest("[popover]")||ve.getRootNode(),g=m.body||m,h=a.items,p=a.type,x=a.centreDraggedOnCursor,T=Be(h);Pe=T[d],fr=p,nt=gi(Pe),_e=ti(Ce,x&&Te),g.appendChild(_e);function A(){Ce.parentElement?window.requestAnimationFrame(A):(Ce.setAttribute(ua,!0),g.appendChild(Ce),fi(),Ha(Ce),nt[pe]=Pe[pe],_e.focus())}window.requestAnimationFrame(A),Kt(Array.from(Ue.get(a.type)).filter(function(S){return S===ve||!fe.get(S).dropFromOthersDisabled}),function(S){return fe.get(S).dropTargetStyle},function(S){return fe.get(S).dropTargetClasses}),T.splice(d,1,nt),Yr=si(ve),ot(ve,T,{trigger:Oe.DRAG_STARTED,id:Pe[pe],source:Ne.POINTER}),window.addEventListener("mousemove",nr,{passive:!1}),window.addEventListener("touchmove",nr,{passive:!1,capture:!1}),window.addEventListener("mouseup",Tt,{passive:!1}),window.addEventListener("touchend",Tt,{passive:!1})}function y(d){var m=d.items,g=m===void 0?void 0:m,h=d.flipDurationMs,p=h===void 0?0:h,x=d.type,T=x===void 0?li:x,A=d.dragDisabled,S=A===void 0?!1:A,M=d.morphDisabled,F=M===void 0?!1:M,D=d.dropFromOthersDisabled,k=D===void 0?!1:D,w=d.dropTargetStyle,I=w===void 0?da:w,P=d.dropTargetClasses,z=P===void 0?[]:P,N=d.transformDraggedElement,C=N===void 0?function(){}:N,j=d.centreDraggedOnCursor,B=j===void 0?!1:j,G=d.dropAnimationDisabled,J=G===void 0?!1:G,H=d.delayTouchStart,L=H===void 0?!1:H;a.dropAnimationDurationMs=p;var Z=0;L===!0?Z=ui:typeof L=="number"&&isFinite(L)&&L>=0&&(Z=L),a.delayTouchStartMs=Z,a.type&&T!==a.type&&va(e,a.type),a.type=T,a.items=Be(g),a.dragDisabled=S,a.morphDisabled=F,a.transformDraggedElement=C,a.centreDraggedOnCursor=B,a.dropAnimationDisabled=J,r&&tt&&!Zr&&(!Go(I,a.dropTargetStyle)||!Uo(z,a.dropTargetClasses))&&(ar([e],function(){return a.dropTargetStyle},function(){return z}),Kt([e],function(){return I},function(){return z})),a.dropTargetStyle=I,a.dropTargetClasses=Be(z);function q(R,Y){return fe.get(R)?fe.get(R)[Y]:a[Y]}r&&tt&&a.dropFromOthersDisabled!==k&&(k?ar([e],function(R){return q(R,"dropTargetStyle")},function(R){return q(R,"dropTargetClasses")}):Kt([e],function(R){return q(R,"dropTargetStyle")},function(R){return q(R,"dropTargetClasses")})),a.dropFromOthersDisabled=k,fe.set(e,a),vi(e,T);for(var ie=tt?gr(a.items):-1,ue=0;ue<e.children.length;ue++){var le=e.children[ue];if(ni(le,S),ue===ie){F||ai(_e,le,Te.x,Te.y),a.transformDraggedElement(_e,Pe,ue),oi(le);continue}le.removeEventListener("mousedown",Er.get(le)),le.removeEventListener("touchstart",Er.get(le)),S||(le.addEventListener("mousedown",b),le.addEventListener("touchstart",b),Er.set(le,b)),i.set(le,ue),r||(r=!0)}}return y(t),{update:function(m){y(m)},destroy:function(){function m(){va(e,fe.get(e).type),fe.delete(e)}tt&&!e.closest("[".concat(ua,"]"))?mi(e,m):m()}}}var Yt,Nr={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},qa=(Yt={},wt(Yt,Nr.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),wt(Yt,Nr.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),Yt),xi="dnd-action-aria-alert",ge;function Rr(){ge||(ge=document.createElement("div"),(function(){ge.id=xi,ge.style.position="fixed",ge.style.bottom="0",ge.style.left="0",ge.style.zIndex="-5",ge.style.opacity="0",ge.style.height="0",ge.style.width="0",ge.setAttribute("role","alert")})(),document.body.prepend(ge),Object.entries(qa).forEach(function(e){var t=yo(e,2),r=t[0],a=t[1];return document.body.prepend(ki(r,a))}))}function yi(){return Hr?null:(document.readyState==="complete"?Rr():window.addEventListener("DOMContentLoaded",Rr),er({},Nr))}function wi(){Hr||!ge||(Object.keys(qa).forEach(function(e){var t;return(t=document.getElementById(e))===null||t===void 0?void 0:t.remove()}),ge.remove(),ge=void 0)}function ki(e,t){var r=document.createElement("div");return r.id=e,r.innerHTML="<p>".concat(t,"</p>"),r.style.display="none",r.style.position="fixed",r.style.zIndex="-5",r}function xt(e){if(!Hr){ge||Rr(),ge.innerHTML="";var t=document.createTextNode(e);ge.appendChild(t),ge.style.display="none",ge.style.display="inline"}}var Ti="--any--",fa={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Fe=!1,Lr,De,vt="",ct,Ze,rt="",or=new WeakSet,ba=new WeakMap,ga=new WeakMap,Fr=new Map,we=new Map,Ge=new Map,ir;function Di(e,t){Ge.size===0&&(ir=yi(),window.addEventListener("keydown",Ka),window.addEventListener("click",Xa)),Ge.has(t)||Ge.set(t,new Set),Ge.get(t).has(e)||(Ge.get(t).add(e),Ra())}function pa(e,t){De===e&&Lt(),Ge.get(t).delete(e),La(),Ge.get(t).size===0&&Ge.delete(t),Ge.size===0&&(window.removeEventListener("keydown",Ka),window.removeEventListener("click",Xa),ir=void 0,wi())}function Ka(e){if(Fe)switch(e.key){case"Escape":{Lt();break}}}function Xa(){Fe&&(or.has(document.activeElement)||Lt())}function Ei(e){if(Fe){var t=e.currentTarget;if(t!==De){vt=t.getAttribute("aria-label")||"";var r=we.get(De),a=r.items,i=a.find(function(y){return y[pe]===Ze}),o=a.indexOf(i),s=a.splice(o,1)[0],v=we.get(t),c=v.items,b=v.autoAriaDisabled;t.getBoundingClientRect().top<De.getBoundingClientRect().top||t.getBoundingClientRect().left<De.getBoundingClientRect().left?(c.push(s),b||xt("Moved item ".concat(rt," to the end of the list ").concat(vt))):(c.unshift(s),b||xt("Moved item ".concat(rt," to the beginning of the list ").concat(vt)));var f=De;kt(f,a,{trigger:Oe.DROPPED_INTO_ANOTHER,id:Ze,source:Ne.KEYBOARD}),kt(t,c,{trigger:Oe.DROPPED_INTO_ZONE,id:Ze,source:Ne.KEYBOARD}),De=t}}}function Ja(){Fr.forEach(function(e,t){var r=e.update;return r(we.get(t))})}function Lt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;we.get(De).autoAriaDisabled||xt("Stopped dragging item ".concat(rt)),or.has(document.activeElement)&&document.activeElement.blur(),e&&ot(De,we.get(De).items,{trigger:Oe.DRAG_STOPPED,id:Ze,source:Ne.KEYBOARD}),ar(Ge.get(Lr),function(t){return we.get(t).dropTargetStyle},function(t){return we.get(t).dropTargetClasses}),ct=null,Ze=null,rt="",Lr=null,De=null,vt="",Fe=!1,Ja()}function Ai(e,t){var r={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:fa,dropTargetClasses:[],autoAriaDisabled:!1};function a(f,y,d){f.length<=1||f.splice(d,1,f.splice(y,1,f[d])[0])}function i(f){switch(f.key){case"Enter":case" ":{if((f.target.disabled!==void 0||f.target.href||f.target.isContentEditable)&&!or.has(f.target))return;f.preventDefault(),f.stopPropagation(),Fe?Lt():o(f);break}case"ArrowDown":case"ArrowRight":{if(!Fe)return;f.preventDefault(),f.stopPropagation();var y=we.get(e),d=y.items,m=Array.from(e.children),g=m.indexOf(f.currentTarget);g<m.length-1&&(r.autoAriaDisabled||xt("Moved item ".concat(rt," to position ").concat(g+2," in the list ").concat(vt)),a(d,g,g+1),kt(e,d,{trigger:Oe.DROPPED_INTO_ZONE,id:Ze,source:Ne.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Fe)return;f.preventDefault(),f.stopPropagation();var h=we.get(e),p=h.items,x=Array.from(e.children),T=x.indexOf(f.currentTarget);T>0&&(r.autoAriaDisabled||xt("Moved item ".concat(rt," to position ").concat(T," in the list ").concat(vt)),a(p,T,T-1),kt(e,p,{trigger:Oe.DROPPED_INTO_ZONE,id:Ze,source:Ne.KEYBOARD}));break}}}function o(f){v(f.currentTarget),De=e,Lr=r.type,Fe=!0;var y=Array.from(Ge.get(r.type)).filter(function(m){return m===De||!we.get(m).dropFromOthersDisabled});if(Kt(y,function(m){return we.get(m).dropTargetStyle},function(m){return we.get(m).dropTargetClasses}),!r.autoAriaDisabled){var d="Started dragging item ".concat(rt,". Use the arrow keys to move it within its list ").concat(vt);y.length>1&&(d+=", or tab to another list in order to move the item into it"),xt(d)}ot(e,we.get(e).items,{trigger:Oe.DRAG_STARTED,id:Ze,source:Ne.KEYBOARD}),Ja()}function s(f){Fe&&f.currentTarget!==ct&&(f.stopPropagation(),Lt(!1),o(f))}function v(f){var y=we.get(e),d=y.items,m=Array.from(e.children),g=m.indexOf(f);ct=f,ct.tabIndex=r.zoneItemTabIndex,Ze=d[g][pe],rt=m[g].getAttribute("aria-label")||""}function c(f){var y=f.items,d=y===void 0?[]:y,m=f.type,g=m===void 0?Ti:m,h=f.dragDisabled,p=h===void 0?!1:h,x=f.zoneTabIndex,T=x===void 0?0:x,A=f.zoneItemTabIndex,S=A===void 0?0:A,M=f.dropFromOthersDisabled,F=M===void 0?!1:M,D=f.dropTargetStyle,k=D===void 0?fa:D,w=f.dropTargetClasses,I=w===void 0?[]:w,P=f.autoAriaDisabled,z=P===void 0?!1:P;r.items=Be(d),r.dragDisabled=p,r.dropFromOthersDisabled=F,r.zoneTabIndex=T,r.zoneItemTabIndex=S,r.dropTargetStyle=k,r.dropTargetClasses=I,r.autoAriaDisabled=z,r.type&&g!==r.type&&pa(e,r.type),r.type=g,Di(e,g),z||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",p?ir.DND_ZONE_DRAG_DISABLED:ir.DND_ZONE_ACTIVE)),we.set(e,r),Fe?e.tabIndex=e===De||ct.contains(e)||r.dropFromOthersDisabled||De&&r.type!==we.get(De).type?-1:0:e.tabIndex=r.zoneTabIndex,e.addEventListener("focus",Ei);for(var N=function(B){var G=e.children[B];or.add(G),G.tabIndex=Fe?-1:r.zoneItemTabIndex,z||G.setAttribute("role","listitem"),G.removeEventListener("keydown",ba.get(G)),G.removeEventListener("click",ga.get(G)),p||(G.addEventListener("keydown",i),ba.set(G,i),G.addEventListener("click",s),ga.set(G,s)),Fe&&r.items[B][pe]===Ze&&(ct=G,ct.tabIndex=r.zoneItemTabIndex,G.focus())},C=0;C<e.children.length;C++)N(C)}c(t);var b={update:function(y){c(y)},destroy:function(){pa(e,r.type),we.delete(e),Fr.delete(e)}};return Fr.set(e,b),b}var Ii=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function Qa(e,t){if(Oi(e))return{update:function(){},destroy:function(){}};ma(t);var r=_i(e,t),a=Ai(e,t);return{update:function(o){ma(o),r.update(o),a.update(o)},destroy:function(){r.destroy(),a.destroy()}}}function Oi(e){return!!e.closest("[".concat(No,'="true"]'))}function ma(e){var t=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var r=e.zoneTabIndex,a=e.zoneItemTabIndex;e.dropTargetStyle;var i=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var o=e.delayTouchStart;e.dropAnimationDisabled;var s=xo(e,Ii);if(Object.keys(s).length>0&&console.warn("dndzone will ignore unknown options",s),!t)throw new Error("no 'items' key provided to dndzone");var v=t.find(function(f){return!{}.hasOwnProperty.call(f,pe)});if(v)throw new Error("missing '".concat(pe,"' property for item ").concat(It(v)));if(i&&!Array.isArray(i))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(ht(i),", ").concat(It(i)));if(r&&!ha(r))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(ht(r),", ").concat(It(r)));if(a&&!ha(a))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(ht(a),", ").concat(It(a)));if(o!==void 0&&o!==!1){var c=o===!0,b=typeof o=="number"&&isFinite(o)&&o>=0;if(!c&&!b)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(ht(o),", ").concat(It(o)))}}function ha(e){return!isNaN(e)&&(function(t){return(t|0)===t})(parseFloat(e))}function Si(e){const t=e-1;return t*t*t+1}function $a(e,{from:t,to:r},a={}){var{delay:i=0,duration:o=F=>Math.sqrt(F)*120,easing:s=Si}=a,v=getComputedStyle(e),c=v.transform==="none"?"":v.transform,[b,f]=v.transformOrigin.split(" ").map(parseFloat);b/=e.clientWidth,f/=e.clientHeight;var y=ji(e),d=e.clientWidth/r.width/y,m=e.clientHeight/r.height/y,g=t.left+t.width*b,h=t.top+t.height*f,p=r.left+r.width*b,x=r.top+r.height*f,T=(g-p)*d,A=(h-x)*m,S=t.width/r.width,M=t.height/r.height;return{delay:i,duration:typeof o=="function"?o(Math.sqrt(T*T+A*A)):o,easing:s,css:(F,D)=>{var k=D*T,w=D*A,I=F+D*S,P=F+D*M;return`transform: ${c} translate(${k}px, ${w}px) scale(${I}, ${P});`}}}function ji(e){if("currentCSSZoom"in e)return e.currentCSSZoom;for(var t=e,r=1;t!==null;)r*=+getComputedStyle(t).zoom,t=t.parentElement;return r}var Ci=W('<span class="text-center text-xs font-semibold bg-purple-500/20 text-purple-400 rounded w-full h-full  items-center justify-center flex">1</span>'),Mi=W('<span class="text-center text-xs font-semibold bg-red-500/20 text-red-400 rounded w-full h-full items-center justify-center flex">2</span>'),Pi=W('<span class="text-center text-xs font-semibold bg-yellow-500/20 text-yellow-400 rounded w-full h-full items-center justify-center flex">3</span>'),Ni=W('<span class="text-center text-xs font-semibold bg-blue-500/20 text-blue-500 rounded w-full h-full items-center justify-center flex">4</span>'),Ri=W('<span class="text-center text-xs font-semibold bg-emerald-500/20 text-emerald-300 rounded w-full h-full items-center justify-center flex">5</span>');function Br(e,t){var r=de(),a=ae(r);{var i=s=>{var v=Ci();E(s,v)},o=s=>{var v=de(),c=ae(v);{var b=y=>{var d=Mi();E(y,d)},f=y=>{var d=de(),m=ae(d);{var g=p=>{var x=Pi();E(p,x)},h=p=>{var x=de(),T=ae(x);{var A=M=>{var F=Ni();E(M,F)},S=M=>{var F=Ri();E(M,F)};V(T,M=>{t.level=="sev4"?M(A):M(S,!1)},!0)}E(p,x)};V(m,p=>{t.level=="sev3"?p(g):p(h,!1)},!0)}E(y,d)};V(c,y=>{t.level=="sev2"?y(b):y(f,!1)},!0)}E(s,v)};V(a,s=>{t.level=="sev1"?s(i):s(o,!1)})}E(e,r)}var Li=bt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path></svg> Reorder',1),Fi=W("<button><!></button>"),Bi=W('<div class="flex items-center gap-3 p-3 bg-base-100 border border-primary/30 rounded-lg cursor-grab active:cursor-grabbing"><div class="text-base-content/30"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path></svg></div> <div class="flex-1 min-w-0"><p class="text-sm font-medium text-base-content truncate"> </p> <p class="text-xs text-base-content/50 truncate"> </p></div></div>'),Wi=W('<div class="flex flex-col gap-2"></div>'),zi=W('<div class="h-1 bg-base-300"><div class="h-full bg-base-content/20 transition-all"></div></div>'),Gi=W('<div class="bg-base-100 rounded-lg hover:bg-primary/20 cursor-pointer overflow-hidden" tabindex="0" role="button"><!> <div class="flex items-start gap-2 p-2"><div class="size-8 mt-0.5"><!></div> <div class="flex-1 min-w-0"><p class="text-sm font-medium text-base-content mb-1"> </p> <p class="text-sm"><span> </span> <span class="text-xs mx-0.5">â€¢</span> <span class="text-base-content/50"> </span></p></div> <button type="button" class="w-7 h-7 flex items-center justify-center rounded text-base-content/30 hover:text-error hover:bg-error/10 transition-colors" title="Remove from week">âœ•</button></div></div>'),Ui=W('<div class="flex flex-col gap-2"></div>'),Hi=W('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No projects assigned to this week</p> <p class="text-base-content/30 text-xs">Go to Areas and assign projects</p></div>'),Vi=W('<div class="flex flex-col gap-2"><div class="flex justify-between items-center"><div class="text-xs tracking-wider text-base-content/50 uppercase">Assigned projects</div> <div class="flex gap-2"><!> <button> </button></div></div> <!></div>');function Zi(e,t){xe(t,!0);const r=200;let a=X(localStorage.getItem("filterAssignedProject")=="true"),i=X(!1),o=()=>O(a,!n(a)),s=()=>O(i,!n(i));ft(()=>{localStorage.setItem("filterAssignedProject",n(a)+"")});let v=ee(()=>t.assignedProjects.map(k=>({...k,id:k.project.id}))),c=ee(()=>n(a)?n(v).filter(k=>!["completed","cancelled"].includes(k.project.status)):n(v)),b=X(yt([]));ft(()=>{O(b,n(c),!0)});async function f(k,w){k.stopPropagation(),await Ea(w,t.currentWeekOf)}function y(k){const w=ut.getByProject(k),I=w.filter(z=>z.status==="active").length,P=w.filter(z=>z.status==="completed").length;return{active:I,completed:P,total:I+P}}function d(k){O(b,k.detail.items,!0)}function m(k){O(b,k.detail.items,!0);const{info:w}=k.detail,I=w.id,P=n(b).findIndex(B=>B.id===I);if(P===-1)return;const z=P>0?n(b)[P-1]:null,N=P<n(b).length-1?n(b)[P+1]:null;let C=null,j=null;if(z){const B=n(v).findIndex(G=>G.id===z.id);C=z.assignment.order,j=B<n(v).length-1?n(v)[B+1].assignment.order:null}else if(N){const B=n(v).findIndex(G=>G.id===N.id);C=B>0?n(v)[B-1].assignment.order:null,j=N.assignment.order}Fn(t.currentWeekOf,I,C,j)}var g=Vi(),h=u(g),p=_(u(h),2),x=u(p);{var T=k=>{var w=Fi();w.__click=s;var I=u(w);{var P=N=>{var C=_a("Done");E(N,C)},z=N=>{var C=Li();Qt(),E(N,C)};V(I,N=>{n(i)?N(P):N(z,!1)})}l(w),K(()=>oe(w,1,`btn btn-xs ${n(i)?"btn-primary":"btn-secondary btn-soft"}`)),E(k,w)};V(x,k=>{n(b).length>1&&k(T)})}var A=_(x,2);A.__click=o;var S=u(A);l(A),l(p),l(h);var M=_(h,2);{var F=k=>{var w=de(),I=ae(w);{var P=N=>{var C=Wi();Ie(C,29,()=>n(b),({id:j,project:B,area:G})=>j,(j,B)=>{let G=()=>n(B).project,J=()=>n(B).area;var H=Bi(),L=_(u(H),2),Z=u(L),q=u(Z,!0);l(Z);var ie=_(Z,2),ue=u(ie,!0);l(ie),l(L),l(H),K(()=>{U(q,G().name),U(ue,J().name)}),Ca(H,()=>$a,()=>({duration:r})),E(j,H)}),l(C),Pa(C,(j,B)=>Qa?.(j,B),()=>({items:n(b),flipDurationMs:r,dropTargetStyle:{}})),Jt("consider",C,d),Jt("finalize",C,m),E(N,C)},z=N=>{var C=Ui();Ie(C,21,()=>n(c),Re,(j,B)=>{let G=()=>n(B).project,J=()=>n(B).area;const H=ee(()=>y(G().id)),L=ee(()=>n(H).total>0?n(H).completed/n(H).total*100:0);var Z=Gi();Z.__click=()=>t.navigateToTasks(G());var q=u(Z);{var ie=he=>{var We=zi(),Se=u(We);l(We),K(()=>Wt(Se,`width: ${n(L)??""}%`)),E(he,We)};V(q,he=>{n(H).total>0&&he(ie)})}var ue=_(q,2),le=u(ue),R=u(le);Br(R,{get level(){return G().severity}}),l(le);var Y=_(le,2),te=u(Y),re=u(te,!0);l(te);var se=_(te,2),Q=u(se),$=u(Q);l(Q);var ce=_(Q,4),ne=u(ce,!0);l(ce),l(se),l(Y);var be=_(Y,2);be.__click=he=>f(he,G().id),l(ue),l(Z),K(()=>{U(re,G().name),oe(Q,1,`text-base-content/50 ${n(H).active==0?"text-error":""}`),U($,`${n(H).active??""} available`),U(ne,J().name)}),E(j,Z)}),l(C),E(N,C)};V(I,N=>{n(i)?N(P):N(z,!1)})}E(k,w)},D=k=>{var w=Hi();E(k,w)};V(M,k=>{n(b).length>0?k(F):k(D,!1)})}l(g),K(()=>{oe(A,1,`w-20 btn btn-xs btn-soft btn-secondary ${n(a)?"bg-secondary text-secondary-content":""}`),U(S,`Filter :${n(a)?"ON":"OFF"}`)}),E(e,g),ye()}me(["click"]);var Yi=W('<span class="text-xs text-primary-content px-2 py-1 bg-primary rounded"> </span>'),qi=W('<button class="text-start flex items-center gap-3 p-3 bg-base-100 rounded-lg transition-all hover:bg-primary/20 cursor-pointer"><div class="flex-1 min-w-0 "><p class="text-sm text-base-content truncate mb-1"> </p> <p class="text-xs text-base-content/50"> </p></div> <!></button>'),Ki=W('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No tasks available</p> <p class="text-base-content/30 text-xs">Assigned projects have no active tasks</p></div>'),Xi=W('<div class="flex flex-col gap-2"></div>');function Ji(e,t){xe(t,!0);var r=Xi();Ie(r,21,()=>t.weekTasks,Re,(a,i)=>{let o=()=>n(i).task,s=()=>n(i).project,v=()=>n(i).area;const c=ee(()=>t.isTaskAssignedToDay(o().id));var b=qi();b.__click=x=>t.openDayPicker(x,o(),s(),v());var f=u(b),y=u(f),d=u(y,!0);l(y);var m=_(y,2),g=u(m);l(m),l(f);var h=_(f,2);{var p=x=>{var T=Yi(),A=u(T,!0);l(T),K(S=>U(A,S),[()=>Da(n(c))]),E(x,T)};V(h,x=>{n(c)&&x(p)})}l(b),K(()=>{U(d,o().name),U(g,`${v().icon??""} ${s().name??""}`)}),E(a,b)},a=>{var i=Ki();E(a,i)}),l(r),E(e,r),ye()}me(["click"]);var Qi=W('<div class="flex flex-col h-full"><div class="bg-base-100 border-b border-b-base-content/10"><div class="px-4 pt-4 pb-2 "><h2 class="text-lg font-medium">Week</h2> <p class="text-xs text-base-content/50"> </p></div> <div class="flex gap-1 px-4 pb-3"><button> </button> <button> </button></div></div> <div class="flex-1 overflow-y-auto px-2 py-4"><!></div></div> <!>',1);function $i(e,t){xe(t,!0);let r=X(yt(localStorage.getItem("weekTabView")||"projects"));ft(()=>{n(r)&&localStorage.setItem("weekTabView",n(r))});let a=yt(Ft());const i=ee(()=>Bt.getWeek(a));let o;function s(w){return n(i)?n(i).tasksByDay.find(P=>P.taskId===w)?.date??null:null}let v=ee(()=>n(i)?n(i).projectAssignments.map(w=>{const I=dt.getById(w.areaId);if(!I)return null;const z=Ye.getByArea(I.id).find(N=>N.id===w.projectId);return z?{assignment:w,project:z,area:I}:null}).filter(w=>w!==null):[]),c=ee(()=>{const w=[];for(const{project:I,area:P}of n(v)){const z=ut.getByProject(I.id).filter(N=>N.status==="active");for(const N of z)w.push({task:N,project:I,area:P})}return w});var b=Qi(),f=ae(b),y=u(f),d=u(y),m=_(u(d),2),g=u(m,!0);l(m),l(d);var h=_(d,2),p=u(h);p.__click=()=>O(r,"projects");var x=u(p);l(p);var T=_(p,2);T.__click=()=>O(r,"tasks");var A=u(T);l(T),l(h),l(y);var S=_(y,2),M=u(S);{var F=w=>{Zi(w,{get navigateToTasks(){return t.navigateToTasks},get currentWeekOf(){return a},get assignedProjects(){return n(v)}})},D=w=>{Ji(w,{get openDayPicker(){return o.openDayPicker},get weekTasks(){return n(c)},isTaskAssignedToDay:s})};V(M,w=>{n(r)==="projects"?w(F):w(D,!1)})}l(S),l(f);var k=_(f,2);Pt(ho(k,{get currentWeekOf(){return a},isTaskAssignedToDay:s}),w=>o=w,()=>o),K(w=>{U(g,w),oe(p,1,`px-4 py-1.5 text-sm rounded-lg transition-colors ${n(r)==="projects"?"bg-primary/20 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),U(x,`Projects (${n(v).length??""})`),oe(T,1,`px-4 py-1.5 text-sm rounded-lg transition-colors ${n(r)==="tasks"?"bg-primary/20 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),U(A,`Tasks (${n(c).length??""})`)},[()=>Bn(a)]),E(e,b),ye()}me(["click"]);var es=W('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="p-4 border-b border-base-content/10"><p class="font-medium text-base-content"> </p> <p class="text-xs text-base-content/50"> </p></div> <div class="p-4 space-y-4"><div><p class="text-xs uppercase tracking-wider text-base-content/50 mb-2">What happened?</p> <div class="flex gap-2"><label><input type="radio" name="action" class="radio radio-success radio-sm"/> <span class="text-sm">Completed</span></label> <label><input type="radio" name="action" class="radio radio-error radio-sm"/> <span class="text-sm">Cancelled</span></label></div></div> <div><p class="text-xs uppercase tracking-wider text-base-content/50 mb-2">Follow-up task (optional)</p> <input type="text" class="input input-bordered w-full" placeholder="Enter to create a follow-up..."/></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><button type="button" class="btn btn-ghost btn-sm flex-1">Cancel</button> <button type="button" class="btn btn-primary btn-sm flex-1">Done</button></div></div></div>');function ts(e,t){xe(t,!0);const r=[];let a=X("completed"),i=X("");ft(()=>{t.show&&(O(a,"completed"),O(i,""))});async function o(){t.taskByDay&&(n(a)==="completed"?await Aa(t.taskByDay.taskId,t.taskByDay.projectId,t.weekOf,t.taskByDay.date):await Wn(t.taskByDay.taskId,t.taskByDay.projectId,t.weekOf,t.taskByDay.date),n(i).trim()&&await Ia(t.taskByDay.projectId,t.taskByDay.areaId,n(i).trim()),t.onClose())}var s=de(),v=ae(s);{var c=b=>{var f=es(),y=u(f);y.__click=function(...C){t.onClose?.apply(this,C)},y.__keydown=C=>C.key==="Escape"&&t.onClose();var d=_(y,2),m=u(d),g=u(m),h=u(g,!0);l(g);var p=_(g,2),x=u(p);l(p),l(m);var T=_(m,2),A=u(T),S=_(u(A),2),M=u(S),F=u(M);at(F),F.value=F.__value="completed",Qt(2),l(M);var D=_(M,2),k=u(D);at(k),k.value=k.__value="cancelled",Qt(2),l(D),l(S),l(A);var w=_(A,2),I=_(u(w),2);at(I),I.__keydown=C=>C.key==="Enter"&&o(),l(w),l(T);var P=_(T,2),z=u(P);z.__click=function(...C){t.onClose?.apply(this,C)};var N=_(z,2);N.__click=o,l(P),l(d),l(f),K(()=>{U(h,t.taskByDay.name),U(x,`${t.areaIcon??""} ${t.areaName??""} Â· ${t.projectName??""}`),oe(M,1,`flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border border-base-content/10 cursor-pointer hover:border-success ${n(a)==="completed"?"border-success bg-success/10":""}`),oe(D,1,`flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border border-base-content/10 cursor-pointer hover:border-error ${n(a)==="cancelled"?"border-error bg-error/10":""}`)}),$t(r,[],F,()=>n(a),C=>O(a,C)),$t(r,[],k,()=>n(a),C=>O(a,C)),sr(I,()=>n(i),C=>O(i,C)),E(b,f)};V(v,b=>{t.show&&t.taskByDay&&b(c)})}E(e,s),ye()}me(["click","keydown"]);var rs=bt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path></svg> Reorder',1),as=W('<button type="button"><!></button>'),ns=W('<div class="px-4 pb-3"><div class="flex items-center justify-between text-xs text-base-content/50 mb-1"><span> </span> <span> </span></div> <div class="h-2 bg-base-100 rounded-full overflow-hidden"><div class="h-full bg-success transition-all rounded-full"></div></div></div>'),os=W('<div class="flex items-center gap-3 p-3 bg-base-100 border border-primary/30 rounded-lg cursor-grab active:cursor-grabbing"><div class="text-base-content/30"><svg class="size-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path></svg></div> <div class="flex-1 min-w-0"><p class="text-sm text-base-content truncate mb-2"> </p> <p class="text-xs text-base-content/50 truncate"> </p></div></div>'),is=W('<div class="flex flex-col gap-2 mb-4"></div>'),ss=W('<div class="flex items-center gap-3 p-3 bg-base-100 border border-transparent rounded-lg"><button type="button" aria-label="check" class="size-7 rounded-full border-2 border-base-content/30 flex items-center justify-center flex-shrink-0 hover:border-success hover:bg-success/10 transition-colors"></button> <div class="flex-1 min-w-0" tabindex="0" role="button"><p class="text-sm text-base-content mb-2"> </p> <p class="text-xs text-base-content/50 truncate"> </p></div> <button type="button" class="w-7 h-7 flex items-center justify-center rounded text-base-content/30 hover:text-error hover:bg-error/10 transition-colors" title="Remove from today">âœ•</button></div>'),ls=W('<div class="flex flex-col gap-2 mb-4"></div>'),cs=W('<div class="text-center py-12"><span class="text-4xl block mb-3">ðŸ“‹</span> <p class="text-base-content/50 text-sm mb-2">No tasks for today</p> <p class="text-base-content/30 text-xs">Go to Week tab and assign tasks</p></div>'),ds=W('<div class="text-center mb-5 py-12 border-2 border-dashed border-success/30 rounded-lg bg-success/5"><span class="text-4xl block mb-3">ðŸŽ‰</span> <p class="text-sm font-medium text-success">All done for today!</p> <p class="text-xs text-base-content/50 mt-1">Great work!</p></div>'),us=bt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>'),vs=bt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"></path></svg>'),fs=W('<div class="flex items-center gap-3 p-3 opacity-50"><button type="button" title="Mark as incomplete"><!></button> <div class="flex-1 min-w-0"><p class="text-sm text-base-content line-through truncate"> </p> <p class="text-xs text-base-content/50"> </p></div></div>'),bs=W('<div><p class="text-xs font-medium uppercase tracking-wider text-base-content/40 mb-2"> </p> <div class="flex flex-col gap-1"></div></div>'),gs=W('<div class="flex flex-col h-full"><div class="px-4 pt-4 pb-2 flex justify-between items-start"><div><h2 class="text-lg font-medium">Today</h2> <p class="text-xs text-base-content/50"> </p></div> <!></div> <!> <div class="flex-1 overflow-y-auto px-3 pb-4"><!> <!></div></div> <!>',1);function ps(e,t){xe(t,!0);const r=zn(),a=Ft(),i=200;let o=X(!1),s=X(null),v=X(""),c=X(""),b=X(""),f=X(!1);const y=()=>{O(f,!n(f))};let d=ee(()=>{const R=Bt.getWeek(a);return R?R.tasksByDay.filter(Y=>Y.date===r).map(Y=>{const te=ut.getById(Y.taskId),re=dt.getById(Y.areaId),Q=(re?Ye.getByArea(re.id):[]).find($=>$.id===Y.projectId);return{id:Y.taskId,taskByDay:Y,task:te,areaIcon:re?.icon??"ðŸ“",areaName:re?.name??"Unknown",projectName:Q?.name??"Unknown"}}):[]}),m=ee(()=>n(d)),g=ee(()=>n(d).filter(R=>R.taskByDay.status!=="completed"&&R.taskByDay.status!=="cancelled")),h=ee(()=>n(d).filter(R=>R.taskByDay.status==="completed"||R.taskByDay.status==="cancelled")),p=X(yt([]));ft(()=>{O(p,n(g),!0)});function x(){const R=n(h).length,Y=n(d).length,te=Y>0?R/Y*100:0;return{completed:R,total:Y,percent:te}}function T(R){O(p,R.detail.items,!0)}function A(R){O(p,R.detail.items,!0);const{info:Y}=R.detail,te=Y.id,re=n(p).findIndex(ne=>ne.id===te);if(re===-1)return;const se=re>0?n(p)[re-1]:null,Q=re<n(p).length-1?n(p)[re+1]:null;let $=null,ce=null;if(se){const ne=n(m).findIndex(be=>be.id===se.id);$=se.taskByDay.order,ce=ne<n(m).length-1?n(m)[ne+1].taskByDay.order:null}else if(Q){const ne=n(m).findIndex(be=>be.id===Q.id);$=ne>0?n(m)[ne-1].taskByDay.order:null,ce=Q.taskByDay.order}Hn(a,r,te,$,ce)}async function S(R){await Aa(R.taskId,R.projectId,a,r)}async function M(R){await Un(R.taskId,R.projectId,a,r)}async function F(R){await qt(R.taskId,R.projectId,a,r)}function D(R,Y,te,re){O(s,R,!0),O(v,Y,!0),O(c,te,!0),O(b,re,!0),O(o,!0)}function k(){O(o,!1),O(s,null)}var w=gs(),I=ae(w),P=u(I),z=u(P),N=_(u(z),2),C=u(N);l(N),l(z);var j=_(z,2);{var B=R=>{var Y=as();Y.__click=y;var te=u(Y);{var re=Q=>{var $=_a("Done");E(Q,$)},se=Q=>{var $=rs();Qt(),E(Q,$)};V(te,Q=>{n(f)?Q(re):Q(se,!1)})}l(Y),K(()=>oe(Y,1,`btn btn-xs ${n(f)?"btn-primary":"btn-accent btn-soft"}`)),E(R,Y)};V(j,R=>{n(g).length>1&&R(B)})}l(P);var G=_(P,2);{var J=R=>{const Y=ee(x);var te=ns(),re=u(te),se=u(re),Q=u(se);l(se);var $=_(se,2),ce=u($);l($),l(re);var ne=_(re,2),be=u(ne);l(ne),l(te),K(he=>{U(Q,`${n(Y).completed??""} of ${n(Y).total??""} completed`),U(ce,`${he??""}%`),Wt(be,`width: ${n(Y).percent??""}%`)},[()=>Math.round(n(Y).percent)]),E(R,te)};V(G,R=>{x().total>0&&R(J)})}var H=_(G,2),L=u(H);{var Z=R=>{var Y=de(),te=ae(Y);{var re=Q=>{var $=is();Ie($,29,()=>n(p),({id:ce,taskByDay:ne,areaIcon:be,projectName:he})=>ce,(ce,ne)=>{let be=()=>n(ne).taskByDay,he=()=>n(ne).areaIcon,We=()=>n(ne).projectName;var Se=os(),je=_(u(Se),2),Ee=u(je),Le=u(Ee,!0);l(Ee);var ze=_(Ee,2),qe=u(ze);l(ze),l(je),l(Se),K(()=>{U(Le,be().name),U(qe,`${he()??""}  ${We()??""}`)}),Ca(Se,()=>$a,()=>({duration:i})),E(ce,Se)}),l($),Pa($,(ce,ne)=>Qa?.(ce,ne),()=>({items:n(p),flipDurationMs:i,dropTargetStyle:{}})),Jt("consider",$,T),Jt("finalize",$,A),E(Q,$)},se=Q=>{var $=ls();Ie($,21,()=>n(g),Re,(ce,ne)=>{let be=()=>n(ne).taskByDay,he=()=>n(ne).areaIcon,We=()=>n(ne).areaName,Se=()=>n(ne).projectName;var je=ss(),Ee=u(je);Ee.__click=()=>S(be());var Le=_(Ee,2);Le.__click=()=>D(be(),he(),We(),Se());var ze=u(Le),qe=u(ze,!0);l(ze);var $e=_(ze,2),Ke=u($e);l($e),l(Le);var gt=_(Le,2);gt.__click=()=>F(be()),l(je),K(()=>{U(qe,be().name),U(Ke,`${he()??""}  ${Se()??""}`)}),E(ce,je)}),l($),E(Q,$)};V(te,Q=>{n(f)?Q(re):Q(se,!1)})}E(R,Y)},q=R=>{var Y=de(),te=ae(Y);{var re=Q=>{var $=cs();E(Q,$)},se=Q=>{var $=ds();E(Q,$)};V(te,Q=>{x().total===0?Q(re):Q(se,!1)},!0)}E(R,Y)};V(L,R=>{n(p).length>0?R(Z):R(q,!1)})}var ie=_(L,2);{var ue=R=>{var Y=bs(),te=u(Y),re=u(te);l(te);var se=_(te,2);Ie(se,21,()=>n(h),Re,(Q,$)=>{let ce=()=>n($).taskByDay,ne=()=>n($).areaIcon,be=()=>n($).areaName,he=()=>n($).projectName;const We=ee(()=>ce().status==="completed"),Se=ee(()=>ce().status==="cancelled");var je=fs(),Ee=u(je);Ee.__click=()=>M(ce());var Le=u(Ee);{var ze=Xe=>{var it=us();E(Xe,it)},qe=Xe=>{var it=de(),pt=ae(it);{var pr=Ae=>{var en=vs();E(Ae,en)};V(pt,Ae=>{ce().status==="cancelled"&&Ae(pr)},!0)}E(Xe,it)};V(Le,Xe=>{ce().status==="completed"?Xe(ze):Xe(qe,!1)})}l(Ee);var $e=_(Ee,2),Ke=u($e),gt=u(Ke,!0);l(Ke);var Dt=_(Ke,2),Ht=u(Dt);l(Dt),l($e),l(je),K(()=>{oe(Ee,1,`w-7 h-7 rounded-full ${n(We)?"bg-success border-success text-success-content":n(Se)?"bg-error border-error text-error-content":"border-base-content/30 hover:border-success"} border-2 flex items-center justify-center flex-shrink-0`),U(gt,ce().name),U(Ht,`${ne()??""} ${be()??""} Â· ${he()??""}`)}),E(Q,je)}),l(se),l(Y),K(()=>U(re,`Completed (${n(h).length??""})`)),E(R,Y)};V(ie,R=>{n(h).length>0&&!n(f)&&R(ue)})}l(H),l(I);var le=_(I,2);ts(le,{get show(){return n(o)},get taskByDay(){return n(s)},get areaIcon(){return n(v)},get areaName(){return n(c)},get projectName(){return n(b)},get weekOf(){return a},onClose:k}),K(R=>U(C,`${R??""}, ${r??""}`),[()=>Gn(r)]),E(e,w),ye()}me(["click"]);const Ar=["none","reorder","edit","status"],ms=[{value:"active",label:"Active",color:"border-s-primary"},{value:"blocked",label:"Blocked",color:"border-s-warning"},{value:"someday",label:"Someday",color:"border-s-info"},{value:"completed",label:"Completed",color:"border-s-success"},{value:"cancelled",label:"Cancelled",color:"border-s-error"}],hs=[{value:"active",label:"Active"},{value:"blocked",label:"Blocked"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}];var _s=W('<button class="rounded-lg border border-dashed min-h-30 border-base-content/20 bg-transparent hover:bg-primary/20 transition-colors cursor-pointer w-full"><div class="card-body p-3 items-center justify-center text-center min-h-[88px]"><span class="text-xl text-base-content/50">+</span> <span class="text-xs text-base-content/50">Add Area</span></div></button>');function xs(e,t){var r=_s();r.__click=function(...a){t.handleClick?.apply(this,a)},E(e,r)}me(["click"]);var ys=W('<button type="button"> </button>'),ws=W('<button type="button" class="btn btn-outline btn-error btn-sm">Archive</button>'),ks=W('<button type="button" class="btn btn-outline btn-primary btn-sm">Unarchive</button>'),Ts=W('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Icon</label> <div class="grid grid-cols-8 gap-1"></div></div> <div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Health, Work, Learning"/></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><!> <div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function Ds(e,t){xe(t,!0);let r=X(!1),a=X(null),i=X(""),o=X("ðŸŽ¯");function s(){O(a,null),O(i,""),O(o,"ðŸŽ¯"),O(r,!0)}function v(x,T){x.stopPropagation(),O(a,T,!0),O(i,T.name,!0),O(o,T.icon,!0),O(r,!0)}function c(){O(r,!1),O(a,null)}async function b(){!n(i).trim()||!n(o)||(n(a)?await Vn(n(a).index,{name:n(i).trim(),icon:n(o)}):await Zn(n(i).trim(),n(o)),c())}function f(x){return n(a)&&n(a).status=="archived"?!1:Ye.getByArea(x.id).filter(A=>A.status==="active").length===0}async function y(){!n(a)||!f(n(a))||(await Yn(n(a).index),c())}async function d(){n(a)&&(await qn(n(a).index),c())}var m={openCreateAreaModal:s,openEditAreaModal:v},g=de(),h=ae(g);{var p=x=>{var T=Ts(),A=u(T);A.__click=c,A.__keydown=L=>L.key==="Escape"&&c();var S=_(A,2),M=u(S),F=u(M),D=u(F,!0);l(F);var k=_(F,2);k.__click=c,l(M);var w=_(M,2),I=u(w),P=_(u(I),2);Ie(P,21,()=>vo,Re,(L,Z)=>{var q=ys();q.__click=()=>O(o,n(Z),!0);var ie=u(q,!0);l(q),K(()=>{oe(q,1,`aspect-square flex items-center justify-center text-lg rounded-lg transition-colors ${n(o)===n(Z)?"bg-primary text-primary-content":"hover:bg-base-200"}`),U(ie,n(Z))}),E(L,q)}),l(P),l(I);var z=_(I,2),N=_(u(z),2);at(N),N.__keydown=L=>L.key==="Enter"&&b(),l(z),l(w);var C=_(w,2),j=u(C);{var B=L=>{var Z=de(),q=ae(Z);{var ie=le=>{var R=ws();R.__click=y,K((Y,te)=>{R.disabled=Y,Sr(R,"title",te)},[()=>!f(n(a)),()=>f(n(a))?"Archive area":"Cannot archive: has active projects"]),E(le,R)},ue=le=>{var R=de(),Y=ae(R);{var te=re=>{var se=ks();se.__click=d,E(re,se)};V(Y,re=>{n(a).status=="archived"&&re(te)},!0)}E(le,R)};V(q,le=>{n(a).status=="active"?le(ie):le(ue,!1)})}E(L,Z)};V(j,L=>{n(a)&&L(B)})}var G=_(j,4);G.__click=c;var J=_(G,2);J.__click=b;var H=u(J,!0);l(J),l(C),l(S),l(T),K(L=>{U(D,n(a)?"Edit Area":"New Area"),J.disabled=L,U(H,n(a)?"Save":"Create")},[()=>!n(i).trim()||!n(o)]),sr(N,()=>n(i),L=>O(i,L)),E(x,T)};V(h,x=>{n(r)&&x(p)})}return E(e,g),ye(m)}me(["click","keydown"]);var Es=W('<button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center"><svg viewBox="0 0 24 24" class="size-6" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button>'),As=W('<div class="flex flex-row gap-1"><button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†</button> <button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†’</button></div>'),Is=W("<div> </div>"),Os=W('<div tabindex="0" role="button"><div class="flex flex-col py-4 px-3 items-start text-left"><div class="w-full flex flex-row justify-between items-start"><span class="text-4xl mb-2"> </span> <!></div> <div class="flex flex-row justify-between items-end w-full"><div class="flex flex-col w-full"><div class="text-sm font-medium mb-0 pb-1 truncate"> </div> <p class="text-xs text-base-content/50"> </p></div></div></div></div>');function Ss(e,t){xe(t,!0);const r=ee(()=>Ye.getByArea(t.area.id).filter(T=>T.status==="active").length),a=ee(()=>{const T=Ft(),A=Bt.getWeek(T),S=Ye.getByArea(t.area.id),M=S.filter(w=>w.status==="active"||w.status==="blocked"||w.status==="someday");if(M.length===0)return{level:"clear",color:"badge-success",icon:"âœ“"};if(A?.projectAssignments.some(w=>M.some(I=>I.id===w.projectId))??!1)return{level:"planned",color:"text-purple-500",icon:"â—†"};const D=S.filter(w=>w.status==="completed"&&w.completedAt),k=D.length>0?Math.max(...D.map(w=>new Date(w.completedAt).getTime())):null;if(k){const w=Date.now()-12096e5,I=Date.now()-720*60*60*1e3;if(k>=w)return{level:"active",color:"badge-info",icon:"â—"};if(k>=I)return{level:"fading",color:"badge-warning",icon:"â—‹"}}return{level:"avoiding",color:"badge-error",icon:"!"}});var i=Os();i.__click=()=>t.handleSelect(t.area);var o=u(i),s=u(o),v=u(s),c=u(v,!0);l(v);var b=_(v,2);{var f=T=>{var A=Es();A.__click=S=>t.handleEdit(S,t.area),E(T,A)},y=T=>{var A=de(),S=ae(A);{var M=D=>{var k=As(),w=u(k);w.__click=P=>t.handleAreaMoveUp(P,t.index);var I=_(w,2);I.__click=P=>t.handleAreaMoveDown(P,t.index),l(k),K(()=>w.disabled=t.index==0),E(D,k)},F=D=>{var k=de(),w=ae(k);{var I=P=>{var z=Is(),N=u(z,!0);l(z),K(()=>{oe(z,1,`badge badge-sm rounded ${n(a).color??""} badge-soft`),U(N,n(a).level)}),E(P,z)};V(w,P=>{t.viewMode=="status"&&P(I)},!0)}E(D,k)};V(S,D=>{t.viewMode=="reorder"?D(M):D(F,!1)},!0)}E(T,A)};V(b,T=>{t.viewMode=="edit"?T(f):T(y,!1)})}l(s);var d=_(s,2),m=u(d),g=u(m),h=u(g,!0);l(g);var p=_(g,2),x=u(p);l(p),l(m),l(d),l(o),l(i),K(()=>{oe(i,1,`rounded-lg bg-base-100 hover:bg-primary/20 transition-colors cursor-pointer w-full ${n(a).level==="avoiding"?"border border-error/20":n(a).level==="fading"?"border border-warning/20":n(a).level==="active"?"border border-info/20":n(a).level==="planned"?"border border-purple-500/20":""}`),Wt(i,n(a).level==="avoiding"?"background: rgba(248, 114, 114, 0.05); box-shadow: inset 0 0 20px rgba(248, 114, 114, 0.08); ":n(a).level==="fading"?"box-shadow: inset 0 0 30px rgba(251, 189, 35, 0.1);":n(a).level==="active"?"box-shadow: inset 0 0 30px rgba(58, 191, 248, 0.1);":n(a).level==="planned"?"box-shadow: inset 0 0 30px rgba(168, 85, 247, 0.1);":""),U(c,t.area.icon),U(h,t.area.name),U(x,`${n(r)??""} project${n(r)!==1?"s":""}`)}),E(e,i),ye()}me(["click"]);var js=W('<button class="link text-base-content/50 text-sm capitalize"> </button>'),Cs=W('<div class="flex flex-col h-full"><div class="px-3 pt-5 pb-4 flex flex-row justify-between items-center bg-base-100 border-b border-base-content/10"><a href="/" class="flex flex-row items-center text-base-content/80"><svg version="1.1" id="Icons" class="size-12 mt-1 me-2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" xml:space="preserve" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><style type="text/css">.st0{fill:none;stroke:currentColor;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><path class="st0" d="M11,13H5c-1.1,0-2-0.9-2-2V5c0-1.1,0.9-2,2-2h6c1.1,0,2,0.9,2,2v6C13,12.1,12.1,13,11,13z"></path><path class="st0" d="M11,29H5c-1.1,0-2-0.9-2-2v-6c0-1.1,0.9-2,2-2h6c1.1,0,2,0.9,2,2v6C13,28.1,12.1,29,11,29z"></path><line class="st0" x1="17" y1="5" x2="29" y2="5"></line><line class="st0" x1="17" y1="9" x2="24" y2="9"></line><line class="st0" x1="17" y1="21" x2="29" y2="21"></line><line class="st0" x1="17" y1="25" x2="24" y2="25"></line><polyline class="st0" points="6,7 8,9 11,6 "></polyline></g></svg> <div class="flex flex-col"><div class="text-xl text-base-content/80 tracking-wider font-medium">Doable</div> <div class="text-sm text-base-content/50">Life areas at a glance</div></div></a> <div class="flex flex-row gap-4"><!> <button class="link text-base-content/50 text-sm"> </button></div></div> <div class="flex-1 min-h-0 overflow-auto"><div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 p-3"><!> <!></div></div> <!></div>');function Ms(e,t){xe(t,!0);let r,a=X(yt(localStorage.getItem("areasViewMode")||"none"));ft(()=>localStorage.setItem("areasViewMode",n(a)));let i=X(!1),o=()=>O(a,Ar[(Ar.indexOf(n(a))+1)%Ar.length],!0),s=()=>O(i,!n(i));const v=ee(()=>n(i)?dt.areas.filter(D=>D.status=="archived"):dt.areas.filter(D=>D.status=="active"));async function c(D,k){if(D.stopPropagation(),k===0)return;const w=dt.areas,I=n(v)[k],P=n(v)[k-1],z=w.findIndex(j=>j.id===P.id),N=z>0?w[z-1].index:null,C=P.index;await Jr(I.index,N,C)}async function b(D,k){if(D.stopPropagation(),k===n(v).length-1)return;const w=dt.areas,I=n(v)[k],P=n(v)[k+1],z=w.findIndex(j=>j.id===P.id),N=P.index,C=z<w.length-1?w[z+1].index:null;await Jr(I.index,N,C)}var f=Cs(),y=u(f),d=_(u(y),2),m=u(d);{var g=D=>{var k=js();k.__click=o;var w=u(k,!0);l(k),K(()=>U(w,n(a))),E(D,k)};V(m,D=>{n(i)||D(g)})}var h=_(m,2);h.__click=s;var p=u(h,!0);l(h),l(d),l(y);var x=_(y,2),T=u(x),A=u(T);Ie(A,17,()=>n(v),Re,(D,k,w)=>{Ss(D,{get area(){return n(k)},get handleSelect(){return t.onSelectArea},index:w,handleAreaMoveUp:c,handleAreaMoveDown:b,get viewMode(){return n(a)},get handleEdit(){return r.openEditAreaModal}})});var S=_(A,2);{var M=D=>{xs(D,{get handleClick(){return r.openCreateAreaModal}})};V(S,D=>{n(i)||D(M)})}l(T),l(x);var F=_(x,2);Pt(Ds(F,{}),D=>r=D,()=>r),l(f),K(()=>U(p,n(i)?"Active":"Archived")),E(e,f),ye()}me(["click"]);var Ps=W('<button aria-label="edit"> </button>'),Ns=W('<div tabindex="0" role="button" class="flex flex-row gap-2 items-start text-left"><p class="px-2 flex flex-row gap-2 text-sm mb-1.5 w-full text-base-content"><span class="w-8 h-8 flex mt-0.5"><!></span> <span class="flex-1"> </span> <!></p></div>'),Rs=W('<div class="h-full bg-primary/80 transition-all"></div>'),Ls=W('<span class="text-xs mx-0.5">â€¢</span> ',1),Fs=W('<button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†‘</button> <button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†“</button>',1),Bs=W('<button aria-label="edit"> </button>'),Ws=W('<div class="w-full transition-colors bg-base-100 cursor-pointer hover:bg-primary/20" role="button" tabindex="0"><div class="flex-1 min-w-0 p-2 pt-4"><div class="flex flex-row items-start gap-2 "><div class="shrink-0 size-8"><!></div> <p class="text-sm mb-1.5 text-base-content"> </p></div> <div class="mb-2 mt-3 w-full items-center flex h-1 bg-neutral"><!></div> <div class="flex flex-row justify-between items-center ms-2"><p class="text-xs font-semibold text-base-content/50 "> <!></p> <div class="flex flex-row gap-2 items-center mt-1"><!> <button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center"><svg viewBox="0 0 24 24" class="size-5" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button> <!></div></div></div></div>'),zs=W("<div><!></div>");function Gs(e,t){xe(t,!0);const r=ee(()=>ut.getByProject(t.project.id)),a=ee(()=>n(r).filter(g=>g.status==="active").length),i=ee(()=>n(r).filter(g=>g.status==="completed").length),o=ee(()=>n(r).filter(g=>g.status==="active"||g.status==="completed").length),s=ee(()=>n(o)>0?n(i)/n(o)*100:0);function v(g){for(const[h,p]of Object.entries(Bt.weeksByWeekOf))if(p.projectAssignments.some(x=>x.projectId===g))return h;return null}function c(g){const h=Ft();if(g===h)return"This week";const p=new Date(h),x=new Date(g),T=Math.round((x.getTime()-p.getTime())/(1e3*60*60*24)),A=Math.round(T/7);return A===1?"Next week":A>1?`In ${A} weeks`:A===-1?"Last week":g.slice(5)}const b=ee(()=>v(t.project.id));var f=zs(),y=u(f);{var d=g=>{var h=Ns();h.__click=()=>t.onclick(t.project);var p=u(h),x=u(p),T=u(x);Br(T,{get level(){return t.project.severity}}),l(x);var A=_(x,2),S=u(A,!0);l(A);var M=_(A,2);{var F=D=>{var k=Ps();k.__click=I=>t.handleProjectAssign(I,t.project);var w=u(k,!0);l(k),K(I=>{oe(k,1,`badge badge-lg badge-soft ${n(b)?"badge-accent":"badge-ghost text-base-content/40"} text-xs p-1.5 w-20 cursor-pointer justify-center rounded-lg items-center flex`),U(w,I)},[()=>c(n(b))]),E(D,k)};V(M,D=>{n(b)&&D(F)})}l(p),l(h),K(()=>U(S,t.project.name)),E(g,h)},m=g=>{var h=Ws();h.__click=()=>t.navigateToTasks(t.project),h.__keydown=L=>L.key==="Enter"&&t.navigateToTasks(t.project);var p=u(h),x=u(p),T=u(x),A=u(T);Br(A,{get level(){return t.project.severity}}),l(T);var S=_(T,2),M=u(S,!0);l(S),l(x);var F=_(x,2),D=u(F);{var k=L=>{var Z=Rs();K(()=>Wt(Z,`width: ${n(s)??""}%`)),E(L,Z)};V(D,L=>{n(o)>0&&L(k)})}l(F);var w=_(F,2),I=u(w),P=u(I),z=_(P);{var N=L=>{var Z=Ls(),q=_(ae(Z));K(()=>U(q,` ${n(i)??""} done`)),E(L,Z)};V(z,L=>{n(i)>0&&L(N)})}l(I);var C=_(I,2),j=u(C);{var B=L=>{var Z=Fs(),q=ae(Z);q.__click=ue=>t.handleProjectMoveUp(ue,t.index);var ie=_(q,2);ie.__click=ue=>t.handleProjectMoveDown(ue,t.index),E(L,Z)};V(j,L=>{t.allowReorder&&L(B)})}var G=_(j,2);G.__click=L=>t.handleEdit(L,t.project);var J=_(G,2);{var H=L=>{var Z=Bs();Z.__click=ie=>t.handleProjectAssign(ie,t.project);var q=u(Z,!0);l(Z),K(ie=>{oe(Z,1,`badge badge-lg badge-soft ${n(b)?"badge-accent":"badge-ghost text-base-content/40"} text-xs p-1.5 w-20 cursor-pointer flex justify-center rounded-lg items-center`),U(q,ie)},[()=>n(b)?c(n(b)):"Unassigned"]),E(L,Z)};V(J,L=>{t.allowWeekAssignment&&L(H)})}l(C),l(w),l(p),l(h),K(()=>{U(M,t.project.name),U(P,`${n(a)??""} active `)}),E(g,h)};V(y,g=>{t.isSelected?g(m,!1):g(d)})}l(f),E(e,f),ye()}me(["click","keydown"]);var Us=W('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 h-[650px] max-h-full bg-base-100 rounded-t-2xl "><div class="flex flex-col h-full"><div class="flex justify-between bg-base-200 items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="flex-1 overflow-auto min-h-0 p-4 space-y-4 "><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Learn Spanish, Build Website"/></div> <div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Type</label> <div class="join w-full"><input type="radio" name="type" class="join-item btn btn-sm flex-1" aria-label="Regular"/> <input type="radio" name="type" class="join-item btn btn-sm flex-1" aria-label="Maintenance"/></div></div> <span class="text-xs text-base-content/50 mb-2 block">Severity</span> <div class="flex flex-col gap-1"><button type="button"><span class="font-bold w-4">1</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">2</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">3</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">4</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">5</span> <span class="font-normal text-left flex-1"> </span></button></div> <span class="text-xs text-base-content/50 mb-2 block">Status</span> <div class="grid grid-cols-3 gap-1"><button type="button">Active</button> <button type="button">Blocked</button> <button type="button">Someday</button> <button type="button">Cancelled</button> <button type="button">Done</button></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div></div>');function Hs(e,t){xe(t,!0);const r=[];let a=X(!1),i=X(null),o=X(""),s=X("active"),v=X("regular"),c=X("sev3");function b(){console.log("Creating.."),O(i,null),O(o,""),O(s,"active"),O(v,"regular"),O(c,"sev3"),O(a,!0)}function f(x,T){x.stopPropagation(),O(i,T,!0),O(o,T.name,!0),O(s,T.status,!0),O(v,T.type||"regular",!0),O(c,T.severity||"sev1",!0),O(a,!0)}function y(){O(a,!1),O(i,null)}async function d(){!n(o).trim()||!t.selectedArea||(n(i)?await Oa(t.selectedArea.id,n(i).index,{name:n(o).trim(),status:n(s),type:n(v),severity:n(c)}):await Kn(t.selectedArea.id,n(o).trim(),n(v),n(c)),y())}var m={openCreateProjectModal:b,openEditProjectModal:f},g=de(),h=ae(g);{var p=x=>{var T=Us(),A=u(T);A.__click=y,A.__keydown=Ae=>Ae.key==="Escape"&&y();var S=_(A,2),M=u(S),F=u(M),D=u(F),k=u(D,!0);l(D);var w=_(D,2);w.__click=y,l(F);var I=_(F,2),P=u(I),z=_(u(P),2);at(z),z.__keydown=Ae=>Ae.key==="Enter"&&d(),l(P);var N=_(P,2),C=_(u(N),2),j=u(C);at(j),j.value=j.__value="regular";var B=_(j,2);at(B),B.value=B.__value="maintenance",l(C),l(N);var G=_(N,4),J=u(G);let H;J.__click=()=>O(c,"sev1");var L=_(u(J),2),Z=u(L,!0);l(L),l(J);var q=_(J,2);let ie;q.__click=()=>O(c,"sev2");var ue=_(u(q),2),le=u(ue,!0);l(ue),l(q);var R=_(q,2);let Y;R.__click=()=>O(c,"sev3");var te=_(u(R),2),re=u(te,!0);l(te),l(R);var se=_(R,2);let Q;se.__click=()=>O(c,"sev4");var $=_(u(se),2),ce=u($,!0);l($),l(se);var ne=_(se,2);let be;ne.__click=()=>O(c,"sev5");var he=_(u(ne),2),We=u(he,!0);l(he),l(ne),l(G);var Se=_(G,4),je=u(Se);let Ee;je.__click=()=>O(s,"active");var Le=_(je,2);let ze;Le.__click=()=>O(s,"blocked");var qe=_(Le,2);let $e;qe.__click=()=>O(s,"someday");var Ke=_(qe,2);let gt;Ke.__click=()=>O(s,"cancelled");var Dt=_(Ke,2);let Ht;Dt.__click=()=>O(s,"completed"),l(Se),l(I);var Xe=_(I,2),it=_(u(Xe),2);it.__click=y;var pt=_(it,2);pt.__click=d;var pr=u(pt,!0);l(pt),l(Xe),l(M),l(S),l(T),K(Ae=>{U(k,n(i)?"Edit Project":"New Project"),H=oe(J,1,"hover:bg-purple-600 btn btn-sm justify-start gap-2 transition-all",null,H,{"bg-purple-600":n(c)==="sev1","text-white":n(c)==="sev1"}),U(Z,At[n(v)].sev1),ie=oe(q,1,"hover:bg-red-500 btn btn-sm justify-start gap-2 transition-all",null,ie,{"bg-red-500":n(c)==="sev2","text-white":n(c)==="sev2"}),U(le,At[n(v)].sev2),Y=oe(R,1,"hover:bg-yellow-500 hover:text-black btn btn-sm justify-start gap-2 transition-all",null,Y,{"bg-yellow-500":n(c)==="sev3","text-black":n(c)==="sev3"}),U(re,At[n(v)].sev3),Q=oe(se,1,"hover:bg-sky-500 hover:text-black btn btn-sm justify-start gap-2 transition-all",null,Q,{"bg-sky-500":n(c)==="sev4","text-black":n(c)==="sev4"}),U(ce,At[n(v)].sev4),be=oe(ne,1,"hover:bg-emerald-500 hover:text-black btn btn-sm justify-start gap-3 transition-all",null,be,{"bg-emerald-500":n(c)==="sev5","text-black":n(c)==="sev5"}),U(We,At[n(v)].sev5),Ee=oe(je,1,"btn btn-sm hover:bg-warning hover:text-warning-content",null,Ee,{"btn-warning":n(s)==="active"}),ze=oe(Le,1,"btn btn-sm hover:btn-error",null,ze,{"btn-error":n(s)==="blocked"}),$e=oe(qe,1,"btn btn-sm hover:btn-info",null,$e,{"btn-info":n(s)==="someday"}),gt=oe(Ke,1,"btn btn-sm hover:btn-neutral",null,gt,{"btn-info":n(s)==="cancelled"}),Ht=oe(Dt,1,"btn btn-sm hover:btn-success",null,Ht,{"btn-success":n(s)==="completed"}),pt.disabled=Ae,U(pr,n(i)?"Save":"Create")},[()=>!n(o).trim()]),sr(z,()=>n(o),Ae=>O(o,Ae)),$t(r,[],j,()=>{"regular";return n(v)},Ae=>O(v,Ae)),$t(r,[],B,()=>{"maintenance";return n(v)},Ae=>O(v,Ae)),E(x,T)};V(h,x=>{n(a)&&x(p)})}return E(e,g),ye(m)}me(["click","keydown"]);var Vs=W('<button type="button"><div class="font-medium"> </div> <div class="text-xs opacity-70"> </div></button>'),Zs=W('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold">Assign to Week</h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-2"></div></div></div>');function Ys(e,t){xe(t,!0);let r=X(!1),a=X(null),i=X(void 0);function o(m,g,h){m.stopPropagation(),O(i,g,!0),O(a,h,!0),O(r,!0)}function s(){O(r,!1),O(a,null)}async function v(m,g){!n(a)||!n(i)||(g?await Ea(n(a).id,m):await Jn(n(a).id,n(i).id,m),s())}function c(m,g){const h=g??Ft();return Bt.getWeek(h)?.projectAssignments.some(x=>x.projectId===m)??!1}var b={openWeekPicker:o},f=de(),y=ae(f);{var d=m=>{var g=Zs(),h=u(g);h.__click=s,h.__keydown=S=>S.key==="Escape"&&s();var p=_(h,2),x=u(p),T=_(u(x),2);T.__click=s,l(x);var A=_(x,2);Ie(A,21,Xn,Re,(S,M)=>{const F=ee(()=>c(n(a).id,n(M).weekOf));var D=Vs();D.__click=()=>v(n(M).weekOf,n(F));var k=u(D),w=u(k,!0);l(k);var I=_(k,2),P=u(I,!0);l(I),l(D),K(()=>{oe(D,1,`w-full p-3 text-left rounded-lg border transition-colors ${n(F)?"bg-primary/20 text-primary-content border-primary":"border-base-content/10 hover:border-primary"}`),U(w,n(M).label),U(P,n(M).weekOf)}),E(S,D)}),l(A),l(p),l(g),E(m,g)};V(y,m=>{n(r)&&n(a)&&m(d)})}return E(e,f),ye(b)}me(["click","keydown"]);var qs=W("<button> </button>"),Ks=W('<div class="text-center py-8 text-base-content/50 text-sm"> </div>'),Xs=W('<button type="button" class="flex items-center h-16 gap-2 p-3 border-2 border-dashed border-base-content/20 rounded-lg text-base-content/50 cursor-pointer transition-all hover:border-primary hover:text-primary"><span class="text-lg">+</span> <span class="text-sm">Add Project</span></button>'),Js=W('<div class="flex flex-col h-full"><div class="flex flex-col border-b border-base-content/10 bg-base-100"><div class="flex flex-col items-start px-2"><div class="h-12 flex items-center "><button class="gap-2 text-sm text-secondary flex items-center justify-center rounded-lg hover:bg-base-100 text-base-content/70"><span>â†</span> <span>Back</span></button></div> <div class="flex items-center gap-3 pe-2"><span class="text-4xl"> </span> <h2 class="text-lg"> </h2></div></div> <div class="flex gap-1 mt-4 px-3 pb-2 overflow-x-auto"></div></div> <div class="flex-1 overflow-auto min-h-0 pb-5 pt-2.5"><div class="flex flex-col gap-2.5 py-0"><!> <!></div></div></div> <!> <!>',1);function Qs(e,t){xe(t,!0);let r=X(void 0);const a=j=>O(r,j.id,!0);let i,o,s=X(yt(localStorage.getItem("projectTabView")||"active"));ft(()=>{n(s)&&localStorage.setItem("projectTabView",n(s))});let v=ee(()=>!["completed","cancelled"].includes(n(s))),c=ee(()=>Ye.getByArea(t.selectedArea.id).filter(j=>j.status===n(s)));function b(j){return Ye.getByArea(t.selectedArea.id).filter(B=>B.status===j).length}async function f(j,B){if(j.stopPropagation(),B===0||!t.selectedArea)return;const G=Ye.getByArea(t.selectedArea.id),J=n(c)[B],H=n(c)[B-1],L=G.findIndex(ie=>ie.id===H.id),Z=L>0?G[L-1].index:null,q=H.index;await Qr(t.selectedArea.id,J.index,Z,q)}async function y(j,B){if(j.stopPropagation(),!t.selectedArea||B===n(c).length-1)return;const G=Ye.getByArea(t.selectedArea.id),J=n(c)[B],H=n(c)[B+1],L=G.findIndex(ie=>ie.id===H.id),Z=H.index,q=L<G.length-1?G[L+1].index:null;console.log(Z,q),await Qr(t.selectedArea.id,J.index,Z,q)}var d=Js(),m=ae(d),g=u(m),h=u(g),p=u(h),x=u(p);x.__click=function(...j){t.navigateBack?.apply(this,j)},l(p);var T=_(p,2),A=u(T),S=u(A,!0);l(A);var M=_(A,2),F=u(M,!0);l(M),l(T),l(h);var D=_(h,2);Ie(D,21,()=>ms,Re,(j,B)=>{const G=ee(()=>n(s)===n(B).value),J=ee(()=>b(n(B).value));var H=qs();H.__click=()=>O(s,n(B).value,!0);var L=u(H);l(H),K(()=>{oe(H,1,`px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap ${n(G)?"bg-primary/40 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),U(L,`${n(B).label??""} (${n(J)??""})`)}),E(j,H)}),l(D),l(g);var k=_(g,2),w=u(k),I=u(w);Ie(I,17,()=>n(c),Re,(j,B,G)=>{{let J=ee(()=>n(r)==n(B).id);Gs(j,{get isSelected(){return n(J)},onclick:a,handleProjectAssign:(H,L)=>o.openWeekPicker(H,t.selectedArea,L),index:G,get allowReorder(){return n(v)},get navigateToTasks(){return t.navigateToTasks},get project(){return n(B)},get allowWeekAssignment(){return n(v)},get handleEdit(){return i.openEditProjectModal},handleProjectMoveUp:f,handleProjectMoveDown:y})}},j=>{var B=Ks(),G=u(B);l(B),K(()=>U(G,`No ${n(s)??""} projects`)),E(j,B)});var P=_(I,2);{var z=j=>{var B=Xs();B.__click=function(...G){i.openCreateProjectModal?.apply(this,G)},E(j,B)};V(P,j=>{n(s)=="active"&&j(z)})}l(w),l(k),l(m);var N=_(m,2);Pt(Hs(N,{get selectedArea(){return t.selectedArea}}),j=>i=j,()=>i);var C=_(N,2);Pt(Ys(C,{}),j=>o=j,()=>o),K(()=>{U(S,t.selectedArea.icon),U(F,t.selectedArea.name)}),E(e,d),ye()}me(["click"]);var $s=W('<button type="button"> </button>'),el=W('<div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Status</label> <div class="flex flex-wrap gap-2"></div></div>'),tl=W('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Read chapter 1, Write blog post"/></div> <!></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function rl(e,t){xe(t,!0);let r=X(!1),a=X(null),i=X(""),o=X("active");function s(){O(a,null),O(i,""),O(o,"active"),O(r,!0)}function v(g,h){g.stopPropagation(),O(a,h,!0),O(i,h.name,!0),O(o,h.status,!0),O(r,!0)}function c(){O(r,!1),O(a,null)}async function b(){!n(i).trim()||!t.selectedProject||!t.selectedArea||(n(a)?await Sa(t.selectedProject.id,n(a).index,{name:n(i).trim(),status:n(o)}):await Ia(t.selectedProject.id,t.selectedArea.id,n(i).trim()),c())}var f={openCreateTaskModal:s,openEditTaskModal:v},y=de(),d=ae(y);{var m=g=>{var h=tl(),p=u(h);p.__click=c,p.__keydown=j=>j.key==="Escape"&&c();var x=_(p,2),T=u(x),A=u(T),S=u(A,!0);l(A);var M=_(A,2);M.__click=c,l(T);var F=_(T,2),D=u(F),k=_(u(D),2);at(k),k.__keydown=j=>j.key==="Enter"&&b(),l(D);var w=_(D,2);{var I=j=>{var B=el(),G=_(u(B),2);Ie(G,21,()=>hs,Re,(J,H)=>{var L=$s();L.__click=()=>O(o,n(H).value,!0);var Z=u(L,!0);l(L),K(()=>{oe(L,1,`px-3 py-1.5 text-sm rounded-lg border transition-colors ${n(o)===n(H).value?"bg-primary text-primary-content border-primary":"border-base-content/20 hover:border-primary"}`),U(Z,n(H).label)}),E(J,L)}),l(G),l(B),E(j,B)};V(w,j=>{n(a)&&j(I)})}l(F);var P=_(F,2),z=_(u(P),2);z.__click=c;var N=_(z,2);N.__click=b;var C=u(N,!0);l(N),l(P),l(x),l(h),K(j=>{U(S,n(a)?"Edit Task":"New Task"),N.disabled=j,U(C,n(a)?"Save":"Create")},[()=>!n(i).trim()]),sr(k,()=>n(i),j=>O(i,j)),E(g,h)};V(d,g=>{n(r)&&g(m)})}return E(e,y),ye(f)}me(["click","keydown"]);var al=bt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>'),nl=bt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"></path></svg>'),ol=bt('<svg class="w-3 h-3 text-warning" fill="currentColor" viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16" rx="1"></rect><rect x="14" y="4" width="4" height="16" rx="1"></rect></svg>'),il=W('<button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†‘</button> <button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†“</button>',1),sl=W('<div tabindex="0" role="button" class="hover:bg-primary/20 cursor-pointer w-full flex flex-row items-start border-b border-b-base-content/10 p-2"><button type="button"><!></button> <div class="text-sm text-base-content/80 flex-1 "> </div> <!></div>');function ll(e,t){xe(t,!0);const r=ee(()=>t.task.status==="completed"),a=ee(()=>t.task.status==="cancelled"),i=ee(()=>t.task.status==="blocked");var o=sl();o.__click=g=>t.handleEdit(g,t.task);var s=u(o);s.__click=g=>t.toggleTaskComplete(g,t.task);var v=u(s);{var c=g=>{var h=al();E(g,h)},b=g=>{var h=de(),p=ae(h);{var x=A=>{var S=nl();E(A,S)},T=A=>{var S=de(),M=ae(S);{var F=D=>{var k=ol();E(D,k)};V(M,D=>{n(i)&&D(F)},!0)}E(A,S)};V(p,A=>{n(a)?A(x):A(T,!1)},!0)}E(g,h)};V(v,g=>{n(r)?g(c):g(b,!1)})}l(s);var f=_(s,2),y=u(f,!0);l(f);var d=_(f,2);{var m=g=>{var h=il(),p=ae(h);p.__click=T=>t.handleTaskMoveUp(T,t.index);var x=_(p,2);x.__click=T=>t.handleTaskMoveDown(T,t.index),E(g,h)};V(d,g=>{t.reorderEnabled&&g(m)})}l(o),K(()=>{oe(s,1,`w-6 h-6 cursor-pointer rounded-full border-2 flex me-2 items-center justify-center text-xs transition-colors flex-shrink-0 ${n(r)?"bg-success border-success text-success-content":n(i)?"border-warning":n(a)?"bg-error border-error text-error-content":"border-base-content/30 hover:border-success"}`),s.disabled=n(a),U(y,t.task.name)}),E(e,o),ye()}me(["click"]);var cl=W('<div class="flex flex-col h-full w-full"><div class="flex flex-col border-b border-base-content/10 bg-base-100"><div class="flex flex-col w-full items-start px-2"><div class="flex flex-row w-full justify-between h-12 items-center "><button class="gap-2 text-sm text-secondary flex items-center justify-center rounded-lg hover:bg-base-100 text-base-content/70"><span>â†</span> <span>Back</span></button> <div class="badge badge-sm badge-secondary rounded"> </div></div> <div class="flex items-center gap-2"><svg class="size-10 inline shrink-0 text-base-content/40 align-text-bottom -mb-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <h2 class="text-base "> </h2></div> <div class="flex gap-1 overflow-x-auto my-2"><button class="text-base-content/50 bg-base-300 hover:bg-primary/50 hover:text-primary-content px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap">+ New</button> <button>Reorder</button> <button class="px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap text-base-content/50 bg-base-300 hover:text-base-content hover:bg-primary/50">Complete project</button></div></div></div> <div class="flex-1 overflow-auto bg-base-200  min-h-0 pb-5 pt-2.5"><div class="flex flex-col px-2 py-0"></div></div></div> <!>',1);function dl(e,t){xe(t,!0);let r,a=ee(()=>Ye.getById(t.selectedProject.id)?.status),i=ee(()=>ut.getByProject(t.selectedProject.id)),o=X(!1),s=()=>O(o,!n(o));async function v(N){await Oa(t.selectedArea.id,t.selectedProject.index,{status:"completed"})}async function c(N,C){if(N.stopPropagation(),!t.selectedProject)return;const j=C.status==="completed"?"active":"completed";await Sa(t.selectedProject.id,C.index,{status:j})}async function b(N,C){if(N.stopPropagation(),C===0||!t.selectedProject)return;const j=n(i),B=ut.getByProject(t.selectedProject.id),G=j[C],J=j[C-1],H=B.findIndex(q=>q.id===J.id),L=H>0?B[H-1].index:null,Z=J.index;await $r(t.selectedProject.id,G.index,L,Z)}async function f(N,C){if(N.stopPropagation(),!t.selectedProject)return;const j=n(i);if(C===j.length-1)return;const B=ut.getByProject(t.selectedProject.id),G=j[C],J=j[C+1],H=B.findIndex(q=>q.id===J.id),L=J.index,Z=H<B.length-1?B[H+1].index:null;await $r(t.selectedProject.id,G.index,L,Z)}var y=cl(),d=ae(y),m=u(d),g=u(m),h=u(g),p=u(h);p.__click=function(...N){t.navigateBack?.apply(this,N)};var x=_(p,2),T=u(x,!0);l(x),l(h);var A=_(h,2),S=_(u(A),2),M=u(S,!0);l(S),l(A);var F=_(A,2),D=u(F);D.__click=function(...N){r.openCreateTaskModal?.apply(this,N)};var k=_(D,2);k.__click=s;var w=_(k,2);w.__click=v,l(F),l(g),l(m);var I=_(m,2),P=u(I);Ie(P,21,()=>n(i),Re,(N,C,j)=>{ll(N,{get handleEdit(){return r.openEditTaskModal},handleTaskMoveUp:b,handleTaskMoveDown:f,index:j,get task(){return n(C)},toggleTaskComplete:c,get reorderEnabled(){return n(o)}})}),l(P),l(I),l(d);var z=_(d,2);Pt(rl(z,{get selectedArea(){return t.selectedArea},get selectedProject(){return t.selectedProject}}),N=>r=N,()=>r),K(()=>{U(T,n(a)),U(M,t.selectedProject.name),oe(k,1,`px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap ${n(o)?"bg-primary/40 text-primary-content":"text-base-content/50 bg-base-300 hover:text-base-content hover:bg-primary/50"}`)}),E(e,y),ye()}me(["click"]);var ul=W('<div class="flex items-center justify-center h-full text-base-content/50"><p>Review - Coming soon</p></div>'),vl=W('<div class="h-screen flex flex-col bg-base-300"><div class="pb-22 h-full"><!></div> <!></div>');function xl(e,t){xe(t,!0);const r=()=>s("areas"),a=()=>s("projects");let i=X(void 0),o=X(void 0);s("areas");function s(h){Pn("",{activeTab:h})}function v(h){O(i,h,!0),s("projects")}function c(h){O(o,h,!0),O(i,dt.getById(h.areaId),!0),s("tasks")}var b=vl(),f=u(b),y=u(f);{var d=h=>{Ms(h,{onSelectArea:v})},m=h=>{var p=de(),x=ae(p);{var T=S=>{Qs(S,{navigateBack:r,navigateToTasks:c,get selectedArea(){return n(i)}})},A=S=>{var M=de(),F=ae(M);{var D=w=>{dl(w,{navigateBack:a,get selectedArea(){return n(i)},get selectedProject(){return n(o)}})},k=w=>{var I=de(),P=ae(I);{var z=C=>{$i(C,{navigateToTasks:c})},N=C=>{var j=de(),B=ae(j);{var G=H=>{ps(H,{})},J=H=>{var L=de(),Z=ae(L);{var q=ie=>{var ue=ul();E(ie,ue)};V(Z,ie=>{st.state.activeTab==="review"&&ie(q)},!0)}E(H,L)};V(B,H=>{st.state.activeTab==="today"?H(G):H(J,!1)},!0)}E(C,j)};V(P,C=>{st.state.activeTab==="week"?C(z):C(N,!1)},!0)}E(w,I)};V(F,w=>{st.state.activeTab=="tasks"?w(D):w(k,!1)},!0)}E(S,M)};V(x,S=>{st.state.activeTab==="projects"?S(T):S(A,!1)},!0)}E(h,p)};V(y,h=>{st.state.activeTab==="areas"?h(d):h(m,!1)})}l(f);var g=_(f,2);go(g,{get activeTab(){return st.state.activeTab},onTabChange:s}),l(b),E(e,b),ye()}export{xl as component};
