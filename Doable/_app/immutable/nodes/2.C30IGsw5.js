import{d as te,f as N,a as M,s as B,c as $,b as Ye}from"../chunks/C0mSsNzB.js";import{y as Be,E as Rt,K as Oe,A as ne,ao as zt,F as Vt,g as e,T as Ft,H as Ut,I as Ht,J as bt,L as Le,B as Pe,aa as Gt,aC as qt,ah as ft,o as be,aE as ce,z as qe,D as Jt,a8 as gt,a4 as Kt,aA as Qe,aF as Yt,aG as Qt,aH as Xt,aI as Zt,v as Tt,x as Pt,aJ as Re,aw as $t,az as ea,w as ta,aK as Mt,q as Se,aL as aa,aM as ra,aN as na,aO as sa,aP as oa,aQ as la,aR as St,a5 as ia,u as ca,r as Ct,aS as da,aT as va,aU as ua,p as ae,l as re,n as s,m as o,s as b,t as G,k as Q,O as Y,N as I,a6 as K,b as Ie,U as Ce}from"../chunks/BqVyvuT7.js";import{i as U}from"../chunks/Dgz-J3ua.js";import{a as ba}from"../chunks/BoiUuVOB.js";import{p as ue}from"../chunks/D8WKdg-s.js";import{b as ke}from"../chunks/BYS0SYey.js";import{a1 as Me,a2 as fa,a3 as ga,a4 as xa,a5 as It,a6 as Et,a7 as he,a8 as ye,a9 as pa,aa as fe,ab as de,ac as we,ad as _a,ae as ma,af as ka,ag as ha,ah as ya,ai as wa,aj as ja,ak as xt,al as Aa,am as Ta,an as Pa,ao as Ma,ap as pt,aq as Dt,ar as Sa,as as _t}from"../chunks/CqUaVhGt.js";function se(a,t){return t}function Ca(a,t,n){for(var r=[],l=t.length,c,i=t.length,h=0;h<l;h++){let j=t[h];Pt(j,()=>{if(c){if(c.pending.delete(j),c.done.add(j),c.pending.size===0){var k=a.outrogroups;Je(Qe(c.done)),k.delete(c),k.size===0&&(a.outrogroups=null)}}else i-=1},!1)}if(i===0){var f=r.length===0&&n!==null;if(f){var x=n,y=x.parentNode;ea(y),y.append(x),a.items.clear()}Je(t,!f)}else c={pending:new Set(t),done:new Set},(a.outrogroups??=new Set).add(c)}function Je(a,t=!0){for(var n=0;n<a.length;n++)ta(a[n],t)}var mt;function oe(a,t,n,r,l,c=null){var i=a,h=new Map,f=(t&Mt)!==0;if(f){var x=a;i=ne?Oe(zt(x)):x.appendChild(Be())}ne&&Vt();var y=null,j=Ft(()=>{var p=n();return Yt(p)?p:p==null?[]:Qe(p)}),k,P=!0;function _(){v.fallback=y,Ia(v,k,i,t,r),y!==null&&(k.length===0?(y.f&ce)===0?Tt(y):(y.f^=ce,_e(y,null,i)):Pt(y,()=>{y=null}))}var m=Rt(()=>{k=e(j);var p=k.length;let A=!1;if(ne){var C=Ut(i)===Ht;C!==(p===0)&&(i=bt(),Oe(i),Le(!1),A=!0)}for(var S=new Set,D=be,L=Jt(),d=0;d<p;d+=1){ne&&Pe.nodeType===Gt&&Pe.data===qt&&(i=Pe,A=!0,Le(!1));var u=k[d],g=r(u,d),w=P?null:h.get(g);w?(w.v&&ft(w.v,u),w.i&&ft(w.i,d),L&&D.skipped_effects.delete(w.e)):(w=Ea(h,P?i:mt??=Be(),u,g,d,l,t,n),P||(w.e.f|=ce),h.set(g,w)),S.add(g)}if(p===0&&c&&!y&&(P?y=qe(()=>c(i)):(y=qe(()=>c(mt??=Be())),y.f|=ce)),ne&&p>0&&Oe(bt()),!P)if(L){for(const[T,W]of h)S.has(T)||D.skipped_effects.add(W.e);D.oncommit(_),D.ondiscard(()=>{})}else _();A&&Le(!0),e(j)}),v={effect:m,items:h,outrogroups:null,fallback:y};P=!1,ne&&(i=Pe)}function Ia(a,t,n,r,l){var c=(r&aa)!==0,i=t.length,h=a.items,f=a.effect.first,x,y=null,j,k=[],P=[],_,m,v,p;if(c)for(p=0;p<i;p+=1)_=t[p],m=l(_,p),v=h.get(m).e,(v.f&ce)===0&&(v.nodes?.a?.measure(),(j??=new Set).add(v));for(p=0;p<i;p+=1){if(_=t[p],m=l(_,p),v=h.get(m).e,a.outrogroups!==null)for(const w of a.outrogroups)w.pending.delete(v),w.done.delete(v);if((v.f&ce)!==0)if(v.f^=ce,v===f)_e(v,null,n);else{var A=y?y.next:f;v===a.effect.last&&(a.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),ve(a,y,v),ve(a,v,A),_e(v,A,n),y=v,k=[],P=[],f=y.next;continue}if((v.f&Re)!==0&&(Tt(v),c&&(v.nodes?.a?.unfix(),(j??=new Set).delete(v))),v!==f){if(x!==void 0&&x.has(v)){if(k.length<P.length){var C=P[0],S;y=C.prev;var D=k[0],L=k[k.length-1];for(S=0;S<k.length;S+=1)_e(k[S],C,n);for(S=0;S<P.length;S+=1)x.delete(P[S]);ve(a,D.prev,L.next),ve(a,y,D),ve(a,L,C),f=C,y=L,p-=1,k=[],P=[]}else x.delete(v),_e(v,f,n),ve(a,v.prev,v.next),ve(a,v,y===null?a.effect.first:y.next),ve(a,y,v),y=v;continue}for(k=[],P=[];f!==null&&f!==v;)(x??=new Set).add(f),P.push(f),f=f.next;if(f===null)continue}(v.f&ce)===0&&k.push(v),y=v,f=v.next}if(a.outrogroups!==null){for(const w of a.outrogroups)w.pending.size===0&&(Je(Qe(w.done)),a.outrogroups?.delete(w));a.outrogroups.size===0&&(a.outrogroups=null)}if(f!==null||x!==void 0){var d=[];if(x!==void 0)for(v of x)(v.f&Re)===0&&d.push(v);for(;f!==null;)(f.f&Re)===0&&f!==a.fallback&&d.push(f),f=f.next;var u=d.length;if(u>0){var g=(r&Mt)!==0&&i===0?n:null;if(c){for(p=0;p<u;p+=1)d[p].nodes?.a?.measure();for(p=0;p<u;p+=1)d[p].nodes?.a?.fix()}Ca(a,d,g)}}c&&Se(()=>{if(j!==void 0)for(v of j)v.nodes?.a?.apply()})}function Ea(a,t,n,r,l,c,i,h){var f=(i&Qt)!==0?(i&Xt)===0?Kt(n,!1,!1):gt(n):null,x=(i&Zt)!==0?gt(l):null;return{v:f,i:x,e:qe(()=>(c(t,f??n,x??l,h),()=>{a.delete(r)}))}}function _e(a,t,n){if(a.nodes)for(var r=a.nodes.start,l=a.nodes.end,c=t&&(t.f&ce)===0?t.nodes.start:n;r!==null;){var i=$t(r);if(c.before(r),r===l)return;r=i}}function ve(a,t,n){t===null?a.effect.first=n:t.next=n,n===null?a.effect.last=t:n.prev=t}const kt=[...` 	
\r\f¬†\v\uFEFF`];function Da(a,t,n){var r=a==null?"":""+a;if(t&&(r=r?r+" "+t:t),n){for(var l in n)if(n[l])r=r?r+" "+l:l;else if(r.length)for(var c=l.length,i=0;(i=r.indexOf(l,i))>=0;){var h=i+c;(i===0||kt.includes(r[i-1]))&&(h===r.length||kt.includes(r[h]))?r=(i===0?"":r.substring(0,i))+r.substring(h+1):i=h}}return r===""?null:r}function ht(a,t=!1){var n=t?" !important;":";",r="";for(var l in a){var c=a[l];c!=null&&c!==""&&(r+=" "+l+": "+c+n)}return r}function ze(a){return a[0]!=="-"||a[1]!=="-"?a.toLowerCase():a}function Na(a,t){if(t){var n="",r,l;if(Array.isArray(t)?(r=t[0],l=t[1]):r=t,a){a=String(a).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var c=!1,i=0,h=!1,f=[];r&&f.push(...Object.keys(r).map(ze)),l&&f.push(...Object.keys(l).map(ze));var x=0,y=-1;const m=a.length;for(var j=0;j<m;j++){var k=a[j];if(h?k==="/"&&a[j-1]==="*"&&(h=!1):c?c===k&&(c=!1):k==="/"&&a[j+1]==="*"?h=!0:k==='"'||k==="'"?c=k:k==="("?i++:k===")"&&i--,!h&&c===!1&&i===0){if(k===":"&&y===-1)y=j;else if(k===";"||j===m-1){if(y!==-1){var P=ze(a.substring(x,y).trim());if(!f.includes(P)){k!==";"&&j++;var _=a.substring(x,j).trim();n+=" "+_+";"}}x=j+1,y=-1}}}}return r&&(n+=ht(r)),l&&(n+=ht(l,!0)),n=n.trim(),n===""?null:n}return a==null?null:String(a)}function Z(a,t,n,r,l,c){var i=a.__className;if(ne||i!==n||i===void 0){var h=Da(n,r,c);(!ne||h!==a.getAttribute("class"))&&(h==null?a.removeAttribute("class"):a.className=h),a.__className=n}else if(c&&l!==c)for(var f in c){var x=!!c[f];(l==null||x!==!!l[f])&&a.classList.toggle(f,x)}return c}function Ve(a,t={},n,r){for(var l in n){var c=n[l];t[l]!==c&&(n[l]==null?a.style.removeProperty(l):a.style.setProperty(l,c,r))}}function je(a,t,n,r){var l=a.__style;if(ne||l!==t){var c=Na(t,r);(!ne||c!==a.getAttribute("style"))&&(c==null?a.removeAttribute("style"):a.style.cssText=c),a.__style=t}else r&&(Array.isArray(r)?(Ve(a,n?.[0],r[0]),Ve(a,n?.[1],r[1],"important")):Ve(a,n,r));return r}const Wa=Symbol("is custom element"),Ba=Symbol("is html");function me(a){if(ne){var t=!1,n=()=>{if(!t){if(t=!0,a.hasAttribute("value")){var r=a.value;Ke(a,"value",null),a.value=r}if(a.hasAttribute("checked")){var l=a.checked;Ke(a,"checked",null),a.checked=l}}};a.__on_r=n,Se(n),ra()}}function Ke(a,t,n,r){var l=Oa(a);ne&&(l[t]=a.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&a.nodeName==="LINK")||l[t]!==(l[t]=n)&&(t==="loading"&&(a[na]=n),n==null?a.removeAttribute(t):typeof n!="string"&&La(a).includes(t)?a[t]=n:a.setAttribute(t,n))}function Oa(a){return a.__attributes??={[Wa]:a.nodeName.includes("-"),[Ba]:a.namespaceURI===sa}}var yt=new Map;function La(a){var t=a.getAttribute("is")||a.nodeName,n=yt.get(t);if(n)return n;yt.set(t,n=[]);for(var r,l=a,c=Element.prototype;c!==l;){r=la(l);for(var i in r)r[i].set&&n.push(i);l=oa(l)}return n}function Xe(a,t,n=t){var r=new WeakSet;St(a,"input",async l=>{var c=l?a.defaultValue:a.value;if(c=Ue(a)?He(c):c,n(c),be!==null&&r.add(be),await ia(),c!==(c=t())){var i=a.selectionStart,h=a.selectionEnd,f=a.value.length;if(a.value=c??"",h!==null){var x=a.value.length;i===h&&h===f&&x>f?(a.selectionStart=x,a.selectionEnd=x):(a.selectionStart=i,a.selectionEnd=Math.min(h,x))}}}),(ne&&a.defaultValue!==a.value||ca(t)==null&&a.value)&&(n(Ue(a)?He(a.value):a.value),be!==null&&r.add(be)),Ct(()=>{var l=t();if(a===document.activeElement){var c=da??be;if(r.has(c))return}Ue(a)&&l===He(a.value)||a.type==="date"&&!l&&!a.value||l!==a.value&&(a.value=l??"")})}const Fe=new Set;function wt(a,t,n,r,l=r){var c=n.getAttribute("type")==="checkbox",i=a;let h=!1;if(t!==null)for(var f of t)i=i[f]??=[];i.push(n),St(n,"change",()=>{var x=n.__value;c&&(x=jt(i,x,n.checked)),l(x)},()=>l(c?[]:null)),Ct(()=>{var x=r();if(ne&&n.defaultChecked!==n.checked){h=!0;return}c?(x=x||[],n.checked=x.includes(n.__value)):n.checked=va(n.__value,x)}),ua(()=>{var x=i.indexOf(n);x!==-1&&i.splice(x,1)}),Fe.has(i)||(Fe.add(i),Se(()=>{i.sort((x,y)=>x.compareDocumentPosition(y)===4?-1:1),Fe.delete(i)})),Se(()=>{if(h){var x;if(c)x=jt(i,x,n.checked);else{var y=i.find(j=>j.checked);x=y?.__value}l(x)}})}function jt(a,t,n){for(var r=new Set,l=0;l<a.length;l+=1)a[l].checked&&r.add(a[l].__value);return n||r.delete(t),Array.from(r)}function Ue(a){var t=a.type;return t==="number"||t==="range"}function He(a){return a===""?null:+a}const pe={regular:{sev1:"Core to who I am or want to become",sev2:"Significant progress toward a major goal",sev3:"Meaningful but not defining",sev4:"Nice to do, no real deadline",sev5:"Pure exploration or fun"},maintenance:{sev1:"Immediate risk if ignored (safety, legal, financial)",sev2:"Disrupts daily life if neglected",sev3:"Routine upkeep, flexible timing",sev4:"Minor improvement, no consequences",sev5:"Cosmetic or nice-to-have"}},Ra=["üíº","üè†","üí™","üìö","üí∞","‚ù§Ô∏è","üéØ","üöÄ","üé®","üéµ","‚úàÔ∏è","üçé","üßò","üë®‚Äçüë©‚Äçüëß‚Äçüë¶","ü§ù","üì±","üíª","üîß","üìù","üéì","üèÉ","üß†","üå±","‚≠ê","üî•","üí°","üéÆ","üì∏","üõí","üè¶","üöó","üèãÔ∏è"];te(["click","keydown"]);var za=N('<button><span class="text-lg"> </span> <span class="text-[10px] font-medium truncate"> </span></button>'),Va=N('<nav class="pb-6 fixed bottom-0 left-0 right-0 bg-base-200 border-t border-base-content/10 flex justify-around pt-2 px-1 safe-bottom"></nav>');function Fa(a,t){ae(t,!0);const n=[{id:"areas",icon:"üìÅ",label:"Areas"},{id:"week",icon:"üìÖ",label:"Week"},{id:"today",icon:"‚òÄÔ∏è",label:"Today"}];var r=Va();oe(r,21,()=>n,se,(l,c)=>{var i=za();let h;i.__click=()=>t.onTabChange(e(c).id);let f;var x=o(i),y=o(x,!0);s(x);var j=b(x,2),k=o(j,!0);s(j),s(i),G(()=>{h=Z(i,1,"flex flex-col items-center gap-1 px-3 py-1 rounded-lg transition-colors min-w-0 flex-1",null,h,{"text-primary":t.activeTab===e(c).id,"text-base-content":t.activeTab!==e(c).id}),f=je(i,"",f,{opacity:t.activeTab===e(c).id?1:.4}),B(y,e(c).icon),B(k,e(c).label)}),M(l,i)}),s(r),M(a,r),re()}te(["click"]);var Ua=N('<button type="button"><span class="text-xs font-medium"> </span> <span class="text-lg"> </span></button>'),Ha=N('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><div><h2 class="text-lg font-semibold">Assign to Day</h2> <p class="text-xs text-base-content/50 truncate"> </p></div> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">‚úï</button></div> <div class="p-4 grid grid-cols-7 gap-1"></div> <div class="p-4 pt-0"><button type="button" class="w-full p-3 text-sm text-base-content/50 hover:text-base-content rounded-lg border border-base-content/10 hover:border-primary transition-colors">Remove from all days</button></div></div></div>');function Ga(a,t){ae(t,!0);let n=Y(!1),r=Y(null);function l(k,P,_,m){k.stopPropagation(),I(r,{task:P,project:_,area:m},!0),I(n,!0)}function c(){I(n,!1),I(r,null)}function i(){return ga(t.currentWeekOf).map(k=>({date:k,dayName:It(k),isToday:xa(k)}))}async function h(k){if(!e(r))return;const{task:P,project:_,area:m}=e(r);c();const v=t.isTaskAssignedToDay(P.id);v===k?await Me(P.id,_.id,t.currentWeekOf,k):(v&&await Me(P.id,_.id,t.currentWeekOf,v),await fa(P.id,_.id,m.id,P.name,t.currentWeekOf,k,!1))}var f={openDayPicker:l},x=$(),y=Q(x);{var j=k=>{var P=Ha(),_=o(P);_.__click=c,_.__keydown=u=>u.key==="Escape"&&c();var m=b(_,2),v=o(m),p=o(v),A=b(o(p),2),C=o(A,!0);s(A),s(p);var S=b(p,2);S.__click=c,s(v);var D=b(v,2);oe(D,21,i,se,(u,g)=>{const w=K(()=>t.isTaskAssignedToDay(e(r).task.id)===e(g).date);var T=Ua();T.__click=()=>h(e(g).date);var W=o(T),V=o(W,!0);s(W);var q=b(W,2),E=o(q,!0);s(q),s(T),G(R=>{Z(T,1,`flex flex-col items-center p-2 rounded-lg border transition-colors ${e(w)?"bg-primary text-primary-content border-primary":e(g).isToday?"border-primary/50 hover:border-primary":"border-base-content/10 hover:border-primary"}`),B(V,e(g).dayName),B(E,R)},[()=>e(g).date.split("-")[2]]),M(u,T)}),s(D);var L=b(D,2),d=o(L);d.__click=()=>{const u=t.isTaskAssignedToDay(e(r).task.id);u&&Me(e(r).task.id,e(r).project.id,t.currentWeekOf,u),c()},s(L),s(m),s(P),G(()=>B(C,e(r).task.name)),M(k,P)};U(y,k=>{e(n)&&e(r)&&k(j)})}return M(a,x),re(f)}te(["click","keydown"]);var qa=N('<div class="h-1 bg-base-300"><div class="h-full bg-base-content/20 transition-all"></div></div>'),Ja=N('<div class="bg-base-100 rounded-lg overflow-hidden"><!> <div class="flex items-center gap-3 p-3"><span class="text-2xl"> </span> <div class="flex-1 min-w-0"><p class="text-sm font-medium text-base-content truncate mb-1"> </p> <p class="text-xs text-base-content/50"> </p></div> <button type="button" class="w-7 h-7 flex items-center justify-center rounded text-base-content/30 hover:text-error hover:bg-error/10 transition-colors" title="Remove from week">‚úï</button></div></div>'),Ka=N('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No projects assigned to this week</p> <p class="text-base-content/30 text-xs">Go to Areas and assign projects</p></div>'),Ya=N('<div class="flex flex-col gap-2"><div class="flex justify-between items-center"><div class="text-xs tracking-wider text-base-content/50 uppercase">Assigned projects</div> <button> </button></div> <!></div>');function Qa(a,t){ae(t,!0);let n=Y(localStorage.getItem("filterAssignedProject")=="true"),r=()=>I(n,!e(n));Ie(()=>{localStorage.setItem("filterAssignedProject",e(n)+"")});async function l(j,k){j.stopPropagation(),await Et(k,t.currentWeekOf)}function c(j){const k=he.getByProject(j),P=k.filter(m=>m.status==="active").length,_=k.filter(m=>m.status==="completed").length;return{active:P,completed:_,total:P+_}}var i=Ya(),h=o(i),f=b(o(h),2);f.__click=r;var x=o(f);s(f),s(h);var y=b(h,2);oe(y,17,()=>t.assignedProjects,se,(j,k)=>{let P=()=>e(k).project,_=()=>e(k).area;const m=K(()=>c(P().id)),v=K(()=>e(m).total>0?e(m).completed/e(m).total*100:0);var p=$(),A=Q(p);{var C=S=>{var D=Ja(),L=o(D);{var d=F=>{var J=qa(),z=o(J);s(J),G(()=>je(z,`width: ${e(v)??""}%`)),M(F,J)};U(L,F=>{e(m).total>0&&F(d)})}var u=b(L,2),g=o(u),w=o(g,!0);s(g);var T=b(g,2),W=o(T),V=o(W,!0);s(W);var q=b(W,2),E=o(q,!0);s(q),s(T);var R=b(T,2);R.__click=F=>l(F,P().id),s(u),s(D),G(()=>{B(w,_().icon),B(V,P().name),B(E,_().name)}),M(S,D)};U(A,S=>{(e(v)<100&&e(n)||!e(n))&&S(C)})}M(j,p)},j=>{var k=Ka();M(j,k)}),s(i),G(()=>{Z(f,1,`w-20 btn btn-xs btn-soft btn-secondary ${e(n)?"bg-secondary text-secondary-content":""}`),B(x,`Filter :${e(n)?"ON":"OFF"}`)}),M(a,i),re()}te(["click"]);var Xa=N('<span class="text-xs text-primary-content px-2 py-1 bg-primary rounded"> </span>'),Za=N('<button class="text-start flex items-center gap-3 p-3 bg-base-100 border border-base-content/10 rounded-lg transition-all hover:border-primary"><div class="flex-1 min-w-0 "><p class="text-sm text-base-content truncate mb-1"> </p> <p class="text-xs text-base-content/50"> </p></div> <!></button>'),$a=N('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No tasks available</p> <p class="text-base-content/30 text-xs">Assigned projects have no active tasks</p></div>'),er=N('<div class="flex flex-col gap-2"></div>');function tr(a,t){ae(t,!0);var n=er();oe(n,21,()=>t.weekTasks,se,(r,l)=>{let c=()=>e(l).task,i=()=>e(l).project,h=()=>e(l).area;const f=K(()=>t.isTaskAssignedToDay(c().id));var x=Za();x.__click=p=>t.openDayPicker(p,c(),i(),h());var y=o(x),j=o(y),k=o(j,!0);s(j);var P=b(j,2),_=o(P);s(P),s(y);var m=b(y,2);{var v=p=>{var A=Xa(),C=o(A,!0);s(A),G(S=>B(C,S),[()=>It(e(f))]),M(p,A)};U(m,p=>{e(f)&&p(v)})}s(x),G(()=>{B(k,c().name),B(_,`${h().icon??""} ${i().name??""}`)}),M(r,x)},r=>{var l=$a();M(r,l)}),s(n),M(a,n),re()}te(["click"]);var ar=N('<div class="flex flex-col h-full"><div class="bg-base-100 border-b border-b-base-content/10"><div class="px-4 pt-4 pb-2 "><h2 class="text-lg font-medium">Week</h2> <p class="text-xs text-base-content/50"> </p></div> <div class="flex gap-1 px-4 pb-3"><button> </button> <button> </button></div></div> <div class="flex-1 overflow-y-auto px-4 py-4"><!></div></div> <!>',1);function rr(a,t){ae(t,!0);let n=Y(Ce(localStorage.getItem("weekTabView")||"projects"));Ie(()=>{e(n)&&localStorage.setItem("weekTabView",e(n))});let r=Ce(ye());const l=K(()=>we.getWeek(r));let c;function i(g){return e(l)?e(l).tasksByDay.find(T=>T.taskId===g)?.date??null:null}let h=K(()=>e(l)?e(l).projectAssignments.map(g=>{const w=fe.getById(g.areaId);if(!w)return null;const W=de.getByArea(w.id).find(V=>V.id===g.projectId);return W?{assignment:g,project:W,area:w}:null}).filter(g=>g!==null):[]),f=K(()=>{const g=[];for(const{project:w,area:T}of e(h)){const W=he.getByProject(w.id).filter(V=>V.status==="active");for(const V of W)g.push({task:V,project:w,area:T})}return g});var x=ar(),y=Q(x),j=o(y),k=o(j),P=b(o(k),2),_=o(P,!0);s(P),s(k);var m=b(k,2),v=o(m);v.__click=()=>I(n,"projects");var p=o(v);s(v);var A=b(v,2);A.__click=()=>I(n,"tasks");var C=o(A);s(A),s(m),s(j);var S=b(j,2),D=o(S);{var L=g=>{Qa(g,{get currentWeekOf(){return r},get assignedProjects(){return e(h)}})},d=g=>{tr(g,{get openDayPicker(){return c.openDayPicker},get weekTasks(){return e(f)},isTaskAssignedToDay:i})};U(D,g=>{e(n)==="projects"?g(L):g(d,!1)})}s(S),s(y);var u=b(y,2);ke(Ga(u,{get currentWeekOf(){return r},isTaskAssignedToDay:i}),g=>c=g,()=>c),G(g=>{B(_,g),Z(v,1,`px-4 py-1.5 text-sm rounded-lg transition-colors ${e(n)==="projects"?"bg-primary/20 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),B(p,`Projects (${e(h).length??""})`),Z(A,1,`px-4 py-1.5 text-sm rounded-lg transition-colors ${e(n)==="tasks"?"bg-primary/20 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),B(C,`Tasks (${e(f).length??""})`)},[()=>pa(r)]),M(a,x),re()}te(["click"]);var nr=N('<div class="px-4 pb-3"><div class="flex items-center justify-between text-xs text-base-content/50 mb-1"><span> </span> <span> </span></div> <div class="h-2 bg-base-100 rounded-full overflow-hidden"><div class="h-full bg-success transition-all rounded-full"></div></div></div>'),sr=N('<div class="flex items-center gap-3 p-3 bg-base-100 border border-base-content/10 rounded-lg"><button type="button" aria-label="check" class="w-7 h-7 rounded-full border-2 border-base-content/30 flex items-center justify-center flex-shrink-0 hover:border-success hover:bg-success/10 transition-colors"></button> <div class="flex-1 min-w-0"><p class="text-sm text-base-content mb-2"> </p> <p class="text-xs text-base-content/50 truncate"> </p></div> <button type="button" class="w-7 h-7 flex items-center justify-center rounded text-base-content/30 hover:text-error hover:bg-error/10 transition-colors" title="Remove from today">‚úï</button></div>'),or=N('<div class="flex flex-col gap-2 mb-4"></div>'),lr=N('<div class="text-center py-12"><span class="text-4xl block mb-3">üìã</span> <p class="text-base-content/50 text-sm mb-2">No tasks for today</p> <p class="text-base-content/30 text-xs">Go to Week tab and assign tasks</p></div>'),ir=N('<div class="text-center mb-5 py-12 border-2 border-dashed border-success/30 rounded-lg bg-success/5"><span class="text-4xl block mb-3">üéâ</span> <p class="text-sm font-medium text-success">All done for today!</p> <p class="text-xs text-base-content/50 mt-1">Great work!</p></div>'),cr=N('<div class="flex items-center gap-3 p-3 opacity-50"><button type="button" class="w-7 h-7 rounded-full bg-success border-2 border-success flex items-center justify-center flex-shrink-0 text-success-content" title="Mark as incomplete"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg></button> <div class="flex-1 min-w-0"><p class="text-sm text-base-content line-through truncate"> </p> <p class="text-xs text-base-content/50"> </p></div></div>'),dr=N('<div><p class="text-xs font-medium uppercase tracking-wider text-base-content/40 mb-2"> </p> <div class="flex flex-col gap-1"></div></div>'),vr=N('<div class="flex flex-col h-full"><div class="px-4 pt-4 pb-2"><h2 class="text-lg font-medium">Today</h2> <p class="text-xs text-base-content/50"> </p></div> <!> <div class="flex-1 overflow-y-auto px-3 pb-4"><!> <!></div></div>');function ur(a,t){ae(t,!0);const n=_a(),r=ye();let l=K(()=>{const d=we.getWeek(r);return d?d.tasksByDay.filter(u=>u.date===n).map(u=>{const g=he.getById(u.taskId),w=fe.getById(u.areaId),W=(w?de.getByArea(w.id):[]).find(V=>V.id===u.projectId);return{taskByDay:u,task:g,areaIcon:w?.icon??"üìÅ",areaName:w?.name??"Unknown",projectName:W?.name??"Unknown"}}):[]}),c=K(()=>e(l).filter(d=>d.taskByDay.status!=="completed")),i=K(()=>e(l).filter(d=>d.taskByDay.status==="completed"));function h(){const d=e(l),u=d.filter(T=>T.taskByDay.status==="completed").length,g=d.length,w=g>0?u/g*100:0;return{completed:u,total:g,percent:w}}async function f(d){await ka(d.taskId,d.projectId,r,n)}async function x(d){await ha(d.taskId,d.projectId,r,n)}async function y(d){await Me(d.taskId,d.projectId,r,n)}var j=vr(),k=o(j),P=b(o(k),2),_=o(P);s(P),s(k);var m=b(k,2);{var v=d=>{const u=K(h);var g=nr(),w=o(g),T=o(w),W=o(T);s(T);var V=b(T,2),q=o(V);s(V),s(w);var E=b(w,2),R=o(E);s(E),s(g),G(F=>{B(W,`${e(u).completed??""} of ${e(u).total??""} completed`),B(q,`${F??""}%`),je(R,`width: ${e(u).percent??""}%`)},[()=>Math.round(e(u).percent)]),M(d,g)};U(m,d=>{h().total>0&&d(v)})}var p=b(m,2),A=o(p);{var C=d=>{var u=or();oe(u,21,()=>e(c),se,(g,w)=>{let T=()=>e(w).taskByDay,W=()=>e(w).areaIcon,V=()=>e(w).projectName;var q=sr(),E=o(q);E.__click=()=>f(T());var R=b(E,2),F=o(R),J=o(F,!0);s(F);var z=b(F,2),O=o(z);s(z),s(R);var H=b(R,2);H.__click=()=>y(T()),s(q),G(()=>{B(J,T().name),B(O,`${W()??""}  ${V()??""}`)}),M(g,q)}),s(u),M(d,u)},S=d=>{var u=$(),g=Q(u);{var w=W=>{var V=lr();M(W,V)},T=W=>{var V=ir();M(W,V)};U(g,W=>{h().total===0?W(w):W(T,!1)},!0)}M(d,u)};U(A,d=>{e(c).length>0?d(C):d(S,!1)})}var D=b(A,2);{var L=d=>{var u=dr(),g=o(u),w=o(g);s(g);var T=b(g,2);oe(T,21,()=>e(i),se,(W,V)=>{let q=()=>e(V).taskByDay,E=()=>e(V).areaIcon,R=()=>e(V).areaName,F=()=>e(V).projectName;var J=cr(),z=o(J);z.__click=()=>x(q());var O=b(z,2),H=o(O),X=o(H,!0);s(H);var ee=b(H,2),ie=o(ee);s(ee),s(O),s(J),G(()=>{B(X,q().name),B(ie,`${E()??""} ${R()??""} ¬∑ ${F()??""}`)}),M(W,J)}),s(T),s(u),G(()=>B(w,`Completed (${e(i).length??""})`)),M(d,u)};U(D,d=>{e(i).length>0&&d(L)})}s(p),s(j),G(d=>B(_,`${d??""}, ${n??""}`),[()=>ma(n)]),M(a,j),re()}te(["click"]);const Ge=["none","reorder","edit","status"],br=[{value:"active",label:"Active",color:"border-s-primary"},{value:"blocked",label:"Blocked",color:"border-s-warning"},{value:"someday",label:"Someday",color:"border-s-info"},{value:"completed",label:"Completed",color:"border-s-success"},{value:"cancelled",label:"Cancelled",color:"border-s-error"}],fr=[{value:"active",label:"Active"},{value:"blocked",label:"Blocked"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}];var gr=N('<button class="rounded-lg border border-dashed min-h-30 border-base-content/20 bg-transparent hover:bg-primary/20 transition-colors cursor-pointer w-full"><div class="card-body p-3 items-center justify-center text-center min-h-[88px]"><span class="text-xl text-base-content/50">+</span> <span class="text-xs text-base-content/50">Add Area</span></div></button>');function xr(a,t){var n=gr();n.__click=function(...r){t.handleClick?.apply(this,r)},M(a,n)}te(["click"]);var pr=N('<button type="button"> </button>'),_r=N('<button type="button" class="btn btn-outline btn-error btn-sm">Archive</button>'),mr=N('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">‚úï</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Icon</label> <div class="grid grid-cols-8 gap-1"></div></div> <div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Health, Work, Learning"/></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><!> <div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function kr(a,t){ae(t,!0);let n=Y(!1),r=Y(null),l=Y(""),c=Y("üéØ");function i(){I(r,null),I(l,""),I(c,"üéØ"),I(n,!0)}function h(v,p){v.stopPropagation(),I(r,p,!0),I(l,p.name,!0),I(c,p.icon,!0),I(n,!0)}function f(){I(n,!1),I(r,null)}async function x(){!e(l).trim()||!e(c)||(e(r)?await ya(e(r).index,{name:e(l).trim(),icon:e(c)}):await wa(e(l).trim(),e(c)),f())}function y(v){return de.getByArea(v.id).filter(A=>A.status==="active").length===0}async function j(){!e(r)||!y(e(r))||(await ja(e(r).index),f())}var k={openCreateAreaModal:i,openEditAreaModal:h},P=$(),_=Q(P);{var m=v=>{var p=mr(),A=o(p);A.__click=f,A.__keydown=z=>z.key==="Escape"&&f();var C=b(A,2),S=o(C),D=o(S),L=o(D,!0);s(D);var d=b(D,2);d.__click=f,s(S);var u=b(S,2),g=o(u),w=b(o(g),2);oe(w,21,()=>Ra,se,(z,O)=>{var H=pr();H.__click=()=>I(c,e(O),!0);var X=o(H,!0);s(H),G(()=>{Z(H,1,`aspect-square flex items-center justify-center text-lg rounded-lg transition-colors ${e(c)===e(O)?"bg-primary text-primary-content":"hover:bg-base-200"}`),B(X,e(O))}),M(z,H)}),s(w),s(g);var T=b(g,2),W=b(o(T),2);me(W),W.__keydown=z=>z.key==="Enter"&&x(),s(T),s(u);var V=b(u,2),q=o(V);{var E=z=>{var O=_r();O.__click=j,G((H,X)=>{O.disabled=H,Ke(O,"title",X)},[()=>!y(e(r)),()=>y(e(r))?"Archive area":"Cannot archive: has active projects"]),M(z,O)};U(q,z=>{e(r)&&z(E)})}var R=b(q,4);R.__click=f;var F=b(R,2);F.__click=x;var J=o(F,!0);s(F),s(V),s(C),s(p),G(z=>{B(L,e(r)?"Edit Area":"New Area"),F.disabled=z,B(J,e(r)?"Save":"Create")},[()=>!e(l).trim()||!e(c)]),Xe(W,()=>e(l),z=>I(l,z)),M(v,p)};U(_,v=>{e(n)&&v(m)})}return M(a,P),re(k)}te(["click","keydown"]);var hr=N('<button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center"><svg viewBox="0 0 24 24" class="size-6" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button>'),yr=N('<div class="flex flex-row gap-1"><button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üê</button> <button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üí</button></div>'),wr=N("<div> </div>"),jr=N('<div tabindex="0" role="button"><div class="flex flex-col py-4 px-3 items-start text-left"><div class="w-full flex flex-row justify-between items-start"><span class="text-4xl mb-3"> </span> <!></div> <div class="flex flex-row justify-between items-end w-full"><div class="flex flex-col w-full"><div class="text-sm font-medium mb-0 pb-1 truncate"> </div> <p class="text-xs text-base-content/50"> </p></div></div></div></div>');function Ar(a,t){ae(t,!0);const n=K(()=>de.getByArea(t.area.id).filter(A=>A.status==="active").length),r=K(()=>{const A=ye(),C=we.getWeek(A),S=de.getByArea(t.area.id);if(S.filter(T=>T.status==="active"||T.status==="blocked"||T.status==="someday").length===0)return{level:"clear",color:"badge-success",icon:"‚úì"};const L=C?.projectAssignments.some(T=>S.some(W=>W.id===T.projectId))??!1,d=new Date(A),u=S.some(T=>T.status==="completed"&&T.completedAt&&new Date(T.completedAt)>=d);if(L||u)return{level:"active",color:"badge-info",icon:"‚óè"};const g=S.filter(T=>T.status==="completed"&&T.completedAt),w=g.length>0?Math.max(...g.map(T=>new Date(T.completedAt).getTime())):null;if(w){const T=Date.now()-12096e5;if(w>=T)return{level:"cooling",color:"badge-warning",icon:"‚óã"}}return{level:"avoiding",color:"badge-error",icon:"!"}});var l=jr();l.__click=()=>t.handleSelect(t.area);var c=o(l),i=o(c),h=o(i),f=o(h,!0);s(h);var x=b(h,2);{var y=A=>{var C=hr();C.__click=S=>t.handleEdit(S,t.area),M(A,C)},j=A=>{var C=$(),S=Q(C);{var D=d=>{var u=yr(),g=o(u);g.__click=T=>t.handleAreaMoveUp(T,t.index);var w=b(g,2);w.__click=T=>t.handleAreaMoveDown(T,t.index),s(u),G(()=>g.disabled=t.index==0),M(d,u)},L=d=>{var u=$(),g=Q(u);{var w=T=>{var W=wr(),V=o(W,!0);s(W),G(()=>{Z(W,1,`badge badge-sm rounded ${e(r).color??""} badge-soft`),B(V,e(r).level)}),M(T,W)};U(g,T=>{t.viewMode=="status"&&T(w)},!0)}M(d,u)};U(S,d=>{t.viewMode=="reorder"?d(D):d(L,!1)},!0)}M(A,C)};U(x,A=>{t.viewMode=="edit"?A(y):A(j,!1)})}s(i);var k=b(i,2),P=o(k),_=o(P),m=o(_,!0);s(_);var v=b(_,2),p=o(v);s(v),s(P),s(k),s(c),s(l),G(()=>{Z(l,1,`rounded-lg bg-base-100 hover:bg-primary/20 transition-colors cursor-pointer w-full ${e(r).level==="avoiding"?"border border-error/20":e(r).level==="cooling"?"border border-warning/20":e(r).level==="active"?"border border-info/20":""}`),je(l,e(r).level==="avoiding"?"box-shadow: inset 0 0 30px rgba(248, 114, 114, 0.1);":e(r).level==="cooling"?"box-shadow: inset 0 0 30px rgba(251, 189, 35, 0.1);":e(r).level==="active"?"box-shadow: inset 0 0 30px rgba(58, 191, 248, 0.1);":""),B(f,t.area.icon),B(m,t.area.name),B(p,`${e(n)??""} project${e(n)!==1?"s":""}`)}),M(a,l),re()}te(["click"]);var Tr=N('<button class="link text-base-content/50 text-sm capitalize"> </button>'),Pr=N('<div class="flex flex-col h-full"><div class="px-3 pt-5 pb-4 flex flex-row justify-between items-center bg-base-100 border-b border-base-content/10"><a href="/"><div class="text-xl text-base-content/80 tracking-wider font-medium">Doable</div> <div class="text-sm text-base-content/50">Life areas at a glance</div></a> <div class="flex flex-row gap-4"><!> <button class="link text-base-content/50 text-sm"> </button></div></div> <div class="flex-1 min-h-0 overflow-auto"><div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 p-3"><!> <!></div></div> <!></div>');function Mr(a,t){ae(t,!0);let n,r=Y(Ce(localStorage.getItem("areasViewMode")||"none"));Ie(()=>localStorage.setItem("areasViewMode",e(r)));let l=Y(!1),c=()=>I(r,Ge[(Ge.indexOf(e(r))+1)%Ge.length],!0),i=()=>I(l,!e(l));const h=K(()=>e(l)?fe.archived:fe.areas);async function f(d,u){d.stopPropagation();const g=fe.areas;if(u===0)return;const w=g[u],T=u>1?g[u-2].index:null,W=g[u-1].index;await xt(w.index,T,W)}async function x(d,u){d.stopPropagation();const g=fe.areas;if(u===g.length-1)return;const w=g[u],T=g[u+1].index,W=u<g.length-2?g[u+2].index:null;await xt(w.index,T,W)}var y=Pr(),j=o(y),k=b(o(j),2),P=o(k);{var _=d=>{var u=Tr();u.__click=c;var g=o(u,!0);s(u),G(()=>B(g,e(r))),M(d,u)};U(P,d=>{e(l)||d(_)})}var m=b(P,2);m.__click=i;var v=o(m,!0);s(m),s(k),s(j);var p=b(j,2),A=o(p),C=o(A);oe(C,17,()=>e(h),se,(d,u,g)=>{Ar(d,{get area(){return e(u)},get handleSelect(){return t.onSelectArea},index:g,handleAreaMoveUp:f,handleAreaMoveDown:x,get viewMode(){return e(r)},get handleEdit(){return n.openEditAreaModal}})});var S=b(C,2);{var D=d=>{xr(d,{get handleClick(){return n.openCreateAreaModal}})};U(S,d=>{e(l)||d(D)})}s(A),s(p);var L=b(p,2);ke(kr(L,{}),d=>n=d,()=>n),s(y),G(()=>B(v,e(l)?"Active":"Archived")),M(a,y),re()}te(["click"]);var Sr=N('<span class="text-center text-xs font-semibold bg-purple-500/20 text-purple-400 rounded w-full h-full  items-center justify-center flex">1</span>'),Cr=N('<span class="text-center text-xs font-semibold bg-red-500/20 text-red-400 rounded w-full h-full items-center justify-center flex">2</span>'),Ir=N('<span class="text-center text-xs font-semibold bg-yellow-500/20 text-yellow-400 rounded w-full h-full items-center justify-center flex">3</span>'),Er=N('<span class="text-center text-xs font-semibold bg-blue-500/20 text-blue-500 rounded w-full h-full items-center justify-center flex">4</span>'),Dr=N('<span class="text-center text-xs font-semibold bg-emerald-500/20 text-emerald-300 rounded w-full h-full items-center justify-center flex">5</span>');function At(a,t){var n=$(),r=Q(n);{var l=i=>{var h=Sr();M(i,h)},c=i=>{var h=$(),f=Q(h);{var x=j=>{var k=Cr();M(j,k)},y=j=>{var k=$(),P=Q(k);{var _=v=>{var p=Ir();M(v,p)},m=v=>{var p=$(),A=Q(p);{var C=D=>{var L=Er();M(D,L)},S=D=>{var L=Dr();M(D,L)};U(A,D=>{t.level=="sev4"?D(C):D(S,!1)},!0)}M(v,p)};U(P,v=>{t.level=="sev3"?v(_):v(m,!1)},!0)}M(j,k)};U(f,j=>{t.level=="sev2"?j(x):j(y,!1)},!0)}M(i,h)};U(r,i=>{t.level=="sev1"?i(l):i(c,!1)})}M(a,n)}var Nr=N('<button aria-label="edit"> </button>'),Wr=N('<div tabindex="0" role="button" class="flex flex-row gap-2 items-start text-left"><p class="px-2 flex flex-row gap-2 text-sm mb-1.5 w-full text-base-content"><span class="w-8 h-8 flex mt-0.5"><!></span> <span class="flex-1"> </span> <!></p></div>'),Br=N('<div class="h-full bg-primary/80 transition-all"></div>'),Or=N('<span class="text-xs mx-0.5">‚Ä¢</span> ',1),Lr=N('<button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üë</button> <button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üì</button>',1),Rr=N('<button aria-label="edit"> </button>'),zr=N('<div class="w-full transition-colors bg-base-100 cursor-pointer hover:bg-primary/20" role="button" tabindex="0"><div class="flex-1 min-w-0 p-2 pt-4"><div class="flex flex-row items-start gap-2 "><div class="shrink-0 size-8"><!></div> <p class="text-sm mb-1.5 text-base-content"> </p></div> <div class="mb-2 mt-3 w-full items-center flex h-1 bg-neutral"><!></div> <div class="flex flex-row justify-between items-center ms-2"><p class="text-xs font-semibold text-base-content/50 "> <!></p> <div class="flex flex-row gap-2 items-center mt-1"><!> <button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center"><svg viewBox="0 0 24 24" class="size-5" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button> <!></div></div></div></div>'),Vr=N("<div><!></div>");function Fr(a,t){ae(t,!0);const n=K(()=>he.getByProject(t.project.id)),r=K(()=>e(n).filter(_=>_.status==="active").length),l=K(()=>e(n).filter(_=>_.status==="completed").length),c=K(()=>e(n).filter(_=>_.status==="active"||_.status==="completed").length),i=K(()=>e(c)>0?e(l)/e(c)*100:0);function h(_){for(const[m,v]of Object.entries(we.weeksByWeekOf))if(v.projectAssignments.some(p=>p.projectId===_))return m;return null}function f(_){const m=ye();if(_===m)return"This week";const v=new Date(m),p=new Date(_),A=Math.round((p.getTime()-v.getTime())/(1e3*60*60*24)),C=Math.round(A/7);return C===1?"Next week":C>1?`In ${C} weeks`:C===-1?"Last week":_.slice(5)}const x=K(()=>h(t.project.id));var y=Vr(),j=o(y);{var k=_=>{var m=Wr();m.__click=()=>t.onclick(t.project);var v=o(m),p=o(v),A=o(p);At(A,{get level(){return t.project.severity}}),s(p);var C=b(p,2),S=o(C,!0);s(C);var D=b(C,2);{var L=d=>{var u=Nr();u.__click=w=>t.handleProjectAssign(w,t.project);var g=o(u,!0);s(u),G(w=>{Z(u,1,`badge badge-lg badge-soft ${e(x)?"badge-accent":"badge-ghost text-base-content/40"} text-xs p-1.5 w-20 cursor-pointer justify-center rounded-lg items-center flex`),B(g,w)},[()=>f(e(x))]),M(d,u)};U(D,d=>{e(x)&&d(L)})}s(v),s(m),G(()=>B(S,t.project.name)),M(_,m)},P=_=>{var m=zr();m.__click=()=>t.navigateToTasks(t.project),m.__keydown=O=>O.key==="Enter"&&t.navigateToTasks(t.project);var v=o(m),p=o(v),A=o(p),C=o(A);At(C,{get level(){return t.project.severity}}),s(A);var S=b(A,2),D=o(S,!0);s(S),s(p);var L=b(p,2),d=o(L);{var u=O=>{var H=Br();G(()=>je(H,`width: ${e(i)??""}%`)),M(O,H)};U(d,O=>{e(c)>0&&O(u)})}s(L);var g=b(L,2),w=o(g),T=o(w),W=b(T);{var V=O=>{var H=Or(),X=b(Q(H));G(()=>B(X,` ${e(l)??""} done`)),M(O,H)};U(W,O=>{e(l)>0&&O(V)})}s(w);var q=b(w,2),E=o(q);{var R=O=>{var H=Lr(),X=Q(H);X.__click=ie=>t.handleProjectMoveUp(ie,t.index);var ee=b(X,2);ee.__click=ie=>t.handleProjectMoveDown(ie,t.index),M(O,H)};U(E,O=>{t.allowReorder&&O(R)})}var F=b(E,2);F.__click=O=>t.handleEdit(O,t.project);var J=b(F,2);{var z=O=>{var H=Rr();H.__click=ee=>t.handleProjectAssign(ee,t.project);var X=o(H,!0);s(H),G(ee=>{Z(H,1,`badge badge-lg badge-soft ${e(x)?"badge-accent":"badge-ghost text-base-content/40"} text-xs p-1.5 w-20 cursor-pointer flex justify-center rounded-lg items-center`),B(X,ee)},[()=>e(x)?f(e(x)):"Unassigned"]),M(O,H)};U(J,O=>{t.allowWeekAssignment&&O(z)})}s(q),s(g),s(v),s(m),G(()=>{B(D,t.project.name),B(T,`${e(r)??""} active `)}),M(_,m)};U(j,_=>{t.isSelected?_(P,!1):_(k)})}s(y),M(a,y),re()}te(["click","keydown"]);var Ur=N('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 h-[650px] max-h-full bg-base-100 rounded-t-2xl "><div class="flex flex-col h-full"><div class="flex justify-between bg-base-200 items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">‚úï</button></div> <div class="flex-1 overflow-auto min-h-0 p-4 space-y-4 "><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Learn Spanish, Build Website"/></div> <div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Type</label> <div class="join w-full"><input type="radio" name="type" class="join-item btn btn-sm flex-1" aria-label="Regular"/> <input type="radio" name="type" class="join-item btn btn-sm flex-1" aria-label="Maintenance"/></div></div> <span class="text-xs text-base-content/50 mb-2 block">Severity</span> <div class="flex flex-col gap-1"><button type="button"><span class="font-bold w-4">1</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">2</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">3</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">4</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">5</span> <span class="font-normal text-left flex-1"> </span></button></div> <span class="text-xs text-base-content/50 mb-2 block">Status</span> <div class="grid grid-cols-3 gap-1"><button type="button">Active</button> <button type="button">Blocked</button> <button type="button">Someday</button> <button type="button">Cancelled</button> <button type="button">Done</button></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div></div>');function Hr(a,t){ae(t,!0);const n=[];let r=Y(!1),l=Y(null),c=Y(""),i=Y("active"),h=Y("regular"),f=Y("sev3");function x(){console.log("Creating.."),I(l,null),I(c,""),I(i,"active"),I(h,"regular"),I(f,"sev3"),I(r,!0)}function y(p,A){p.stopPropagation(),I(l,A,!0),I(c,A.name,!0),I(i,A.status,!0),I(h,A.type||"regular",!0),I(f,A.severity||"sev1",!0),I(r,!0)}function j(){I(r,!1),I(l,null)}async function k(){!e(c).trim()||!t.selectedArea||(e(l)?await Aa(t.selectedArea.id,e(l).index,{name:e(c).trim(),status:e(i),type:e(h),severity:e(f)}):await Ta(t.selectedArea.id,e(c).trim(),e(h),e(f)),j())}var P={openCreateProjectModal:x,openEditProjectModal:y},_=$(),m=Q(_);{var v=p=>{var A=Ur(),C=o(A);C.__click=j,C.__keydown=le=>le.key==="Escape"&&j();var S=b(C,2),D=o(S),L=o(D),d=o(L),u=o(d,!0);s(d);var g=b(d,2);g.__click=j,s(L);var w=b(L,2),T=o(w),W=b(o(T),2);me(W),W.__keydown=le=>le.key==="Enter"&&k(),s(T);var V=b(T,2),q=b(o(V),2),E=o(q);me(E),E.value=E.__value="regular";var R=b(E,2);me(R),R.value=R.__value="maintenance",s(q),s(V);var F=b(V,4),J=o(F);let z;J.__click=()=>I(f,"sev1");var O=b(o(J),2),H=o(O,!0);s(O),s(J);var X=b(J,2);let ee;X.__click=()=>I(f,"sev2");var ie=b(o(X),2),Nt=o(ie,!0);s(ie),s(X);var ge=b(X,2);let Ze;ge.__click=()=>I(f,"sev3");var $e=b(o(ge),2),Wt=o($e,!0);s($e),s(ge);var xe=b(ge,2);let et;xe.__click=()=>I(f,"sev4");var tt=b(o(xe),2),Bt=o(tt,!0);s(tt),s(xe);var Ae=b(xe,2);let at;Ae.__click=()=>I(f,"sev5");var rt=b(o(Ae),2),Ot=o(rt,!0);s(rt),s(Ae),s(F);var nt=b(F,4),Ee=o(nt);let st;Ee.__click=()=>I(i,"active");var De=b(Ee,2);let ot;De.__click=()=>I(i,"blocked");var Ne=b(De,2);let lt;Ne.__click=()=>I(i,"someday");var We=b(Ne,2);let it;We.__click=()=>I(i,"cancelled");var ct=b(We,2);let dt;ct.__click=()=>I(i,"completed"),s(nt),s(w);var vt=b(w,2),ut=b(o(vt),2);ut.__click=j;var Te=b(ut,2);Te.__click=k;var Lt=o(Te,!0);s(Te),s(vt),s(D),s(S),s(A),G(le=>{B(u,e(l)?"Edit Project":"New Project"),z=Z(J,1,"hover:bg-purple-600 btn btn-sm justify-start gap-2 transition-all",null,z,{"bg-purple-600":e(f)==="sev1","text-white":e(f)==="sev1"}),B(H,pe[e(h)].sev1),ee=Z(X,1,"hover:bg-red-500 btn btn-sm justify-start gap-2 transition-all",null,ee,{"bg-red-500":e(f)==="sev2","text-white":e(f)==="sev2"}),B(Nt,pe[e(h)].sev2),Ze=Z(ge,1,"hover:bg-yellow-500 hover:text-black btn btn-sm justify-start gap-2 transition-all",null,Ze,{"bg-yellow-500":e(f)==="sev3","text-black":e(f)==="sev3"}),B(Wt,pe[e(h)].sev3),et=Z(xe,1,"hover:bg-sky-500 hover:text-black btn btn-sm justify-start gap-2 transition-all",null,et,{"bg-sky-500":e(f)==="sev4","text-black":e(f)==="sev4"}),B(Bt,pe[e(h)].sev4),at=Z(Ae,1,"hover:bg-emerald-500 hover:text-black btn btn-sm justify-start gap-3 transition-all",null,at,{"bg-emerald-500":e(f)==="sev5","text-black":e(f)==="sev5"}),B(Ot,pe[e(h)].sev5),st=Z(Ee,1,"btn btn-sm hover:bg-warning hover:text-warning-content",null,st,{"btn-warning":e(i)==="active"}),ot=Z(De,1,"btn btn-sm hover:btn-error",null,ot,{"btn-error":e(i)==="blocked"}),lt=Z(Ne,1,"btn btn-sm hover:btn-info",null,lt,{"btn-info":e(i)==="someday"}),it=Z(We,1,"btn btn-sm hover:btn-neutral",null,it,{"btn-info":e(i)==="cancelled"}),dt=Z(ct,1,"btn btn-sm hover:btn-success",null,dt,{"btn-success":e(i)==="completed"}),Te.disabled=le,B(Lt,e(l)?"Save":"Create")},[()=>!e(c).trim()]),Xe(W,()=>e(c),le=>I(c,le)),wt(n,[],E,()=>{"regular";return e(h)},le=>I(h,le)),wt(n,[],R,()=>{"maintenance";return e(h)},le=>I(h,le)),M(p,A)};U(m,p=>{e(r)&&p(v)})}return M(a,_),re(P)}te(["click","keydown"]);var Gr=N('<button type="button"><div class="font-medium"> </div> <div class="text-xs opacity-70"> </div></button>'),qr=N('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold">Assign to Week</h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">‚úï</button></div> <div class="p-4 space-y-2"></div></div></div>');function Jr(a,t){ae(t,!0);let n=Y(!1),r=Y(null),l=Y(void 0);function c(P,_,m){P.stopPropagation(),I(l,_,!0),I(r,m,!0),I(n,!0)}function i(){I(n,!1),I(r,null)}async function h(P,_){!e(r)||!e(l)||(_?await Et(e(r).id,P):await Ma(e(r).id,e(l).id,P),i())}function f(P,_){const m=_??ye();return we.getWeek(m)?.projectAssignments.some(p=>p.projectId===P)??!1}var x={openWeekPicker:c},y=$(),j=Q(y);{var k=P=>{var _=qr(),m=o(_);m.__click=i,m.__keydown=S=>S.key==="Escape"&&i();var v=b(m,2),p=o(v),A=b(o(p),2);A.__click=i,s(p);var C=b(p,2);oe(C,21,Pa,se,(S,D)=>{const L=K(()=>f(e(r).id,e(D).weekOf));var d=Gr();d.__click=()=>h(e(D).weekOf,e(L));var u=o(d),g=o(u,!0);s(u);var w=b(u,2),T=o(w,!0);s(w),s(d),G(()=>{Z(d,1,`w-full p-3 text-left rounded-lg border transition-colors ${e(L)?"bg-primary/20 text-primary-content border-primary":"border-base-content/10 hover:border-primary"}`),B(g,e(D).label),B(T,e(D).weekOf)}),M(S,d)}),s(C),s(v),s(_),M(P,_)};U(j,P=>{e(n)&&e(r)&&P(k)})}return M(a,y),re(x)}te(["click","keydown"]);var Kr=N("<button> </button>"),Yr=N('<div class="text-center py-8 text-base-content/50 text-sm"> </div>'),Qr=N('<button type="button" class="flex items-center h-16 gap-2 p-3 border-2 border-dashed border-base-content/20 rounded-lg text-base-content/50 cursor-pointer transition-all hover:border-primary hover:text-primary"><span class="text-lg">+</span> <span class="text-sm">Add Project</span></button>'),Xr=N('<div class="flex flex-col h-full"><div class="flex flex-col border-b border-base-content/10 bg-base-100"><div class="flex flex-col items-start px-2 "><button class="gap-2 mx-3 mt-2 mb-1 text-sm text-secondary w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-100 text-base-content/70"><span>‚Üê</span> <span>Back</span></button> <div class="flex items-center gap-3 pe-2"><span class="text-4xl"> </span> <h2 class="text-lg "> </h2></div></div> <div class="flex gap-1 mt-4  px-3 pb-2 overflow-x-auto"></div></div> <div class="flex-1 overflow-auto min-h-0 pb-5 pt-2.5"><div class="flex flex-col gap-2.5 py-0"><!> <!></div></div></div> <!> <!>',1);function Zr(a,t){ae(t,!0);let n=Y(void 0);const r=E=>I(n,E.id,!0);let l,c,i=Y(Ce(localStorage.getItem("projectTabView")||"active"));Ie(()=>{e(i)&&localStorage.setItem("projectTabView",e(i))});let h=K(()=>!["completed","cancelled"].includes(e(i))),f=K(()=>e(i)=="active"),x=K(()=>de.getByArea(t.selectedArea.id).filter(E=>E.status===e(i)));function y(E){return de.getByArea(t.selectedArea.id).filter(R=>R.status===E).length}async function j(E,R){if(E.stopPropagation(),R===0||!t.selectedArea)return;const F=de.getByArea(t.selectedArea.id),J=e(x)[R],z=e(x)[R-1],O=F.findIndex(ee=>ee.id===z.id),H=O>0?F[O-1].index:null,X=z.index;await pt(t.selectedArea.id,J.index,H,X)}async function k(E,R){if(E.stopPropagation(),!t.selectedArea||R===e(x).length-1)return;const F=de.getByArea(t.selectedArea.id),J=e(x)[R],z=e(x)[R+1],O=F.findIndex(ee=>ee.id===z.id),H=z.index,X=O<F.length-1?F[O+1].index:null;console.log(H,X),await pt(t.selectedArea.id,J.index,H,X)}var P=Xr(),_=Q(P),m=o(_),v=o(m),p=o(v);p.__click=function(...E){t.navigateBack?.apply(this,E)};var A=b(p,2),C=o(A),S=o(C,!0);s(C);var D=b(C,2),L=o(D,!0);s(D),s(A),s(v);var d=b(v,2);oe(d,21,()=>br,se,(E,R)=>{const F=K(()=>e(i)===e(R).value),J=K(()=>y(e(R).value));var z=Kr();z.__click=()=>I(i,e(R).value,!0);var O=o(z);s(z),G(()=>{Z(z,1,`px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap ${e(F)?"bg-primary/40 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),B(O,`${e(R).label??""} (${e(J)??""})`)}),M(E,z)}),s(d),s(m);var u=b(m,2),g=o(u),w=o(g);oe(w,17,()=>e(x),se,(E,R,F)=>{{let J=K(()=>e(n)==e(R).id);Fr(E,{get isSelected(){return e(J)},onclick:r,handleProjectAssign:(z,O)=>c.openWeekPicker(z,t.selectedArea,O),index:F,get allowReorder(){return e(h)},get navigateToTasks(){return t.navigateToTasks},get project(){return e(R)},get allowWeekAssignment(){return e(f)},get handleEdit(){return l.openEditProjectModal},handleProjectMoveUp:j,handleProjectMoveDown:k})}},E=>{var R=Yr(),F=o(R);s(R),G(()=>B(F,`No ${e(i)??""} projects`)),M(E,R)});var T=b(w,2);{var W=E=>{var R=Qr();R.__click=function(...F){l.openCreateProjectModal?.apply(this,F)},M(E,R)};U(T,E=>{e(i)=="active"&&E(W)})}s(g),s(u),s(_);var V=b(_,2);ke(Hr(V,{get selectedArea(){return t.selectedArea}}),E=>l=E,()=>l);var q=b(V,2);ke(Jr(q,{}),E=>c=E,()=>c),G(()=>{B(S,t.selectedArea.icon),B(L,t.selectedArea.name)}),M(a,P),re()}te(["click"]);var $r=N('<button type="button"> </button>'),en=N('<div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Status</label> <div class="flex flex-wrap gap-2"></div></div>'),tn=N('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">‚úï</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Read chapter 1, Write blog post"/></div> <!></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function an(a,t){ae(t,!0);let n=Y(!1),r=Y(null),l=Y(""),c=Y("active");function i(){I(r,null),I(l,""),I(c,"active"),I(n,!0)}function h(_,m){_.stopPropagation(),I(r,m,!0),I(l,m.name,!0),I(c,m.status,!0),I(n,!0)}function f(){I(n,!1),I(r,null)}async function x(){!e(l).trim()||!t.selectedProject||!t.selectedArea||(e(r)?await Dt(t.selectedProject.id,e(r).index,{name:e(l).trim(),status:e(c)}):await Sa(t.selectedProject.id,t.selectedArea.id,e(l).trim()),f())}var y={openCreateTaskModal:i,openEditTaskModal:h},j=$(),k=Q(j);{var P=_=>{var m=tn(),v=o(m);v.__click=f,v.__keydown=E=>E.key==="Escape"&&f();var p=b(v,2),A=o(p),C=o(A),S=o(C,!0);s(C);var D=b(C,2);D.__click=f,s(A);var L=b(A,2),d=o(L),u=b(o(d),2);me(u),u.__keydown=E=>E.key==="Enter"&&x(),s(d);var g=b(d,2);{var w=E=>{var R=en(),F=b(o(R),2);oe(F,21,()=>fr,se,(J,z)=>{var O=$r();O.__click=()=>I(c,e(z).value,!0);var H=o(O,!0);s(O),G(()=>{Z(O,1,`px-3 py-1.5 text-sm rounded-lg border transition-colors ${e(c)===e(z).value?"bg-primary text-primary-content border-primary":"border-base-content/20 hover:border-primary"}`),B(H,e(z).label)}),M(J,O)}),s(F),s(R),M(E,R)};U(g,E=>{e(r)&&E(w)})}s(L);var T=b(L,2),W=b(o(T),2);W.__click=f;var V=b(W,2);V.__click=x;var q=o(V,!0);s(V),s(T),s(p),s(m),G(E=>{B(S,e(r)?"Edit Task":"New Task"),V.disabled=E,B(q,e(r)?"Save":"Create")},[()=>!e(l).trim()]),Xe(u,()=>e(l),E=>I(l,E)),M(_,m)};U(k,_=>{e(n)&&_(P)})}return M(a,j),re(y)}te(["click","keydown"]);var rn=Ye('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>'),nn=Ye('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"></path></svg>'),sn=Ye('<svg class="w-3 h-3 text-warning" fill="currentColor" viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16" rx="1"></rect><rect x="14" y="4" width="4" height="16" rx="1"></rect></svg>'),on=N('<button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üë</button> <button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üì</button>',1),ln=N('<div tabindex="0" role="button" class="hover:bg-primary/20 cursor-pointer w-full flex flex-row items-start border-b border-b-base-content/10 p-2"><button type="button"><!></button> <div class="text-sm text-base-content/80 flex-1 "> </div> <!></div>');function cn(a,t){ae(t,!0);const n=K(()=>t.task.status==="completed"),r=K(()=>t.task.status==="cancelled"),l=K(()=>t.task.status==="blocked");var c=ln();c.__click=_=>t.handleEdit(_,t.task);var i=o(c);i.__click=_=>t.toggleTaskComplete(_,t.task);var h=o(i);{var f=_=>{var m=rn();M(_,m)},x=_=>{var m=$(),v=Q(m);{var p=C=>{var S=nn();M(C,S)},A=C=>{var S=$(),D=Q(S);{var L=d=>{var u=sn();M(d,u)};U(D,d=>{e(l)&&d(L)},!0)}M(C,S)};U(v,C=>{e(r)?C(p):C(A,!1)},!0)}M(_,m)};U(h,_=>{e(n)?_(f):_(x,!1)})}s(i);var y=b(i,2),j=o(y,!0);s(y);var k=b(y,2);{var P=_=>{var m=on(),v=Q(m);v.__click=A=>t.handleTaskMoveUp(A,t.index);var p=b(v,2);p.__click=A=>t.handleTaskMoveDown(A,t.index),M(_,m)};U(k,_=>{t.reorderEnabled&&_(P)})}s(c),G(()=>{Z(i,1,`w-6 h-6 cursor-pointer rounded-full border-2 flex me-2 items-center justify-center text-xs transition-colors flex-shrink-0 ${e(n)?"bg-success border-success text-success-content":e(l)?"border-warning":e(r)?"bg-error border-error text-error-content":"border-base-content/30 hover:border-success"}`),i.disabled=e(r),B(j,t.task.name)}),M(a,c),re()}te(["click"]);var dn=N('<div class="flex flex-col h-full"><div class="flex flex-col border-b border-base-content/10 bg-base-100"><div class="flex flex-col items-start px-2 "><button class="gap-2 mx-3 mt-2 mb-0 text-sm text-secondary w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-100 text-base-content/70"><span>‚Üê</span> <span>Back</span></button> <div class="flex items-center gap-2"><svg class="size-10 inline shrink-0 text-base-content/40 align-text-bottom -mb-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <h2 class="text-base "> </h2></div> <div class="flex gap-1 overflow-x-auto my-2"><button class="text-base-content/50 bg-base-300 hover:bg-primary/50 hover:text-primary-content px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap">+ New</button> <button>Reorder</button></div></div></div> <div class="flex-1 overflow-auto bg-base-200  min-h-0 pb-5 pt-2.5"><div class="flex flex-col px-2 py-0"></div></div></div> <!>',1);function vn(a,t){ae(t,!0);let n,r=K(()=>he.getByProject(t.selectedProject.id)),l=Y(!1),c=()=>I(l,!e(l));async function i(d,u){if(d.stopPropagation(),!t.selectedProject)return;const g=u.status==="completed"?"active":"completed";await Dt(t.selectedProject.id,u.index,{status:g})}async function h(d,u){if(d.stopPropagation(),u===0||!t.selectedProject)return;const g=e(r)[u],w=u>1?e(r)[u-2].index:null,T=e(r)[u-1].index;await _t(t.selectedProject.id,g.index,w,T)}async function f(d,u){if(d.stopPropagation(),!t.selectedProject||u===e(r).length-1)return;const g=e(r)[u],w=e(r)[u+1].index,T=u<e(r).length-2?e(r)[u+2].index:null;await _t(t.selectedProject.id,g.index,w,T)}var x=dn(),y=Q(x),j=o(y),k=o(j),P=o(k);P.__click=function(...d){t.navigateBack?.apply(this,d)};var _=b(P,2),m=b(o(_),2),v=o(m,!0);s(m),s(_);var p=b(_,2),A=o(p);A.__click=function(...d){n.openCreateTaskModal?.apply(this,d)};var C=b(A,2);C.__click=c,s(p),s(k),s(j);var S=b(j,2),D=o(S);oe(D,21,()=>e(r),se,(d,u,g)=>{cn(d,{get handleEdit(){return n.openEditTaskModal},handleTaskMoveUp:h,handleTaskMoveDown:f,index:g,get task(){return e(u)},toggleTaskComplete:i,get reorderEnabled(){return e(l)}})}),s(D),s(S),s(y);var L=b(y,2);ke(an(L,{get selectedArea(){return t.selectedArea},get selectedProject(){return t.selectedProject}}),d=>n=d,()=>n),G(()=>{B(v,t.selectedProject.name),Z(C,1,`px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap ${e(l)?"bg-primary/40 text-primary-content":"text-base-content/50 bg-base-300 hover:text-base-content hover:bg-primary/50"}`)}),M(a,x),re()}te(["click"]);var un=N('<div class="flex items-center justify-center h-full text-base-content/50"><p>Review - Coming soon</p></div>'),bn=N('<div class="h-screen flex flex-col bg-base-300"><div class="pb-22 h-full"><!></div> <!></div>');function hn(a,t){ae(t,!0);const n=()=>i("areas"),r=()=>i("projects");let l=Y(void 0),c=Y(void 0);i("areas");function i(m){ba("",{activeTab:m})}function h(m){I(l,m,!0),i("projects")}function f(m){I(c,m,!0),i("tasks")}var x=bn(),y=o(x),j=o(y);{var k=m=>{Mr(m,{onSelectArea:h})},P=m=>{var v=$(),p=Q(v);{var A=S=>{Zr(S,{navigateBack:n,navigateToTasks:f,get selectedArea(){return e(l)}})},C=S=>{var D=$(),L=Q(D);{var d=g=>{vn(g,{navigateBack:r,get selectedArea(){return e(l)},get selectedProject(){return e(c)}})},u=g=>{var w=$(),T=Q(w);{var W=q=>{rr(q,{})},V=q=>{var E=$(),R=Q(E);{var F=z=>{ur(z,{})},J=z=>{var O=$(),H=Q(O);{var X=ee=>{var ie=un();M(ee,ie)};U(H,ee=>{ue.state.activeTab==="review"&&ee(X)},!0)}M(z,O)};U(R,z=>{ue.state.activeTab==="today"?z(F):z(J,!1)},!0)}M(q,E)};U(T,q=>{ue.state.activeTab==="week"?q(W):q(V,!1)},!0)}M(g,w)};U(L,g=>{ue.state.activeTab=="tasks"?g(d):g(u,!1)},!0)}M(S,D)};U(p,S=>{ue.state.activeTab==="projects"?S(A):S(C,!1)},!0)}M(m,v)};U(j,m=>{ue.state.activeTab==="areas"?m(k):m(P,!1)})}s(y);var _=b(y,2);Fa(_,{get activeTab(){return ue.state.activeTab},onTabChange:i}),s(x),M(a,x),re()}export{hn as component};
