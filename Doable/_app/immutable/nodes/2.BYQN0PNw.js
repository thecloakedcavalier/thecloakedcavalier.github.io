import{d as pe,f as B,a as D,s as W,c as de,e as Jt,t as _a,b as bt}from"../chunks/B_UuPxXH.js";import{y as mr,E as tn,K as hr,A as je,aq as rn,F as an,g as n,T as nn,H as on,I as sn,J as qr,L as _r,B as Vt,aa as ln,aE as cn,ah as Kr,o as mt,aG as Je,z as Ir,D as dn,a8 as Xr,a4 as un,aC as Wr,aH as vn,aI as fn,aJ as bn,aK as gn,v as xa,x as ya,aL as xr,ay as pn,aB as mn,w as hn,aM as wa,q as Mt,aN as _n,W as xn,aO as yn,aP as Et,e as wn,u as ka,r as zr,h as kn,aQ as Tn,aR as Dn,aS as En,aT as An,aU as In,aV as On,aW as Ta,a5 as Sn,aX as jn,aY as Cn,ao as Mn,p as _e,l as xe,n as l,m as d,s as x,t as K,k as re,O as J,N as O,a6 as Q,U as yt,b as ft,ai as Qt}from"../chunks/DI0gOZ3T.js";import{i as Z}from"../chunks/kcmh4k54.js";import{a as Pn}from"../chunks/DgSyTevg.js";import{p as st}from"../chunks/dqYVWI50.js";import{a1 as qt,a2 as Nn,a3 as Rn,a4 as Ln,a5 as Da,a6 as Ea,a7 as ut,a8 as Fn,a9 as Ft,aa as Bn,ab as dt,ac as Ze,ad as Bt,ae as Aa,af as Wn,ag as Ia,ah as zn,ai as Gn,aj as Un,ak as Hn,al as Vn,am as Zn,an as Yn,ao as qn,ap as Jr,aq as Oa,ar as Kn,as as Xn,at as Jn,au as Qr,av as Sa,aw as $r}from"../chunks/CUqpiYYE.js";import{b as Pt}from"../chunks/Amjc5eun.js";function Pe(e,t){return t}function Qn(e,t,r){for(var a=[],i=t.length,o,s=t.length,f=0;f<i;f++){let y=t[f];ya(y,()=>{if(o){if(o.pending.delete(y),o.done.add(y),o.pending.size===0){var v=e.outrogroups;Or(Wr(o.done)),v.delete(o),v.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var c=a.length===0&&r!==null;if(c){var g=r,u=g.parentNode;mn(u),u.append(g),e.items.clear()}Or(t,!c)}else o={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(o)}function Or(e,t=!0){for(var r=0;r<e.length;r++)hn(e[r],t)}var ea;function Ae(e,t,r,a,i,o=null){var s=e,f=new Map,c=(t&wa)!==0;if(c){var g=e;s=je?hr(rn(g)):g.appendChild(mr())}je&&an();var u=null,y=nn(()=>{var _=r();return vn(_)?_:_==null?[]:Wr(_)}),v,m=!0;function b(){p.fallback=u,$n(p,v,s,t,a),u!==null&&(v.length===0?(u.f&Je)===0?xa(u):(u.f^=Je,St(u,null,s)):ya(u,()=>{u=null}))}var h=tn(()=>{v=n(y);var _=v.length;let w=!1;if(je){var T=on(s)===sn;T!==(_===0)&&(s=qr(),hr(s),_r(!1),w=!0)}for(var E=new Set,S=mt,j=dn(),k=0;k<_;k+=1){je&&Vt.nodeType===ln&&Vt.data===cn&&(s=Vt,w=!0,_r(!1));var I=v[k],A=a(I,k),C=m?null:f.get(A);C?(C.v&&Kr(C.v,I),C.i&&Kr(C.i,k),j&&S.skipped_effects.delete(C.e)):(C=eo(f,m?s:ea??=mr(),I,A,k,i,t,r),m||(C.e.f|=Je),f.set(A,C)),E.add(A)}if(_===0&&o&&!u&&(m?u=Ir(()=>o(s)):(u=Ir(()=>o(ea??=mr())),u.f|=Je)),je&&_>0&&hr(qr()),!m)if(j){for(const[L,z]of f)E.has(L)||S.skipped_effects.add(z.e);S.oncommit(b),S.ondiscard(()=>{})}else b();w&&_r(!0),n(y)}),p={effect:h,items:f,outrogroups:null,fallback:u};m=!1,je&&(s=Vt)}function $n(e,t,r,a,i){var o=(a&_n)!==0,s=t.length,f=e.items,c=e.effect.first,g,u=null,y,v=[],m=[],b,h,p,_;if(o)for(_=0;_<s;_+=1)b=t[_],h=i(b,_),p=f.get(h).e,(p.f&Je)===0&&(p.nodes?.a?.measure(),(y??=new Set).add(p));for(_=0;_<s;_+=1){if(b=t[_],h=i(b,_),p=f.get(h).e,e.outrogroups!==null)for(const C of e.outrogroups)C.pending.delete(p),C.done.delete(p);if((p.f&Je)!==0)if(p.f^=Je,p===c)St(p,null,r);else{var w=u?u.next:c;p===e.effect.last&&(e.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),$e(e,u,p),$e(e,p,w),St(p,w,r),u=p,v=[],m=[],c=u.next;continue}if((p.f&xr)!==0&&(xa(p),o&&(p.nodes?.a?.unfix(),(y??=new Set).delete(p))),p!==c){if(g!==void 0&&g.has(p)){if(v.length<m.length){var T=m[0],E;u=T.prev;var S=v[0],j=v[v.length-1];for(E=0;E<v.length;E+=1)St(v[E],T,r);for(E=0;E<m.length;E+=1)g.delete(m[E]);$e(e,S.prev,j.next),$e(e,u,S),$e(e,j,T),c=T,u=j,_-=1,v=[],m=[]}else g.delete(p),St(p,c,r),$e(e,p.prev,p.next),$e(e,p,u===null?e.effect.first:u.next),$e(e,u,p),u=p;continue}for(v=[],m=[];c!==null&&c!==p;)(g??=new Set).add(c),m.push(c),c=c.next;if(c===null)continue}(p.f&Je)===0&&v.push(p),u=p,c=p.next}if(e.outrogroups!==null){for(const C of e.outrogroups)C.pending.size===0&&(Or(Wr(C.done)),e.outrogroups?.delete(C));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||g!==void 0){var k=[];if(g!==void 0)for(p of g)(p.f&xr)===0&&k.push(p);for(;c!==null;)(c.f&xr)===0&&c!==e.fallback&&k.push(c),c=c.next;var I=k.length;if(I>0){var A=(a&wa)!==0&&s===0?r:null;if(o){for(_=0;_<I;_+=1)k[_].nodes?.a?.measure();for(_=0;_<I;_+=1)k[_].nodes?.a?.fix()}Qn(e,k,A)}}o&&Mt(()=>{if(y!==void 0)for(p of y)p.nodes?.a?.apply()})}function eo(e,t,r,a,i,o,s,f){var c=(s&fn)!==0?(s&bn)===0?un(r,!1,!1):Xr(r):null,g=(s&gn)!==0?Xr(i):null;return{v:c,i:g,e:Ir(()=>(o(t,c??r,g??i,f),()=>{e.delete(a)}))}}function St(e,t,r){if(e.nodes)for(var a=e.nodes.start,i=e.nodes.end,o=t&&(t.f&Je)===0?t.nodes.start:r;a!==null;){var s=pn(a);if(o.before(a),a===i)return;a=s}}function $e(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}const to=()=>performance.now(),Xe={tick:e=>requestAnimationFrame(e),now:()=>to(),tasks:new Set};function ja(){const e=Xe.now();Xe.tasks.forEach(t=>{t.c(e)||(Xe.tasks.delete(t),t.f())}),Xe.tasks.size!==0&&Xe.tick(ja)}function ro(e){let t;return Xe.tasks.size===0&&Xe.tick(ja),{promise:new Promise(r=>{Xe.tasks.add(t={c:e,f:r})}),abort(){Xe.tasks.delete(t)}}}function ao(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function ta(e){const t={},r=e.split(";");for(const a of r){const[i,o]=a.split(":");if(!i||o===void 0)break;const s=ao(i.trim());t[s]=o.trim()}return t}const no=e=>e;function Ca(e,t,r){var a=xn,i=a.nodes,o,s,f,c=null;i.a??={element:e,measure(){o=this.element.getBoundingClientRect()},apply(){if(f?.abort(),s=this.element.getBoundingClientRect(),o.left!==s.left||o.right!==s.right||o.top!==s.top||o.bottom!==s.bottom){const g=t()(this.element,{from:o,to:s},r?.());f=Ma(this.element,g,void 0,1,()=>{f?.abort(),f=void 0})}},fix(){if(!e.getAnimations().length){var{position:g,width:u,height:y}=getComputedStyle(e);if(g!=="absolute"&&g!=="fixed"){var v=e.style;c={position:v.position,width:v.width,height:v.height,transform:v.transform},v.position="absolute",v.width=u,v.height=y;var m=e.getBoundingClientRect();if(o.left!==m.left||o.top!==m.top){var b=`translate(${o.left-m.left}px, ${o.top-m.top}px)`;v.transform=v.transform?`${v.transform} ${b}`:b}}}},unfix(){if(c){var g=e.style;g.position=c.position,g.width=c.width,g.height=c.height,g.transform=c.transform}}},i.a.element=e}function Ma(e,t,r,a,i){if(yn(t)){var o,s=!1;return Mt(()=>{if(!s){var h=t({direction:"in"});o=Ma(e,h,r,a,i)}}),{abort:()=>{s=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(!t?.duration)return i(),{abort:Et,deactivate:Et,reset:Et,t:()=>a};const{delay:f=0,css:c,tick:g,easing:u=no}=t;var y=[];if(g&&g(0,1),c){var v=ta(c(0,1));y.push(v,v)}var m=()=>1-a,b=e.animate(y,{duration:f,fill:"forwards"});return b.onfinish=()=>{b.cancel();var h=1-a,p=a-h,_=t.duration*Math.abs(p),w=[];if(_>0){var T=!1;if(c)for(var E=Math.ceil(_/16.666666666666668),S=0;S<=E;S+=1){var j=h+p*u(S/E),k=ta(c(j,1-j));w.push(k),T||=k.overflow==="hidden"}T&&(e.style.overflow="hidden"),m=()=>{var I=b.currentTime;return h+p*u(I/_)},g&&ro(()=>{if(b.playState!=="running")return!1;var I=m();return g(I,1-I),!0})}b=e.animate(w,{duration:_,fill:"forwards"}),b.onfinish=()=>{m=()=>a,g?.(a,1-a),i()}},{abort:()=>{b&&(b.cancel(),b.effect=null,b.onfinish=Et)},deactivate:()=>{i=Et},reset:()=>{},t:()=>m()}}function Pa(e,t,r){wn(()=>{var a=ka(()=>t(e,r?.())||{});if(r&&a?.update){var i=!1,o={};zr(()=>{var s=r();kn(s),i&&Tn(o,s)&&(o=s,a.update(s))}),i=!0}if(a?.destroy)return()=>a.destroy()})}const ra=[...` 	
\r\fÂ \v\uFEFF`];function oo(e,t,r){var a=e==null?"":""+e;if(t&&(a=a?a+" "+t:t),r){for(var i in r)if(r[i])a=a?a+" "+i:i;else if(a.length)for(var o=i.length,s=0;(s=a.indexOf(i,s))>=0;){var f=s+o;(s===0||ra.includes(a[s-1]))&&(f===a.length||ra.includes(a[f]))?a=(s===0?"":a.substring(0,s))+a.substring(f+1):s=f}}return a===""?null:a}function aa(e,t=!1){var r=t?" !important;":";",a="";for(var i in e){var o=e[i];o!=null&&o!==""&&(a+=" "+i+": "+o+r)}return a}function yr(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function io(e,t){if(t){var r="",a,i;if(Array.isArray(t)?(a=t[0],i=t[1]):a=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,f=!1,c=[];a&&c.push(...Object.keys(a).map(yr)),i&&c.push(...Object.keys(i).map(yr));var g=0,u=-1;const h=e.length;for(var y=0;y<h;y++){var v=e[y];if(f?v==="/"&&e[y-1]==="*"&&(f=!1):o?o===v&&(o=!1):v==="/"&&e[y+1]==="*"?f=!0:v==='"'||v==="'"?o=v:v==="("?s++:v===")"&&s--,!f&&o===!1&&s===0){if(v===":"&&u===-1)u=y;else if(v===";"||y===h-1){if(u!==-1){var m=yr(e.substring(g,u).trim());if(!c.includes(m)){v!==";"&&y++;var b=e.substring(g,y).trim();r+=" "+b+";"}}g=y+1,u=-1}}}}return a&&(r+=aa(a)),i&&(r+=aa(i,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function ne(e,t,r,a,i,o){var s=e.__className;if(je||s!==r||s===void 0){var f=oo(r,a,o);(!je||f!==e.getAttribute("class"))&&(f==null?e.removeAttribute("class"):e.className=f),e.__className=r}else if(o&&i!==o)for(var c in o){var g=!!o[c];(i==null||g!==!!i[c])&&e.classList.toggle(c,g)}return o}function wr(e,t={},r,a){for(var i in r){var o=r[i];t[i]!==o&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,a))}}function Wt(e,t,r,a){var i=e.__style;if(je||i!==t){var o=io(t,a);(!je||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}else a&&(Array.isArray(a)?(wr(e,r?.[0],a[0]),wr(e,r?.[1],a[1],"important")):wr(e,r,a));return a}const so=Symbol("is custom element"),lo=Symbol("is html");function rt(e){if(je){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var a=e.value;Sr(e,"value",null),e.value=a}if(e.hasAttribute("checked")){var i=e.checked;Sr(e,"checked",null),e.checked=i}}};e.__on_r=r,Mt(r),Dn()}}function Sr(e,t,r,a){var i=co(e);je&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=r)&&(t==="loading"&&(e[En]=r),r==null?e.removeAttribute(t):typeof r!="string"&&uo(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function co(e){return e.__attributes??={[so]:e.nodeName.includes("-"),[lo]:e.namespaceURI===An}}var na=new Map;function uo(e){var t=e.getAttribute("is")||e.nodeName,r=na.get(t);if(r)return r;na.set(t,r=[]);for(var a,i=e,o=Element.prototype;o!==i;){a=On(i);for(var s in a)a[s].set&&r.push(s);i=In(i)}return r}function sr(e,t,r=t){var a=new WeakSet;Ta(e,"input",async i=>{var o=i?e.defaultValue:e.value;if(o=Tr(e)?Dr(o):o,r(o),mt!==null&&a.add(mt),await Sn(),o!==(o=t())){var s=e.selectionStart,f=e.selectionEnd,c=e.value.length;if(e.value=o??"",f!==null){var g=e.value.length;s===f&&f===c&&g>c?(e.selectionStart=g,e.selectionEnd=g):(e.selectionStart=s,e.selectionEnd=Math.min(f,g))}}}),(je&&e.defaultValue!==e.value||ka(t)==null&&e.value)&&(r(Tr(e)?Dr(e.value):e.value),mt!==null&&a.add(mt)),zr(()=>{var i=t();if(e===document.activeElement){var o=jn??mt;if(a.has(o))return}Tr(e)&&i===Dr(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}const kr=new Set;function $t(e,t,r,a,i=a){var o=r.getAttribute("type")==="checkbox",s=e;let f=!1;if(t!==null)for(var c of t)s=s[c]??=[];s.push(r),Ta(r,"change",()=>{var g=r.__value;o&&(g=oa(s,g,r.checked)),i(g)},()=>i(o?[]:null)),zr(()=>{var g=a();if(je&&r.defaultChecked!==r.checked){f=!0;return}o?(g=g||[],r.checked=g.includes(r.__value)):r.checked=Cn(r.__value,g)}),Mn(()=>{var g=s.indexOf(r);g!==-1&&s.splice(g,1)}),kr.has(s)||(kr.add(s),Mt(()=>{s.sort((g,u)=>g.compareDocumentPosition(u)===4?-1:1),kr.delete(s)})),Mt(()=>{if(f){var g;if(o)g=oa(s,g,r.checked);else{var u=s.find(y=>y.checked);g=u?.__value}i(g)}})}function oa(e,t,r){for(var a=new Set,i=0;i<e.length;i+=1)e[i].checked&&a.add(e[i].__value);return r||a.delete(t),Array.from(a)}function Tr(e){var t=e.type;return t==="number"||t==="range"}function Dr(e){return e===""?null:+e}const At={regular:{sev1:"Core to who I am or want to become",sev2:"Significant progress toward a major goal",sev3:"Meaningful but not defining",sev4:"Nice to do, no real deadline",sev5:"Pure exploration or fun"},maintenance:{sev1:"Immediate risk if ignored (safety, legal, financial)",sev2:"Disrupts daily life if neglected",sev3:"Routine upkeep, flexible timing",sev4:"Minor improvement, no consequences",sev5:"Cosmetic or nice-to-have"}},vo=["ðŸ’¼","ðŸ ","ðŸ’ª","ðŸ“š","ðŸ’°","â¤ï¸","ðŸŽ¯","ðŸš€","ðŸŽ¨","ðŸŽµ","âœˆï¸","ðŸŽ","ðŸ§˜","ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦","ðŸ¤","ðŸ“±","ðŸ’»","ðŸ”§","ðŸ“","ðŸŽ“","ðŸƒ","ðŸ§ ","ðŸŒ±","â­","ðŸ”¥","ðŸ’¡","ðŸŽ®","ðŸ“¸","ðŸ›’","ðŸ¦","ðŸš—","ðŸ‹ï¸"];pe(["click","keydown"]);var fo=B('<button><span class="text-lg"> </span> <span class="text-[10px] font-medium truncate"> </span></button>'),bo=B('<nav class="pb-6 fixed bottom-0 left-0 right-0 bg-base-200 border-t border-base-content/10 flex justify-around pt-2 px-1 safe-bottom"></nav>');function go(e,t){_e(t,!0);const r=[{id:"areas",icon:"ðŸ“",label:"Areas"},{id:"week",icon:"ðŸ“…",label:"Week"},{id:"today",icon:"â˜€ï¸",label:"Today"}];var a=bo();Ae(a,21,()=>r,Pe,(i,o)=>{var s=fo();let f;s.__click=()=>t.onTabChange(n(o).id);let c;var g=d(s),u=d(g,!0);l(g);var y=x(g,2),v=d(y,!0);l(y),l(s),K(()=>{f=ne(s,1,"flex flex-col items-center gap-1 px-3 py-1 rounded-lg transition-colors min-w-0 flex-1",null,f,{"text-primary":t.activeTab===n(o).id,"text-base-content":t.activeTab!==n(o).id}),c=Wt(s,"",c,{opacity:t.activeTab===n(o).id?1:.4}),W(u,n(o).icon),W(v,n(o).label)}),D(i,s)}),l(a),D(e,a),xe()}pe(["click"]);var po=B('<button type="button"><span class="text-xs font-medium"> </span> <span class="text-lg"> </span></button>'),mo=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><div><h2 class="text-lg font-semibold">Assign to Day</h2> <p class="text-xs text-base-content/50 truncate"> </p></div> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 grid grid-cols-7 gap-1"></div> <div class="p-4 pt-0"><button type="button" class="w-full p-3 text-sm text-base-content/50 hover:text-base-content rounded-lg border border-base-content/10 hover:border-primary transition-colors">Remove from all days</button></div></div></div>');function ho(e,t){_e(t,!0);let r=J(!1),a=J(null);function i(v,m,b,h){v.stopPropagation(),O(a,{task:m,project:b,area:h},!0),O(r,!0)}function o(){O(r,!1),O(a,null)}function s(){return Rn(t.currentWeekOf).map(v=>({date:v,dayName:Da(v),isToday:Ln(v)}))}async function f(v){if(!n(a))return;const{task:m,project:b,area:h}=n(a);o();const p=t.isTaskAssignedToDay(m.id);p===v?await qt(m.id,b.id,t.currentWeekOf,v):(p&&await qt(m.id,b.id,t.currentWeekOf,p),await Nn(m.id,b.id,h.id,m.name,t.currentWeekOf,v,!1))}var c={openDayPicker:i},g=de(),u=re(g);{var y=v=>{var m=mo(),b=d(m);b.__click=o,b.__keydown=I=>I.key==="Escape"&&o();var h=x(b,2),p=d(h),_=d(p),w=x(d(_),2),T=d(w,!0);l(w),l(_);var E=x(_,2);E.__click=o,l(p);var S=x(p,2);Ae(S,21,s,Pe,(I,A)=>{const C=Q(()=>t.isTaskAssignedToDay(n(a).task.id)===n(A).date);var L=po();L.__click=()=>f(n(A).date);var z=d(L),G=d(z,!0);l(z);var F=x(z,2),P=d(F,!0);l(F),l(L),K(U=>{ne(L,1,`flex flex-col items-center p-2 rounded-lg border transition-colors ${n(C)?"bg-primary text-primary-content border-primary":n(A).isToday?"border-primary/50 hover:border-primary":"border-base-content/10 hover:border-primary"}`),W(G,n(A).dayName),W(P,U)},[()=>n(A).date.split("-")[2]]),D(I,L)}),l(S);var j=x(S,2),k=d(j);k.__click=()=>{const I=t.isTaskAssignedToDay(n(a).task.id);I&&qt(n(a).task.id,n(a).project.id,t.currentWeekOf,I),o()},l(j),l(h),l(m),K(()=>W(T,n(a).task.name)),D(v,m)};Z(u,v=>{n(r)&&n(a)&&v(y)})}return D(e,g),xe(c)}pe(["click","keydown"]);function ia(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ia(Object(r),!0).forEach(function(a){wt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ia(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ht(e){"@babel/helpers - typeof";return ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(e)}function wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _o(e,t){if(e==null)return{};var r={},a=Object.keys(e),i,o;for(o=0;o<a.length;o++)i=a[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function xo(e,t){if(e==null)return{};var r=_o(e,t),a,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)a=o[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function yo(e,t){return ko(e)||Do(e,t)||Gr(e,t)||Ao()}function Be(e){return wo(e)||To(e)||Gr(e)||Eo()}function wo(e){if(Array.isArray(e))return jr(e)}function ko(e){if(Array.isArray(e))return e}function To(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Do(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a=[],i=!0,o=!1,s,f;try{for(r=r.call(e);!(i=(s=r.next()).done)&&(a.push(s.value),!(t&&a.length===t));i=!0);}catch(c){o=!0,f=c}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw f}}return a}}function Gr(e,t){if(e){if(typeof e=="string")return jr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jr(e,t)}}function jr(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Eo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ao(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zt(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Gr(e))||t){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,f;return{s:function(){r=r.call(e)},n:function(){var c=r.next();return o=c.done,c},e:function(c){s=!0,f=c},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw f}}}}var Io="finalize",Oo="consider";function kt(e,t,r){e.dispatchEvent(new CustomEvent(Io,{detail:{items:t,info:r}}))}function nt(e,t,r){e.dispatchEvent(new CustomEvent(Oo,{detail:{items:t,info:r}}))}var lr="draggedEntered",Gt="draggedLeft",cr="draggedOverIndex",Ur="draggedLeftDocument",tr={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function So(e,t,r){e.dispatchEvent(new CustomEvent(lr,{detail:{indexObj:t,draggedEl:r}}))}function jo(e,t,r){e.dispatchEvent(new CustomEvent(Gt,{detail:{draggedEl:t,type:tr.LEFT_FOR_ANOTHER,theOtherDz:r}}))}function Co(e,t){e.dispatchEvent(new CustomEvent(Gt,{detail:{draggedEl:t,type:tr.OUTSIDE_OF_ANY}}))}function Mo(e,t,r){e.dispatchEvent(new CustomEvent(cr,{detail:{indexObj:t,draggedEl:r}}))}function Po(e){window.dispatchEvent(new CustomEvent(Ur,{detail:{draggedEl:e}}))}var Ie={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:lr,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:cr,DRAGGED_LEFT:Gt,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Me={POINTER:"pointer",KEYBOARD:"keyboard"},dr="isDndShadowItem",ur="data-is-dnd-shadow-item-internal",No="data-is-dnd-shadow-item-hint",Na="id:dnd-shadow-placeholder-0000",Ro="dnd-action-dragged-el",ge="id",Cr=0;function Ra(){Cr++}function La(){if(Cr===0)throw new Error("Bug! trying to decrement when there are no dropzones");Cr--}var Hr=typeof window>"u";function Mr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r,a=t?Bo(e):e.getBoundingClientRect(),i=getComputedStyle(e),o=i.transform;if(o){var s,f,c,g;if(o.startsWith("matrix3d("))r=o.slice(9,-1).split(/, /),s=+r[0],f=+r[5],c=+r[12],g=+r[13];else if(o.startsWith("matrix("))r=o.slice(7,-1).split(/, /),s=+r[0],f=+r[3],c=+r[4],g=+r[5];else return a;var u=i.transformOrigin,y=a.x-c-(1-s)*parseFloat(u),v=a.y-g-(1-f)*parseFloat(u.slice(u.indexOf(" ")+1)),m=s?a.width/s:e.offsetWidth,b=f?a.height/f:e.offsetHeight;return{x:y,y:v,width:m,height:b,top:v,right:y+m,bottom:v+b,left:y}}else return a}function Fa(e){var t=Mr(e);return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function Ba(e){var t=e.getBoundingClientRect();return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function Wa(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Lo(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function vr(e,t){return e.y<=t.bottom&&e.y>=t.top&&e.x>=t.left&&e.x<=t.right}function Nt(e){return Wa(Ba(e))}function sa(e,t){var r=Nt(e),a=Fa(t);return vr(r,a)}function la(e,t){var r=Nt(e),a=Nt(t);return Lo(r,a)}function Fo(e){var t=Ba(e);return t.right<0||t.left>document.documentElement.scrollWidth||t.bottom<0||t.top>document.documentElement.scrollHeight}function Bo(e){for(var t=e.getBoundingClientRect(),r={top:t.top,bottom:t.bottom,left:t.left,right:t.right},a=!1,i=!1,o=e.parentElement;o&&o!==document.body;){var s=window.getComputedStyle(o),f=s.overflowY,c=s.overflowX,g=f==="scroll"||f==="auto",u=c==="scroll"||c==="auto";if(g||u){var y=o.getBoundingClientRect();if(g){var v=Math.max(r.top,y.top),m=Math.min(r.bottom,y.bottom);(v!==r.top||m!==r.bottom)&&(a=!0),r.top=v,r.bottom=m}if(u){var b=Math.max(r.left,y.left),h=Math.min(r.right,y.right);(b!==r.left||h!==r.right)&&(i=!0),r.left=b,r.right=h}}o=o.parentElement}return a||i?{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}:{top:t.top,bottom:t.bottom,left:t.left,right:t.right,width:Math.max(0,t.right-t.left),height:Math.max(0,t.bottom-t.top)}}var _t;function Vr(){_t=new Map}Vr();function Wo(e){var t=Array.from(e.children).findIndex(function(r){return r.getAttribute(ur)});if(t>=0)return _t.has(e)||_t.set(e,new Map),_t.get(e).set(t,Fa(e.children[t])),t}function zo(e,t){if(!sa(e,t))return null;var r=t.children;if(r.length===0)return{index:0,isProximityBased:!0};for(var a=Wo(t),i=0;i<r.length;i++)if(sa(e,r[i])){var o=_t.has(t)&&_t.get(t).get(i);return o&&!vr(Nt(e),o)?{index:a,isProximityBased:!1}:{index:i,isProximityBased:!1}}for(var s=Number.MAX_VALUE,f=void 0,c=0;c<r.length;c++){var g=la(e,r[c]);g<s&&(s=g,f=c)}if(r.length>0){var u=r.length,y=r[u-1],v=y.cloneNode(!1);v.style.visibility="hidden",v.style.pointerEvents="none",t.appendChild(v);var m=la(e,v);m<s&&(f=u),t.removeChild(v)}return{index:f,isProximityBased:!0}}function It(e){return JSON.stringify(e,null,2)}function rr(e){if(!e)throw new Error("cannot get depth of a falsy node");return za(e,0)}function za(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?za(e.parentElement,t+1):t-1}function Go(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!{}.hasOwnProperty.call(t,r)||t[r]!==e[r])return!1;return!0}function Uo(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var Ho=200,ca=10,Pr;function Vo(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ho,a=arguments.length>3?arguments[3]:void 0,i,o,s=!1,f,c=Array.from(t).sort(function(u,y){return rr(y)-rr(u)});function g(){var u=Nt(e),y=a.multiScrollIfNeeded();if(!y&&f&&Math.abs(f.x-u.x)<ca&&Math.abs(f.y-u.y)<ca){Pr=window.setTimeout(g,r);return}if(Fo(e)){Po(e);return}f=u;var v=!1,m=zt(c),b;try{for(m.s();!(b=m.n()).done;){var h=b.value;y&&Vr();var p=zo(e,h);if(p!==null){var _=p.index;v=!0,h!==i?(i&&jo(i,e,h),So(h,p,e),i=h):_!==o&&(Mo(h,p,e),o=_);break}}}catch(w){m.e(w)}finally{m.f()}!v&&s&&i?(Co(i,e),i=void 0,o=void 0,s=!1):s=!0,Pr=window.setTimeout(g,r)}g()}function Zo(){clearTimeout(Pr),Vr()}var Ot=30;function Yo(){var e;function t(){e={directionObj:void 0,stepPx:0}}t();function r(o){var s=e,f=s.directionObj,c=s.stepPx;f&&(o.scrollBy(f.x*c,f.y*c),window.requestAnimationFrame(function(){return r(o)}))}function a(o){return Ot-o}function i(o,s){if(!s)return!1;var f=qo(o,s),c=!!e.directionObj;if(f===null)return c&&t(),!1;var g=!1,u=!1;return s.scrollHeight>s.clientHeight&&(f.bottom<Ot?(g=!0,e.directionObj={x:0,y:1},e.stepPx=a(f.bottom)):f.top<Ot&&(g=!0,e.directionObj={x:0,y:-1},e.stepPx=a(f.top)),!c&&g)||s.scrollWidth>s.clientWidth&&(f.right<Ot?(u=!0,e.directionObj={x:1,y:0},e.stepPx=a(f.right)):f.left<Ot&&(u=!0,e.directionObj={x:-1,y:0},e.stepPx=a(f.left)),!c&&u)?(r(s),!0):(t(),!1)}return{scrollIfNeeded:i,resetScrolling:t}}function qo(e,t){var r=t===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:t.getBoundingClientRect();return vr(e,r)?{top:e.y-r.top,bottom:r.bottom-e.y,left:e.x-r.left,right:r.right-e.x}:null}function Ko(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=Jo(e),a=Array.from(r).sort(function(c,g){return rr(g)-rr(c)}),i=Yo(),o=i.scrollIfNeeded,s=i.resetScrolling;function f(){var c=t();if(!c||!a)return!1;for(var g=a.filter(function(v){return vr(c,v.getBoundingClientRect())||v===document.scrollingElement}),u=0;u<g.length;u++){var y=o(c,g[u]);if(y)return!0}return!1}return{multiScrollIfNeeded:r.size>0?f:function(){return!1},destroy:function(){return s()}}}function Xo(e){if(!e)return[];for(var t=[],r=e;r;){var a=window.getComputedStyle(r),i=a.overflow;i.split(" ").some(function(o){return o.includes("auto")||o.includes("scroll")})&&t.push(r),r=r.parentElement}return t}function Jo(e){var t=new Set,r=zt(e),a;try{for(r.s();!(a=r.n()).done;){var i=a.value;Xo(i).forEach(function(o){return t.add(o)})}}catch(o){r.e(o)}finally{r.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&t.add(document.scrollingElement),t}function Qo(e){var t=e.cloneNode(!0),r=[],a=e.tagName==="SELECT",i=a?[e]:Be(e.querySelectorAll("select")),o=zt(i),s;try{for(o.s();!(s=o.n()).done;){var f=s.value;r.push(f.value)}}catch(T){o.e(T)}finally{o.f()}if(i.length>0)for(var c=a?[t]:Be(t.querySelectorAll("select")),g=0;g<c.length;g++){var u=c[g],y=r[g],v=u.querySelector('option[value="'.concat(y,'"'));v&&v.setAttribute("selected",!0)}var m=e.tagName==="CANVAS",b=m?[e]:Be(e.querySelectorAll("canvas"));if(b.length>0)for(var h=m?[t]:Be(t.querySelectorAll("canvas")),p=0;p<h.length;p++){var _=b[p],w=h[p];w.width=_.width,w.height=_.height,_.width>0&&_.height>0&&w.getContext("2d").drawImage(_,0,0)}return t}var Rt=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),$o=wt({},Rt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function Ga(e){if(!Rt[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(Rt)));return $o[e]}var ei=.2;function lt(e){return"".concat(e," ").concat(ei,"s ease")}function ti(e,t){var r=e.getBoundingClientRect(),a=Qo(e);Ua(e,a),a.id=Ro,a.style.position="fixed";var i=r.top,o=r.left;if(a.style.top="".concat(i,"px"),a.style.left="".concat(o,"px"),t){var s=Wa(r);i-=s.y-t.y,o-=s.x-t.x,window.setTimeout(function(){a.style.top="".concat(i,"px"),a.style.left="".concat(o,"px")},0)}return a.style.margin="0",a.style.boxSizing="border-box",a.style.height="".concat(r.height,"px"),a.style.width="".concat(r.width,"px"),a.style.transition="".concat(lt("top"),", ").concat(lt("left"),", ").concat(lt("background-color"),", ").concat(lt("opacity"),", ").concat(lt("color")," "),window.setTimeout(function(){return a.style.transition+=", ".concat(lt("width"),", ").concat(lt("height"))},0),a.style.zIndex="9999",a.style.cursor="grabbing",a}function ri(e){e.style.cursor="grab"}function ai(e,t,r,a){Ua(t,e);var i=t.getBoundingClientRect(),o=e.getBoundingClientRect(),s=i.width-o.width,f=i.height-o.height;if(s||f){var c={left:(r-o.left)/o.width,top:(a-o.top)/o.height};Ga(Rt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(i.height,"px"),e.style.width="".concat(i.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-c.left*s,"px"),e.style.top="".concat(parseFloat(e.style.top)-c.top*f,"px")}}function Ua(e,t){var r=window.getComputedStyle(e);Array.from(r).filter(function(a){return a.startsWith("background")||a.startsWith("padding")||a.startsWith("font")||a.startsWith("text")||a.startsWith("align")||a.startsWith("justify")||a.startsWith("display")||a.startsWith("flex")||a.startsWith("border")||a==="opacity"||a==="color"||a==="list-style-type"||Ga(Rt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(a==="width"||a==="height")}).forEach(function(a){return t.style.setProperty(a,r.getPropertyValue(a),r.getPropertyPriority(a))})}function ni(e,t){e.draggable=!1,e.ondragstart=function(){return!1},t?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function Ha(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function oi(e){e.style.visibility="hidden",e.setAttribute(ur,"true")}function ii(e){e.style.visibility="",e.removeAttribute(ur)}function Kt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(a){var i=t(a);Object.keys(i).forEach(function(o){a.style[o]=i[o]}),r(a).forEach(function(o){return a.classList.add(o)})})}function ar(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(a){var i=t(a);Object.keys(i).forEach(function(o){a.style[o]=""}),r(a).forEach(function(o){return a.classList.contains(o)&&a.classList.remove(o)})})}function si(e){var t=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var r=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=t,e.style.minWidth=r}}var li="--any--",ci=100,di=20,Zt=3,ui=80,da={outline:"rgba(255, 255, 102, 0.7) solid 2px"},ua="data-is-dnd-original-dragged-item",Se,he,Ce,fr,ue,br,at,we,Ue,ke,et=!1,Zr=!1,Yr,Ut=!1,Xt=[],Ct,He,jt=!1,Ge=new Map,fe=new Map,Er=new WeakMap;function vi(e,t){Ge.has(t)||Ge.set(t,new Set),Ge.get(t).has(e)||(Ge.get(t).add(e),Ra())}function va(e,t){Ge.get(t).delete(e),La(),Ge.get(t).size===0&&Ge.delete(t)}function fi(){var e=Ge.get(fr),t=zt(e),r;try{for(t.s();!(r=t.n()).done;){var a=r.value;a.addEventListener(lr,Va),a.addEventListener(Gt,Za),a.addEventListener(cr,Ya)}}catch(s){t.e(s)}finally{t.f()}window.addEventListener(Ur,Tt);var i=Math.max.apply(Math,Be(Array.from(e.keys()).map(function(s){return fe.get(s).dropAnimationDurationMs}))),o=i===0?di:Math.max(i,ci);Ct=Ko(e,function(){return ke}),Vo(he,e,o*1.07,Ct)}function bi(){var e=Ge.get(fr),t=zt(e),r;try{for(t.s();!(r=t.n()).done;){var a=r.value;a.removeEventListener(lr,Va),a.removeEventListener(Gt,Za),a.removeEventListener(cr,Ya)}}catch(i){t.e(i)}finally{t.f()}window.removeEventListener(Ur,Tt),Ct&&(Ct.destroy(),Ct=void 0),Zo()}function gr(e){return e.findIndex(function(t){return!!t[dr]})}function gi(e){var t;return er(er({},e),{},(t={},wt(t,dr,!0),wt(t,ge,Na),t))}function Va(e){var t=fe.get(e.currentTarget),r=t.items,a=t.dropFromOthersDisabled;if(!(a&&e.currentTarget!==ue)){if(Ut=!1,r=r.filter(function(f){return f[ge]!==at[ge]&&f[ge]!==Na}),ue!==e.currentTarget){var i=fe.get(ue).items,o=i.filter(function(f){return!f[dr]});nt(ue,o,{trigger:Ie.DRAGGED_ENTERED_ANOTHER,id:Ce[ge],source:Me.POINTER})}var s=e.detail.indexObj.index;we=e.currentTarget,r.splice(s,0,at),nt(e.currentTarget,r,{trigger:Ie.DRAGGED_ENTERED,id:Ce[ge],source:Me.POINTER})}}function Za(e){if(et){var t=fe.get(e.currentTarget),r=t.items,a=t.dropFromOthersDisabled;if(!(a&&e.currentTarget!==ue&&e.currentTarget!==we)){var i=Be(r),o=gr(i);o!==-1&&i.splice(o,1);var s=we;we=void 0;var f=e.detail,c=f.type,g=f.theOtherDz;if(c===tr.OUTSIDE_OF_ANY||c===tr.LEFT_FOR_ANOTHER&&g!==ue&&fe.get(g).dropFromOthersDisabled){Ut=!0,we=ue;var u=s===ue?i:Be(fe.get(ue).items);u.splice(br,0,at),nt(ue,u,{trigger:Ie.DRAGGED_LEFT_ALL,id:Ce[ge],source:Me.POINTER})}nt(e.currentTarget,i,{trigger:Ie.DRAGGED_LEFT,id:Ce[ge],source:Me.POINTER})}}}function Ya(e){var t=fe.get(e.currentTarget),r=t.items,a=t.dropFromOthersDisabled;if(!(a&&e.currentTarget!==ue)){var i=Be(r);Ut=!1;var o=e.detail.indexObj.index,s=gr(i);s!==-1&&i.splice(s,1),i.splice(o,0,at),nt(e.currentTarget,i,{trigger:Ie.DRAGGED_OVER_INDEX,id:Ce[ge],source:Me.POINTER})}}function nr(e){e.preventDefault();var t=e.touches?e.touches[0]:e;ke={x:t.clientX,y:t.clientY},he.style.transform="translate3d(".concat(ke.x-Ue.x,"px, ").concat(ke.y-Ue.y,"px, 0)")}function Tt(){Zr=!0,window.removeEventListener("mousemove",nr),window.removeEventListener("touchmove",nr),window.removeEventListener("mouseup",Tt),window.removeEventListener("touchend",Tt),bi(),ri(he),we||(we=ue);var e=fe.get(we),t=e.items,r=e.type;ar(Ge.get(r),function(o){return fe.get(o).dropTargetStyle},function(o){return fe.get(o).dropTargetClasses});var a=gr(t);a===-1&&we===ue&&(a=br),t=t.map(function(o){return o[dr]?Ce:o});function i(){Yr(),kt(we,t,{trigger:Ut?Ie.DROPPED_OUTSIDE_OF_ANY:Ie.DROPPED_INTO_ZONE,id:Ce[ge],source:Me.POINTER}),we!==ue&&kt(ue,fe.get(ue).items,{trigger:Ie.DROPPED_INTO_ANOTHER,id:Ce[ge],source:Me.POINTER});var o=Array.from(we.children).find(function(s){return s.getAttribute(ur)});o&&ii(o),hi()}fe.get(we).dropAnimationDisabled?i():pi(a,i)}function pi(e,t){var r=e>-1?Mr(we.children[e],!1):Mr(we,!1),a={x:r.left-parseFloat(he.style.left),y:r.top-parseFloat(he.style.top)},i=fe.get(we),o=i.dropAnimationDurationMs,s="transform ".concat(o,"ms ease");he.style.transition=he.style.transition?he.style.transition+","+s:s,he.style.transform="translate3d(".concat(a.x,"px, ").concat(a.y,"px, 0)"),window.setTimeout(t,o)}function mi(e,t){Xt.push({dz:e,destroy:t}),window.requestAnimationFrame(function(){Ha(e),document.body.appendChild(e)})}function hi(){he&&he.remove&&he.remove(),Se&&Se.remove&&Se.remove(),he=void 0,Se=void 0,Ce=void 0,fr=void 0,ue=void 0,br=void 0,at=void 0,we=void 0,Ue=void 0,ke=void 0,et=!1,Zr=!1,Yr=void 0,Ut=!1,He&&clearTimeout(He),He=void 0,jt=!1,Xt.length&&(Xt.forEach(function(e){var t=e.dz,r=e.destroy;r(),t.remove()}),Xt=[])}function _i(e,t){var r=!1,a={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:da,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},i=new Map;function o(){window.addEventListener("mousemove",c,{passive:!1}),window.addEventListener("touchmove",c,{passive:!1,capture:!1}),window.addEventListener("mouseup",f,{passive:!1}),window.addEventListener("touchend",f,{passive:!1})}function s(){window.removeEventListener("mousemove",c),window.removeEventListener("touchmove",c),window.removeEventListener("mouseup",f),window.removeEventListener("touchend",f),He&&(clearTimeout(He),He=void 0,jt=!1)}function f(v){if(s(),Se=void 0,Ue=void 0,ke=void 0,v.type==="touchend"){var m=new Event("click",{bubbles:!0,cancelable:!0});v.target.dispatchEvent(m)}}function c(v){var m=!!v.touches,b=m?v.touches[0]:v;if(m&&a.delayTouchStartMs>0&&!jt){ke={x:b.clientX,y:b.clientY},(Math.abs(ke.x-Ue.x)>=Zt||Math.abs(ke.y-Ue.y)>=Zt)&&(He&&(clearTimeout(He),He=void 0),f(v));return}v.preventDefault(),ke={x:b.clientX,y:b.clientY},(Math.abs(ke.x-Ue.x)>=Zt||Math.abs(ke.y-Ue.y)>=Zt)&&(s(),u())}function g(v){if(!(v.target!==v.currentTarget&&(v.target.value!==void 0||v.target.isContentEditable))&&!v.button&&!et){var m=!!v.touches,b=m&&a.delayTouchStartMs>0;b||v.preventDefault(),v.stopPropagation();var h=m?v.touches[0]:v;Ue={x:h.clientX,y:h.clientY},ke=er({},Ue),Se=v.currentTarget,b&&(jt=!1,He=window.setTimeout(function(){Se&&(jt=!0,s(),u())},a.delayTouchStartMs)),o()}}function u(){et=!0;var v=i.get(Se);br=v,ue=Se.parentElement;var m=ue.closest("dialog")||ue.closest("[popover]")||ue.getRootNode(),b=m.body||m,h=a.items,p=a.type,_=a.centreDraggedOnCursor,w=Be(h);Ce=w[v],fr=p,at=gi(Ce),he=ti(Se,_&&ke),b.appendChild(he);function T(){Se.parentElement?window.requestAnimationFrame(T):(Se.setAttribute(ua,!0),b.appendChild(Se),fi(),Ha(Se),at[ge]=Ce[ge],he.focus())}window.requestAnimationFrame(T),Kt(Array.from(Ge.get(a.type)).filter(function(E){return E===ue||!fe.get(E).dropFromOthersDisabled}),function(E){return fe.get(E).dropTargetStyle},function(E){return fe.get(E).dropTargetClasses}),w.splice(v,1,at),Yr=si(ue),nt(ue,w,{trigger:Ie.DRAG_STARTED,id:Ce[ge],source:Me.POINTER}),window.addEventListener("mousemove",nr,{passive:!1}),window.addEventListener("touchmove",nr,{passive:!1,capture:!1}),window.addEventListener("mouseup",Tt,{passive:!1}),window.addEventListener("touchend",Tt,{passive:!1})}function y(v){var m=v.items,b=m===void 0?void 0:m,h=v.flipDurationMs,p=h===void 0?0:h,_=v.type,w=_===void 0?li:_,T=v.dragDisabled,E=T===void 0?!1:T,S=v.morphDisabled,j=S===void 0?!1:S,k=v.dropFromOthersDisabled,I=k===void 0?!1:k,A=v.dropTargetStyle,C=A===void 0?da:A,L=v.dropTargetClasses,z=L===void 0?[]:L,G=v.transformDraggedElement,F=G===void 0?function(){}:G,P=v.centreDraggedOnCursor,U=P===void 0?!1:P,H=v.dropAnimationDisabled,X=H===void 0?!1:H,R=v.delayTouchStart,M=R===void 0?!1:R;a.dropAnimationDurationMs=p;var V=0;M===!0?V=ui:typeof M=="number"&&isFinite(M)&&M>=0&&(V=M),a.delayTouchStartMs=V,a.type&&w!==a.type&&va(e,a.type),a.type=w,a.items=Be(b),a.dragDisabled=E,a.morphDisabled=j,a.transformDraggedElement=F,a.centreDraggedOnCursor=U,a.dropAnimationDisabled=X,r&&et&&!Zr&&(!Go(C,a.dropTargetStyle)||!Uo(z,a.dropTargetClasses))&&(ar([e],function(){return a.dropTargetStyle},function(){return z}),Kt([e],function(){return C},function(){return z})),a.dropTargetStyle=C,a.dropTargetClasses=Be(z);function q(N,Y){return fe.get(N)?fe.get(N)[Y]:a[Y]}r&&et&&a.dropFromOthersDisabled!==I&&(I?ar([e],function(N){return q(N,"dropTargetStyle")},function(N){return q(N,"dropTargetClasses")}):Kt([e],function(N){return q(N,"dropTargetStyle")},function(N){return q(N,"dropTargetClasses")})),a.dropFromOthersDisabled=I,fe.set(e,a),vi(e,w);for(var $=et?gr(a.items):-1,se=0;se<e.children.length;se++){var le=e.children[se];if(ni(le,E),se===$){j||ai(he,le,ke.x,ke.y),a.transformDraggedElement(he,Ce,se),oi(le);continue}le.removeEventListener("mousedown",Er.get(le)),le.removeEventListener("touchstart",Er.get(le)),E||(le.addEventListener("mousedown",g),le.addEventListener("touchstart",g),Er.set(le,g)),i.set(le,se),r||(r=!0)}}return y(t),{update:function(m){y(m)},destroy:function(){function m(){va(e,fe.get(e).type),fe.delete(e)}et&&!e.closest("[".concat(ua,"]"))?mi(e,m):m()}}}var Yt,Nr={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},qa=(Yt={},wt(Yt,Nr.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),wt(Yt,Nr.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),Yt),xi="dnd-action-aria-alert",be;function Rr(){be||(be=document.createElement("div"),(function(){be.id=xi,be.style.position="fixed",be.style.bottom="0",be.style.left="0",be.style.zIndex="-5",be.style.opacity="0",be.style.height="0",be.style.width="0",be.setAttribute("role","alert")})(),document.body.prepend(be),Object.entries(qa).forEach(function(e){var t=yo(e,2),r=t[0],a=t[1];return document.body.prepend(ki(r,a))}))}function yi(){return Hr?null:(document.readyState==="complete"?Rr():window.addEventListener("DOMContentLoaded",Rr),er({},Nr))}function wi(){Hr||!be||(Object.keys(qa).forEach(function(e){var t;return(t=document.getElementById(e))===null||t===void 0?void 0:t.remove()}),be.remove(),be=void 0)}function ki(e,t){var r=document.createElement("div");return r.id=e,r.innerHTML="<p>".concat(t,"</p>"),r.style.display="none",r.style.position="fixed",r.style.zIndex="-5",r}function xt(e){if(!Hr){be||Rr(),be.innerHTML="";var t=document.createTextNode(e);be.appendChild(t),be.style.display="none",be.style.display="inline"}}var Ti="--any--",fa={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Fe=!1,Lr,Te,vt="",ct,Ve,tt="",or=new WeakSet,ba=new WeakMap,ga=new WeakMap,Fr=new Map,ye=new Map,ze=new Map,ir;function Di(e,t){ze.size===0&&(ir=yi(),window.addEventListener("keydown",Ka),window.addEventListener("click",Xa)),ze.has(t)||ze.set(t,new Set),ze.get(t).has(e)||(ze.get(t).add(e),Ra())}function pa(e,t){Te===e&&Lt(),ze.get(t).delete(e),La(),ze.get(t).size===0&&ze.delete(t),ze.size===0&&(window.removeEventListener("keydown",Ka),window.removeEventListener("click",Xa),ir=void 0,wi())}function Ka(e){if(Fe)switch(e.key){case"Escape":{Lt();break}}}function Xa(){Fe&&(or.has(document.activeElement)||Lt())}function Ei(e){if(Fe){var t=e.currentTarget;if(t!==Te){vt=t.getAttribute("aria-label")||"";var r=ye.get(Te),a=r.items,i=a.find(function(y){return y[ge]===Ve}),o=a.indexOf(i),s=a.splice(o,1)[0],f=ye.get(t),c=f.items,g=f.autoAriaDisabled;t.getBoundingClientRect().top<Te.getBoundingClientRect().top||t.getBoundingClientRect().left<Te.getBoundingClientRect().left?(c.push(s),g||xt("Moved item ".concat(tt," to the end of the list ").concat(vt))):(c.unshift(s),g||xt("Moved item ".concat(tt," to the beginning of the list ").concat(vt)));var u=Te;kt(u,a,{trigger:Ie.DROPPED_INTO_ANOTHER,id:Ve,source:Me.KEYBOARD}),kt(t,c,{trigger:Ie.DROPPED_INTO_ZONE,id:Ve,source:Me.KEYBOARD}),Te=t}}}function Ja(){Fr.forEach(function(e,t){var r=e.update;return r(ye.get(t))})}function Lt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;ye.get(Te).autoAriaDisabled||xt("Stopped dragging item ".concat(tt)),or.has(document.activeElement)&&document.activeElement.blur(),e&&nt(Te,ye.get(Te).items,{trigger:Ie.DRAG_STOPPED,id:Ve,source:Me.KEYBOARD}),ar(ze.get(Lr),function(t){return ye.get(t).dropTargetStyle},function(t){return ye.get(t).dropTargetClasses}),ct=null,Ve=null,tt="",Lr=null,Te=null,vt="",Fe=!1,Ja()}function Ai(e,t){var r={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:fa,dropTargetClasses:[],autoAriaDisabled:!1};function a(u,y,v){u.length<=1||u.splice(v,1,u.splice(y,1,u[v])[0])}function i(u){switch(u.key){case"Enter":case" ":{if((u.target.disabled!==void 0||u.target.href||u.target.isContentEditable)&&!or.has(u.target))return;u.preventDefault(),u.stopPropagation(),Fe?Lt():o(u);break}case"ArrowDown":case"ArrowRight":{if(!Fe)return;u.preventDefault(),u.stopPropagation();var y=ye.get(e),v=y.items,m=Array.from(e.children),b=m.indexOf(u.currentTarget);b<m.length-1&&(r.autoAriaDisabled||xt("Moved item ".concat(tt," to position ").concat(b+2," in the list ").concat(vt)),a(v,b,b+1),kt(e,v,{trigger:Ie.DROPPED_INTO_ZONE,id:Ve,source:Me.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Fe)return;u.preventDefault(),u.stopPropagation();var h=ye.get(e),p=h.items,_=Array.from(e.children),w=_.indexOf(u.currentTarget);w>0&&(r.autoAriaDisabled||xt("Moved item ".concat(tt," to position ").concat(w," in the list ").concat(vt)),a(p,w,w-1),kt(e,p,{trigger:Ie.DROPPED_INTO_ZONE,id:Ve,source:Me.KEYBOARD}));break}}}function o(u){f(u.currentTarget),Te=e,Lr=r.type,Fe=!0;var y=Array.from(ze.get(r.type)).filter(function(m){return m===Te||!ye.get(m).dropFromOthersDisabled});if(Kt(y,function(m){return ye.get(m).dropTargetStyle},function(m){return ye.get(m).dropTargetClasses}),!r.autoAriaDisabled){var v="Started dragging item ".concat(tt,". Use the arrow keys to move it within its list ").concat(vt);y.length>1&&(v+=", or tab to another list in order to move the item into it"),xt(v)}nt(e,ye.get(e).items,{trigger:Ie.DRAG_STARTED,id:Ve,source:Me.KEYBOARD}),Ja()}function s(u){Fe&&u.currentTarget!==ct&&(u.stopPropagation(),Lt(!1),o(u))}function f(u){var y=ye.get(e),v=y.items,m=Array.from(e.children),b=m.indexOf(u);ct=u,ct.tabIndex=r.zoneItemTabIndex,Ve=v[b][ge],tt=m[b].getAttribute("aria-label")||""}function c(u){var y=u.items,v=y===void 0?[]:y,m=u.type,b=m===void 0?Ti:m,h=u.dragDisabled,p=h===void 0?!1:h,_=u.zoneTabIndex,w=_===void 0?0:_,T=u.zoneItemTabIndex,E=T===void 0?0:T,S=u.dropFromOthersDisabled,j=S===void 0?!1:S,k=u.dropTargetStyle,I=k===void 0?fa:k,A=u.dropTargetClasses,C=A===void 0?[]:A,L=u.autoAriaDisabled,z=L===void 0?!1:L;r.items=Be(v),r.dragDisabled=p,r.dropFromOthersDisabled=j,r.zoneTabIndex=w,r.zoneItemTabIndex=E,r.dropTargetStyle=I,r.dropTargetClasses=C,r.autoAriaDisabled=z,r.type&&b!==r.type&&pa(e,r.type),r.type=b,Di(e,b),z||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",p?ir.DND_ZONE_DRAG_DISABLED:ir.DND_ZONE_ACTIVE)),ye.set(e,r),Fe?e.tabIndex=e===Te||ct.contains(e)||r.dropFromOthersDisabled||Te&&r.type!==ye.get(Te).type?-1:0:e.tabIndex=r.zoneTabIndex,e.addEventListener("focus",Ei);for(var G=function(U){var H=e.children[U];or.add(H),H.tabIndex=Fe?-1:r.zoneItemTabIndex,z||H.setAttribute("role","listitem"),H.removeEventListener("keydown",ba.get(H)),H.removeEventListener("click",ga.get(H)),p||(H.addEventListener("keydown",i),ba.set(H,i),H.addEventListener("click",s),ga.set(H,s)),Fe&&r.items[U][ge]===Ve&&(ct=H,ct.tabIndex=r.zoneItemTabIndex,H.focus())},F=0;F<e.children.length;F++)G(F)}c(t);var g={update:function(y){c(y)},destroy:function(){pa(e,r.type),ye.delete(e),Fr.delete(e)}};return Fr.set(e,g),g}var Ii=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function Qa(e,t){if(Oi(e))return{update:function(){},destroy:function(){}};ma(t);var r=_i(e,t),a=Ai(e,t);return{update:function(o){ma(o),r.update(o),a.update(o)},destroy:function(){r.destroy(),a.destroy()}}}function Oi(e){return!!e.closest("[".concat(No,'="true"]'))}function ma(e){var t=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var r=e.zoneTabIndex,a=e.zoneItemTabIndex;e.dropTargetStyle;var i=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var o=e.delayTouchStart;e.dropAnimationDisabled;var s=xo(e,Ii);if(Object.keys(s).length>0&&console.warn("dndzone will ignore unknown options",s),!t)throw new Error("no 'items' key provided to dndzone");var f=t.find(function(u){return!{}.hasOwnProperty.call(u,ge)});if(f)throw new Error("missing '".concat(ge,"' property for item ").concat(It(f)));if(i&&!Array.isArray(i))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(ht(i),", ").concat(It(i)));if(r&&!ha(r))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(ht(r),", ").concat(It(r)));if(a&&!ha(a))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(ht(a),", ").concat(It(a)));if(o!==void 0&&o!==!1){var c=o===!0,g=typeof o=="number"&&isFinite(o)&&o>=0;if(!c&&!g)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(ht(o),", ").concat(It(o)))}}function ha(e){return!isNaN(e)&&(function(t){return(t|0)===t})(parseFloat(e))}function Si(e){const t=e-1;return t*t*t+1}function $a(e,{from:t,to:r},a={}){var{delay:i=0,duration:o=j=>Math.sqrt(j)*120,easing:s=Si}=a,f=getComputedStyle(e),c=f.transform==="none"?"":f.transform,[g,u]=f.transformOrigin.split(" ").map(parseFloat);g/=e.clientWidth,u/=e.clientHeight;var y=ji(e),v=e.clientWidth/r.width/y,m=e.clientHeight/r.height/y,b=t.left+t.width*g,h=t.top+t.height*u,p=r.left+r.width*g,_=r.top+r.height*u,w=(b-p)*v,T=(h-_)*m,E=t.width/r.width,S=t.height/r.height;return{delay:i,duration:typeof o=="function"?o(Math.sqrt(w*w+T*T)):o,easing:s,css:(j,k)=>{var I=k*w,A=k*T,C=j+k*E,L=j+k*S;return`transform: ${c} translate(${I}px, ${A}px) scale(${C}, ${L});`}}}function ji(e){if("currentCSSZoom"in e)return e.currentCSSZoom;for(var t=e,r=1;t!==null;)r*=+getComputedStyle(t).zoom,t=t.parentElement;return r}var Ci=B('<span class="text-center text-xs font-semibold bg-purple-500/20 text-purple-400 rounded w-full h-full  items-center justify-center flex">1</span>'),Mi=B('<span class="text-center text-xs font-semibold bg-red-500/20 text-red-400 rounded w-full h-full items-center justify-center flex">2</span>'),Pi=B('<span class="text-center text-xs font-semibold bg-yellow-500/20 text-yellow-400 rounded w-full h-full items-center justify-center flex">3</span>'),Ni=B('<span class="text-center text-xs font-semibold bg-blue-500/20 text-blue-500 rounded w-full h-full items-center justify-center flex">4</span>'),Ri=B('<span class="text-center text-xs font-semibold bg-emerald-500/20 text-emerald-300 rounded w-full h-full items-center justify-center flex">5</span>');function Br(e,t){var r=de(),a=re(r);{var i=s=>{var f=Ci();D(s,f)},o=s=>{var f=de(),c=re(f);{var g=y=>{var v=Mi();D(y,v)},u=y=>{var v=de(),m=re(v);{var b=p=>{var _=Pi();D(p,_)},h=p=>{var _=de(),w=re(_);{var T=S=>{var j=Ni();D(S,j)},E=S=>{var j=Ri();D(S,j)};Z(w,S=>{t.level=="sev4"?S(T):S(E,!1)},!0)}D(p,_)};Z(m,p=>{t.level=="sev3"?p(b):p(h,!1)},!0)}D(y,v)};Z(c,y=>{t.level=="sev2"?y(g):y(u,!1)},!0)}D(s,f)};Z(a,s=>{t.level=="sev1"?s(i):s(o,!1)})}D(e,r)}var Li=B('<div class="flex items-center gap-3 p-3 bg-base-100 border border-primary/30 rounded-lg cursor-grab active:cursor-grabbing"><div class="text-base-content/30"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path></svg></div> <div class="flex-1 min-w-0"><p class="text-sm font-medium text-base-content truncate"> </p> <p class="text-xs text-base-content/50 truncate"> </p></div></div>'),Fi=B('<div class="flex flex-col gap-2"></div>'),Bi=B('<div class="h-1 bg-base-300"><div class="h-full bg-base-content/20 transition-all"></div></div>'),Wi=B('<div class="bg-base-100 rounded-lg hover:bg-primary/20 cursor-pointer overflow-hidden" tabindex="0" role="button"><!> <div class="flex items-start gap-2 p-2"><div class="size-8 mt-0.5"><!></div> <div class="flex-1 min-w-0"><p class="text-sm font-medium text-base-content mb-1"> </p> <p class="text-sm"><span> </span> <span class="text-xs mx-0.5">â€¢</span> <span class="text-base-content/50"> </span></p></div> <button type="button" class="w-7 h-7 flex items-center justify-center rounded text-base-content/30 hover:text-error hover:bg-error/10 transition-colors" title="Remove from week">âœ•</button></div></div>'),zi=B('<div class="flex flex-col gap-2"></div>'),Gi=B('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No projects assigned to this week</p> <p class="text-base-content/30 text-xs">Go to Areas and assign projects</p></div>'),Ui=B('<div class="flex flex-col gap-2"><div class="flex justify-between items-center"><div class="text-xs tracking-wider text-base-content/50 uppercase">Assigned projects</div></div> <!></div>');function Hi(e,t){_e(t,!0);const r=200;let a=Q(()=>t.assignedProjects.map(b=>({...b,id:b.project.id}))),i=Q(()=>t.filterCompleted?n(a).filter(b=>!["completed","cancelled"].includes(b.project.status)):n(a)),o=J(yt([]));ft(()=>{O(o,n(i),!0)});async function s(b,h){b.stopPropagation(),await Ea(h,t.currentWeekOf)}function f(b){const h=ut.getByProject(b),p=h.filter(w=>w.status==="active").length,_=h.filter(w=>w.status==="completed").length;return{active:p,completed:_,total:p+_}}function c(b){O(o,b.detail.items,!0)}function g(b){O(o,b.detail.items,!0);const{info:h}=b.detail,p=h.id,_=n(o).findIndex(j=>j.id===p);if(_===-1)return;const w=_>0?n(o)[_-1]:null,T=_<n(o).length-1?n(o)[_+1]:null;let E=null,S=null;if(w){const j=n(a).findIndex(k=>k.id===w.id);E=w.assignment.order,S=j<n(a).length-1?n(a)[j+1].assignment.order:null}else if(T){const j=n(a).findIndex(k=>k.id===T.id);E=j>0?n(a)[j-1].assignment.order:null,S=T.assignment.order}Fn(t.currentWeekOf,p,E,S)}var u=Ui(),y=x(d(u),2);{var v=b=>{var h=de(),p=re(h);{var _=T=>{var E=Fi();Ae(E,29,()=>n(o),({id:S,project:j,area:k})=>S,(S,j)=>{let k=()=>n(j).project,I=()=>n(j).area;var A=Li(),C=x(d(A),2),L=d(C),z=d(L,!0);l(L);var G=x(L,2),F=d(G,!0);l(G),l(C),l(A),K(()=>{W(z,k().name),W(F,I().name)}),Ca(A,()=>$a,()=>({duration:r})),D(S,A)}),l(E),Pa(E,(S,j)=>Qa?.(S,j),()=>({items:n(o),flipDurationMs:r,dropTargetStyle:{}})),Jt("consider",E,c),Jt("finalize",E,g),D(T,E)},w=T=>{var E=zi();Ae(E,21,()=>n(i),Pe,(S,j)=>{let k=()=>n(j).project,I=()=>n(j).area;const A=Q(()=>f(k().id)),C=Q(()=>n(A).total>0?n(A).completed/n(A).total*100:0);var L=Wi();L.__click=()=>t.navigateToTasks(k());var z=d(L);{var G=N=>{var Y=Bi(),ae=d(Y);l(Y),K(()=>Wt(ae,`width: ${n(C)??""}%`)),D(N,Y)};Z(z,N=>{n(A).total>0&&N(G)})}var F=x(z,2),P=d(F),U=d(P);Br(U,{get level(){return k().severity}}),l(P);var H=x(P,2),X=d(H),R=d(X,!0);l(X);var M=x(X,2),V=d(M),q=d(V);l(V);var $=x(V,4),se=d($,!0);l($),l(M),l(H);var le=x(H,2);le.__click=N=>s(N,k().id),l(F),l(L),K(()=>{W(R,k().name),ne(V,1,`text-base-content/50 ${n(A).active==0?"text-error":""}`),W(q,`${n(A).active??""} available`),W(se,I().name)}),D(S,L)}),l(E),D(T,E)};Z(p,T=>{t.reorderMode?T(_):T(w,!1)})}D(b,h)},m=b=>{var h=Gi();D(b,h)};Z(y,b=>{n(o).length>0?b(v):b(m,!1)})}l(u),D(e,u),xe()}pe(["click"]);var Vi=B('<span class="text-xs text-primary-content px-2 py-1 bg-primary rounded"> </span>'),Zi=B('<button class="text-start flex items-center gap-3 p-3 bg-base-100 rounded-lg transition-all hover:bg-primary/20 cursor-pointer"><div class="flex-1 min-w-0 "><p class="text-sm text-base-content truncate mb-1"> </p> <p class="text-xs text-base-content/50"> </p></div> <!></button>'),Yi=B('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No tasks available</p> <p class="text-base-content/30 text-xs">Assigned projects have no active tasks</p></div>'),qi=B('<div class="flex flex-col gap-2"></div>');function Ki(e,t){_e(t,!0);var r=qi();Ae(r,21,()=>t.weekTasks,Pe,(a,i)=>{let o=()=>n(i).task,s=()=>n(i).project,f=()=>n(i).area;const c=Q(()=>t.isTaskAssignedToDay(o().id));var g=Zi();g.__click=_=>t.openDayPicker(_,o(),s(),f());var u=d(g),y=d(u),v=d(y,!0);l(y);var m=x(y,2),b=d(m);l(m),l(u);var h=x(u,2);{var p=_=>{var w=Vi(),T=d(w,!0);l(w),K(E=>W(T,E),[()=>Da(n(c))]),D(_,w)};Z(h,_=>{n(c)&&_(p)})}l(g),K(()=>{W(v,o().name),W(b,`${f().icon??""} ${s().name??""}`)}),D(a,g)},a=>{var i=Yi();D(a,i)}),l(r),D(e,r),xe()}pe(["click"]);var Xi=bt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path></svg> Reorder',1),Ji=B("<button><!></button>"),Qi=B('<div class="flex flex-col h-full"><div class="bg-base-100 border-b border-b-base-content/10"><div class="flex ps-4 pe-2 pt-4 pb-2 flex-row justify-between items-center"><div><h2 class="text-lg font-medium">Week</h2> <p class="text-xs text-base-content/50"> </p></div> <div class="flex gap-2"><button> </button> <!></div></div> <div class="flex gap-1 px-4 pb-3"><button> </button> <button> </button></div></div> <div class="flex-1 overflow-y-auto px-2 py-4"><!></div></div> <!>',1);function $i(e,t){_e(t,!0);let r=J(localStorage.getItem("filterAssignedProject")=="true"),a=J(!1),i=()=>O(r,!n(r)),o=()=>O(a,!n(a));ft(()=>{localStorage.setItem("filterAssignedProject",n(r)+"")});let s=J(yt(localStorage.getItem("weekTabView")||"projects"));ft(()=>{n(s)&&localStorage.setItem("weekTabView",n(s))});let f=yt(Ft());const c=Q(()=>Bt.getWeek(f));let g;function u(R){return n(c)?n(c).tasksByDay.find(V=>V.taskId===R)?.date??null:null}let y=Q(()=>n(c)?n(c).projectAssignments.map(R=>{const M=dt.getById(R.areaId);if(!M)return null;const q=Ze.getByArea(M.id).find($=>$.id===R.projectId);return q?{assignment:R,project:q,area:M}:null}).filter(R=>R!==null):[]),v=Q(()=>{const R=[];for(const{project:M,area:V}of n(y)){const q=ut.getByProject(M.id).filter($=>$.status==="active");for(const $ of q)R.push({task:$,project:M,area:V})}return R});var m=Qi(),b=re(m),h=d(b),p=d(h),_=d(p),w=x(d(_),2),T=d(w,!0);l(w),l(_);var E=x(_,2),S=d(E);S.__click=i;var j=d(S);l(S);var k=x(S,2);{var I=R=>{var M=Ji();M.__click=o;var V=d(M);{var q=se=>{var le=_a("Done");D(se,le)},$=se=>{var le=Xi();Qt(),D(se,le)};Z(V,se=>{n(a)?se(q):se($,!1)})}l(M),K(()=>ne(M,1,`btn btn-xs w-20 ${n(a)?"btn-primary":"btn-secondary btn-soft"}`)),D(R,M)};Z(k,R=>{n(y).length>1&&R(I)})}l(E),l(p);var A=x(p,2),C=d(A);C.__click=()=>O(s,"projects");var L=d(C);l(C);var z=x(C,2);z.__click=()=>O(s,"tasks");var G=d(z);l(z),l(A),l(h);var F=x(h,2),P=d(F);{var U=R=>{Hi(R,{get reorderMode(){return n(a)},get filterCompleted(){return n(r)},get navigateToTasks(){return t.navigateToTasks},get currentWeekOf(){return f},get assignedProjects(){return n(y)}})},H=R=>{Ki(R,{get openDayPicker(){return g.openDayPicker},get weekTasks(){return n(v)},isTaskAssignedToDay:u})};Z(P,R=>{n(s)==="projects"?R(U):R(H,!1)})}l(F),l(b);var X=x(b,2);Pt(ho(X,{get currentWeekOf(){return f},isTaskAssignedToDay:u}),R=>g=R,()=>g),K(R=>{W(T,R),ne(S,1,`w-20 btn btn-xs ${n(r)?"btn-primary":"btn-secondary btn-soft"}`),W(j,`Filter :${n(r)?"ON":"OFF"}`),ne(C,1,`px-4 py-1.5 text-sm rounded-lg transition-colors ${n(s)==="projects"?"bg-primary/20 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),W(L,`Projects (${n(y).length??""})`),ne(z,1,`px-4 py-1.5 text-sm rounded-lg transition-colors ${n(s)==="tasks"?"bg-primary/20 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),W(G,`Tasks (${n(v).length??""})`)},[()=>Bn(f)]),D(e,m),xe()}pe(["click"]);var es=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="p-4 border-b border-base-content/10"><p class="font-medium text-base-content"> </p> <p class="text-xs text-base-content/50"> </p></div> <div class="p-4 space-y-4"><div><p class="text-xs uppercase tracking-wider text-base-content/50 mb-2">What happened?</p> <div class="flex gap-2"><label><input type="radio" name="action" class="radio radio-success radio-sm"/> <span class="text-sm">Completed</span></label> <label><input type="radio" name="action" class="radio radio-error radio-sm"/> <span class="text-sm">Cancelled</span></label></div></div> <div><p class="text-xs uppercase tracking-wider text-base-content/50 mb-2">Follow-up task (optional)</p> <input type="text" class="input input-bordered w-full" placeholder="Enter to create a follow-up..."/></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><button type="button" class="btn btn-ghost btn-sm flex-1">Cancel</button> <button type="button" class="btn btn-primary btn-sm flex-1">Done</button></div></div></div>');function ts(e,t){_e(t,!0);const r=[];let a=J("completed"),i=J("");ft(()=>{t.show&&(O(a,"completed"),O(i,""))});async function o(){t.taskByDay&&(n(a)==="completed"?await Aa(t.taskByDay.taskId,t.taskByDay.projectId,t.weekOf,t.taskByDay.date):await Wn(t.taskByDay.taskId,t.taskByDay.projectId,t.weekOf,t.taskByDay.date),n(i).trim()&&await Ia(t.taskByDay.projectId,t.taskByDay.areaId,n(i).trim()),t.onClose())}var s=de(),f=re(s);{var c=g=>{var u=es(),y=d(u);y.__click=function(...F){t.onClose?.apply(this,F)},y.__keydown=F=>F.key==="Escape"&&t.onClose();var v=x(y,2),m=d(v),b=d(m),h=d(b,!0);l(b);var p=x(b,2),_=d(p);l(p),l(m);var w=x(m,2),T=d(w),E=x(d(T),2),S=d(E),j=d(S);rt(j),j.value=j.__value="completed",Qt(2),l(S);var k=x(S,2),I=d(k);rt(I),I.value=I.__value="cancelled",Qt(2),l(k),l(E),l(T);var A=x(T,2),C=x(d(A),2);rt(C),C.__keydown=F=>F.key==="Enter"&&o(),l(A),l(w);var L=x(w,2),z=d(L);z.__click=function(...F){t.onClose?.apply(this,F)};var G=x(z,2);G.__click=o,l(L),l(v),l(u),K(()=>{W(h,t.taskByDay.name),W(_,`${t.areaIcon??""} ${t.areaName??""} Â· ${t.projectName??""}`),ne(S,1,`flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border border-base-content/10 cursor-pointer hover:border-success ${n(a)==="completed"?"border-success bg-success/10":""}`),ne(k,1,`flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border border-base-content/10 cursor-pointer hover:border-error ${n(a)==="cancelled"?"border-error bg-error/10":""}`)}),$t(r,[],j,()=>n(a),F=>O(a,F)),$t(r,[],I,()=>n(a),F=>O(a,F)),sr(C,()=>n(i),F=>O(i,F)),D(g,u)};Z(f,g=>{t.show&&t.taskByDay&&g(c)})}D(e,s),xe()}pe(["click","keydown"]);var rs=bt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path></svg> Reorder',1),as=B('<button type="button"><!></button>'),ns=B('<div class="px-4 pb-3"><div class="flex items-center justify-between text-xs text-base-content/50 mb-1"><span> </span> <span> </span></div> <div class="h-2 bg-base-100 rounded-full overflow-hidden"><div class="h-full bg-success transition-all rounded-full"></div></div></div>'),os=B('<div class="flex items-center gap-3 p-3 bg-base-100 border border-primary/30 rounded-lg cursor-grab active:cursor-grabbing"><div class="text-base-content/30"><svg class="size-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path></svg></div> <div class="flex-1 min-w-0"><p class="text-sm text-base-content truncate mb-2"> </p> <p class="text-xs text-base-content/50 truncate"> </p></div></div>'),is=B('<div class="flex flex-col gap-2 mb-4"></div>'),ss=B('<div class="flex items-start gap-3 p-3 bg-base-100 border border-transparent rounded-lg"><button type="button" aria-label="check" class="size-7 rounded-full border-2 border-base-content/30 flex items-center justify-center flex-shrink-0 hover:border-success hover:bg-success/10 transition-colors"></button> <div class="flex-1 min-w-0" tabindex="0" role="button"><p class="text-sm text-base-content mb-2"> </p> <p class="text-xs text-base-content/50 truncate"> </p></div> <button type="button" class="w-7 h-7 flex items-center justify-center rounded text-base-content/30 hover:text-error hover:bg-error/10 transition-colors" title="Remove from today">âœ•</button></div>'),ls=B('<div class="flex flex-col gap-2 mb-4"></div>'),cs=B('<div class="text-center py-12"><span class="text-4xl block mb-3">ðŸ“‹</span> <p class="text-base-content/50 text-sm mb-2">No tasks for today</p> <p class="text-base-content/30 text-xs">Go to Week tab and assign tasks</p></div>'),ds=B('<div class="text-center mb-5 py-12 border-2 border-dashed border-success/30 rounded-lg bg-success/5"><span class="text-4xl block mb-3">ðŸŽ‰</span> <p class="text-sm font-medium text-success">All done for today!</p> <p class="text-xs text-base-content/50 mt-1">Great work!</p></div>'),us=bt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>'),vs=bt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"></path></svg>'),fs=B('<div class="flex items-center gap-3 p-3 opacity-50"><button type="button" title="Mark as incomplete"><!></button> <div class="flex-1 min-w-0"><p class="text-sm text-base-content line-through truncate"> </p> <p class="text-xs text-base-content/50"> </p></div></div>'),bs=B('<div><p class="text-xs font-medium uppercase tracking-wider text-base-content/40 mb-2"> </p> <div class="flex flex-col gap-1"></div></div>'),gs=B('<div class="flex flex-col h-full"><div class="px-4 pt-4 pb-2 flex justify-between items-start"><div><h2 class="text-lg font-medium">Today</h2> <p class="text-xs text-base-content/50"> </p></div> <!></div> <!> <div class="flex-1 overflow-y-auto px-3 pb-4"><!> <!></div></div> <!>',1);function ps(e,t){_e(t,!0);const r=zn(),a=Ft(),i=200;let o=J(!1),s=J(null),f=J(""),c=J(""),g=J(""),u=J(!1);const y=()=>{O(u,!n(u))};let v=Q(()=>{const N=Bt.getWeek(a);return N?N.tasksByDay.filter(Y=>Y.date===r).map(Y=>{const ae=ut.getById(Y.taskId),oe=dt.getById(Y.areaId),te=(oe?Ze.getByArea(oe.id):[]).find(ee=>ee.id===Y.projectId);return{id:Y.taskId,taskByDay:Y,task:ae,areaIcon:oe?.icon??"ðŸ“",areaName:oe?.name??"Unknown",projectName:te?.name??"Unknown"}}):[]}),m=Q(()=>n(v)),b=Q(()=>n(v).filter(N=>N.taskByDay.status!=="completed"&&N.taskByDay.status!=="cancelled")),h=Q(()=>n(v).filter(N=>N.taskByDay.status==="completed"||N.taskByDay.status==="cancelled")),p=J(yt([]));ft(()=>{O(p,n(b),!0)});function _(){const N=n(h).length,Y=n(v).length,ae=Y>0?N/Y*100:0;return{completed:N,total:Y,percent:ae}}function w(N){O(p,N.detail.items,!0)}function T(N){O(p,N.detail.items,!0);const{info:Y}=N.detail,ae=Y.id,oe=n(p).findIndex(ie=>ie.id===ae);if(oe===-1)return;const ce=oe>0?n(p)[oe-1]:null,te=oe<n(p).length-1?n(p)[oe+1]:null;let ee=null,ve=null;if(ce){const ie=n(m).findIndex(me=>me.id===ce.id);ee=ce.taskByDay.order,ve=ie<n(m).length-1?n(m)[ie+1].taskByDay.order:null}else if(te){const ie=n(m).findIndex(me=>me.id===te.id);ee=ie>0?n(m)[ie-1].taskByDay.order:null,ve=te.taskByDay.order}Hn(a,r,ae,ee,ve)}async function E(N){await Aa(N.taskId,N.projectId,a,r)}async function S(N){await Un(N.taskId,N.projectId,a,r)}async function j(N){await qt(N.taskId,N.projectId,a,r)}function k(N,Y,ae,oe){O(s,N,!0),O(f,Y,!0),O(c,ae,!0),O(g,oe,!0),O(o,!0)}function I(){O(o,!1),O(s,null)}var A=gs(),C=re(A),L=d(C),z=d(L),G=x(d(z),2),F=d(G);l(G),l(z);var P=x(z,2);{var U=N=>{var Y=as();Y.__click=y;var ae=d(Y);{var oe=te=>{var ee=_a("Done");D(te,ee)},ce=te=>{var ee=rs();Qt(),D(te,ee)};Z(ae,te=>{n(u)?te(oe):te(ce,!1)})}l(Y),K(()=>ne(Y,1,`btn btn-xs ${n(u)?"btn-primary":"btn-accent btn-soft"}`)),D(N,Y)};Z(P,N=>{n(b).length>1&&N(U)})}l(L);var H=x(L,2);{var X=N=>{const Y=Q(_);var ae=ns(),oe=d(ae),ce=d(oe),te=d(ce);l(ce);var ee=x(ce,2),ve=d(ee);l(ee),l(oe);var ie=x(oe,2),me=d(ie);l(ie),l(ae),K(Ne=>{W(te,`${n(Y).completed??""} of ${n(Y).total??""} completed`),W(ve,`${Ne??""}%`),Wt(me,`width: ${n(Y).percent??""}%`)},[()=>Math.round(n(Y).percent)]),D(N,ae)};Z(H,N=>{_().total>0&&N(X)})}var R=x(H,2),M=d(R);{var V=N=>{var Y=de(),ae=re(Y);{var oe=te=>{var ee=is();Ae(ee,29,()=>n(p),({id:ve,taskByDay:ie,areaIcon:me,projectName:Ne})=>ve,(ve,ie)=>{let me=()=>n(ie).taskByDay,Ne=()=>n(ie).areaIcon,ot=()=>n(ie).projectName;var Re=os(),Oe=x(d(Re),2),De=d(Oe),Le=d(De,!0);l(De);var We=x(De,2),Ye=d(We);l(We),l(Oe),l(Re),K(()=>{W(Le,me().name),W(Ye,`${Ne()??""}  ${ot()??""}`)}),Ca(Re,()=>$a,()=>({duration:i})),D(ve,Re)}),l(ee),Pa(ee,(ve,ie)=>Qa?.(ve,ie),()=>({items:n(p),flipDurationMs:i,dropTargetStyle:{}})),Jt("consider",ee,w),Jt("finalize",ee,T),D(te,ee)},ce=te=>{var ee=ls();Ae(ee,21,()=>n(b),Pe,(ve,ie)=>{let me=()=>n(ie).taskByDay,Ne=()=>n(ie).areaIcon,ot=()=>n(ie).areaName,Re=()=>n(ie).projectName;var Oe=ss(),De=d(Oe);De.__click=()=>E(me());var Le=x(De,2);Le.__click=()=>k(me(),Ne(),ot(),Re());var We=d(Le),Ye=d(We,!0);l(We);var Qe=x(We,2),qe=d(Qe);l(Qe),l(Le);var gt=x(Le,2);gt.__click=()=>j(me()),l(Oe),K(()=>{W(Ye,me().name),W(qe,`${Ne()??""}  ${Re()??""}`)}),D(ve,Oe)}),l(ee),D(te,ee)};Z(ae,te=>{n(u)?te(oe):te(ce,!1)})}D(N,Y)},q=N=>{var Y=de(),ae=re(Y);{var oe=te=>{var ee=cs();D(te,ee)},ce=te=>{var ee=ds();D(te,ee)};Z(ae,te=>{_().total===0?te(oe):te(ce,!1)},!0)}D(N,Y)};Z(M,N=>{n(p).length>0?N(V):N(q,!1)})}var $=x(M,2);{var se=N=>{var Y=bs(),ae=d(Y),oe=d(ae);l(ae);var ce=x(ae,2);Ae(ce,21,()=>n(h),Pe,(te,ee)=>{let ve=()=>n(ee).taskByDay,ie=()=>n(ee).areaIcon,me=()=>n(ee).areaName,Ne=()=>n(ee).projectName;const ot=Q(()=>ve().status==="completed"),Re=Q(()=>ve().status==="cancelled");var Oe=fs(),De=d(Oe);De.__click=()=>S(ve());var Le=d(De);{var We=Ke=>{var it=us();D(Ke,it)},Ye=Ke=>{var it=de(),pt=re(it);{var pr=Ee=>{var en=vs();D(Ee,en)};Z(pt,Ee=>{ve().status==="cancelled"&&Ee(pr)},!0)}D(Ke,it)};Z(Le,Ke=>{ve().status==="completed"?Ke(We):Ke(Ye,!1)})}l(De);var Qe=x(De,2),qe=d(Qe),gt=d(qe,!0);l(qe);var Dt=x(qe,2),Ht=d(Dt);l(Dt),l(Qe),l(Oe),K(()=>{ne(De,1,`w-7 h-7 rounded-full ${n(ot)?"bg-success border-success text-success-content":n(Re)?"bg-error border-error text-error-content":"border-base-content/30 hover:border-success"} border-2 flex items-center justify-center flex-shrink-0`),W(gt,ve().name),W(Ht,`${ie()??""} ${me()??""} Â· ${Ne()??""}`)}),D(te,Oe)}),l(ce),l(Y),K(()=>W(oe,`Completed (${n(h).length??""})`)),D(N,Y)};Z($,N=>{n(h).length>0&&!n(u)&&N(se)})}l(R),l(C);var le=x(C,2);ts(le,{get show(){return n(o)},get taskByDay(){return n(s)},get areaIcon(){return n(f)},get areaName(){return n(c)},get projectName(){return n(g)},get weekOf(){return a},onClose:I}),K(N=>W(F,`${N??""}, ${r??""}`),[()=>Gn(r)]),D(e,A),xe()}pe(["click"]);const Ar=["none","reorder","edit","status"],ms=[{value:"active",label:"Active",color:"border-s-primary"},{value:"blocked",label:"Blocked",color:"border-s-warning"},{value:"someday",label:"Someday",color:"border-s-info"},{value:"completed",label:"Completed",color:"border-s-success"},{value:"cancelled",label:"Cancelled",color:"border-s-error"}],hs=[{value:"active",label:"Active"},{value:"blocked",label:"Blocked"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}];var _s=B('<button class="rounded-lg border border-dashed min-h-30 border-base-content/20 bg-transparent hover:bg-primary/20 transition-colors cursor-pointer w-full"><div class="card-body p-3 items-center justify-center text-center min-h-[88px]"><span class="text-xl text-base-content/50">+</span> <span class="text-xs text-base-content/50">Add Area</span></div></button>');function xs(e,t){var r=_s();r.__click=function(...a){t.handleClick?.apply(this,a)},D(e,r)}pe(["click"]);var ys=B('<button type="button"> </button>'),ws=B('<button type="button" class="btn btn-outline btn-error btn-sm">Archive</button>'),ks=B('<button type="button" class="btn btn-outline btn-primary btn-sm">Unarchive</button>'),Ts=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Icon</label> <div class="grid grid-cols-8 gap-1"></div></div> <div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Health, Work, Learning"/></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><!> <div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function Ds(e,t){_e(t,!0);let r=J(!1),a=J(null),i=J(""),o=J("ðŸŽ¯");function s(){O(a,null),O(i,""),O(o,"ðŸŽ¯"),O(r,!0)}function f(_,w){_.stopPropagation(),O(a,w,!0),O(i,w.name,!0),O(o,w.icon,!0),O(r,!0)}function c(){O(r,!1),O(a,null)}async function g(){!n(i).trim()||!n(o)||(n(a)?await Vn(n(a).index,{name:n(i).trim(),icon:n(o)}):await Zn(n(i).trim(),n(o)),c())}function u(_){return n(a)&&n(a).status=="archived"?!1:Ze.getByArea(_.id).filter(T=>T.status==="active").length===0}async function y(){!n(a)||!u(n(a))||(await Yn(n(a).index),c())}async function v(){n(a)&&(await qn(n(a).index),c())}var m={openCreateAreaModal:s,openEditAreaModal:f},b=de(),h=re(b);{var p=_=>{var w=Ts(),T=d(w);T.__click=c,T.__keydown=M=>M.key==="Escape"&&c();var E=x(T,2),S=d(E),j=d(S),k=d(j,!0);l(j);var I=x(j,2);I.__click=c,l(S);var A=x(S,2),C=d(A),L=x(d(C),2);Ae(L,21,()=>vo,Pe,(M,V)=>{var q=ys();q.__click=()=>O(o,n(V),!0);var $=d(q,!0);l(q),K(()=>{ne(q,1,`aspect-square flex items-center justify-center text-lg rounded-lg transition-colors ${n(o)===n(V)?"bg-primary text-primary-content":"hover:bg-base-200"}`),W($,n(V))}),D(M,q)}),l(L),l(C);var z=x(C,2),G=x(d(z),2);rt(G),G.__keydown=M=>M.key==="Enter"&&g(),l(z),l(A);var F=x(A,2),P=d(F);{var U=M=>{var V=de(),q=re(V);{var $=le=>{var N=ws();N.__click=y,K((Y,ae)=>{N.disabled=Y,Sr(N,"title",ae)},[()=>!u(n(a)),()=>u(n(a))?"Archive area":"Cannot archive: has active projects"]),D(le,N)},se=le=>{var N=de(),Y=re(N);{var ae=oe=>{var ce=ks();ce.__click=v,D(oe,ce)};Z(Y,oe=>{n(a).status=="archived"&&oe(ae)},!0)}D(le,N)};Z(q,le=>{n(a).status=="active"?le($):le(se,!1)})}D(M,V)};Z(P,M=>{n(a)&&M(U)})}var H=x(P,4);H.__click=c;var X=x(H,2);X.__click=g;var R=d(X,!0);l(X),l(F),l(E),l(w),K(M=>{W(k,n(a)?"Edit Area":"New Area"),X.disabled=M,W(R,n(a)?"Save":"Create")},[()=>!n(i).trim()||!n(o)]),sr(G,()=>n(i),M=>O(i,M)),D(_,w)};Z(h,_=>{n(r)&&_(p)})}return D(e,b),xe(m)}pe(["click","keydown"]);var Es=B('<button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center"><svg viewBox="0 0 24 24" class="size-6" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button>'),As=B('<div class="flex flex-row gap-1"><button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†</button> <button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†’</button></div>'),Is=B("<div> </div>"),Os=B('<div tabindex="0" role="button"><div class="flex flex-col py-4 px-3 items-start text-left"><div class="w-full flex flex-row justify-between items-start"><span class="text-4xl mb-2"> </span> <!></div> <div class="flex flex-row justify-between items-end w-full"><div class="flex flex-col w-full"><div class="text-sm font-medium mb-0 pb-1 truncate"> </div> <p class="text-xs text-base-content/50"> </p></div></div></div></div>');function Ss(e,t){_e(t,!0);const r=Q(()=>Ze.getByArea(t.area.id).filter(w=>w.status==="active").length),a=Q(()=>{const w=Ft(),T=Bt.getWeek(w),E=Ze.getByArea(t.area.id),S=E.filter(A=>A.status==="active"||A.status==="blocked"||A.status==="someday");if(S.length===0)return{level:"clear",color:"badge-success",icon:"âœ“"};if(T?.projectAssignments.some(A=>S.some(C=>C.id===A.projectId))??!1)return{level:"planned",color:"text-purple-500",icon:"â—†"};const k=E.filter(A=>A.status==="completed"&&A.completedAt),I=k.length>0?Math.max(...k.map(A=>new Date(A.completedAt).getTime())):null;if(I){const A=Date.now()-12096e5,C=Date.now()-720*60*60*1e3;if(I>=A)return{level:"active",color:"badge-info",icon:"â—"};if(I>=C)return{level:"fading",color:"badge-warning",icon:"â—‹"}}return{level:"avoiding",color:"badge-error",icon:"!"}});var i=Os();i.__click=()=>t.handleSelect(t.area);var o=d(i),s=d(o),f=d(s),c=d(f,!0);l(f);var g=x(f,2);{var u=w=>{var T=Es();T.__click=E=>t.handleEdit(E,t.area),D(w,T)},y=w=>{var T=de(),E=re(T);{var S=k=>{var I=As(),A=d(I);A.__click=L=>t.handleAreaMoveUp(L,t.index);var C=x(A,2);C.__click=L=>t.handleAreaMoveDown(L,t.index),l(I),K(()=>A.disabled=t.index==0),D(k,I)},j=k=>{var I=de(),A=re(I);{var C=L=>{var z=Is(),G=d(z,!0);l(z),K(()=>{ne(z,1,`badge badge-sm rounded ${n(a).color??""} badge-soft`),W(G,n(a).level)}),D(L,z)};Z(A,L=>{t.viewMode=="status"&&L(C)},!0)}D(k,I)};Z(E,k=>{t.viewMode=="reorder"?k(S):k(j,!1)},!0)}D(w,T)};Z(g,w=>{t.viewMode=="edit"?w(u):w(y,!1)})}l(s);var v=x(s,2),m=d(v),b=d(m),h=d(b,!0);l(b);var p=x(b,2),_=d(p);l(p),l(m),l(v),l(o),l(i),K(()=>{ne(i,1,`rounded-lg bg-base-100 hover:bg-primary/20 transition-colors cursor-pointer w-full ${n(a).level==="avoiding"?"border border-error/20":n(a).level==="fading"?"border border-warning/20":n(a).level==="active"?"border border-info/20":n(a).level==="planned"?"border border-purple-500/20":""}`),Wt(i,n(a).level==="avoiding"?"background: rgba(248, 114, 114, 0.05); box-shadow: inset 0 0 20px rgba(248, 114, 114, 0.08); ":n(a).level==="fading"?"box-shadow: inset 0 0 30px rgba(251, 189, 35, 0.1);":n(a).level==="active"?"box-shadow: inset 0 0 30px rgba(58, 191, 248, 0.1);":n(a).level==="planned"?"box-shadow: inset 0 0 30px rgba(168, 85, 247, 0.1);":""),W(c,t.area.icon),W(h,t.area.name),W(_,`${n(r)??""} project${n(r)!==1?"s":""}`)}),D(e,i),xe()}pe(["click"]);var js=B('<button class="link text-base-content/50 text-sm capitalize"> </button>'),Cs=B('<div class="flex flex-col h-full"><div class="px-3 pt-5 pb-4 flex flex-row justify-between items-center bg-base-100 border-b border-base-content/10"><a href="/" class="flex flex-row items-center text-base-content/80"><svg version="1.1" id="Icons" class="size-12 mt-1 me-2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" xml:space="preserve" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><style type="text/css">.st0{fill:none;stroke:currentColor;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><path class="st0" d="M11,13H5c-1.1,0-2-0.9-2-2V5c0-1.1,0.9-2,2-2h6c1.1,0,2,0.9,2,2v6C13,12.1,12.1,13,11,13z"></path><path class="st0" d="M11,29H5c-1.1,0-2-0.9-2-2v-6c0-1.1,0.9-2,2-2h6c1.1,0,2,0.9,2,2v6C13,28.1,12.1,29,11,29z"></path><line class="st0" x1="17" y1="5" x2="29" y2="5"></line><line class="st0" x1="17" y1="9" x2="24" y2="9"></line><line class="st0" x1="17" y1="21" x2="29" y2="21"></line><line class="st0" x1="17" y1="25" x2="24" y2="25"></line><polyline class="st0" points="6,7 8,9 11,6 "></polyline></g></svg> <div class="flex flex-col"><div class="text-xl text-base-content/80 tracking-wider font-medium">Doable</div> <div class="text-sm text-base-content/50">Life areas at a glance</div></div></a> <div class="flex flex-row gap-4"><!> <button class="link text-base-content/50 text-sm"> </button></div></div> <div class="flex-1 min-h-0 overflow-auto"><div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 p-3"><!> <!></div></div> <!></div>');function Ms(e,t){_e(t,!0);let r,a=J(yt(localStorage.getItem("areasViewMode")||"none"));ft(()=>localStorage.setItem("areasViewMode",n(a)));let i=J(!1),o=()=>O(a,Ar[(Ar.indexOf(n(a))+1)%Ar.length],!0),s=()=>O(i,!n(i));const f=Q(()=>n(i)?dt.areas.filter(k=>k.status=="archived"):dt.areas.filter(k=>k.status=="active"));async function c(k,I){if(k.stopPropagation(),I===0)return;const A=dt.areas,C=n(f)[I],L=n(f)[I-1],z=A.findIndex(P=>P.id===L.id),G=z>0?A[z-1].index:null,F=L.index;await Jr(C.index,G,F)}async function g(k,I){if(k.stopPropagation(),I===n(f).length-1)return;const A=dt.areas,C=n(f)[I],L=n(f)[I+1],z=A.findIndex(P=>P.id===L.id),G=L.index,F=z<A.length-1?A[z+1].index:null;await Jr(C.index,G,F)}var u=Cs(),y=d(u),v=x(d(y),2),m=d(v);{var b=k=>{var I=js();I.__click=o;var A=d(I,!0);l(I),K(()=>W(A,n(a))),D(k,I)};Z(m,k=>{n(i)||k(b)})}var h=x(m,2);h.__click=s;var p=d(h,!0);l(h),l(v),l(y);var _=x(y,2),w=d(_),T=d(w);Ae(T,17,()=>n(f),Pe,(k,I,A)=>{Ss(k,{get area(){return n(I)},get handleSelect(){return t.onSelectArea},index:A,handleAreaMoveUp:c,handleAreaMoveDown:g,get viewMode(){return n(a)},get handleEdit(){return r.openEditAreaModal}})});var E=x(T,2);{var S=k=>{xs(k,{get handleClick(){return r.openCreateAreaModal}})};Z(E,k=>{n(i)||k(S)})}l(w),l(_);var j=x(_,2);Pt(Ds(j,{}),k=>r=k,()=>r),l(u),K(()=>W(p,n(i)?"Active":"Archived")),D(e,u),xe()}pe(["click"]);var Ps=B('<button aria-label="edit"> </button>'),Ns=B('<div tabindex="0" role="button" class="flex flex-row gap-2 items-start text-left"><p class="px-2 flex flex-row gap-2 text-sm mb-1.5 w-full text-base-content"><span class="w-8 h-8 flex mt-0.5"><!></span> <span class="flex-1"> </span> <!></p></div>'),Rs=B('<div class="h-full bg-primary/80 transition-all"></div>'),Ls=B('<span class="text-xs mx-0.5">â€¢</span> ',1),Fs=B('<button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†‘</button> <button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†“</button>',1),Bs=B('<button aria-label="edit"> </button>'),Ws=B('<div class="w-full transition-colors bg-base-100 cursor-pointer hover:bg-primary/20" role="button" tabindex="0"><div class="flex-1 min-w-0 p-2 pt-4"><div class="flex flex-row items-start gap-2 "><div class="shrink-0 size-8"><!></div> <p class="text-sm mb-1.5 text-base-content"> </p></div> <div class="mb-2 mt-3 w-full items-center flex h-1 bg-neutral"><!></div> <div class="flex flex-row justify-between items-center ms-2"><p class="text-xs font-semibold text-base-content/50 "> <!></p> <div class="flex flex-row gap-2 items-center mt-1"><!> <button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center"><svg viewBox="0 0 24 24" class="size-5" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button> <!></div></div></div></div>'),zs=B("<div><!></div>");function Gs(e,t){_e(t,!0);const r=Q(()=>ut.getByProject(t.project.id)),a=Q(()=>n(r).filter(b=>b.status==="active").length),i=Q(()=>n(r).filter(b=>b.status==="completed").length),o=Q(()=>n(r).filter(b=>b.status==="active"||b.status==="completed").length),s=Q(()=>n(o)>0?n(i)/n(o)*100:0);function f(b){for(const[h,p]of Object.entries(Bt.weeksByWeekOf))if(p.projectAssignments.some(_=>_.projectId===b))return h;return null}function c(b){const h=Ft();if(b===h)return"This week";const p=new Date(h),_=new Date(b),w=Math.round((_.getTime()-p.getTime())/(1e3*60*60*24)),T=Math.round(w/7);return T===1?"Next week":T>1?`In ${T} weeks`:T===-1?"Last week":b.slice(5)}const g=Q(()=>f(t.project.id));var u=zs(),y=d(u);{var v=b=>{var h=Ns();h.__click=()=>t.onclick(t.project);var p=d(h),_=d(p),w=d(_);Br(w,{get level(){return t.project.severity}}),l(_);var T=x(_,2),E=d(T,!0);l(T);var S=x(T,2);{var j=k=>{var I=Ps();I.__click=C=>t.handleProjectAssign(C,t.project);var A=d(I,!0);l(I),K(C=>{ne(I,1,`badge badge-lg badge-soft ${n(g)?"badge-accent":"badge-ghost text-base-content/40"} text-xs p-1.5 w-20 cursor-pointer justify-center rounded-lg items-center flex`),W(A,C)},[()=>c(n(g))]),D(k,I)};Z(S,k=>{n(g)&&k(j)})}l(p),l(h),K(()=>W(E,t.project.name)),D(b,h)},m=b=>{var h=Ws();h.__click=()=>t.navigateToTasks(t.project),h.__keydown=M=>M.key==="Enter"&&t.navigateToTasks(t.project);var p=d(h),_=d(p),w=d(_),T=d(w);Br(T,{get level(){return t.project.severity}}),l(w);var E=x(w,2),S=d(E,!0);l(E),l(_);var j=x(_,2),k=d(j);{var I=M=>{var V=Rs();K(()=>Wt(V,`width: ${n(s)??""}%`)),D(M,V)};Z(k,M=>{n(o)>0&&M(I)})}l(j);var A=x(j,2),C=d(A),L=d(C),z=x(L);{var G=M=>{var V=Ls(),q=x(re(V));K(()=>W(q,` ${n(i)??""} done`)),D(M,V)};Z(z,M=>{n(i)>0&&M(G)})}l(C);var F=x(C,2),P=d(F);{var U=M=>{var V=Fs(),q=re(V);q.__click=se=>t.handleProjectMoveUp(se,t.index);var $=x(q,2);$.__click=se=>t.handleProjectMoveDown(se,t.index),D(M,V)};Z(P,M=>{t.allowReorder&&M(U)})}var H=x(P,2);H.__click=M=>t.handleEdit(M,t.project);var X=x(H,2);{var R=M=>{var V=Bs();V.__click=$=>t.handleProjectAssign($,t.project);var q=d(V,!0);l(V),K($=>{ne(V,1,`badge badge-lg badge-soft ${n(g)?"badge-accent":"badge-ghost text-base-content/40"} text-xs p-1.5 w-20 cursor-pointer flex justify-center rounded-lg items-center`),W(q,$)},[()=>n(g)?c(n(g)):"Unassigned"]),D(M,V)};Z(X,M=>{t.allowWeekAssignment&&M(R)})}l(F),l(A),l(p),l(h),K(()=>{W(S,t.project.name),W(L,`${n(a)??""} active `)}),D(b,h)};Z(y,b=>{t.isSelected?b(m,!1):b(v)})}l(u),D(e,u),xe()}pe(["click","keydown"]);var Us=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 h-[650px] max-h-full bg-base-100 rounded-t-2xl "><div class="flex flex-col h-full"><div class="flex justify-between bg-base-200 items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="flex-1 overflow-auto min-h-0 p-4 space-y-4 "><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Learn Spanish, Build Website"/></div> <div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Type</label> <div class="join w-full"><input type="radio" name="type" class="join-item btn btn-sm flex-1" aria-label="Regular"/> <input type="radio" name="type" class="join-item btn btn-sm flex-1" aria-label="Maintenance"/></div></div> <span class="text-xs text-base-content/50 mb-2 block">Severity</span> <div class="flex flex-col gap-1"><button type="button"><span class="font-bold w-4">1</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">2</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">3</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">4</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">5</span> <span class="font-normal text-left flex-1"> </span></button></div> <span class="text-xs text-base-content/50 mb-2 block">Status</span> <div class="grid grid-cols-3 gap-1"><button type="button">Active</button> <button type="button">Blocked</button> <button type="button">Someday</button> <button type="button">Cancelled</button> <button type="button">Done</button></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div></div>');function Hs(e,t){_e(t,!0);const r=[];let a=J(!1),i=J(null),o=J(""),s=J("active"),f=J("regular"),c=J("sev3");function g(){console.log("Creating.."),O(i,null),O(o,""),O(s,"active"),O(f,"regular"),O(c,"sev3"),O(a,!0)}function u(_,w){_.stopPropagation(),O(i,w,!0),O(o,w.name,!0),O(s,w.status,!0),O(f,w.type||"regular",!0),O(c,w.severity||"sev1",!0),O(a,!0)}function y(){O(a,!1),O(i,null)}async function v(){!n(o).trim()||!t.selectedArea||(n(i)?await Oa(t.selectedArea.id,n(i).index,{name:n(o).trim(),status:n(s),type:n(f),severity:n(c)}):await Kn(t.selectedArea.id,n(o).trim(),n(f),n(c)),y())}var m={openCreateProjectModal:g,openEditProjectModal:u},b=de(),h=re(b);{var p=_=>{var w=Us(),T=d(w);T.__click=y,T.__keydown=Ee=>Ee.key==="Escape"&&y();var E=x(T,2),S=d(E),j=d(S),k=d(j),I=d(k,!0);l(k);var A=x(k,2);A.__click=y,l(j);var C=x(j,2),L=d(C),z=x(d(L),2);rt(z),z.__keydown=Ee=>Ee.key==="Enter"&&v(),l(L);var G=x(L,2),F=x(d(G),2),P=d(F);rt(P),P.value=P.__value="regular";var U=x(P,2);rt(U),U.value=U.__value="maintenance",l(F),l(G);var H=x(G,4),X=d(H);let R;X.__click=()=>O(c,"sev1");var M=x(d(X),2),V=d(M,!0);l(M),l(X);var q=x(X,2);let $;q.__click=()=>O(c,"sev2");var se=x(d(q),2),le=d(se,!0);l(se),l(q);var N=x(q,2);let Y;N.__click=()=>O(c,"sev3");var ae=x(d(N),2),oe=d(ae,!0);l(ae),l(N);var ce=x(N,2);let te;ce.__click=()=>O(c,"sev4");var ee=x(d(ce),2),ve=d(ee,!0);l(ee),l(ce);var ie=x(ce,2);let me;ie.__click=()=>O(c,"sev5");var Ne=x(d(ie),2),ot=d(Ne,!0);l(Ne),l(ie),l(H);var Re=x(H,4),Oe=d(Re);let De;Oe.__click=()=>O(s,"active");var Le=x(Oe,2);let We;Le.__click=()=>O(s,"blocked");var Ye=x(Le,2);let Qe;Ye.__click=()=>O(s,"someday");var qe=x(Ye,2);let gt;qe.__click=()=>O(s,"cancelled");var Dt=x(qe,2);let Ht;Dt.__click=()=>O(s,"completed"),l(Re),l(C);var Ke=x(C,2),it=x(d(Ke),2);it.__click=y;var pt=x(it,2);pt.__click=v;var pr=d(pt,!0);l(pt),l(Ke),l(S),l(E),l(w),K(Ee=>{W(I,n(i)?"Edit Project":"New Project"),R=ne(X,1,"hover:bg-purple-600 btn btn-sm justify-start gap-2 transition-all",null,R,{"bg-purple-600":n(c)==="sev1","text-white":n(c)==="sev1"}),W(V,At[n(f)].sev1),$=ne(q,1,"hover:bg-red-500 btn btn-sm justify-start gap-2 transition-all",null,$,{"bg-red-500":n(c)==="sev2","text-white":n(c)==="sev2"}),W(le,At[n(f)].sev2),Y=ne(N,1,"hover:bg-yellow-500 hover:text-black btn btn-sm justify-start gap-2 transition-all",null,Y,{"bg-yellow-500":n(c)==="sev3","text-black":n(c)==="sev3"}),W(oe,At[n(f)].sev3),te=ne(ce,1,"hover:bg-sky-500 hover:text-black btn btn-sm justify-start gap-2 transition-all",null,te,{"bg-sky-500":n(c)==="sev4","text-black":n(c)==="sev4"}),W(ve,At[n(f)].sev4),me=ne(ie,1,"hover:bg-emerald-500 hover:text-black btn btn-sm justify-start gap-3 transition-all",null,me,{"bg-emerald-500":n(c)==="sev5","text-black":n(c)==="sev5"}),W(ot,At[n(f)].sev5),De=ne(Oe,1,"btn btn-sm hover:bg-warning hover:text-warning-content",null,De,{"btn-warning":n(s)==="active"}),We=ne(Le,1,"btn btn-sm hover:btn-error",null,We,{"btn-error":n(s)==="blocked"}),Qe=ne(Ye,1,"btn btn-sm hover:btn-info",null,Qe,{"btn-info":n(s)==="someday"}),gt=ne(qe,1,"btn btn-sm hover:btn-neutral",null,gt,{"btn-info":n(s)==="cancelled"}),Ht=ne(Dt,1,"btn btn-sm hover:btn-success",null,Ht,{"btn-success":n(s)==="completed"}),pt.disabled=Ee,W(pr,n(i)?"Save":"Create")},[()=>!n(o).trim()]),sr(z,()=>n(o),Ee=>O(o,Ee)),$t(r,[],P,()=>{"regular";return n(f)},Ee=>O(f,Ee)),$t(r,[],U,()=>{"maintenance";return n(f)},Ee=>O(f,Ee)),D(_,w)};Z(h,_=>{n(a)&&_(p)})}return D(e,b),xe(m)}pe(["click","keydown"]);var Vs=B('<button type="button"><div class="font-medium"> </div> <div class="text-xs opacity-70"> </div></button>'),Zs=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold">Assign to Week</h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-2"></div></div></div>');function Ys(e,t){_e(t,!0);let r=J(!1),a=J(null),i=J(void 0);function o(m,b,h){m.stopPropagation(),O(i,b,!0),O(a,h,!0),O(r,!0)}function s(){O(r,!1),O(a,null)}async function f(m,b){!n(a)||!n(i)||(b?await Ea(n(a).id,m):await Jn(n(a).id,n(i).id,m),s())}function c(m,b){const h=b??Ft();return Bt.getWeek(h)?.projectAssignments.some(_=>_.projectId===m)??!1}var g={openWeekPicker:o},u=de(),y=re(u);{var v=m=>{var b=Zs(),h=d(b);h.__click=s,h.__keydown=E=>E.key==="Escape"&&s();var p=x(h,2),_=d(p),w=x(d(_),2);w.__click=s,l(_);var T=x(_,2);Ae(T,21,Xn,Pe,(E,S)=>{const j=Q(()=>c(n(a).id,n(S).weekOf));var k=Vs();k.__click=()=>f(n(S).weekOf,n(j));var I=d(k),A=d(I,!0);l(I);var C=x(I,2),L=d(C,!0);l(C),l(k),K(()=>{ne(k,1,`w-full p-3 text-left rounded-lg border transition-colors ${n(j)?"bg-primary/20 text-primary-content border-primary":"border-base-content/10 hover:border-primary"}`),W(A,n(S).label),W(L,n(S).weekOf)}),D(E,k)}),l(T),l(p),l(b),D(m,b)};Z(y,m=>{n(r)&&n(a)&&m(v)})}return D(e,u),xe(g)}pe(["click","keydown"]);var qs=B("<button> </button>"),Ks=B('<div class="text-center py-8 text-base-content/50 text-sm"> </div>'),Xs=B('<button type="button" class="flex items-center h-16 gap-2 p-3 border-2 border-dashed border-base-content/20 rounded-lg text-base-content/50 cursor-pointer transition-all hover:border-primary hover:text-primary"><span class="text-lg">+</span> <span class="text-sm">Add Project</span></button>'),Js=B('<div class="flex flex-col h-full"><div class="flex flex-col border-b border-base-content/10 bg-base-100"><div class="flex flex-col items-start px-2"><div class="h-12 flex items-center "><button class="gap-2 text-sm text-secondary flex items-center justify-center rounded-lg hover:bg-base-100 text-base-content/70"><span>â†</span> <span>Back</span></button></div> <div class="flex items-center gap-3 pe-2"><span class="text-4xl"> </span> <h2 class="text-lg"> </h2></div></div> <div class="flex gap-1 mt-4 px-3 pb-2 overflow-x-auto"></div></div> <div class="flex-1 overflow-auto min-h-0 pb-5 pt-2.5"><div class="flex flex-col gap-2.5 py-0"><!> <!></div></div></div> <!> <!>',1);function Qs(e,t){_e(t,!0);let r=J(void 0);const a=P=>O(r,P.id,!0);let i,o,s=J(yt(localStorage.getItem("projectTabView")||"active"));ft(()=>{n(s)&&localStorage.setItem("projectTabView",n(s))});let f=Q(()=>!["completed","cancelled"].includes(n(s))),c=Q(()=>Ze.getByArea(t.selectedArea.id).filter(P=>P.status===n(s)));function g(P){return Ze.getByArea(t.selectedArea.id).filter(U=>U.status===P).length}async function u(P,U){if(P.stopPropagation(),U===0||!t.selectedArea)return;const H=Ze.getByArea(t.selectedArea.id),X=n(c)[U],R=n(c)[U-1],M=H.findIndex($=>$.id===R.id),V=M>0?H[M-1].index:null,q=R.index;await Qr(t.selectedArea.id,X.index,V,q)}async function y(P,U){if(P.stopPropagation(),!t.selectedArea||U===n(c).length-1)return;const H=Ze.getByArea(t.selectedArea.id),X=n(c)[U],R=n(c)[U+1],M=H.findIndex($=>$.id===R.id),V=R.index,q=M<H.length-1?H[M+1].index:null;console.log(V,q),await Qr(t.selectedArea.id,X.index,V,q)}var v=Js(),m=re(v),b=d(m),h=d(b),p=d(h),_=d(p);_.__click=function(...P){t.navigateBack?.apply(this,P)},l(p);var w=x(p,2),T=d(w),E=d(T,!0);l(T);var S=x(T,2),j=d(S,!0);l(S),l(w),l(h);var k=x(h,2);Ae(k,21,()=>ms,Pe,(P,U)=>{const H=Q(()=>n(s)===n(U).value),X=Q(()=>g(n(U).value));var R=qs();R.__click=()=>O(s,n(U).value,!0);var M=d(R);l(R),K(()=>{ne(R,1,`px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap ${n(H)?"bg-primary/40 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),W(M,`${n(U).label??""} (${n(X)??""})`)}),D(P,R)}),l(k),l(b);var I=x(b,2),A=d(I),C=d(A);Ae(C,17,()=>n(c),Pe,(P,U,H)=>{{let X=Q(()=>n(r)==n(U).id);Gs(P,{get isSelected(){return n(X)},onclick:a,handleProjectAssign:(R,M)=>o.openWeekPicker(R,t.selectedArea,M),index:H,get allowReorder(){return n(f)},get navigateToTasks(){return t.navigateToTasks},get project(){return n(U)},get allowWeekAssignment(){return n(f)},get handleEdit(){return i.openEditProjectModal},handleProjectMoveUp:u,handleProjectMoveDown:y})}},P=>{var U=Ks(),H=d(U);l(U),K(()=>W(H,`No ${n(s)??""} projects`)),D(P,U)});var L=x(C,2);{var z=P=>{var U=Xs();U.__click=function(...H){i.openCreateProjectModal?.apply(this,H)},D(P,U)};Z(L,P=>{n(s)=="active"&&P(z)})}l(A),l(I),l(m);var G=x(m,2);Pt(Hs(G,{get selectedArea(){return t.selectedArea}}),P=>i=P,()=>i);var F=x(G,2);Pt(Ys(F,{}),P=>o=P,()=>o),K(()=>{W(E,t.selectedArea.icon),W(j,t.selectedArea.name)}),D(e,v),xe()}pe(["click"]);var $s=B('<button type="button"> </button>'),el=B('<div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Status</label> <div class="flex flex-wrap gap-2"></div></div>'),tl=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Read chapter 1, Write blog post"/></div> <!></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function rl(e,t){_e(t,!0);let r=J(!1),a=J(null),i=J(""),o=J("active");function s(){O(a,null),O(i,""),O(o,"active"),O(r,!0)}function f(b,h){b.stopPropagation(),O(a,h,!0),O(i,h.name,!0),O(o,h.status,!0),O(r,!0)}function c(){O(r,!1),O(a,null)}async function g(){!n(i).trim()||!t.selectedProject||!t.selectedArea||(n(a)?await Sa(t.selectedProject.id,n(a).index,{name:n(i).trim(),status:n(o)}):await Ia(t.selectedProject.id,t.selectedArea.id,n(i).trim()),c())}var u={openCreateTaskModal:s,openEditTaskModal:f},y=de(),v=re(y);{var m=b=>{var h=tl(),p=d(h);p.__click=c,p.__keydown=P=>P.key==="Escape"&&c();var _=x(p,2),w=d(_),T=d(w),E=d(T,!0);l(T);var S=x(T,2);S.__click=c,l(w);var j=x(w,2),k=d(j),I=x(d(k),2);rt(I),I.__keydown=P=>P.key==="Enter"&&g(),l(k);var A=x(k,2);{var C=P=>{var U=el(),H=x(d(U),2);Ae(H,21,()=>hs,Pe,(X,R)=>{var M=$s();M.__click=()=>O(o,n(R).value,!0);var V=d(M,!0);l(M),K(()=>{ne(M,1,`px-3 py-1.5 text-sm rounded-lg border transition-colors ${n(o)===n(R).value?"bg-primary text-primary-content border-primary":"border-base-content/20 hover:border-primary"}`),W(V,n(R).label)}),D(X,M)}),l(H),l(U),D(P,U)};Z(A,P=>{n(a)&&P(C)})}l(j);var L=x(j,2),z=x(d(L),2);z.__click=c;var G=x(z,2);G.__click=g;var F=d(G,!0);l(G),l(L),l(_),l(h),K(P=>{W(E,n(a)?"Edit Task":"New Task"),G.disabled=P,W(F,n(a)?"Save":"Create")},[()=>!n(i).trim()]),sr(I,()=>n(i),P=>O(i,P)),D(b,h)};Z(v,b=>{n(r)&&b(m)})}return D(e,y),xe(u)}pe(["click","keydown"]);var al=bt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>'),nl=bt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"></path></svg>'),ol=bt('<svg class="w-3 h-3 text-warning" fill="currentColor" viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16" rx="1"></rect><rect x="14" y="4" width="4" height="16" rx="1"></rect></svg>'),il=B('<button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†‘</button> <button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†“</button>',1),sl=B('<div tabindex="0" role="button" class="hover:bg-primary/20 cursor-pointer w-full flex flex-row items-start border-b border-b-base-content/10 p-2"><button type="button"><!></button> <div class="text-sm text-base-content/80 flex-1 "> </div> <!></div>');function ll(e,t){_e(t,!0);const r=Q(()=>t.task.status==="completed"),a=Q(()=>t.task.status==="cancelled"),i=Q(()=>t.task.status==="blocked");var o=sl();o.__click=b=>t.handleEdit(b,t.task);var s=d(o);s.__click=b=>t.toggleTaskComplete(b,t.task);var f=d(s);{var c=b=>{var h=al();D(b,h)},g=b=>{var h=de(),p=re(h);{var _=T=>{var E=nl();D(T,E)},w=T=>{var E=de(),S=re(E);{var j=k=>{var I=ol();D(k,I)};Z(S,k=>{n(i)&&k(j)},!0)}D(T,E)};Z(p,T=>{n(a)?T(_):T(w,!1)},!0)}D(b,h)};Z(f,b=>{n(r)?b(c):b(g,!1)})}l(s);var u=x(s,2),y=d(u,!0);l(u);var v=x(u,2);{var m=b=>{var h=il(),p=re(h);p.__click=w=>t.handleTaskMoveUp(w,t.index);var _=x(p,2);_.__click=w=>t.handleTaskMoveDown(w,t.index),D(b,h)};Z(v,b=>{t.reorderEnabled&&b(m)})}l(o),K(()=>{ne(s,1,`w-6 h-6 cursor-pointer rounded-full border-2 flex me-2 items-center justify-center text-xs transition-colors flex-shrink-0 ${n(r)?"bg-success border-success text-success-content":n(i)?"border-warning":n(a)?"bg-error border-error text-error-content":"border-base-content/30 hover:border-success"}`),s.disabled=n(a),W(y,t.task.name)}),D(e,o),xe()}pe(["click"]);var cl=B('<div class="flex flex-col h-full w-full"><div class="flex flex-col border-b border-base-content/10 bg-base-100"><div class="flex flex-col w-full items-start px-2"><div class="flex flex-row w-full justify-between h-12 items-center "><button class="gap-2 text-sm text-secondary flex items-center justify-center rounded-lg hover:bg-base-100 text-base-content/70"><span>â†</span> <span>Back</span></button> <div class="badge badge-sm badge-secondary rounded"> </div></div> <div class="flex items-center gap-2"><svg class="size-10 inline shrink-0 text-base-content/40 align-text-bottom -mb-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <h2 class="text-base "> </h2></div> <div class="flex gap-1 overflow-x-auto my-2"><button class="text-base-content/50 bg-base-300 hover:bg-primary/50 hover:text-primary-content px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap">+ New</button> <button>Reorder</button> <button class="px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap text-base-content/50 bg-base-300 hover:text-base-content hover:bg-primary/50">Complete project</button></div></div></div> <div class="flex-1 overflow-auto bg-base-200  min-h-0 pb-5 pt-2.5"><div class="flex flex-col px-2 py-0"></div></div></div> <!>',1);function dl(e,t){_e(t,!0);let r,a=Q(()=>Ze.getById(t.selectedProject.id)?.status),i=Q(()=>ut.getByProject(t.selectedProject.id)),o=J(!1),s=()=>O(o,!n(o));async function f(G){await Oa(t.selectedArea.id,t.selectedProject.index,{status:"completed"})}async function c(G,F){if(G.stopPropagation(),!t.selectedProject)return;const P=F.status==="completed"?"active":"completed";await Sa(t.selectedProject.id,F.index,{status:P})}async function g(G,F){if(G.stopPropagation(),F===0||!t.selectedProject)return;const P=n(i),U=ut.getByProject(t.selectedProject.id),H=P[F],X=P[F-1],R=U.findIndex(q=>q.id===X.id),M=R>0?U[R-1].index:null,V=X.index;await $r(t.selectedProject.id,H.index,M,V)}async function u(G,F){if(G.stopPropagation(),!t.selectedProject)return;const P=n(i);if(F===P.length-1)return;const U=ut.getByProject(t.selectedProject.id),H=P[F],X=P[F+1],R=U.findIndex(q=>q.id===X.id),M=X.index,V=R<U.length-1?U[R+1].index:null;await $r(t.selectedProject.id,H.index,M,V)}var y=cl(),v=re(y),m=d(v),b=d(m),h=d(b),p=d(h);p.__click=function(...G){t.navigateBack?.apply(this,G)};var _=x(p,2),w=d(_,!0);l(_),l(h);var T=x(h,2),E=x(d(T),2),S=d(E,!0);l(E),l(T);var j=x(T,2),k=d(j);k.__click=function(...G){r.openCreateTaskModal?.apply(this,G)};var I=x(k,2);I.__click=s;var A=x(I,2);A.__click=f,l(j),l(b),l(m);var C=x(m,2),L=d(C);Ae(L,21,()=>n(i),Pe,(G,F,P)=>{ll(G,{get handleEdit(){return r.openEditTaskModal},handleTaskMoveUp:g,handleTaskMoveDown:u,index:P,get task(){return n(F)},toggleTaskComplete:c,get reorderEnabled(){return n(o)}})}),l(L),l(C),l(v);var z=x(v,2);Pt(rl(z,{get selectedArea(){return t.selectedArea},get selectedProject(){return t.selectedProject}}),G=>r=G,()=>r),K(()=>{W(w,n(a)),W(S,t.selectedProject.name),ne(I,1,`px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap ${n(o)?"bg-primary/40 text-primary-content":"text-base-content/50 bg-base-300 hover:text-base-content hover:bg-primary/50"}`)}),D(e,y),xe()}pe(["click"]);var ul=B('<div class="flex items-center justify-center h-full text-base-content/50"><p>Review - Coming soon</p></div>'),vl=B('<div class="h-screen flex flex-col bg-base-300"><div class="pb-22 h-full"><!></div> <!></div>');function xl(e,t){_e(t,!0);const r=()=>s("areas"),a=()=>s("projects");let i=J(void 0),o=J(void 0);s("areas");function s(h){Pn("",{activeTab:h})}function f(h){O(i,h,!0),s("projects")}function c(h){O(o,h,!0),O(i,dt.getById(h.areaId),!0),s("tasks")}var g=vl(),u=d(g),y=d(u);{var v=h=>{Ms(h,{onSelectArea:f})},m=h=>{var p=de(),_=re(p);{var w=E=>{Qs(E,{navigateBack:r,navigateToTasks:c,get selectedArea(){return n(i)}})},T=E=>{var S=de(),j=re(S);{var k=A=>{dl(A,{navigateBack:a,get selectedArea(){return n(i)},get selectedProject(){return n(o)}})},I=A=>{var C=de(),L=re(C);{var z=F=>{$i(F,{navigateToTasks:c})},G=F=>{var P=de(),U=re(P);{var H=R=>{ps(R,{})},X=R=>{var M=de(),V=re(M);{var q=$=>{var se=ul();D($,se)};Z(V,$=>{st.state.activeTab==="review"&&$(q)},!0)}D(R,M)};Z(U,R=>{st.state.activeTab==="today"?R(H):R(X,!1)},!0)}D(F,P)};Z(L,F=>{st.state.activeTab==="week"?F(z):F(G,!1)},!0)}D(A,C)};Z(j,A=>{st.state.activeTab=="tasks"?A(k):A(I,!1)},!0)}D(E,S)};Z(_,E=>{st.state.activeTab==="projects"?E(w):E(T,!1)},!0)}D(h,p)};Z(y,h=>{st.state.activeTab==="areas"?h(v):h(m,!1)})}l(u);var b=x(u,2);go(b,{get activeTab(){return st.state.activeTab},onTabChange:s}),l(g),D(e,g),xe()}export{xl as component};
