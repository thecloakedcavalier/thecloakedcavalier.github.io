import{d as te,f as R,a as P,s as L,c as $,b as et}from"../chunks/C0mSsNzB.js";import{y as ze,E as Lt,K as Ve,A as ne,ao as zt,F as Vt,g as e,T as Ft,H as Ut,I as Ht,J as xt,L as Fe,B as Ie,aa as Gt,aC as qt,ah as pt,o as ke,aE as de,z as Qe,D as Jt,a8 as _t,a4 as Kt,aA as tt,aF as Yt,aG as Qt,aH as Xt,aI as Zt,v as Mt,x as St,aJ as Ue,aw as $t,az as ea,w as ta,aK as Ct,q as De,aL as aa,aM as ra,aN as na,aO as sa,aP as oa,aQ as la,aR as It,a5 as ia,u as ca,r as Et,aS as da,aT as va,aU as ua,p as ae,l as re,n,m as o,s as b,t as G,k as X,O as Q,N as C,a6 as Y,b as Be,U as Ne}from"../chunks/BqVyvuT7.js";import{i as F}from"../chunks/Dgz-J3ua.js";import{a as ba}from"../chunks/CRTkVsMi.js";import{p as ge}from"../chunks/Dg8kHgcV.js";import{a1 as Ee,a2 as fa,a3 as ga,a4 as xa,a5 as Dt,a6 as Nt,a7 as pe,a8 as Te,a9 as pa,aa as xe,ab as ve,ac as Pe,ad as _a,ae as ma,af as ka,ag as ha,ah as ya,ai as wa,aj as ja,ak as Aa,al as mt,am as Ta,an as Pa,ao as Ma,ap as Sa,aq as kt,ar as Bt,as as Ca,at as ht}from"../chunks/BgQkHluL.js";import{b as Ae}from"../chunks/BYS0SYey.js";function oe(a,t){return t}function Ia(a,t,s){for(var r=[],l=t.length,c,i=t.length,m=0;m<l;m++){let j=t[m];St(j,()=>{if(c){if(c.pending.delete(j),c.done.add(j),c.pending.size===0){var h=a.outrogroups;Xe(tt(c.done)),h.delete(c),h.size===0&&(a.outrogroups=null)}}else i-=1},!1)}if(i===0){var u=r.length===0&&s!==null;if(u){var k=s,y=k.parentNode;ea(y),y.append(k),a.items.clear()}Xe(t,!u)}else c={pending:new Set(t),done:new Set},(a.outrogroups??=new Set).add(c)}function Xe(a,t=!0){for(var s=0;s<a.length;s++)ta(a[s],t)}var yt;function le(a,t,s,r,l,c=null){var i=a,m=new Map,u=(t&Ct)!==0;if(u){var k=a;i=ne?Ve(zt(k)):k.appendChild(ze())}ne&&Vt();var y=null,j=Ft(()=>{var _=s();return Yt(_)?_:_==null?[]:tt(_)}),h,T=!0;function p(){f.fallback=y,Ea(f,h,i,t,r),y!==null&&(h.length===0?(y.f&de)===0?Mt(y):(y.f^=de,we(y,null,i)):St(y,()=>{y=null}))}var x=Lt(()=>{h=e(j);var _=h.length;let A=!1;if(ne){var S=Ut(i)===Ht;S!==(_===0)&&(i=xt(),Ve(i),Fe(!1),A=!0)}for(var I=new Set,B=ke,z=Jt(),d=0;d<_;d+=1){ne&&Ie.nodeType===Gt&&Ie.data===qt&&(i=Ie,A=!0,Fe(!1));var g=h[d],v=r(g,d),w=T?null:m.get(v);w?(w.v&&pt(w.v,g),w.i&&pt(w.i,d),z&&B.skipped_effects.delete(w.e)):(w=Da(m,T?i:yt??=ze(),g,v,d,l,t,s),T||(w.e.f|=de),m.set(v,w)),I.add(v)}if(_===0&&c&&!y&&(T?y=Qe(()=>c(i)):(y=Qe(()=>c(yt??=ze())),y.f|=de)),ne&&_>0&&Ve(xt()),!T)if(z){for(const[E,N]of m)I.has(E)||B.skipped_effects.add(N.e);B.oncommit(p),B.ondiscard(()=>{})}else p();A&&Fe(!0),e(j)}),f={effect:x,items:m,outrogroups:null,fallback:y};T=!1,ne&&(i=Ie)}function Ea(a,t,s,r,l){var c=(r&aa)!==0,i=t.length,m=a.items,u=a.effect.first,k,y=null,j,h=[],T=[],p,x,f,_;if(c)for(_=0;_<i;_+=1)p=t[_],x=l(p,_),f=m.get(x).e,(f.f&de)===0&&(f.nodes?.a?.measure(),(j??=new Set).add(f));for(_=0;_<i;_+=1){if(p=t[_],x=l(p,_),f=m.get(x).e,a.outrogroups!==null)for(const w of a.outrogroups)w.pending.delete(f),w.done.delete(f);if((f.f&de)!==0)if(f.f^=de,f===u)we(f,null,s);else{var A=y?y.next:u;f===a.effect.last&&(a.effect.last=f.prev),f.prev&&(f.prev.next=f.next),f.next&&(f.next.prev=f.prev),fe(a,y,f),fe(a,f,A),we(f,A,s),y=f,h=[],T=[],u=y.next;continue}if((f.f&Ue)!==0&&(Mt(f),c&&(f.nodes?.a?.unfix(),(j??=new Set).delete(f))),f!==u){if(k!==void 0&&k.has(f)){if(h.length<T.length){var S=T[0],I;y=S.prev;var B=h[0],z=h[h.length-1];for(I=0;I<h.length;I+=1)we(h[I],S,s);for(I=0;I<T.length;I+=1)k.delete(T[I]);fe(a,B.prev,z.next),fe(a,y,B),fe(a,z,S),u=S,y=z,_-=1,h=[],T=[]}else k.delete(f),we(f,u,s),fe(a,f.prev,f.next),fe(a,f,y===null?a.effect.first:y.next),fe(a,y,f),y=f;continue}for(h=[],T=[];u!==null&&u!==f;)(k??=new Set).add(u),T.push(u),u=u.next;if(u===null)continue}(f.f&de)===0&&h.push(f),y=f,u=f.next}if(a.outrogroups!==null){for(const w of a.outrogroups)w.pending.size===0&&(Xe(tt(w.done)),a.outrogroups?.delete(w));a.outrogroups.size===0&&(a.outrogroups=null)}if(u!==null||k!==void 0){var d=[];if(k!==void 0)for(f of k)(f.f&Ue)===0&&d.push(f);for(;u!==null;)(u.f&Ue)===0&&u!==a.fallback&&d.push(u),u=u.next;var g=d.length;if(g>0){var v=(r&Ct)!==0&&i===0?s:null;if(c){for(_=0;_<g;_+=1)d[_].nodes?.a?.measure();for(_=0;_<g;_+=1)d[_].nodes?.a?.fix()}Ia(a,d,v)}}c&&De(()=>{if(j!==void 0)for(f of j)f.nodes?.a?.apply()})}function Da(a,t,s,r,l,c,i,m){var u=(i&Qt)!==0?(i&Xt)===0?Kt(s,!1,!1):_t(s):null,k=(i&Zt)!==0?_t(l):null;return{v:u,i:k,e:Qe(()=>(c(t,u??s,k??l,m),()=>{a.delete(r)}))}}function we(a,t,s){if(a.nodes)for(var r=a.nodes.start,l=a.nodes.end,c=t&&(t.f&de)===0?t.nodes.start:s;r!==null;){var i=$t(r);if(c.before(r),r===l)return;r=i}}function fe(a,t,s){t===null?a.effect.first=s:t.next=s,s===null?a.effect.last=t:s.prev=t}const wt=[...` 	
\r\f¬†\v\uFEFF`];function Na(a,t,s){var r=a==null?"":""+a;if(t&&(r=r?r+" "+t:t),s){for(var l in s)if(s[l])r=r?r+" "+l:l;else if(r.length)for(var c=l.length,i=0;(i=r.indexOf(l,i))>=0;){var m=i+c;(i===0||wt.includes(r[i-1]))&&(m===r.length||wt.includes(r[m]))?r=(i===0?"":r.substring(0,i))+r.substring(m+1):i=m}}return r===""?null:r}function jt(a,t=!1){var s=t?" !important;":";",r="";for(var l in a){var c=a[l];c!=null&&c!==""&&(r+=" "+l+": "+c+s)}return r}function He(a){return a[0]!=="-"||a[1]!=="-"?a.toLowerCase():a}function Ba(a,t){if(t){var s="",r,l;if(Array.isArray(t)?(r=t[0],l=t[1]):r=t,a){a=String(a).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var c=!1,i=0,m=!1,u=[];r&&u.push(...Object.keys(r).map(He)),l&&u.push(...Object.keys(l).map(He));var k=0,y=-1;const x=a.length;for(var j=0;j<x;j++){var h=a[j];if(m?h==="/"&&a[j-1]==="*"&&(m=!1):c?c===h&&(c=!1):h==="/"&&a[j+1]==="*"?m=!0:h==='"'||h==="'"?c=h:h==="("?i++:h===")"&&i--,!m&&c===!1&&i===0){if(h===":"&&y===-1)y=j;else if(h===";"||j===x-1){if(y!==-1){var T=He(a.substring(k,y).trim());if(!u.includes(T)){h!==";"&&j++;var p=a.substring(k,j).trim();s+=" "+p+";"}}k=j+1,y=-1}}}}return r&&(s+=jt(r)),l&&(s+=jt(l,!0)),s=s.trim(),s===""?null:s}return a==null?null:String(a)}function Z(a,t,s,r,l,c){var i=a.__className;if(ne||i!==s||i===void 0){var m=Na(s,r,c);(!ne||m!==a.getAttribute("class"))&&(m==null?a.removeAttribute("class"):a.className=m),a.__className=s}else if(c&&l!==c)for(var u in c){var k=!!c[u];(l==null||k!==!!l[u])&&a.classList.toggle(u,k)}return c}function Ge(a,t={},s,r){for(var l in s){var c=s[l];t[l]!==c&&(s[l]==null?a.style.removeProperty(l):a.style.setProperty(l,c,r))}}function Me(a,t,s,r){var l=a.__style;if(ne||l!==t){var c=Ba(t,r);(!ne||c!==a.getAttribute("style"))&&(c==null?a.removeAttribute("style"):a.style.cssText=c),a.__style=t}else r&&(Array.isArray(r)?(Ge(a,s?.[0],r[0]),Ge(a,s?.[1],r[1],"important")):Ge(a,s,r));return r}const Wa=Symbol("is custom element"),Ra=Symbol("is html");function je(a){if(ne){var t=!1,s=()=>{if(!t){if(t=!0,a.hasAttribute("value")){var r=a.value;Ze(a,"value",null),a.value=r}if(a.hasAttribute("checked")){var l=a.checked;Ze(a,"checked",null),a.checked=l}}};a.__on_r=s,De(s),ra()}}function Ze(a,t,s,r){var l=Oa(a);ne&&(l[t]=a.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&a.nodeName==="LINK")||l[t]!==(l[t]=s)&&(t==="loading"&&(a[na]=s),s==null?a.removeAttribute(t):typeof s!="string"&&La(a).includes(t)?a[t]=s:a.setAttribute(t,s))}function Oa(a){return a.__attributes??={[Wa]:a.nodeName.includes("-"),[Ra]:a.namespaceURI===sa}}var At=new Map;function La(a){var t=a.getAttribute("is")||a.nodeName,s=At.get(t);if(s)return s;At.set(t,s=[]);for(var r,l=a,c=Element.prototype;c!==l;){r=la(l);for(var i in r)r[i].set&&s.push(i);l=oa(l)}return s}function at(a,t,s=t){var r=new WeakSet;It(a,"input",async l=>{var c=l?a.defaultValue:a.value;if(c=Je(a)?Ke(c):c,s(c),ke!==null&&r.add(ke),await ia(),c!==(c=t())){var i=a.selectionStart,m=a.selectionEnd,u=a.value.length;if(a.value=c??"",m!==null){var k=a.value.length;i===m&&m===u&&k>u?(a.selectionStart=k,a.selectionEnd=k):(a.selectionStart=i,a.selectionEnd=Math.min(m,k))}}}),(ne&&a.defaultValue!==a.value||ca(t)==null&&a.value)&&(s(Je(a)?Ke(a.value):a.value),ke!==null&&r.add(ke)),Et(()=>{var l=t();if(a===document.activeElement){var c=da??ke;if(r.has(c))return}Je(a)&&l===Ke(a.value)||a.type==="date"&&!l&&!a.value||l!==a.value&&(a.value=l??"")})}const qe=new Set;function Tt(a,t,s,r,l=r){var c=s.getAttribute("type")==="checkbox",i=a;let m=!1;if(t!==null)for(var u of t)i=i[u]??=[];i.push(s),It(s,"change",()=>{var k=s.__value;c&&(k=Pt(i,k,s.checked)),l(k)},()=>l(c?[]:null)),Et(()=>{var k=r();if(ne&&s.defaultChecked!==s.checked){m=!0;return}c?(k=k||[],s.checked=k.includes(s.__value)):s.checked=va(s.__value,k)}),ua(()=>{var k=i.indexOf(s);k!==-1&&i.splice(k,1)}),qe.has(i)||(qe.add(i),De(()=>{i.sort((k,y)=>k.compareDocumentPosition(y)===4?-1:1),qe.delete(i)})),De(()=>{if(m){var k;if(c)k=Pt(i,k,s.checked);else{var y=i.find(j=>j.checked);k=y?.__value}l(k)}})}function Pt(a,t,s){for(var r=new Set,l=0;l<a.length;l+=1)a[l].checked&&r.add(a[l].__value);return s||r.delete(t),Array.from(r)}function Je(a){var t=a.type;return t==="number"||t==="range"}function Ke(a){return a===""?null:+a}const ye={regular:{sev1:"Core to who I am or want to become",sev2:"Significant progress toward a major goal",sev3:"Meaningful but not defining",sev4:"Nice to do, no real deadline",sev5:"Pure exploration or fun"},maintenance:{sev1:"Immediate risk if ignored (safety, legal, financial)",sev2:"Disrupts daily life if neglected",sev3:"Routine upkeep, flexible timing",sev4:"Minor improvement, no consequences",sev5:"Cosmetic or nice-to-have"}},za=["üíº","üè†","üí™","üìö","üí∞","‚ù§Ô∏è","üéØ","üöÄ","üé®","üéµ","‚úàÔ∏è","üçé","üßò","üë®‚Äçüë©‚Äçüëß‚Äçüë¶","ü§ù","üì±","üíª","üîß","üìù","üéì","üèÉ","üß†","üå±","‚≠ê","üî•","üí°","üéÆ","üì∏","üõí","üè¶","üöó","üèãÔ∏è"];te(["click","keydown"]);var Va=R('<button><span class="text-lg"> </span> <span class="text-[10px] font-medium truncate"> </span></button>'),Fa=R('<nav class="pb-6 fixed bottom-0 left-0 right-0 bg-base-200 border-t border-base-content/10 flex justify-around pt-2 px-1 safe-bottom"></nav>');function Ua(a,t){ae(t,!0);const s=[{id:"areas",icon:"üìÅ",label:"Areas"},{id:"week",icon:"üìÖ",label:"Week"},{id:"today",icon:"‚òÄÔ∏è",label:"Today"}];var r=Fa();le(r,21,()=>s,oe,(l,c)=>{var i=Va();let m;i.__click=()=>t.onTabChange(e(c).id);let u;var k=o(i),y=o(k,!0);n(k);var j=b(k,2),h=o(j,!0);n(j),n(i),G(()=>{m=Z(i,1,"flex flex-col items-center gap-1 px-3 py-1 rounded-lg transition-colors min-w-0 flex-1",null,m,{"text-primary":t.activeTab===e(c).id,"text-base-content":t.activeTab!==e(c).id}),u=Me(i,"",u,{opacity:t.activeTab===e(c).id?1:.4}),L(y,e(c).icon),L(h,e(c).label)}),P(l,i)}),n(r),P(a,r),re()}te(["click"]);var Ha=R('<button type="button"><span class="text-xs font-medium"> </span> <span class="text-lg"> </span></button>'),Ga=R('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><div><h2 class="text-lg font-semibold">Assign to Day</h2> <p class="text-xs text-base-content/50 truncate"> </p></div> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">‚úï</button></div> <div class="p-4 grid grid-cols-7 gap-1"></div> <div class="p-4 pt-0"><button type="button" class="w-full p-3 text-sm text-base-content/50 hover:text-base-content rounded-lg border border-base-content/10 hover:border-primary transition-colors">Remove from all days</button></div></div></div>');function qa(a,t){ae(t,!0);let s=Q(!1),r=Q(null);function l(h,T,p,x){h.stopPropagation(),C(r,{task:T,project:p,area:x},!0),C(s,!0)}function c(){C(s,!1),C(r,null)}function i(){return ga(t.currentWeekOf).map(h=>({date:h,dayName:Dt(h),isToday:xa(h)}))}async function m(h){if(!e(r))return;const{task:T,project:p,area:x}=e(r);c();const f=t.isTaskAssignedToDay(T.id);f===h?await Ee(T.id,p.id,t.currentWeekOf,h):(f&&await Ee(T.id,p.id,t.currentWeekOf,f),await fa(T.id,p.id,x.id,T.name,t.currentWeekOf,h,!1))}var u={openDayPicker:l},k=$(),y=X(k);{var j=h=>{var T=Ga(),p=o(T);p.__click=c,p.__keydown=g=>g.key==="Escape"&&c();var x=b(p,2),f=o(x),_=o(f),A=b(o(_),2),S=o(A,!0);n(A),n(_);var I=b(_,2);I.__click=c,n(f);var B=b(f,2);le(B,21,i,oe,(g,v)=>{const w=Y(()=>t.isTaskAssignedToDay(e(r).task.id)===e(v).date);var E=Ha();E.__click=()=>m(e(v).date);var N=o(E),O=o(N,!0);n(N);var D=b(N,2),M=o(D,!0);n(D),n(E),G(V=>{Z(E,1,`flex flex-col items-center p-2 rounded-lg border transition-colors ${e(w)?"bg-primary text-primary-content border-primary":e(v).isToday?"border-primary/50 hover:border-primary":"border-base-content/10 hover:border-primary"}`),L(O,e(v).dayName),L(M,V)},[()=>e(v).date.split("-")[2]]),P(g,E)}),n(B);var z=b(B,2),d=o(z);d.__click=()=>{const g=t.isTaskAssignedToDay(e(r).task.id);g&&Ee(e(r).task.id,e(r).project.id,t.currentWeekOf,g),c()},n(z),n(x),n(T),G(()=>L(S,e(r).task.name)),P(h,T)};F(y,h=>{e(s)&&e(r)&&h(j)})}return P(a,k),re(u)}te(["click","keydown"]);var Ja=R('<span class="text-center text-xs font-semibold bg-purple-500/20 text-purple-400 rounded w-full h-full  items-center justify-center flex">1</span>'),Ka=R('<span class="text-center text-xs font-semibold bg-red-500/20 text-red-400 rounded w-full h-full items-center justify-center flex">2</span>'),Ya=R('<span class="text-center text-xs font-semibold bg-yellow-500/20 text-yellow-400 rounded w-full h-full items-center justify-center flex">3</span>'),Qa=R('<span class="text-center text-xs font-semibold bg-blue-500/20 text-blue-500 rounded w-full h-full items-center justify-center flex">4</span>'),Xa=R('<span class="text-center text-xs font-semibold bg-emerald-500/20 text-emerald-300 rounded w-full h-full items-center justify-center flex">5</span>');function $e(a,t){var s=$(),r=X(s);{var l=i=>{var m=Ja();P(i,m)},c=i=>{var m=$(),u=X(m);{var k=j=>{var h=Ka();P(j,h)},y=j=>{var h=$(),T=X(h);{var p=f=>{var _=Ya();P(f,_)},x=f=>{var _=$(),A=X(_);{var S=B=>{var z=Qa();P(B,z)},I=B=>{var z=Xa();P(B,z)};F(A,B=>{t.level=="sev4"?B(S):B(I,!1)},!0)}P(f,_)};F(T,f=>{t.level=="sev3"?f(p):f(x,!1)},!0)}P(j,h)};F(u,j=>{t.level=="sev2"?j(k):j(y,!1)},!0)}P(i,m)};F(r,i=>{t.level=="sev1"?i(l):i(c,!1)})}P(a,s)}var Za=R('<div class="h-1 bg-base-300"><div class="h-full bg-base-content/20 transition-all"></div></div>'),$a=R('<div class="bg-base-100 rounded-lg overflow-hidden" tabindex="0" role="button"><!> <div class="flex items-start gap-2 p-2"><div class="size-8 mt-0.5"><!></div> <div class="flex-1 min-w-0"><p class="text-sm font-medium text-base-content mb-1"> </p> <p class="text-sm "><span> </span> <span class="text-xs mx-0.5">‚Ä¢</span> <span class="text-base-content/50"> </span></p></div> <button type="button" class="w-7 h-7 flex items-center justify-center rounded text-base-content/30 hover:text-error hover:bg-error/10 transition-colors" title="Remove from week">‚úï</button></div></div>'),er=R('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No projects assigned to this week</p> <p class="text-base-content/30 text-xs">Go to Areas and assign projects</p></div>'),tr=R('<div class="flex flex-col gap-2"><div class="flex justify-between items-center"><div class="text-xs tracking-wider text-base-content/50 uppercase">Assigned projects</div> <button> </button></div> <!></div>');function ar(a,t){ae(t,!0);let s=Q(localStorage.getItem("filterAssignedProject")=="true"),r=()=>C(s,!e(s));Be(()=>{localStorage.setItem("filterAssignedProject",e(s)+"")});async function l(j,h){j.stopPropagation(),await Nt(h,t.currentWeekOf)}function c(j){const h=pe.getByProject(j),T=h.filter(x=>x.status==="active").length,p=h.filter(x=>x.status==="completed").length;return{active:T,completed:p,total:T+p}}var i=tr(),m=o(i),u=b(o(m),2);u.__click=r;var k=o(u);n(u),n(m);var y=b(m,2);le(y,17,()=>t.assignedProjects,oe,(j,h)=>{let T=()=>e(h).project,p=()=>e(h).area;const x=Y(()=>c(T().id)),f=Y(()=>e(x).total>0?e(x).completed/e(x).total*100:0);var _=$(),A=X(_);{var S=I=>{var B=$a();B.__click=()=>t.navigateToTasks(T());var z=o(B);{var d=W=>{var U=Za(),K=o(U);n(U),G(()=>Me(K,`width: ${e(f)??""}%`)),P(W,U)};F(z,W=>{e(x).total>0&&W(d)})}var g=b(z,2),v=o(g),w=o(v);$e(w,{get level(){return T().severity}}),n(v);var E=b(v,2),N=o(E),O=o(N,!0);n(N);var D=b(N,2),M=o(D),V=o(M);n(M);var J=b(M,4),H=o(J,!0);n(J),n(D),n(E);var q=b(E,2);q.__click=W=>l(W,T().id),n(g),n(B),G(()=>{L(O,T().name),Z(M,1,`text-base-content/50 ${e(x).active==0?"text-error":""}`),L(V,`${e(x).active??""} available`),L(H,p().name)}),P(I,B)};F(A,I=>{(!["completed","cancelled"].includes(T().status)&&e(s)||!e(s))&&I(S)})}P(j,_)},j=>{var h=er();P(j,h)}),n(i),G(()=>{Z(u,1,`w-20 btn btn-xs btn-soft btn-secondary ${e(s)?"bg-secondary text-secondary-content":""}`),L(k,`Filter :${e(s)?"ON":"OFF"}`)}),P(a,i),re()}te(["click"]);var rr=R('<span class="text-xs text-primary-content px-2 py-1 bg-primary rounded"> </span>'),nr=R('<button class="text-start flex items-center gap-3 p-3 bg-base-100 border border-base-content/10 rounded-lg transition-all hover:border-primary"><div class="flex-1 min-w-0 "><p class="text-sm text-base-content truncate mb-1"> </p> <p class="text-xs text-base-content/50"> </p></div> <!></button>'),sr=R('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No tasks available</p> <p class="text-base-content/30 text-xs">Assigned projects have no active tasks</p></div>'),or=R('<div class="flex flex-col gap-2"></div>');function lr(a,t){ae(t,!0);var s=or();le(s,21,()=>t.weekTasks,oe,(r,l)=>{let c=()=>e(l).task,i=()=>e(l).project,m=()=>e(l).area;const u=Y(()=>t.isTaskAssignedToDay(c().id));var k=nr();k.__click=_=>t.openDayPicker(_,c(),i(),m());var y=o(k),j=o(y),h=o(j,!0);n(j);var T=b(j,2),p=o(T);n(T),n(y);var x=b(y,2);{var f=_=>{var A=rr(),S=o(A,!0);n(A),G(I=>L(S,I),[()=>Dt(e(u))]),P(_,A)};F(x,_=>{e(u)&&_(f)})}n(k),G(()=>{L(h,c().name),L(p,`${m().icon??""} ${i().name??""}`)}),P(r,k)},r=>{var l=sr();P(r,l)}),n(s),P(a,s),re()}te(["click"]);var ir=R('<div class="flex flex-col h-full"><div class="bg-base-100 border-b border-b-base-content/10"><div class="px-4 pt-4 pb-2 "><h2 class="text-lg font-medium">Week</h2> <p class="text-xs text-base-content/50"> </p></div> <div class="flex gap-1 px-4 pb-3"><button> </button> <button> </button></div></div> <div class="flex-1 overflow-y-auto px-2 py-4"><!></div></div> <!>',1);function cr(a,t){ae(t,!0);let s=Q(Ne(localStorage.getItem("weekTabView")||"projects"));Be(()=>{e(s)&&localStorage.setItem("weekTabView",e(s))});let r=Ne(Te());const l=Y(()=>Pe.getWeek(r));let c;function i(v){return e(l)?e(l).tasksByDay.find(E=>E.taskId===v)?.date??null:null}let m=Y(()=>e(l)?e(l).projectAssignments.map(v=>{const w=xe.getById(v.areaId);if(!w)return null;const N=ve.getByArea(w.id).find(O=>O.id===v.projectId);return N?{assignment:v,project:N,area:w}:null}).filter(v=>v!==null):[]),u=Y(()=>{const v=[];for(const{project:w,area:E}of e(m)){const N=pe.getByProject(w.id).filter(O=>O.status==="active");for(const O of N)v.push({task:O,project:w,area:E})}return v});var k=ir(),y=X(k),j=o(y),h=o(j),T=b(o(h),2),p=o(T,!0);n(T),n(h);var x=b(h,2),f=o(x);f.__click=()=>C(s,"projects");var _=o(f);n(f);var A=b(f,2);A.__click=()=>C(s,"tasks");var S=o(A);n(A),n(x),n(j);var I=b(j,2),B=o(I);{var z=v=>{ar(v,{get navigateToTasks(){return t.navigateToTasks},get currentWeekOf(){return r},get assignedProjects(){return e(m)}})},d=v=>{lr(v,{get openDayPicker(){return c.openDayPicker},get weekTasks(){return e(u)},isTaskAssignedToDay:i})};F(B,v=>{e(s)==="projects"?v(z):v(d,!1)})}n(I),n(y);var g=b(y,2);Ae(qa(g,{get currentWeekOf(){return r},isTaskAssignedToDay:i}),v=>c=v,()=>c),G(v=>{L(p,v),Z(f,1,`px-4 py-1.5 text-sm rounded-lg transition-colors ${e(s)==="projects"?"bg-primary/20 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),L(_,`Projects (${e(m).length??""})`),Z(A,1,`px-4 py-1.5 text-sm rounded-lg transition-colors ${e(s)==="tasks"?"bg-primary/20 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),L(S,`Tasks (${e(u).length??""})`)},[()=>pa(r)]),P(a,k),re()}te(["click"]);var dr=R('<div class="px-4 pb-3"><div class="flex items-center justify-between text-xs text-base-content/50 mb-1"><span> </span> <span> </span></div> <div class="h-2 bg-base-100 rounded-full overflow-hidden"><div class="h-full bg-success transition-all rounded-full"></div></div></div>'),vr=R('<div class="flex items-center gap-3 p-3 bg-base-100 border border-base-content/10 rounded-lg"><button type="button" aria-label="check" class="w-7 h-7 rounded-full border-2 border-base-content/30 flex items-center justify-center flex-shrink-0 hover:border-success hover:bg-success/10 transition-colors"></button> <div class="flex-1 min-w-0"><p class="text-sm text-base-content mb-2"> </p> <p class="text-xs text-base-content/50 truncate"> </p></div> <button type="button" class="w-7 h-7 flex items-center justify-center rounded text-base-content/30 hover:text-error hover:bg-error/10 transition-colors" title="Remove from today">‚úï</button></div>'),ur=R('<div class="flex flex-col gap-2 mb-4"></div>'),br=R('<div class="text-center py-12"><span class="text-4xl block mb-3">üìã</span> <p class="text-base-content/50 text-sm mb-2">No tasks for today</p> <p class="text-base-content/30 text-xs">Go to Week tab and assign tasks</p></div>'),fr=R('<div class="text-center mb-5 py-12 border-2 border-dashed border-success/30 rounded-lg bg-success/5"><span class="text-4xl block mb-3">üéâ</span> <p class="text-sm font-medium text-success">All done for today!</p> <p class="text-xs text-base-content/50 mt-1">Great work!</p></div>'),gr=R('<div class="flex items-center gap-3 p-3 opacity-50"><button type="button" class="w-7 h-7 rounded-full bg-success border-2 border-success flex items-center justify-center flex-shrink-0 text-success-content" title="Mark as incomplete"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg></button> <div class="flex-1 min-w-0"><p class="text-sm text-base-content line-through truncate"> </p> <p class="text-xs text-base-content/50"> </p></div></div>'),xr=R('<div><p class="text-xs font-medium uppercase tracking-wider text-base-content/40 mb-2"> </p> <div class="flex flex-col gap-1"></div></div>'),pr=R('<div class="flex flex-col h-full"><div class="px-4 pt-4 pb-2"><h2 class="text-lg font-medium">Today</h2> <p class="text-xs text-base-content/50"> </p></div> <!> <div class="flex-1 overflow-y-auto px-3 pb-4"><!> <!></div></div>');function _r(a,t){ae(t,!0);const s=_a(),r=Te();let l=Y(()=>{const d=Pe.getWeek(r);return d?d.tasksByDay.filter(g=>g.date===s).map(g=>{const v=pe.getById(g.taskId),w=xe.getById(g.areaId),N=(w?ve.getByArea(w.id):[]).find(O=>O.id===g.projectId);return{taskByDay:g,task:v,areaIcon:w?.icon??"üìÅ",areaName:w?.name??"Unknown",projectName:N?.name??"Unknown"}}):[]}),c=Y(()=>e(l).filter(d=>d.taskByDay.status!=="completed")),i=Y(()=>e(l).filter(d=>d.taskByDay.status==="completed"));function m(){const d=e(l),g=d.filter(E=>E.taskByDay.status==="completed").length,v=d.length,w=v>0?g/v*100:0;return{completed:g,total:v,percent:w}}async function u(d){await ka(d.taskId,d.projectId,r,s)}async function k(d){await ha(d.taskId,d.projectId,r,s)}async function y(d){await Ee(d.taskId,d.projectId,r,s)}var j=pr(),h=o(j),T=b(o(h),2),p=o(T);n(T),n(h);var x=b(h,2);{var f=d=>{const g=Y(m);var v=dr(),w=o(v),E=o(w),N=o(E);n(E);var O=b(E,2),D=o(O);n(O),n(w);var M=b(w,2),V=o(M);n(M),n(v),G(J=>{L(N,`${e(g).completed??""} of ${e(g).total??""} completed`),L(D,`${J??""}%`),Me(V,`width: ${e(g).percent??""}%`)},[()=>Math.round(e(g).percent)]),P(d,v)};F(x,d=>{m().total>0&&d(f)})}var _=b(x,2),A=o(_);{var S=d=>{var g=ur();le(g,21,()=>e(c),oe,(v,w)=>{let E=()=>e(w).taskByDay,N=()=>e(w).areaIcon,O=()=>e(w).projectName;var D=vr(),M=o(D);M.__click=()=>u(E());var V=b(M,2),J=o(V),H=o(J,!0);n(J);var q=b(J,2),W=o(q);n(q),n(V);var U=b(V,2);U.__click=()=>y(E()),n(D),G(()=>{L(H,E().name),L(W,`${N()??""}  ${O()??""}`)}),P(v,D)}),n(g),P(d,g)},I=d=>{var g=$(),v=X(g);{var w=N=>{var O=br();P(N,O)},E=N=>{var O=fr();P(N,O)};F(v,N=>{m().total===0?N(w):N(E,!1)},!0)}P(d,g)};F(A,d=>{e(c).length>0?d(S):d(I,!1)})}var B=b(A,2);{var z=d=>{var g=xr(),v=o(g),w=o(v);n(v);var E=b(v,2);le(E,21,()=>e(i),oe,(N,O)=>{let D=()=>e(O).taskByDay,M=()=>e(O).areaIcon,V=()=>e(O).areaName,J=()=>e(O).projectName;var H=gr(),q=o(H);q.__click=()=>k(D());var W=b(q,2),U=o(W),K=o(U,!0);n(U);var ee=b(U,2),ie=o(ee);n(ee),n(W),n(H),G(()=>{L(K,D().name),L(ie,`${M()??""} ${V()??""} ¬∑ ${J()??""}`)}),P(N,H)}),n(E),n(g),G(()=>L(w,`Completed (${e(i).length??""})`)),P(d,g)};F(B,d=>{e(i).length>0&&d(z)})}n(_),n(j),G(d=>L(p,`${d??""}, ${s??""}`),[()=>ma(s)]),P(a,j),re()}te(["click"]);const Ye=["none","reorder","edit","status"],mr=[{value:"active",label:"Active",color:"border-s-primary"},{value:"blocked",label:"Blocked",color:"border-s-warning"},{value:"someday",label:"Someday",color:"border-s-info"},{value:"completed",label:"Completed",color:"border-s-success"},{value:"cancelled",label:"Cancelled",color:"border-s-error"}],kr=[{value:"active",label:"Active"},{value:"blocked",label:"Blocked"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}];var hr=R('<button class="rounded-lg border border-dashed min-h-30 border-base-content/20 bg-transparent hover:bg-primary/20 transition-colors cursor-pointer w-full"><div class="card-body p-3 items-center justify-center text-center min-h-[88px]"><span class="text-xl text-base-content/50">+</span> <span class="text-xs text-base-content/50">Add Area</span></div></button>');function yr(a,t){var s=hr();s.__click=function(...r){t.handleClick?.apply(this,r)},P(a,s)}te(["click"]);var wr=R('<button type="button"> </button>'),jr=R('<button type="button" class="btn btn-outline btn-error btn-sm">Archive</button>'),Ar=R('<button type="button" class="btn btn-outline btn-primary btn-sm">Unarchive</button>'),Tr=R('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">‚úï</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Icon</label> <div class="grid grid-cols-8 gap-1"></div></div> <div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Health, Work, Learning"/></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><!> <div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function Pr(a,t){ae(t,!0);let s=Q(!1),r=Q(null),l=Q(""),c=Q("üéØ");function i(){C(r,null),C(l,""),C(c,"üéØ"),C(s,!0)}function m(_,A){_.stopPropagation(),C(r,A,!0),C(l,A.name,!0),C(c,A.icon,!0),C(s,!0)}function u(){C(s,!1),C(r,null)}async function k(){!e(l).trim()||!e(c)||(e(r)?await ya(e(r).index,{name:e(l).trim(),icon:e(c)}):await wa(e(l).trim(),e(c)),u())}function y(_){return e(r)&&e(r).status=="archived"?!1:ve.getByArea(_.id).filter(S=>S.status==="active").length===0}async function j(){!e(r)||!y(e(r))||(await ja(e(r).index),u())}async function h(){e(r)&&(await Aa(e(r).index),u())}var T={openCreateAreaModal:i,openEditAreaModal:m},p=$(),x=X(p);{var f=_=>{var A=Tr(),S=o(A);S.__click=u,S.__keydown=W=>W.key==="Escape"&&u();var I=b(S,2),B=o(I),z=o(B),d=o(z,!0);n(z);var g=b(z,2);g.__click=u,n(B);var v=b(B,2),w=o(v),E=b(o(w),2);le(E,21,()=>za,oe,(W,U)=>{var K=wr();K.__click=()=>C(c,e(U),!0);var ee=o(K,!0);n(K),G(()=>{Z(K,1,`aspect-square flex items-center justify-center text-lg rounded-lg transition-colors ${e(c)===e(U)?"bg-primary text-primary-content":"hover:bg-base-200"}`),L(ee,e(U))}),P(W,K)}),n(E),n(w);var N=b(w,2),O=b(o(N),2);je(O),O.__keydown=W=>W.key==="Enter"&&k(),n(N),n(v);var D=b(v,2),M=o(D);{var V=W=>{var U=$(),K=X(U);{var ee=ue=>{var se=jr();se.__click=j,G((_e,me)=>{se.disabled=_e,Ze(se,"title",me)},[()=>!y(e(r)),()=>y(e(r))?"Archive area":"Cannot archive: has active projects"]),P(ue,se)},ie=ue=>{var se=$(),_e=X(se);{var me=he=>{var be=Ar();be.__click=h,P(he,be)};F(_e,he=>{e(r).status=="archived"&&he(me)},!0)}P(ue,se)};F(K,ue=>{e(r).status=="active"?ue(ee):ue(ie,!1)})}P(W,U)};F(M,W=>{e(r)&&W(V)})}var J=b(M,4);J.__click=u;var H=b(J,2);H.__click=k;var q=o(H,!0);n(H),n(D),n(I),n(A),G(W=>{L(d,e(r)?"Edit Area":"New Area"),H.disabled=W,L(q,e(r)?"Save":"Create")},[()=>!e(l).trim()||!e(c)]),at(O,()=>e(l),W=>C(l,W)),P(_,A)};F(x,_=>{e(s)&&_(f)})}return P(a,p),re(T)}te(["click","keydown"]);var Mr=R('<button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center"><svg viewBox="0 0 24 24" class="size-6" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button>'),Sr=R('<div class="flex flex-row gap-1"><button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üê</button> <button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üí</button></div>'),Cr=R("<div> </div>"),Ir=R('<div tabindex="0" role="button"><div class="flex flex-col py-4 px-3 items-start text-left"><div class="w-full flex flex-row justify-between items-start"><span class="text-4xl mb-2"> </span> <!></div> <div class="flex flex-row justify-between items-end w-full"><div class="flex flex-col w-full"><div class="text-sm font-medium mb-0 pb-1 truncate"> </div> <p class="text-xs text-base-content/50"> </p></div></div></div></div>');function Er(a,t){ae(t,!0);const s=Y(()=>ve.getByArea(t.area.id).filter(A=>A.status==="active").length),r=Y(()=>{const A=Te(),S=Pe.getWeek(A),I=ve.getByArea(t.area.id),B=I.filter(v=>v.status==="active"||v.status==="blocked"||v.status==="someday");if(B.length===0)return{level:"clear",color:"badge-success",icon:"‚úì"};if(S?.projectAssignments.some(v=>B.some(w=>w.id===v.projectId))??!1)return{level:"planned",color:"text-purple-500",icon:"‚óÜ"};const d=I.filter(v=>v.status==="completed"&&v.completedAt),g=d.length>0?Math.max(...d.map(v=>new Date(v.completedAt).getTime())):null;if(g){const v=Date.now()-12096e5,w=Date.now()-720*60*60*1e3;if(g>=v)return{level:"active",color:"badge-info",icon:"‚óè"};if(g>=w)return{level:"fading",color:"badge-warning",icon:"‚óã"}}return{level:"avoiding",color:"badge-error",icon:"!"}});var l=Ir();l.__click=()=>t.handleSelect(t.area);var c=o(l),i=o(c),m=o(i),u=o(m,!0);n(m);var k=b(m,2);{var y=A=>{var S=Mr();S.__click=I=>t.handleEdit(I,t.area),P(A,S)},j=A=>{var S=$(),I=X(S);{var B=d=>{var g=Sr(),v=o(g);v.__click=E=>t.handleAreaMoveUp(E,t.index);var w=b(v,2);w.__click=E=>t.handleAreaMoveDown(E,t.index),n(g),G(()=>v.disabled=t.index==0),P(d,g)},z=d=>{var g=$(),v=X(g);{var w=E=>{var N=Cr(),O=o(N,!0);n(N),G(()=>{Z(N,1,`badge badge-sm rounded ${e(r).color??""} badge-soft`),L(O,e(r).level)}),P(E,N)};F(v,E=>{t.viewMode=="status"&&E(w)},!0)}P(d,g)};F(I,d=>{t.viewMode=="reorder"?d(B):d(z,!1)},!0)}P(A,S)};F(k,A=>{t.viewMode=="edit"?A(y):A(j,!1)})}n(i);var h=b(i,2),T=o(h),p=o(T),x=o(p,!0);n(p);var f=b(p,2),_=o(f);n(f),n(T),n(h),n(c),n(l),G(()=>{Z(l,1,`rounded-lg bg-base-100 hover:bg-primary/20 transition-colors cursor-pointer w-full ${e(r).level==="avoiding"?"border border-error/20":e(r).level==="fading"?"border border-warning/20":e(r).level==="active"?"border border-info/20":e(r).level==="planned"?"border border-purple-500/20":""}`),Me(l,e(r).level==="avoiding"?"background: rgba(248, 114, 114, 0.05); box-shadow: inset 0 0 20px rgba(248, 114, 114, 0.08); ":e(r).level==="fading"?"box-shadow: inset 0 0 30px rgba(251, 189, 35, 0.1);":e(r).level==="active"?"box-shadow: inset 0 0 30px rgba(58, 191, 248, 0.1);":e(r).level==="planned"?"box-shadow: inset 0 0 30px rgba(168, 85, 247, 0.1);":""),L(u,t.area.icon),L(x,t.area.name),L(_,`${e(s)??""} project${e(s)!==1?"s":""}`)}),P(a,l),re()}te(["click"]);var Dr=R('<button class="link text-base-content/50 text-sm capitalize"> </button>'),Nr=R('<div class="flex flex-col h-full"><div class="px-3 pt-5 pb-4 flex flex-row justify-between items-center bg-base-100 border-b border-base-content/10"><a href="/" class="flex flex-row items-center text-base-content/80"><svg version="1.1" id="Icons" class="size-12 mt-1 me-2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" xml:space="preserve" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><style type="text/css">.st0{fill:none;stroke:currentColor;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><path class="st0" d="M11,13H5c-1.1,0-2-0.9-2-2V5c0-1.1,0.9-2,2-2h6c1.1,0,2,0.9,2,2v6C13,12.1,12.1,13,11,13z"></path><path class="st0" d="M11,29H5c-1.1,0-2-0.9-2-2v-6c0-1.1,0.9-2,2-2h6c1.1,0,2,0.9,2,2v6C13,28.1,12.1,29,11,29z"></path><line class="st0" x1="17" y1="5" x2="29" y2="5"></line><line class="st0" x1="17" y1="9" x2="24" y2="9"></line><line class="st0" x1="17" y1="21" x2="29" y2="21"></line><line class="st0" x1="17" y1="25" x2="24" y2="25"></line><polyline class="st0" points="6,7 8,9 11,6 "></polyline></g></svg> <div class="flex flex-col"><div class="text-xl text-base-content/80 tracking-wider font-medium">Doable</div> <div class="text-sm text-base-content/50">Life areas at a glance</div></div></a> <div class="flex flex-row gap-4"><!> <button class="link text-base-content/50 text-sm"> </button></div></div> <div class="flex-1 min-h-0 overflow-auto"><div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 p-3"><!> <!></div></div> <!></div>');function Br(a,t){ae(t,!0);let s,r=Q(Ne(localStorage.getItem("areasViewMode")||"none"));Be(()=>localStorage.setItem("areasViewMode",e(r)));let l=Q(!1),c=()=>C(r,Ye[(Ye.indexOf(e(r))+1)%Ye.length],!0),i=()=>C(l,!e(l));const m=Y(()=>e(l)?xe.areas.filter(d=>d.status=="archived"):xe.areas.filter(d=>d.status=="active"));async function u(d,g){if(d.stopPropagation(),g===0)return;const v=xe.areas,w=e(m)[g],E=e(m)[g-1],N=v.findIndex(M=>M.id===E.id),O=N>0?v[N-1].index:null,D=E.index;await mt(w.index,O,D)}async function k(d,g){if(d.stopPropagation(),g===e(m).length-1)return;const v=xe.areas,w=e(m)[g],E=e(m)[g+1],N=v.findIndex(M=>M.id===E.id),O=E.index,D=N<v.length-1?v[N+1].index:null;await mt(w.index,O,D)}var y=Nr(),j=o(y),h=b(o(j),2),T=o(h);{var p=d=>{var g=Dr();g.__click=c;var v=o(g,!0);n(g),G(()=>L(v,e(r))),P(d,g)};F(T,d=>{e(l)||d(p)})}var x=b(T,2);x.__click=i;var f=o(x,!0);n(x),n(h),n(j);var _=b(j,2),A=o(_),S=o(A);le(S,17,()=>e(m),oe,(d,g,v)=>{Er(d,{get area(){return e(g)},get handleSelect(){return t.onSelectArea},index:v,handleAreaMoveUp:u,handleAreaMoveDown:k,get viewMode(){return e(r)},get handleEdit(){return s.openEditAreaModal}})});var I=b(S,2);{var B=d=>{yr(d,{get handleClick(){return s.openCreateAreaModal}})};F(I,d=>{e(l)||d(B)})}n(A),n(_);var z=b(_,2);Ae(Pr(z,{}),d=>s=d,()=>s),n(y),G(()=>L(f,e(l)?"Active":"Archived")),P(a,y),re()}te(["click"]);var Wr=R('<button aria-label="edit"> </button>'),Rr=R('<div tabindex="0" role="button" class="flex flex-row gap-2 items-start text-left"><p class="px-2 flex flex-row gap-2 text-sm mb-1.5 w-full text-base-content"><span class="w-8 h-8 flex mt-0.5"><!></span> <span class="flex-1"> </span> <!></p></div>'),Or=R('<div class="h-full bg-primary/80 transition-all"></div>'),Lr=R('<span class="text-xs mx-0.5">‚Ä¢</span> ',1),zr=R('<button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üë</button> <button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üì</button>',1),Vr=R('<button aria-label="edit"> </button>'),Fr=R('<div class="w-full transition-colors bg-base-100 cursor-pointer hover:bg-primary/20" role="button" tabindex="0"><div class="flex-1 min-w-0 p-2 pt-4"><div class="flex flex-row items-start gap-2 "><div class="shrink-0 size-8"><!></div> <p class="text-sm mb-1.5 text-base-content"> </p></div> <div class="mb-2 mt-3 w-full items-center flex h-1 bg-neutral"><!></div> <div class="flex flex-row justify-between items-center ms-2"><p class="text-xs font-semibold text-base-content/50 "> <!></p> <div class="flex flex-row gap-2 items-center mt-1"><!> <button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center"><svg viewBox="0 0 24 24" class="size-5" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button> <!></div></div></div></div>'),Ur=R("<div><!></div>");function Hr(a,t){ae(t,!0);const s=Y(()=>pe.getByProject(t.project.id)),r=Y(()=>e(s).filter(p=>p.status==="active").length),l=Y(()=>e(s).filter(p=>p.status==="completed").length),c=Y(()=>e(s).filter(p=>p.status==="active"||p.status==="completed").length),i=Y(()=>e(c)>0?e(l)/e(c)*100:0);function m(p){for(const[x,f]of Object.entries(Pe.weeksByWeekOf))if(f.projectAssignments.some(_=>_.projectId===p))return x;return null}function u(p){const x=Te();if(p===x)return"This week";const f=new Date(x),_=new Date(p),A=Math.round((_.getTime()-f.getTime())/(1e3*60*60*24)),S=Math.round(A/7);return S===1?"Next week":S>1?`In ${S} weeks`:S===-1?"Last week":p.slice(5)}const k=Y(()=>m(t.project.id));var y=Ur(),j=o(y);{var h=p=>{var x=Rr();x.__click=()=>t.onclick(t.project);var f=o(x),_=o(f),A=o(_);$e(A,{get level(){return t.project.severity}}),n(_);var S=b(_,2),I=o(S,!0);n(S);var B=b(S,2);{var z=d=>{var g=Wr();g.__click=w=>t.handleProjectAssign(w,t.project);var v=o(g,!0);n(g),G(w=>{Z(g,1,`badge badge-lg badge-soft ${e(k)?"badge-accent":"badge-ghost text-base-content/40"} text-xs p-1.5 w-20 cursor-pointer justify-center rounded-lg items-center flex`),L(v,w)},[()=>u(e(k))]),P(d,g)};F(B,d=>{e(k)&&d(z)})}n(f),n(x),G(()=>L(I,t.project.name)),P(p,x)},T=p=>{var x=Fr();x.__click=()=>t.navigateToTasks(t.project),x.__keydown=W=>W.key==="Enter"&&t.navigateToTasks(t.project);var f=o(x),_=o(f),A=o(_),S=o(A);$e(S,{get level(){return t.project.severity}}),n(A);var I=b(A,2),B=o(I,!0);n(I),n(_);var z=b(_,2),d=o(z);{var g=W=>{var U=Or();G(()=>Me(U,`width: ${e(i)??""}%`)),P(W,U)};F(d,W=>{e(c)>0&&W(g)})}n(z);var v=b(z,2),w=o(v),E=o(w),N=b(E);{var O=W=>{var U=Lr(),K=b(X(U));G(()=>L(K,` ${e(l)??""} done`)),P(W,U)};F(N,W=>{e(l)>0&&W(O)})}n(w);var D=b(w,2),M=o(D);{var V=W=>{var U=zr(),K=X(U);K.__click=ie=>t.handleProjectMoveUp(ie,t.index);var ee=b(K,2);ee.__click=ie=>t.handleProjectMoveDown(ie,t.index),P(W,U)};F(M,W=>{t.allowReorder&&W(V)})}var J=b(M,2);J.__click=W=>t.handleEdit(W,t.project);var H=b(J,2);{var q=W=>{var U=Vr();U.__click=ee=>t.handleProjectAssign(ee,t.project);var K=o(U,!0);n(U),G(ee=>{Z(U,1,`badge badge-lg badge-soft ${e(k)?"badge-accent":"badge-ghost text-base-content/40"} text-xs p-1.5 w-20 cursor-pointer flex justify-center rounded-lg items-center`),L(K,ee)},[()=>e(k)?u(e(k)):"Unassigned"]),P(W,U)};F(H,W=>{t.allowWeekAssignment&&W(q)})}n(D),n(v),n(f),n(x),G(()=>{L(B,t.project.name),L(E,`${e(r)??""} active `)}),P(p,x)};F(j,p=>{t.isSelected?p(T,!1):p(h)})}n(y),P(a,y),re()}te(["click","keydown"]);var Gr=R('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 h-[650px] max-h-full bg-base-100 rounded-t-2xl "><div class="flex flex-col h-full"><div class="flex justify-between bg-base-200 items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">‚úï</button></div> <div class="flex-1 overflow-auto min-h-0 p-4 space-y-4 "><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Learn Spanish, Build Website"/></div> <div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Type</label> <div class="join w-full"><input type="radio" name="type" class="join-item btn btn-sm flex-1" aria-label="Regular"/> <input type="radio" name="type" class="join-item btn btn-sm flex-1" aria-label="Maintenance"/></div></div> <span class="text-xs text-base-content/50 mb-2 block">Severity</span> <div class="flex flex-col gap-1"><button type="button"><span class="font-bold w-4">1</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">2</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">3</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">4</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">5</span> <span class="font-normal text-left flex-1"> </span></button></div> <span class="text-xs text-base-content/50 mb-2 block">Status</span> <div class="grid grid-cols-3 gap-1"><button type="button">Active</button> <button type="button">Blocked</button> <button type="button">Someday</button> <button type="button">Cancelled</button> <button type="button">Done</button></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div></div>');function qr(a,t){ae(t,!0);const s=[];let r=Q(!1),l=Q(null),c=Q(""),i=Q("active"),m=Q("regular"),u=Q("sev3");function k(){console.log("Creating.."),C(l,null),C(c,""),C(i,"active"),C(m,"regular"),C(u,"sev3"),C(r,!0)}function y(_,A){_.stopPropagation(),C(l,A,!0),C(c,A.name,!0),C(i,A.status,!0),C(m,A.type||"regular",!0),C(u,A.severity||"sev1",!0),C(r,!0)}function j(){C(r,!1),C(l,null)}async function h(){!e(c).trim()||!t.selectedArea||(e(l)?await Ta(t.selectedArea.id,e(l).index,{name:e(c).trim(),status:e(i),type:e(m),severity:e(u)}):await Pa(t.selectedArea.id,e(c).trim(),e(m),e(u)),j())}var T={openCreateProjectModal:k,openEditProjectModal:y},p=$(),x=X(p);{var f=_=>{var A=Gr(),S=o(A);S.__click=j,S.__keydown=ce=>ce.key==="Escape"&&j();var I=b(S,2),B=o(I),z=o(B),d=o(z),g=o(d,!0);n(d);var v=b(d,2);v.__click=j,n(z);var w=b(z,2),E=o(w),N=b(o(E),2);je(N),N.__keydown=ce=>ce.key==="Enter"&&h(),n(E);var O=b(E,2),D=b(o(O),2),M=o(D);je(M),M.value=M.__value="regular";var V=b(M,2);je(V),V.value=V.__value="maintenance",n(D),n(O);var J=b(O,4),H=o(J);let q;H.__click=()=>C(u,"sev1");var W=b(o(H),2),U=o(W,!0);n(W),n(H);var K=b(H,2);let ee;K.__click=()=>C(u,"sev2");var ie=b(o(K),2),ue=o(ie,!0);n(ie),n(K);var se=b(K,2);let _e;se.__click=()=>C(u,"sev3");var me=b(o(se),2),he=o(me,!0);n(me),n(se);var be=b(se,2);let rt;be.__click=()=>C(u,"sev4");var nt=b(o(be),2),Wt=o(nt,!0);n(nt),n(be);var Se=b(be,2);let st;Se.__click=()=>C(u,"sev5");var ot=b(o(Se),2),Rt=o(ot,!0);n(ot),n(Se),n(J);var lt=b(J,4),We=o(lt);let it;We.__click=()=>C(i,"active");var Re=b(We,2);let ct;Re.__click=()=>C(i,"blocked");var Oe=b(Re,2);let dt;Oe.__click=()=>C(i,"someday");var Le=b(Oe,2);let vt;Le.__click=()=>C(i,"cancelled");var ut=b(Le,2);let bt;ut.__click=()=>C(i,"completed"),n(lt),n(w);var ft=b(w,2),gt=b(o(ft),2);gt.__click=j;var Ce=b(gt,2);Ce.__click=h;var Ot=o(Ce,!0);n(Ce),n(ft),n(B),n(I),n(A),G(ce=>{L(g,e(l)?"Edit Project":"New Project"),q=Z(H,1,"hover:bg-purple-600 btn btn-sm justify-start gap-2 transition-all",null,q,{"bg-purple-600":e(u)==="sev1","text-white":e(u)==="sev1"}),L(U,ye[e(m)].sev1),ee=Z(K,1,"hover:bg-red-500 btn btn-sm justify-start gap-2 transition-all",null,ee,{"bg-red-500":e(u)==="sev2","text-white":e(u)==="sev2"}),L(ue,ye[e(m)].sev2),_e=Z(se,1,"hover:bg-yellow-500 hover:text-black btn btn-sm justify-start gap-2 transition-all",null,_e,{"bg-yellow-500":e(u)==="sev3","text-black":e(u)==="sev3"}),L(he,ye[e(m)].sev3),rt=Z(be,1,"hover:bg-sky-500 hover:text-black btn btn-sm justify-start gap-2 transition-all",null,rt,{"bg-sky-500":e(u)==="sev4","text-black":e(u)==="sev4"}),L(Wt,ye[e(m)].sev4),st=Z(Se,1,"hover:bg-emerald-500 hover:text-black btn btn-sm justify-start gap-3 transition-all",null,st,{"bg-emerald-500":e(u)==="sev5","text-black":e(u)==="sev5"}),L(Rt,ye[e(m)].sev5),it=Z(We,1,"btn btn-sm hover:bg-warning hover:text-warning-content",null,it,{"btn-warning":e(i)==="active"}),ct=Z(Re,1,"btn btn-sm hover:btn-error",null,ct,{"btn-error":e(i)==="blocked"}),dt=Z(Oe,1,"btn btn-sm hover:btn-info",null,dt,{"btn-info":e(i)==="someday"}),vt=Z(Le,1,"btn btn-sm hover:btn-neutral",null,vt,{"btn-info":e(i)==="cancelled"}),bt=Z(ut,1,"btn btn-sm hover:btn-success",null,bt,{"btn-success":e(i)==="completed"}),Ce.disabled=ce,L(Ot,e(l)?"Save":"Create")},[()=>!e(c).trim()]),at(N,()=>e(c),ce=>C(c,ce)),Tt(s,[],M,()=>{"regular";return e(m)},ce=>C(m,ce)),Tt(s,[],V,()=>{"maintenance";return e(m)},ce=>C(m,ce)),P(_,A)};F(x,_=>{e(r)&&_(f)})}return P(a,p),re(T)}te(["click","keydown"]);var Jr=R('<button type="button"><div class="font-medium"> </div> <div class="text-xs opacity-70"> </div></button>'),Kr=R('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold">Assign to Week</h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">‚úï</button></div> <div class="p-4 space-y-2"></div></div></div>');function Yr(a,t){ae(t,!0);let s=Q(!1),r=Q(null),l=Q(void 0);function c(T,p,x){T.stopPropagation(),C(l,p,!0),C(r,x,!0),C(s,!0)}function i(){C(s,!1),C(r,null)}async function m(T,p){!e(r)||!e(l)||(p?await Nt(e(r).id,T):await Sa(e(r).id,e(l).id,T),i())}function u(T,p){const x=p??Te();return Pe.getWeek(x)?.projectAssignments.some(_=>_.projectId===T)??!1}var k={openWeekPicker:c},y=$(),j=X(y);{var h=T=>{var p=Kr(),x=o(p);x.__click=i,x.__keydown=I=>I.key==="Escape"&&i();var f=b(x,2),_=o(f),A=b(o(_),2);A.__click=i,n(_);var S=b(_,2);le(S,21,Ma,oe,(I,B)=>{const z=Y(()=>u(e(r).id,e(B).weekOf));var d=Jr();d.__click=()=>m(e(B).weekOf,e(z));var g=o(d),v=o(g,!0);n(g);var w=b(g,2),E=o(w,!0);n(w),n(d),G(()=>{Z(d,1,`w-full p-3 text-left rounded-lg border transition-colors ${e(z)?"bg-primary/20 text-primary-content border-primary":"border-base-content/10 hover:border-primary"}`),L(v,e(B).label),L(E,e(B).weekOf)}),P(I,d)}),n(S),n(f),n(p),P(T,p)};F(j,T=>{e(s)&&e(r)&&T(h)})}return P(a,y),re(k)}te(["click","keydown"]);var Qr=R("<button> </button>"),Xr=R('<div class="text-center py-8 text-base-content/50 text-sm"> </div>'),Zr=R('<button type="button" class="flex items-center h-16 gap-2 p-3 border-2 border-dashed border-base-content/20 rounded-lg text-base-content/50 cursor-pointer transition-all hover:border-primary hover:text-primary"><span class="text-lg">+</span> <span class="text-sm">Add Project</span></button>'),$r=R('<div class="flex flex-col h-full"><div class="flex flex-col border-b border-base-content/10 bg-base-100"><div class="flex flex-col items-start px-2 "><button class="gap-2 mx-3 mt-2 mb-1 text-sm text-secondary w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-100 text-base-content/70"><span>‚Üê</span> <span>Back</span></button> <div class="flex items-center gap-3 pe-2"><span class="text-4xl"> </span> <h2 class="text-lg "> </h2></div></div> <div class="flex gap-1 mt-4  px-3 pb-2 overflow-x-auto"></div></div> <div class="flex-1 overflow-auto min-h-0 pb-5 pt-2.5"><div class="flex flex-col gap-2.5 py-0"><!> <!></div></div></div> <!> <!>',1);function en(a,t){ae(t,!0);let s=Q(void 0);const r=D=>C(s,D.id,!0);let l,c,i=Q(Ne(localStorage.getItem("projectTabView")||"active"));Be(()=>{e(i)&&localStorage.setItem("projectTabView",e(i))});let m=Y(()=>!["completed","cancelled"].includes(e(i))),u=Y(()=>ve.getByArea(t.selectedArea.id).filter(D=>D.status===e(i)));function k(D){return ve.getByArea(t.selectedArea.id).filter(M=>M.status===D).length}async function y(D,M){if(D.stopPropagation(),M===0||!t.selectedArea)return;const V=ve.getByArea(t.selectedArea.id),J=e(u)[M],H=e(u)[M-1],q=V.findIndex(K=>K.id===H.id),W=q>0?V[q-1].index:null,U=H.index;await kt(t.selectedArea.id,J.index,W,U)}async function j(D,M){if(D.stopPropagation(),!t.selectedArea||M===e(u).length-1)return;const V=ve.getByArea(t.selectedArea.id),J=e(u)[M],H=e(u)[M+1],q=V.findIndex(K=>K.id===H.id),W=H.index,U=q<V.length-1?V[q+1].index:null;console.log(W,U),await kt(t.selectedArea.id,J.index,W,U)}var h=$r(),T=X(h),p=o(T),x=o(p),f=o(x);f.__click=function(...D){t.navigateBack?.apply(this,D)};var _=b(f,2),A=o(_),S=o(A,!0);n(A);var I=b(A,2),B=o(I,!0);n(I),n(_),n(x);var z=b(x,2);le(z,21,()=>mr,oe,(D,M)=>{const V=Y(()=>e(i)===e(M).value),J=Y(()=>k(e(M).value));var H=Qr();H.__click=()=>C(i,e(M).value,!0);var q=o(H);n(H),G(()=>{Z(H,1,`px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap ${e(V)?"bg-primary/40 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),L(q,`${e(M).label??""} (${e(J)??""})`)}),P(D,H)}),n(z),n(p);var d=b(p,2),g=o(d),v=o(g);le(v,17,()=>e(u),oe,(D,M,V)=>{{let J=Y(()=>e(s)==e(M).id);Hr(D,{get isSelected(){return e(J)},onclick:r,handleProjectAssign:(H,q)=>c.openWeekPicker(H,t.selectedArea,q),index:V,get allowReorder(){return e(m)},get navigateToTasks(){return t.navigateToTasks},get project(){return e(M)},get allowWeekAssignment(){return e(m)},get handleEdit(){return l.openEditProjectModal},handleProjectMoveUp:y,handleProjectMoveDown:j})}},D=>{var M=Xr(),V=o(M);n(M),G(()=>L(V,`No ${e(i)??""} projects`)),P(D,M)});var w=b(v,2);{var E=D=>{var M=Zr();M.__click=function(...V){l.openCreateProjectModal?.apply(this,V)},P(D,M)};F(w,D=>{e(i)=="active"&&D(E)})}n(g),n(d),n(T);var N=b(T,2);Ae(qr(N,{get selectedArea(){return t.selectedArea}}),D=>l=D,()=>l);var O=b(N,2);Ae(Yr(O,{}),D=>c=D,()=>c),G(()=>{L(S,t.selectedArea.icon),L(B,t.selectedArea.name)}),P(a,h),re()}te(["click"]);var tn=R('<button type="button"> </button>'),an=R('<div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Status</label> <div class="flex flex-wrap gap-2"></div></div>'),rn=R('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">‚úï</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Read chapter 1, Write blog post"/></div> <!></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function nn(a,t){ae(t,!0);let s=Q(!1),r=Q(null),l=Q(""),c=Q("active");function i(){C(r,null),C(l,""),C(c,"active"),C(s,!0)}function m(p,x){p.stopPropagation(),C(r,x,!0),C(l,x.name,!0),C(c,x.status,!0),C(s,!0)}function u(){C(s,!1),C(r,null)}async function k(){!e(l).trim()||!t.selectedProject||!t.selectedArea||(e(r)?await Bt(t.selectedProject.id,e(r).index,{name:e(l).trim(),status:e(c)}):await Ca(t.selectedProject.id,t.selectedArea.id,e(l).trim()),u())}var y={openCreateTaskModal:i,openEditTaskModal:m},j=$(),h=X(j);{var T=p=>{var x=rn(),f=o(x);f.__click=u,f.__keydown=M=>M.key==="Escape"&&u();var _=b(f,2),A=o(_),S=o(A),I=o(S,!0);n(S);var B=b(S,2);B.__click=u,n(A);var z=b(A,2),d=o(z),g=b(o(d),2);je(g),g.__keydown=M=>M.key==="Enter"&&k(),n(d);var v=b(d,2);{var w=M=>{var V=an(),J=b(o(V),2);le(J,21,()=>kr,oe,(H,q)=>{var W=tn();W.__click=()=>C(c,e(q).value,!0);var U=o(W,!0);n(W),G(()=>{Z(W,1,`px-3 py-1.5 text-sm rounded-lg border transition-colors ${e(c)===e(q).value?"bg-primary text-primary-content border-primary":"border-base-content/20 hover:border-primary"}`),L(U,e(q).label)}),P(H,W)}),n(J),n(V),P(M,V)};F(v,M=>{e(r)&&M(w)})}n(z);var E=b(z,2),N=b(o(E),2);N.__click=u;var O=b(N,2);O.__click=k;var D=o(O,!0);n(O),n(E),n(_),n(x),G(M=>{L(I,e(r)?"Edit Task":"New Task"),O.disabled=M,L(D,e(r)?"Save":"Create")},[()=>!e(l).trim()]),at(g,()=>e(l),M=>C(l,M)),P(p,x)};F(h,p=>{e(s)&&p(T)})}return P(a,j),re(y)}te(["click","keydown"]);var sn=et('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>'),on=et('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"></path></svg>'),ln=et('<svg class="w-3 h-3 text-warning" fill="currentColor" viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16" rx="1"></rect><rect x="14" y="4" width="4" height="16" rx="1"></rect></svg>'),cn=R('<button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üë</button> <button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üì</button>',1),dn=R('<div tabindex="0" role="button" class="hover:bg-primary/20 cursor-pointer w-full flex flex-row items-start border-b border-b-base-content/10 p-2"><button type="button"><!></button> <div class="text-sm text-base-content/80 flex-1 "> </div> <!></div>');function vn(a,t){ae(t,!0);const s=Y(()=>t.task.status==="completed"),r=Y(()=>t.task.status==="cancelled"),l=Y(()=>t.task.status==="blocked");var c=dn();c.__click=p=>t.handleEdit(p,t.task);var i=o(c);i.__click=p=>t.toggleTaskComplete(p,t.task);var m=o(i);{var u=p=>{var x=sn();P(p,x)},k=p=>{var x=$(),f=X(x);{var _=S=>{var I=on();P(S,I)},A=S=>{var I=$(),B=X(I);{var z=d=>{var g=ln();P(d,g)};F(B,d=>{e(l)&&d(z)},!0)}P(S,I)};F(f,S=>{e(r)?S(_):S(A,!1)},!0)}P(p,x)};F(m,p=>{e(s)?p(u):p(k,!1)})}n(i);var y=b(i,2),j=o(y,!0);n(y);var h=b(y,2);{var T=p=>{var x=cn(),f=X(x);f.__click=A=>t.handleTaskMoveUp(A,t.index);var _=b(f,2);_.__click=A=>t.handleTaskMoveDown(A,t.index),P(p,x)};F(h,p=>{t.reorderEnabled&&p(T)})}n(c),G(()=>{Z(i,1,`w-6 h-6 cursor-pointer rounded-full border-2 flex me-2 items-center justify-center text-xs transition-colors flex-shrink-0 ${e(s)?"bg-success border-success text-success-content":e(l)?"border-warning":e(r)?"bg-error border-error text-error-content":"border-base-content/30 hover:border-success"}`),i.disabled=e(r),L(j,t.task.name)}),P(a,c),re()}te(["click"]);var un=R('<div class="flex flex-col h-full"><div class="flex flex-col border-b border-base-content/10 bg-base-100"><div class="flex flex-col items-start px-2 "><button class="gap-2 mx-3 mt-2 mb-0 text-sm text-secondary w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-100 text-base-content/70"><span>‚Üê</span> <span>Back</span></button> <div class="flex items-center gap-2"><svg class="size-10 inline shrink-0 text-base-content/40 align-text-bottom -mb-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <h2 class="text-base "> </h2></div> <div class="flex gap-1 overflow-x-auto my-2"><button class="text-base-content/50 bg-base-300 hover:bg-primary/50 hover:text-primary-content px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap">+ New</button> <button>Reorder</button></div></div></div> <div class="flex-1 overflow-auto bg-base-200  min-h-0 pb-5 pt-2.5"><div class="flex flex-col px-2 py-0"></div></div></div> <!>',1);function bn(a,t){ae(t,!0);let s,r=Y(()=>pe.getByProject(t.selectedProject.id)),l=Q(!1),c=()=>C(l,!e(l));async function i(d,g){if(d.stopPropagation(),!t.selectedProject)return;const v=g.status==="completed"?"active":"completed";await Bt(t.selectedProject.id,g.index,{status:v})}async function m(d,g){if(d.stopPropagation(),g===0||!t.selectedProject)return;const v=e(r),w=pe.getByProject(t.selectedProject.id),E=v[g],N=v[g-1],O=w.findIndex(V=>V.id===N.id),D=O>0?w[O-1].index:null,M=N.index;await ht(t.selectedProject.id,E.index,D,M)}async function u(d,g){if(d.stopPropagation(),!t.selectedProject)return;const v=e(r);if(g===v.length-1)return;const w=pe.getByProject(t.selectedProject.id),E=v[g],N=v[g+1],O=w.findIndex(V=>V.id===N.id),D=N.index,M=O<w.length-1?w[O+1].index:null;await ht(t.selectedProject.id,E.index,D,M)}var k=un(),y=X(k),j=o(y),h=o(j),T=o(h);T.__click=function(...d){t.navigateBack?.apply(this,d)};var p=b(T,2),x=b(o(p),2),f=o(x,!0);n(x),n(p);var _=b(p,2),A=o(_);A.__click=function(...d){s.openCreateTaskModal?.apply(this,d)};var S=b(A,2);S.__click=c,n(_),n(h),n(j);var I=b(j,2),B=o(I);le(B,21,()=>e(r),oe,(d,g,v)=>{vn(d,{get handleEdit(){return s.openEditTaskModal},handleTaskMoveUp:m,handleTaskMoveDown:u,index:v,get task(){return e(g)},toggleTaskComplete:i,get reorderEnabled(){return e(l)}})}),n(B),n(I),n(y);var z=b(y,2);Ae(nn(z,{get selectedArea(){return t.selectedArea},get selectedProject(){return t.selectedProject}}),d=>s=d,()=>s),G(()=>{L(f,t.selectedProject.name),Z(S,1,`px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap ${e(l)?"bg-primary/40 text-primary-content":"text-base-content/50 bg-base-300 hover:text-base-content hover:bg-primary/50"}`)}),P(a,k),re()}te(["click"]);var fn=R('<div class="flex items-center justify-center h-full text-base-content/50"><p>Review - Coming soon</p></div>'),gn=R('<div class="h-screen flex flex-col bg-base-300"><div class="pb-22 h-full"><!></div> <!></div>');function wn(a,t){ae(t,!0);const s=()=>i("areas"),r=()=>i("projects");let l=Q(void 0),c=Q(void 0);i("areas");function i(x){ba("",{activeTab:x})}function m(x){C(l,x,!0),i("projects")}function u(x){C(c,x,!0),C(l,xe.getById(x.areaId),!0),i("tasks")}var k=gn(),y=o(k),j=o(y);{var h=x=>{Br(x,{onSelectArea:m})},T=x=>{var f=$(),_=X(f);{var A=I=>{en(I,{navigateBack:s,navigateToTasks:u,get selectedArea(){return e(l)}})},S=I=>{var B=$(),z=X(B);{var d=v=>{bn(v,{navigateBack:r,get selectedArea(){return e(l)},get selectedProject(){return e(c)}})},g=v=>{var w=$(),E=X(w);{var N=D=>{cr(D,{navigateToTasks:u})},O=D=>{var M=$(),V=X(M);{var J=q=>{_r(q,{})},H=q=>{var W=$(),U=X(W);{var K=ee=>{var ie=fn();P(ee,ie)};F(U,ee=>{ge.state.activeTab==="review"&&ee(K)},!0)}P(q,W)};F(V,q=>{ge.state.activeTab==="today"?q(J):q(H,!1)},!0)}P(D,M)};F(E,D=>{ge.state.activeTab==="week"?D(N):D(O,!1)},!0)}P(v,w)};F(z,v=>{ge.state.activeTab=="tasks"?v(d):v(g,!1)},!0)}P(I,B)};F(_,I=>{ge.state.activeTab==="projects"?I(A):I(S,!1)},!0)}P(x,f)};F(j,x=>{ge.state.activeTab==="areas"?x(h):x(T,!1)})}n(y);var p=b(y,2);Ua(p,{get activeTab(){return ge.state.activeTab},onTabChange:i}),n(k),P(a,k),re()}export{wn as component};
