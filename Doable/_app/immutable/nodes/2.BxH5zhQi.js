import{b as Wn,d as De,f as R,a as O,s as F,c as be,e as xt,g as bt}from"../chunks/DTyBQaPN.js";import{M as Lr,U as Gn,_ as Fr,O as Ue,aq as Vn,V as Hn,g as a,w as Un,X as Zn,Y as Yn,Z as wa,$ as Br,Q as or,aa as qn,aE as Kn,ah as ka,H as St,aG as nt,N as Xr,T as Xn,a8 as Ta,a4 as Jn,aC as ca,aH as Qn,aI as $n,aJ as eo,aK as to,I as Ka,K as Xa,aL as zr,ay as ro,aB as ao,J as no,aM as Ja,q as br,aN as oo,A as Qa,aO as io,aP as Ht,W as so,aQ as lo,au as co,m as $a,b as ua,aR as uo,ap as en,n as va,e as vo,aS as fo,aT as tn,a5 as rn,aU as bo,aV as go,ao as po,p as ye,i as le,j as we,l,s as h,k as d,t as oe,a1 as ee,y as E,a6 as q,x as Ze,a as it,a0 as an,ai as ir}from"../chunks/CrC6LAkw.js";import{i as $}from"../chunks/D-eac2Jt.js";import{a as mo}from"../chunks/CRM5QQzR.js";import{p as mt}from"../chunks/CFt-lU2G.js";import{a3 as cr,a4 as ho,a5 as ur,a6 as _o,a7 as nn,a8 as on,a9 as sn,aa as xo,ab as ln,ac as yt,ad as yo,ae as Tt,af as wo,ag as vt,ah as ot,ai as wt,aj as Mt,ak as Ke,al as Jr,am as Qr,an as $r,s as ko,ao as To,ap as Do,aq as Ao,ar as Eo,as as Oo,at as Io,au as So,av as Co,aw as jo,ax as Da,ay as Mo,az as Po,aA as No,aB as Ro,aC as dn,aD as Lo,aE as Fo,aF as Bo,aG as Aa,aH as Ea,aI as cn,aJ as Oa}from"../chunks/BpJhlW76.js";import{b as Re,p as Ia}from"../chunks/BS8PO8HG.js";function We(e,t){return t}function zo(e,t,r){for(var n=[],o=t.length,i,s=t.length,b=0;b<o;b++){let w=t[b];Xa(w,()=>{if(i){if(i.pending.delete(w),i.done.add(w),i.pending.size===0){var p=e.outrogroups;ea(ca(i.done)),p.delete(i),p.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var v=n.length===0&&r!==null;if(v){var u=r,c=u.parentNode;ao(c),c.append(u),e.items.clear()}ea(t,!v)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function ea(e,t=!0){for(var r=0;r<e.length;r++)no(e[r],t)}var Sa;function Te(e,t,r,n,o,i=null){var s=e,b=new Map,v=(t&Ja)!==0;if(v){var u=e;s=Ue?Fr(Vn(u)):u.appendChild(Lr())}Ue&&Hn();var c=null,w=Un(()=>{var _=r();return Qn(_)?_:_==null?[]:ca(_)}),p,f=!0;function g(){m.fallback=c,Wo(m,p,s,t,n),c!==null&&(p.length===0?(c.f&nt)===0?Ka(c):(c.f^=nt,Yt(c,null,s)):Xa(c,()=>{c=null}))}var x=Gn(()=>{p=a(w);var _=p.length;let y=!1;if(Ue){var k=Zn(s)===Yn;k!==(_===0)&&(s=wa(),Fr(s),Br(!1),y=!0)}for(var A=new Set,S=St,I=Xn(),T=0;T<_;T+=1){Ue&&or.nodeType===qn&&or.data===Kn&&(s=or,y=!0,Br(!1));var D=p[T],C=n(D,T),j=f?null:b.get(C);j?(j.v&&ka(j.v,D),j.i&&ka(j.i,T),I&&S.skipped_effects.delete(j.e)):(j=Go(b,f?s:Sa??=Lr(),D,C,T,o,t,r),f||(j.e.f|=nt),b.set(C,j)),A.add(C)}if(_===0&&i&&!c&&(f?c=Xr(()=>i(s)):(c=Xr(()=>i(Sa??=Lr())),c.f|=nt)),Ue&&_>0&&Fr(wa()),!f)if(I){for(const[L,z]of b)A.has(L)||S.skipped_effects.add(z.e);S.oncommit(g),S.ondiscard(()=>{})}else g();y&&Br(!0),a(w)}),m={effect:x,items:b,outrogroups:null,fallback:c};f=!1,Ue&&(s=or)}function Wo(e,t,r,n,o){var i=(n&oo)!==0,s=t.length,b=e.items,v=e.effect.first,u,c=null,w,p=[],f=[],g,x,m,_;if(i)for(_=0;_<s;_+=1)g=t[_],x=o(g,_),m=b.get(x).e,(m.f&nt)===0&&(m.nodes?.a?.measure(),(w??=new Set).add(m));for(_=0;_<s;_+=1){if(g=t[_],x=o(g,_),m=b.get(x).e,e.outrogroups!==null)for(const j of e.outrogroups)j.pending.delete(m),j.done.delete(m);if((m.f&nt)!==0)if(m.f^=nt,m===v)Yt(m,null,r);else{var y=c?c.next:v;m===e.effect.last&&(e.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),lt(e,c,m),lt(e,m,y),Yt(m,y,r),c=m,p=[],f=[],v=c.next;continue}if((m.f&zr)!==0&&(Ka(m),i&&(m.nodes?.a?.unfix(),(w??=new Set).delete(m))),m!==v){if(u!==void 0&&u.has(m)){if(p.length<f.length){var k=f[0],A;c=k.prev;var S=p[0],I=p[p.length-1];for(A=0;A<p.length;A+=1)Yt(p[A],k,r);for(A=0;A<f.length;A+=1)u.delete(f[A]);lt(e,S.prev,I.next),lt(e,c,S),lt(e,I,k),v=k,c=I,_-=1,p=[],f=[]}else u.delete(m),Yt(m,v,r),lt(e,m.prev,m.next),lt(e,m,c===null?e.effect.first:c.next),lt(e,c,m),c=m;continue}for(p=[],f=[];v!==null&&v!==m;)(u??=new Set).add(v),f.push(v),v=v.next;if(v===null)continue}(m.f&nt)===0&&p.push(m),c=m,v=m.next}if(e.outrogroups!==null){for(const j of e.outrogroups)j.pending.size===0&&(ea(ca(j.done)),e.outrogroups?.delete(j));e.outrogroups.size===0&&(e.outrogroups=null)}if(v!==null||u!==void 0){var T=[];if(u!==void 0)for(m of u)(m.f&zr)===0&&T.push(m);for(;v!==null;)(v.f&zr)===0&&v!==e.fallback&&T.push(v),v=v.next;var D=T.length;if(D>0){var C=(n&Ja)!==0&&s===0?r:null;if(i){for(_=0;_<D;_+=1)T[_].nodes?.a?.measure();for(_=0;_<D;_+=1)T[_].nodes?.a?.fix()}zo(e,T,C)}}i&&br(()=>{if(w!==void 0)for(m of w)m.nodes?.a?.apply()})}function Go(e,t,r,n,o,i,s,b){var v=(s&$n)!==0?(s&eo)===0?Jn(r,!1,!1):Ta(r):null,u=(s&to)!==0?Ta(o):null;return{v,i:u,e:Xr(()=>(i(t,v??r,u??o,b),()=>{e.delete(n)}))}}function Yt(e,t,r){if(e.nodes)for(var n=e.nodes.start,o=e.nodes.end,i=t&&(t.f&nt)===0?t.nodes.start:r;n!==null;){var s=ro(n);if(i.before(n),n===o)return;n=s}}function lt(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}const Vo=()=>performance.now(),at={tick:e=>requestAnimationFrame(e),now:()=>Vo(),tasks:new Set};function un(){const e=at.now();at.tasks.forEach(t=>{t.c(e)||(at.tasks.delete(t),t.f())}),at.tasks.size!==0&&at.tick(un)}function Ho(e){let t;return at.tasks.size===0&&at.tick(un),{promise:new Promise(r=>{at.tasks.add(t={c:e,f:r})}),abort(){at.tasks.delete(t)}}}function sr(e,t){en(()=>{e.dispatchEvent(new CustomEvent(t))})}function Uo(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Ca(e){const t={},r=e.split(";");for(const n of r){const[o,i]=n.split(":");if(!o||i===void 0)break;const s=Uo(o.trim());t[s]=i.trim()}return t}const Zo=e=>e;function zt(e,t,r){var n=Qa,o=n.nodes,i,s,b,v=null;o.a??={element:e,measure(){i=this.element.getBoundingClientRect()},apply(){if(b?.abort(),s=this.element.getBoundingClientRect(),i.left!==s.left||i.right!==s.right||i.top!==s.top||i.bottom!==s.bottom){const u=t()(this.element,{from:i,to:s},r?.());b=gr(this.element,u,void 0,1,()=>{b?.abort(),b=void 0})}},fix(){if(!e.getAnimations().length){var{position:u,width:c,height:w}=getComputedStyle(e);if(u!=="absolute"&&u!=="fixed"){var p=e.style;v={position:p.position,width:p.width,height:p.height,transform:p.transform},p.position="absolute",p.width=c,p.height=w;var f=e.getBoundingClientRect();if(i.left!==f.left||i.top!==f.top){var g=`translate(${i.left-f.left}px, ${i.top-f.top}px)`;p.transform=p.transform?`${p.transform} ${g}`:g}}}},unfix(){if(v){var u=e.style;u.position=v.position,u.width=v.width,u.height=v.height,u.transform=v.transform}}},o.a.element=e}function Ge(e,t,r,n){var o=(e&uo)!==0,i="both",s,b=t.inert,v=t.style.overflow,u,c;function w(){return en(()=>s??=r()(t,n?.()??{},{direction:i}))}var p={is_global:o,in(){t.inert=b,sr(t,"introstart"),u=gr(t,w(),c,1,()=>{sr(t,"introend"),u?.abort(),u=s=void 0,t.style.overflow=v})},out(m){t.inert=!0,sr(t,"outrostart"),c=gr(t,w(),u,0,()=>{sr(t,"outroend"),m?.()})},stop:()=>{u?.abort(),c?.abort()}},f=Qa;if((f.nodes.t??=[]).push(p),Wn){var g=o;if(!g){for(var x=f.parent;x&&(x.f&so)!==0;)for(;(x=x.parent)&&(x.f&lo)===0;);g=!x||(x.f&co)!==0}g&&$a(()=>{ua(()=>p.in())})}}function gr(e,t,r,n,o){var i=n===1;if(io(t)){var s,b=!1;return br(()=>{if(!b){var m=t({direction:i?"in":"out"});s=gr(e,m,r,n,o)}}),{abort:()=>{b=!0,s?.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(r?.deactivate(),!t?.duration)return o(),{abort:Ht,deactivate:Ht,reset:Ht,t:()=>n};const{delay:v=0,css:u,tick:c,easing:w=Zo}=t;var p=[];if(i&&r===void 0&&(c&&c(0,1),u)){var f=Ca(u(0,1));p.push(f,f)}var g=()=>1-n,x=e.animate(p,{duration:v,fill:"forwards"});return x.onfinish=()=>{x.cancel();var m=r?.t()??1-n;r?.abort();var _=n-m,y=t.duration*Math.abs(_),k=[];if(y>0){var A=!1;if(u)for(var S=Math.ceil(y/16.666666666666668),I=0;I<=S;I+=1){var T=m+_*w(I/S),D=Ca(u(T,1-T));k.push(D),A||=D.overflow==="hidden"}A&&(e.style.overflow="hidden"),g=()=>{var C=x.currentTime;return m+_*w(C/y)},c&&Ho(()=>{if(x.playState!=="running")return!1;var C=g();return c(C,1-C),!0})}x=e.animate(k,{duration:y,fill:"forwards"}),x.onfinish=()=>{g=()=>n,c?.(n,1-n),o()}},{abort:()=>{x&&(x.cancel(),x.effect=null,x.onfinish=Ht)},deactivate:()=>{o=Ht},reset:()=>{n===0&&c?.(1,0)},t:()=>g()}}function fa(e,t,r){$a(()=>{var n=ua(()=>t(e,r?.())||{});if(r&&n?.update){var o=!1,i={};va(()=>{var s=r();vo(s),o&&fo(i,s)&&(i=s,n.update(s))}),o=!0}if(n?.destroy)return()=>n.destroy()})}const ja=[...` 	
\r\fÂ \v\uFEFF`];function Yo(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var o in r)if(r[o])n=n?n+" "+o:o;else if(n.length)for(var i=o.length,s=0;(s=n.indexOf(o,s))>=0;){var b=s+i;(s===0||ja.includes(n[s-1]))&&(b===n.length||ja.includes(n[b]))?n=(s===0?"":n.substring(0,s))+n.substring(b+1):s=b}}return n===""?null:n}function Ma(e,t=!1){var r=t?" !important;":";",n="";for(var o in e){var i=e[o];i!=null&&i!==""&&(n+=" "+o+": "+i+r)}return n}function Wr(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function qo(e,t){if(t){var r="",n,o;if(Array.isArray(t)?(n=t[0],o=t[1]):n=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,s=0,b=!1,v=[];n&&v.push(...Object.keys(n).map(Wr)),o&&v.push(...Object.keys(o).map(Wr));var u=0,c=-1;const x=e.length;for(var w=0;w<x;w++){var p=e[w];if(b?p==="/"&&e[w-1]==="*"&&(b=!1):i?i===p&&(i=!1):p==="/"&&e[w+1]==="*"?b=!0:p==='"'||p==="'"?i=p:p==="("?s++:p===")"&&s--,!b&&i===!1&&s===0){if(p===":"&&c===-1)c=w;else if(p===";"||w===x-1){if(c!==-1){var f=Wr(e.substring(u,c).trim());if(!v.includes(f)){p!==";"&&w++;var g=e.substring(u,w).trim();r+=" "+g+";"}}u=w+1,c=-1}}}}return n&&(r+=Ma(n)),o&&(r+=Ma(o,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function Q(e,t,r,n,o,i){var s=e.__className;if(Ue||s!==r||s===void 0){var b=Yo(r,n,i);(!Ue||b!==e.getAttribute("class"))&&(b==null?e.removeAttribute("class"):e.className=b),e.__className=r}else if(i&&o!==i)for(var v in i){var u=!!i[v];(o==null||u!==!!o[v])&&e.classList.toggle(v,u)}return i}function Gr(e,t={},r,n){for(var o in r){var i=r[o];t[o]!==i&&(r[o]==null?e.style.removeProperty(o):e.style.setProperty(o,i,n))}}function ba(e,t,r,n){var o=e.__style;if(Ue||o!==t){var i=qo(t,n);(!Ue||i!==e.getAttribute("style"))&&(i==null?e.removeAttribute("style"):e.style.cssText=i),e.__style=t}else n&&(Array.isArray(n)?(Gr(e,r?.[0],n[0]),Gr(e,r?.[1],n[1],"important")):Gr(e,r,n));return n}function Tr(e,t,r=t){var n=new WeakSet;tn(e,"input",async o=>{var i=o?e.defaultValue:e.value;if(i=Hr(e)?Ur(i):i,r(i),St!==null&&n.add(St),await rn(),i!==(i=t())){var s=e.selectionStart,b=e.selectionEnd,v=e.value.length;if(e.value=i??"",b!==null){var u=e.value.length;s===b&&b===v&&u>v?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=s,e.selectionEnd=Math.min(b,u))}}}),(Ue&&e.defaultValue!==e.value||ua(t)==null&&e.value)&&(r(Hr(e)?Ur(e.value):e.value),St!==null&&n.add(St)),va(()=>{var o=t();if(e===document.activeElement){var i=bo??St;if(n.has(i))return}Hr(e)&&o===Ur(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}const Vr=new Set;function Ct(e,t,r,n,o=n){var i=r.getAttribute("type")==="checkbox",s=e;let b=!1;if(t!==null)for(var v of t)s=s[v]??=[];s.push(r),tn(r,"change",()=>{var u=r.__value;i&&(u=Pa(s,u,r.checked)),o(u)},()=>o(i?[]:null)),va(()=>{var u=n();if(Ue&&r.defaultChecked!==r.checked){b=!0;return}i?(u=u||[],r.checked=u.includes(r.__value)):r.checked=go(r.__value,u)}),po(()=>{var u=s.indexOf(r);u!==-1&&s.splice(u,1)}),Vr.has(s)||(Vr.add(s),br(()=>{s.sort((u,c)=>u.compareDocumentPosition(c)===4?-1:1),Vr.delete(s)})),br(()=>{if(b){var u;if(i)u=Pa(s,u,r.checked);else{var c=s.find(w=>w.checked);u=c?.__value}o(u)}})}function Pa(e,t,r){for(var n=new Set,o=0;o<e.length;o+=1)e[o].checked&&n.add(e[o].__value);return r||n.delete(t),Array.from(n)}function Hr(e){var t=e.type;return t==="number"||t==="range"}function Ur(e){return e===""?null:+e}const Zr={regular:{sev1:"I do this because it's who I am",sev2:"I do this to become better",sev3:"I do this because I enjoy it"},maintenance:{sev1:"Life breaks without this",sev2:"Keeps things running smooth",sev3:"Can wait or be skipped"}},Ko={regular:{sev1:"Core",sev2:"Growth",sev3:"Enrichment"},maintenance:{sev1:"Essential",sev2:"Routine",sev3:"Optional"}},Xo=["ðŸ’¼","ðŸ“Š","ðŸ“ˆ","ðŸ“‹","ðŸ“","ðŸ—‚ï¸","ðŸ“Œ","ðŸŽ¯","ðŸ ","ðŸ¡","ðŸ›‹ï¸","ðŸ§¹","ðŸ³","ðŸ›’","ðŸ§º","ðŸª´","ðŸ’ª","ðŸƒ","ðŸ‹ï¸","ðŸ§˜","ðŸš´","ðŸŠ","âš½","ðŸŽ¾","ðŸ“š","ðŸŽ“","ðŸ“–","âœï¸","ðŸ”¬","ðŸ§ª","ðŸŒ","ðŸ’¡","ðŸ’°","ðŸ’µ","ðŸ¦","ðŸ’³","ðŸ“‰","ðŸª™","ðŸ’Ž","ðŸ§","â¤ï¸","ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦","ðŸ¤","ðŸ‘¥","ðŸ’‘","ðŸ‘¶","ðŸ•","ðŸˆ","ðŸŽ¨","ðŸŽµ","ðŸŽ¸","ðŸŽ¹","ðŸ“¸","ðŸŽ¬","ðŸŽ­","âœï¸","ðŸ’»","ðŸ“±","ðŸ–¥ï¸","âŒ¨ï¸","ðŸ”§","âš™ï¸","ðŸ¤–","ðŸŽ®","âœˆï¸","ðŸš—","ðŸš€","ðŸ—ºï¸","ðŸ–ï¸","â›°ï¸","ðŸ•ï¸","ðŸŒ…","ðŸ§ ","ðŸŒ±","â˜€ï¸","ðŸŒ¸","ðŸ¦‹","ðŸŒˆ","âœ¨","ðŸ’«","ðŸŽ","ðŸ¥—","ðŸ¥‘","ðŸ³","â˜•","ðŸµ","ðŸ¥¤","ðŸ§ƒ","â­","ðŸ”¥","ðŸ†","ðŸ¥‡","ðŸŽ–ï¸","ðŸ…","ðŸ‘‘","ðŸ’¯","ðŸ“","ðŸ—“ï¸","â°","ðŸ””","ðŸ’¬","ðŸ“§","ðŸŽ","ðŸŽ‰"];var Jo=R('<button><span class="text-lg"> </span> <span class="text-[10px] font-medium truncate"> </span></button>'),Qo=R('<button><span class="text-xl"> </span> <span class="text-xs font-medium"> </span></button>'),$o=R('<nav class="md:hidden pb-6 fixed bottom-0 left-0 right-0 bg-base-200 border-t border-base-content/10 flex justify-around pt-2 px-1 safe-bottom"></nav> <nav class="hidden md:flex fixed left-0 top-0 bottom-0 w-20 bg-base-200 border-r border-base-content/10 flex-col items-center py-6 gap-2"></nav>',1);function ei(e,t){ye(t,!0);const r=[{id:"areas",icon:"ðŸ“",label:"Areas"},{id:"week",icon:"ðŸ“…",label:"Week"},{id:"today",icon:"â˜€ï¸",label:"Today"}];var n=$o(),o=le(n);Te(o,21,()=>r,We,(s,b)=>{var v=Jo();let u;v.__click=()=>t.onTabChange(a(b).id);let c;var w=d(v),p=d(w,!0);l(w);var f=h(w,2),g=d(f,!0);l(f),l(v),oe(()=>{u=Q(v,1,"flex flex-col items-center gap-1 px-3 py-1 rounded-lg transition-colors min-w-0 flex-1",null,u,{"text-primary":t.activeTab===a(b).id,"text-base-content":t.activeTab!==a(b).id}),c=ba(v,"",c,{opacity:t.activeTab===a(b).id?1:.4}),F(p,a(b).icon),F(g,a(b).label)}),O(s,v)}),l(o);var i=h(o,2);Te(i,21,()=>r,We,(s,b)=>{var v=Qo();v.__click=()=>t.onTabChange(a(b).id);var u=d(v),c=d(u,!0);l(u);var w=h(u,2),p=d(w,!0);l(w),l(v),oe(()=>{Q(v,1,`flex flex-col ${t.activeTab==a(b).id?"bg-primary/20 text-primary":"text-base-content "} items-center gap-1 px-3 py-3 rounded-lg transition-colors w-16 `),F(c,a(b).icon),F(p,a(b).label)}),O(s,v)}),l(i),O(e,n),we()}De(["click"]);const ti=e=>e;function ri(e){const t=e-1;return t*t*t+1}function Na(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function Dt(e,{delay:t=0,duration:r=400,easing:n=ti}={}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:n,css:i=>`opacity: ${i*o}`}}function At(e,{delay:t=0,duration:r=400,easing:n=ri,x:o=0,y:i=0,opacity:s=0}={}){const b=getComputedStyle(e),v=+b.opacity,u=b.transform==="none"?"":b.transform,c=v*(1-s),[w,p]=Na(o),[f,g]=Na(i);return{delay:t,duration:r,easing:n,css:(x,m)=>`
			transform: ${u} translate(${(1-x)*w}${p}, ${(1-x)*f}${g});
			opacity: ${v-c*m}`}}var ai=R('<button type="button"><span class="text-xs font-medium"> </span> <span class="text-lg"> </span></button>'),ni=R('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 " role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-300 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><div><h2 class="text-lg font-semibold">Assign to Day</h2> <p class="text-xs text-base-content/50 truncate"> </p></div> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 grid grid-cols-7 gap-1"></div> <div class="p-4 pt-0"><button type="button" class="w-full p-3 text-sm text-base-content/50 hover:text-base-content rounded-lg border border-base-content/10 hover:border-primary transition-colors">Remove from all days</button></div></div></div>');function oi(e,t){ye(t,!0);let r=ee(!1),n=ee(null);function o(f,g){f.stopPropagation(),E(n,g,!0),E(r,!0)}function i(){E(r,!1),E(n,null)}function s(){return nn(t.currentWeekOf).map(f=>({date:f,dayName:sn(f),isToday:on(f)}))}async function b(f){if(!a(n))return;const g=a(n);i();const x=t.isTaskAssignedToDay(g.id);g.type==="oneoff"?x===f?await cr(g.id,t.currentWeekOf,f):(x&&await cr(g.id,t.currentWeekOf,x),await ho(g.id,g.areaId,g.name,g.status,t.currentWeekOf,f)):x===f?await ur(g.id,g.projectId,t.currentWeekOf,f):(x&&await ur(g.id,g.projectId,t.currentWeekOf,x),await _o(g.id,g.projectId,g.areaId,g.name,g.status,t.currentWeekOf,f,!1))}async function v(){if(!a(n))return;const f=a(n),g=t.isTaskAssignedToDay(f.id);g&&(f.type==="oneoff"?await cr(f.id,t.currentWeekOf,g):await ur(f.id,f.projectId,t.currentWeekOf,g)),i()}var u={openDayPicker:o},c=be(),w=le(c);{var p=f=>{var g=ni(),x=d(g);x.__click=i,x.__keydown=C=>C.key==="Escape"&&i();var m=h(x,2),_=d(m),y=d(_),k=h(d(y),2),A=d(k,!0);l(k),l(y);var S=h(y,2);S.__click=i,l(_);var I=h(_,2);Te(I,21,s,We,(C,j)=>{const L=q(()=>t.isTaskAssignedToDay(a(n).id)===a(j).date);var z=ai();z.__click=()=>b(a(j).date);var Z=d(z),G=d(Z,!0);l(Z);var V=h(Z,2),P=d(V,!0);l(V),l(z),oe(H=>{Q(z,1,`flex flex-col items-center p-2 rounded-lg border transition-colors ${a(L)?"bg-primary/10 text-primary border-primary":a(j).isToday?"border-primary/50 hover:border-primary":"border-base-content/10 hover:border-primary"}`),F(G,a(j).dayName),F(P,H)},[()=>a(j).date.split("-")[2]]),O(C,z)}),l(I);var T=h(I,2),D=d(T);D.__click=v,l(T),l(m),l(g),oe(()=>F(A,a(n).name)),Ge(3,x,()=>Dt,()=>({duration:200})),Ge(3,m,()=>At,()=>({y:300,duration:300})),O(f,g)};$(w,f=>{a(r)&&a(n)&&f(p)})}return O(e,c),we(u)}De(["click","keydown"]);function Ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function pr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ra(Object(r),!0).forEach(function(n){Rt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ra(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jt(e){"@babel/helpers - typeof";return jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(e)}function Rt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ii(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function si(e,t){if(e==null)return{};var r=ii(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function li(e,t){return ci(e)||vi(e,t)||ga(e,t)||bi()}function Ye(e){return di(e)||ui(e)||ga(e)||fi()}function di(e){if(Array.isArray(e))return ta(e)}function ci(e){if(Array.isArray(e))return e}function ui(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vi(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,s,b;try{for(r=r.call(e);!(o=(s=r.next()).done)&&(n.push(s.value),!(t&&n.length===t));o=!0);}catch(v){i=!0,b=v}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw b}}return n}}function ga(e,t){if(e){if(typeof e=="string")return ta(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ta(e,t)}}function ta(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $t(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ga(e))||t){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(v){throw v},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,b;return{s:function(){r=r.call(e)},n:function(){var v=r.next();return i=v.done,v},e:function(v){s=!0,b=v},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(s)throw b}}}}var gi="finalize",pi="consider";function Lt(e,t,r){e.dispatchEvent(new CustomEvent(gi,{detail:{items:t,info:r}}))}function ft(e,t,r){e.dispatchEvent(new CustomEvent(pi,{detail:{items:t,info:r}}))}var Dr="draggedEntered",er="draggedLeft",Ar="draggedOverIndex",pa="draggedLeftDocument",mr={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function mi(e,t,r){e.dispatchEvent(new CustomEvent(Dr,{detail:{indexObj:t,draggedEl:r}}))}function hi(e,t,r){e.dispatchEvent(new CustomEvent(er,{detail:{draggedEl:t,type:mr.LEFT_FOR_ANOTHER,theOtherDz:r}}))}function _i(e,t){e.dispatchEvent(new CustomEvent(er,{detail:{draggedEl:t,type:mr.OUTSIDE_OF_ANY}}))}function xi(e,t,r){e.dispatchEvent(new CustomEvent(Ar,{detail:{indexObj:t,draggedEl:r}}))}function yi(e){window.dispatchEvent(new CustomEvent(pa,{detail:{draggedEl:e}}))}var Le={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Dr,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:Ar,DRAGGED_LEFT:er,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},ze={POINTER:"pointer",KEYBOARD:"keyboard"},Er="isDndShadowItem",Or="data-is-dnd-shadow-item-internal",wi="data-is-dnd-shadow-item-hint",vn="id:dnd-shadow-placeholder-0000",ki="dnd-action-dragged-el",Ee="id",ra=0;function fn(){ra++}function bn(){if(ra===0)throw new Error("Bug! trying to decrement when there are no dropzones");ra--}var ma=typeof window>"u";function aa(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r,n=t?Ai(e):e.getBoundingClientRect(),o=getComputedStyle(e),i=o.transform;if(i){var s,b,v,u;if(i.startsWith("matrix3d("))r=i.slice(9,-1).split(/, /),s=+r[0],b=+r[5],v=+r[12],u=+r[13];else if(i.startsWith("matrix("))r=i.slice(7,-1).split(/, /),s=+r[0],b=+r[3],v=+r[4],u=+r[5];else return n;var c=o.transformOrigin,w=n.x-v-(1-s)*parseFloat(c),p=n.y-u-(1-b)*parseFloat(c.slice(c.indexOf(" ")+1)),f=s?n.width/s:e.offsetWidth,g=b?n.height/b:e.offsetHeight;return{x:w,y:p,width:f,height:g,top:p,right:w+f,bottom:p+g,left:w}}else return n}function gn(e){var t=aa(e);return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function pn(e){var t=e.getBoundingClientRect();return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function mn(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Ti(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ir(e,t){return e.y<=t.bottom&&e.y>=t.top&&e.x>=t.left&&e.x<=t.right}function Xt(e){return mn(pn(e))}function La(e,t){var r=Xt(e),n=gn(t);return Ir(r,n)}function Fa(e,t){var r=Xt(e),n=Xt(t);return Ti(r,n)}function Di(e){var t=pn(e);return t.right<0||t.left>document.documentElement.scrollWidth||t.bottom<0||t.top>document.documentElement.scrollHeight}function Ai(e){for(var t=e.getBoundingClientRect(),r={top:t.top,bottom:t.bottom,left:t.left,right:t.right},n=!1,o=!1,i=e.parentElement;i&&i!==document.body;){var s=window.getComputedStyle(i),b=s.overflowY,v=s.overflowX,u=b==="scroll"||b==="auto",c=v==="scroll"||v==="auto";if(u||c){var w=i.getBoundingClientRect();if(u){var p=Math.max(r.top,w.top),f=Math.min(r.bottom,w.bottom);(p!==r.top||f!==r.bottom)&&(n=!0),r.top=p,r.bottom=f}if(c){var g=Math.max(r.left,w.left),x=Math.min(r.right,w.right);(g!==r.left||x!==r.right)&&(o=!0),r.left=g,r.right=x}}i=i.parentElement}return n||o?{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}:{top:t.top,bottom:t.bottom,left:t.left,right:t.right,width:Math.max(0,t.right-t.left),height:Math.max(0,t.bottom-t.top)}}var Pt;function ha(){Pt=new Map}ha();function Ei(e){var t=Array.from(e.children).findIndex(function(r){return r.getAttribute(Or)});if(t>=0)return Pt.has(e)||Pt.set(e,new Map),Pt.get(e).set(t,gn(e.children[t])),t}function Oi(e,t){if(!La(e,t))return null;var r=t.children;if(r.length===0)return{index:0,isProximityBased:!0};for(var n=Ei(t),o=0;o<r.length;o++)if(La(e,r[o])){var i=Pt.has(t)&&Pt.get(t).get(o);return i&&!Ir(Xt(e),i)?{index:n,isProximityBased:!1}:{index:o,isProximityBased:!1}}for(var s=Number.MAX_VALUE,b=void 0,v=0;v<r.length;v++){var u=Fa(e,r[v]);u<s&&(s=u,b=v)}if(r.length>0){var c=r.length,w=r[c-1],p=w.cloneNode(!1);p.style.visibility="hidden",p.style.pointerEvents="none",t.appendChild(p);var f=Fa(e,p);f<s&&(b=c),t.removeChild(p)}return{index:b,isProximityBased:!0}}function Ut(e){return JSON.stringify(e,null,2)}function hr(e){if(!e)throw new Error("cannot get depth of a falsy node");return hn(e,0)}function hn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?hn(e.parentElement,t+1):t-1}function Ii(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!{}.hasOwnProperty.call(t,r)||t[r]!==e[r])return!1;return!0}function Si(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var Ci=200,Ba=10,na;function ji(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ci,n=arguments.length>3?arguments[3]:void 0,o,i,s=!1,b,v=Array.from(t).sort(function(c,w){return hr(w)-hr(c)});function u(){var c=Xt(e),w=n.multiScrollIfNeeded();if(!w&&b&&Math.abs(b.x-c.x)<Ba&&Math.abs(b.y-c.y)<Ba){na=window.setTimeout(u,r);return}if(Di(e)){yi(e);return}b=c;var p=!1,f=$t(v),g;try{for(f.s();!(g=f.n()).done;){var x=g.value;w&&ha();var m=Oi(e,x);if(m!==null){var _=m.index;p=!0,x!==o?(o&&hi(o,e,x),mi(x,m,e),o=x):_!==i&&(xi(x,m,e),i=_);break}}}catch(y){f.e(y)}finally{f.f()}!p&&s&&o?(_i(o,e),o=void 0,i=void 0,s=!1):s=!0,na=window.setTimeout(u,r)}u()}function Mi(){clearTimeout(na),ha()}var Zt=30;function Pi(){var e;function t(){e={directionObj:void 0,stepPx:0}}t();function r(i){var s=e,b=s.directionObj,v=s.stepPx;b&&(i.scrollBy(b.x*v,b.y*v),window.requestAnimationFrame(function(){return r(i)}))}function n(i){return Zt-i}function o(i,s){if(!s)return!1;var b=Ni(i,s),v=!!e.directionObj;if(b===null)return v&&t(),!1;var u=!1,c=!1;return s.scrollHeight>s.clientHeight&&(b.bottom<Zt?(u=!0,e.directionObj={x:0,y:1},e.stepPx=n(b.bottom)):b.top<Zt&&(u=!0,e.directionObj={x:0,y:-1},e.stepPx=n(b.top)),!v&&u)||s.scrollWidth>s.clientWidth&&(b.right<Zt?(c=!0,e.directionObj={x:1,y:0},e.stepPx=n(b.right)):b.left<Zt&&(c=!0,e.directionObj={x:-1,y:0},e.stepPx=n(b.left)),!v&&c)?(r(s),!0):(t(),!1)}return{scrollIfNeeded:o,resetScrolling:t}}function Ni(e,t){var r=t===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:t.getBoundingClientRect();return Ir(e,r)?{top:e.y-r.top,bottom:r.bottom-e.y,left:e.x-r.left,right:r.right-e.x}:null}function Ri(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=Fi(e),n=Array.from(r).sort(function(v,u){return hr(u)-hr(v)}),o=Pi(),i=o.scrollIfNeeded,s=o.resetScrolling;function b(){var v=t();if(!v||!n)return!1;for(var u=n.filter(function(p){return Ir(v,p.getBoundingClientRect())||p===document.scrollingElement}),c=0;c<u.length;c++){var w=i(v,u[c]);if(w)return!0}return!1}return{multiScrollIfNeeded:r.size>0?b:function(){return!1},destroy:function(){return s()}}}function Li(e){if(!e)return[];for(var t=[],r=e;r;){var n=window.getComputedStyle(r),o=n.overflow;o.split(" ").some(function(i){return i.includes("auto")||i.includes("scroll")})&&t.push(r),r=r.parentElement}return t}function Fi(e){var t=new Set,r=$t(e),n;try{for(r.s();!(n=r.n()).done;){var o=n.value;Li(o).forEach(function(i){return t.add(i)})}}catch(i){r.e(i)}finally{r.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&t.add(document.scrollingElement),t}function Bi(e){var t=e.cloneNode(!0),r=[],n=e.tagName==="SELECT",o=n?[e]:Ye(e.querySelectorAll("select")),i=$t(o),s;try{for(i.s();!(s=i.n()).done;){var b=s.value;r.push(b.value)}}catch(k){i.e(k)}finally{i.f()}if(o.length>0)for(var v=n?[t]:Ye(t.querySelectorAll("select")),u=0;u<v.length;u++){var c=v[u],w=r[u],p=c.querySelector('option[value="'.concat(w,'"'));p&&p.setAttribute("selected",!0)}var f=e.tagName==="CANVAS",g=f?[e]:Ye(e.querySelectorAll("canvas"));if(g.length>0)for(var x=f?[t]:Ye(t.querySelectorAll("canvas")),m=0;m<x.length;m++){var _=g[m],y=x[m];y.width=_.width,y.height=_.height,_.width>0&&_.height>0&&y.getContext("2d").drawImage(_,0,0)}return t}var Jt=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),zi=Rt({},Jt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function _n(e){if(!Jt[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(Jt)));return zi[e]}var Wi=.2;function ht(e){return"".concat(e," ").concat(Wi,"s ease")}function Gi(e,t){var r=e.getBoundingClientRect(),n=Bi(e);xn(e,n),n.id=ki,n.style.position="fixed";var o=r.top,i=r.left;if(n.style.top="".concat(o,"px"),n.style.left="".concat(i,"px"),t){var s=mn(r);o-=s.y-t.y,i-=s.x-t.x,window.setTimeout(function(){n.style.top="".concat(o,"px"),n.style.left="".concat(i,"px")},0)}return n.style.margin="0",n.style.boxSizing="border-box",n.style.height="".concat(r.height,"px"),n.style.width="".concat(r.width,"px"),n.style.transition="".concat(ht("top"),", ").concat(ht("left"),", ").concat(ht("background-color"),", ").concat(ht("opacity"),", ").concat(ht("color")," "),window.setTimeout(function(){return n.style.transition+=", ".concat(ht("width"),", ").concat(ht("height"))},0),n.style.zIndex="9999",n.style.cursor="grabbing",n}function Vi(e){e.style.cursor="grab"}function Hi(e,t,r,n){xn(t,e);var o=t.getBoundingClientRect(),i=e.getBoundingClientRect(),s=o.width-i.width,b=o.height-i.height;if(s||b){var v={left:(r-i.left)/i.width,top:(n-i.top)/i.height};_n(Jt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(o.height,"px"),e.style.width="".concat(o.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-v.left*s,"px"),e.style.top="".concat(parseFloat(e.style.top)-v.top*b,"px")}}function xn(e,t){var r=window.getComputedStyle(e);Array.from(r).filter(function(n){return n.startsWith("background")||n.startsWith("padding")||n.startsWith("font")||n.startsWith("text")||n.startsWith("align")||n.startsWith("justify")||n.startsWith("display")||n.startsWith("flex")||n.startsWith("border")||n==="opacity"||n==="color"||n==="list-style-type"||_n(Jt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(n==="width"||n==="height")}).forEach(function(n){return t.style.setProperty(n,r.getPropertyValue(n),r.getPropertyPriority(n))})}function Ui(e,t){e.draggable=!1,e.ondragstart=function(){return!1},t?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function yn(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function Zi(e){e.style.visibility="hidden",e.setAttribute(Or,"true")}function Yi(e){e.style.visibility="",e.removeAttribute(Or)}function vr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(n){var o=t(n);Object.keys(o).forEach(function(i){n.style[i]=o[i]}),r(n).forEach(function(i){return n.classList.add(i)})})}function _r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(n){var o=t(n);Object.keys(o).forEach(function(i){n.style[i]=""}),r(n).forEach(function(i){return n.classList.contains(i)&&n.classList.remove(i)})})}function qi(e){var t=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var r=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=t,e.style.minWidth=r}}var Ki="--any--",Xi=100,Ji=20,lr=3,Qi=80,za={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Wa="data-is-dnd-original-dragged-item",Fe,Se,Be,Sr,ge,Cr,ut,Me,et,Pe,dt=!1,_a=!1,xa,tr=!1,fr=[],Kt,tt,qt=!1,Je=new Map,xe=new Map,Yr=new WeakMap;function $i(e,t){Je.has(t)||Je.set(t,new Set),Je.get(t).has(e)||(Je.get(t).add(e),fn())}function Ga(e,t){Je.get(t).delete(e),bn(),Je.get(t).size===0&&Je.delete(t)}function es(){var e=Je.get(Sr),t=$t(e),r;try{for(t.s();!(r=t.n()).done;){var n=r.value;n.addEventListener(Dr,wn),n.addEventListener(er,kn),n.addEventListener(Ar,Tn)}}catch(s){t.e(s)}finally{t.f()}window.addEventListener(pa,Ft);var o=Math.max.apply(Math,Ye(Array.from(e.keys()).map(function(s){return xe.get(s).dropAnimationDurationMs}))),i=o===0?Ji:Math.max(o,Xi);Kt=Ri(e,function(){return Pe}),ji(Se,e,i*1.07,Kt)}function ts(){var e=Je.get(Sr),t=$t(e),r;try{for(t.s();!(r=t.n()).done;){var n=r.value;n.removeEventListener(Dr,wn),n.removeEventListener(er,kn),n.removeEventListener(Ar,Tn)}}catch(o){t.e(o)}finally{t.f()}window.removeEventListener(pa,Ft),Kt&&(Kt.destroy(),Kt=void 0),Mi()}function jr(e){return e.findIndex(function(t){return!!t[Er]})}function rs(e){var t;return pr(pr({},e),{},(t={},Rt(t,Er,!0),Rt(t,Ee,vn),t))}function wn(e){var t=xe.get(e.currentTarget),r=t.items,n=t.dropFromOthersDisabled;if(!(n&&e.currentTarget!==ge)){if(tr=!1,r=r.filter(function(b){return b[Ee]!==ut[Ee]&&b[Ee]!==vn}),ge!==e.currentTarget){var o=xe.get(ge).items,i=o.filter(function(b){return!b[Er]});ft(ge,i,{trigger:Le.DRAGGED_ENTERED_ANOTHER,id:Be[Ee],source:ze.POINTER})}var s=e.detail.indexObj.index;Me=e.currentTarget,r.splice(s,0,ut),ft(e.currentTarget,r,{trigger:Le.DRAGGED_ENTERED,id:Be[Ee],source:ze.POINTER})}}function kn(e){if(dt){var t=xe.get(e.currentTarget),r=t.items,n=t.dropFromOthersDisabled;if(!(n&&e.currentTarget!==ge&&e.currentTarget!==Me)){var o=Ye(r),i=jr(o);i!==-1&&o.splice(i,1);var s=Me;Me=void 0;var b=e.detail,v=b.type,u=b.theOtherDz;if(v===mr.OUTSIDE_OF_ANY||v===mr.LEFT_FOR_ANOTHER&&u!==ge&&xe.get(u).dropFromOthersDisabled){tr=!0,Me=ge;var c=s===ge?o:Ye(xe.get(ge).items);c.splice(Cr,0,ut),ft(ge,c,{trigger:Le.DRAGGED_LEFT_ALL,id:Be[Ee],source:ze.POINTER})}ft(e.currentTarget,o,{trigger:Le.DRAGGED_LEFT,id:Be[Ee],source:ze.POINTER})}}}function Tn(e){var t=xe.get(e.currentTarget),r=t.items,n=t.dropFromOthersDisabled;if(!(n&&e.currentTarget!==ge)){var o=Ye(r);tr=!1;var i=e.detail.indexObj.index,s=jr(o);s!==-1&&o.splice(s,1),o.splice(i,0,ut),ft(e.currentTarget,o,{trigger:Le.DRAGGED_OVER_INDEX,id:Be[Ee],source:ze.POINTER})}}function xr(e){e.preventDefault();var t=e.touches?e.touches[0]:e;Pe={x:t.clientX,y:t.clientY},Se.style.transform="translate3d(".concat(Pe.x-et.x,"px, ").concat(Pe.y-et.y,"px, 0)")}function Ft(){_a=!0,window.removeEventListener("mousemove",xr),window.removeEventListener("touchmove",xr),window.removeEventListener("mouseup",Ft),window.removeEventListener("touchend",Ft),ts(),Vi(Se),Me||(Me=ge);var e=xe.get(Me),t=e.items,r=e.type;_r(Je.get(r),function(i){return xe.get(i).dropTargetStyle},function(i){return xe.get(i).dropTargetClasses});var n=jr(t);n===-1&&Me===ge&&(n=Cr),t=t.map(function(i){return i[Er]?Be:i});function o(){xa(),Lt(Me,t,{trigger:tr?Le.DROPPED_OUTSIDE_OF_ANY:Le.DROPPED_INTO_ZONE,id:Be[Ee],source:ze.POINTER}),Me!==ge&&Lt(ge,xe.get(ge).items,{trigger:Le.DROPPED_INTO_ANOTHER,id:Be[Ee],source:ze.POINTER});var i=Array.from(Me.children).find(function(s){return s.getAttribute(Or)});i&&Yi(i),os()}xe.get(Me).dropAnimationDisabled?o():as(n,o)}function as(e,t){var r=e>-1?aa(Me.children[e],!1):aa(Me,!1),n={x:r.left-parseFloat(Se.style.left),y:r.top-parseFloat(Se.style.top)},o=xe.get(Me),i=o.dropAnimationDurationMs,s="transform ".concat(i,"ms ease");Se.style.transition=Se.style.transition?Se.style.transition+","+s:s,Se.style.transform="translate3d(".concat(n.x,"px, ").concat(n.y,"px, 0)"),window.setTimeout(t,i)}function ns(e,t){fr.push({dz:e,destroy:t}),window.requestAnimationFrame(function(){yn(e),document.body.appendChild(e)})}function os(){Se&&Se.remove&&Se.remove(),Fe&&Fe.remove&&Fe.remove(),Se=void 0,Fe=void 0,Be=void 0,Sr=void 0,ge=void 0,Cr=void 0,ut=void 0,Me=void 0,et=void 0,Pe=void 0,dt=!1,_a=!1,xa=void 0,tr=!1,tt&&clearTimeout(tt),tt=void 0,qt=!1,fr.length&&(fr.forEach(function(e){var t=e.dz,r=e.destroy;r(),t.remove()}),fr=[])}function is(e,t){var r=!1,n={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:za,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},o=new Map;function i(){window.addEventListener("mousemove",v,{passive:!1}),window.addEventListener("touchmove",v,{passive:!1,capture:!1}),window.addEventListener("mouseup",b,{passive:!1}),window.addEventListener("touchend",b,{passive:!1})}function s(){window.removeEventListener("mousemove",v),window.removeEventListener("touchmove",v),window.removeEventListener("mouseup",b),window.removeEventListener("touchend",b),tt&&(clearTimeout(tt),tt=void 0,qt=!1)}function b(p){if(s(),Fe=void 0,et=void 0,Pe=void 0,p.type==="touchend"){var f=new Event("click",{bubbles:!0,cancelable:!0});p.target.dispatchEvent(f)}}function v(p){var f=!!p.touches,g=f?p.touches[0]:p;if(f&&n.delayTouchStartMs>0&&!qt){Pe={x:g.clientX,y:g.clientY},(Math.abs(Pe.x-et.x)>=lr||Math.abs(Pe.y-et.y)>=lr)&&(tt&&(clearTimeout(tt),tt=void 0),b(p));return}p.preventDefault(),Pe={x:g.clientX,y:g.clientY},(Math.abs(Pe.x-et.x)>=lr||Math.abs(Pe.y-et.y)>=lr)&&(s(),c())}function u(p){if(!(p.target!==p.currentTarget&&(p.target.value!==void 0||p.target.isContentEditable))&&!p.button&&!dt){var f=!!p.touches,g=f&&n.delayTouchStartMs>0;g||p.preventDefault(),p.stopPropagation();var x=f?p.touches[0]:p;et={x:x.clientX,y:x.clientY},Pe=pr({},et),Fe=p.currentTarget,g&&(qt=!1,tt=window.setTimeout(function(){Fe&&(qt=!0,s(),c())},n.delayTouchStartMs)),i()}}function c(){dt=!0;var p=o.get(Fe);Cr=p,ge=Fe.parentElement;var f=ge.closest("dialog")||ge.closest("[popover]")||ge.getRootNode(),g=f.body||f,x=n.items,m=n.type,_=n.centreDraggedOnCursor,y=Ye(x);Be=y[p],Sr=m,ut=rs(Be),Se=Gi(Fe,_&&Pe),g.appendChild(Se);function k(){Fe.parentElement?window.requestAnimationFrame(k):(Fe.setAttribute(Wa,!0),g.appendChild(Fe),es(),yn(Fe),ut[Ee]=Be[Ee],Se.focus())}window.requestAnimationFrame(k),vr(Array.from(Je.get(n.type)).filter(function(A){return A===ge||!xe.get(A).dropFromOthersDisabled}),function(A){return xe.get(A).dropTargetStyle},function(A){return xe.get(A).dropTargetClasses}),y.splice(p,1,ut),xa=qi(ge),ft(ge,y,{trigger:Le.DRAG_STARTED,id:Be[Ee],source:ze.POINTER}),window.addEventListener("mousemove",xr,{passive:!1}),window.addEventListener("touchmove",xr,{passive:!1,capture:!1}),window.addEventListener("mouseup",Ft,{passive:!1}),window.addEventListener("touchend",Ft,{passive:!1})}function w(p){var f=p.items,g=f===void 0?void 0:f,x=p.flipDurationMs,m=x===void 0?0:x,_=p.type,y=_===void 0?Ki:_,k=p.dragDisabled,A=k===void 0?!1:k,S=p.morphDisabled,I=S===void 0?!1:S,T=p.dropFromOthersDisabled,D=T===void 0?!1:T,C=p.dropTargetStyle,j=C===void 0?za:C,L=p.dropTargetClasses,z=L===void 0?[]:L,Z=p.transformDraggedElement,G=Z===void 0?function(){}:Z,V=p.centreDraggedOnCursor,P=V===void 0?!1:V,H=p.dropAnimationDisabled,B=H===void 0?!1:H,Y=p.delayTouchStart,K=Y===void 0?!1:Y;n.dropAnimationDurationMs=m;var N=0;K===!0?N=Qi:typeof K=="number"&&isFinite(K)&&K>=0&&(N=K),n.delayTouchStartMs=N,n.type&&y!==n.type&&Ga(e,n.type),n.type=y,n.items=Ye(g),n.dragDisabled=A,n.morphDisabled=I,n.transformDraggedElement=G,n.centreDraggedOnCursor=P,n.dropAnimationDisabled=B,r&&dt&&!_a&&(!Ii(j,n.dropTargetStyle)||!Si(z,n.dropTargetClasses))&&(_r([e],function(){return n.dropTargetStyle},function(){return z}),vr([e],function(){return j},function(){return z})),n.dropTargetStyle=j,n.dropTargetClasses=Ye(z);function U(te,ue){return xe.get(te)?xe.get(te)[ue]:n[ue]}r&&dt&&n.dropFromOthersDisabled!==D&&(D?_r([e],function(te){return U(te,"dropTargetStyle")},function(te){return U(te,"dropTargetClasses")}):vr([e],function(te){return U(te,"dropTargetStyle")},function(te){return U(te,"dropTargetClasses")})),n.dropFromOthersDisabled=D,xe.set(e,n),$i(e,y);for(var J=dt?jr(n.items):-1,ie=0;ie<e.children.length;ie++){var re=e.children[ie];if(Ui(re,A),ie===J){I||Hi(Se,re,Pe.x,Pe.y),n.transformDraggedElement(Se,Be,ie),Zi(re);continue}re.removeEventListener("mousedown",Yr.get(re)),re.removeEventListener("touchstart",Yr.get(re)),A||(re.addEventListener("mousedown",u),re.addEventListener("touchstart",u),Yr.set(re,u)),o.set(re,ie),r||(r=!0)}}return w(t),{update:function(f){w(f)},destroy:function(){function f(){Ga(e,xe.get(e).type),xe.delete(e)}dt&&!e.closest("[".concat(Wa,"]"))?ns(e,f):f()}}}var dr,oa={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Dn=(dr={},Rt(dr,oa.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),Rt(dr,oa.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),dr),ss="dnd-action-aria-alert",ke;function ia(){ke||(ke=document.createElement("div"),(function(){ke.id=ss,ke.style.position="fixed",ke.style.bottom="0",ke.style.left="0",ke.style.zIndex="-5",ke.style.opacity="0",ke.style.height="0",ke.style.width="0",ke.setAttribute("role","alert")})(),document.body.prepend(ke),Object.entries(Dn).forEach(function(e){var t=li(e,2),r=t[0],n=t[1];return document.body.prepend(cs(r,n))}))}function ls(){return ma?null:(document.readyState==="complete"?ia():window.addEventListener("DOMContentLoaded",ia),pr({},oa))}function ds(){ma||!ke||(Object.keys(Dn).forEach(function(e){var t;return(t=document.getElementById(e))===null||t===void 0?void 0:t.remove()}),ke.remove(),ke=void 0)}function cs(e,t){var r=document.createElement("div");return r.id=e,r.innerHTML="<p>".concat(t,"</p>"),r.style.display="none",r.style.position="fixed",r.style.zIndex="-5",r}function Nt(e){if(!ma){ke||ia(),ke.innerHTML="";var t=document.createTextNode(e);ke.appendChild(t),ke.style.display="none",ke.style.display="inline"}}var us="--any--",Va={outline:"rgba(255, 255, 102, 0.7) solid 2px"},He=!1,sa,Ne,kt="",_t,rt,ct="",yr=new WeakSet,Ha=new WeakMap,Ua=new WeakMap,la=new Map,je=new Map,Xe=new Map,wr;function vs(e,t){Xe.size===0&&(wr=ls(),window.addEventListener("keydown",An),window.addEventListener("click",En)),Xe.has(t)||Xe.set(t,new Set),Xe.get(t).has(e)||(Xe.get(t).add(e),fn())}function Za(e,t){Ne===e&&Qt(),Xe.get(t).delete(e),bn(),Xe.get(t).size===0&&Xe.delete(t),Xe.size===0&&(window.removeEventListener("keydown",An),window.removeEventListener("click",En),wr=void 0,ds())}function An(e){if(He)switch(e.key){case"Escape":{Qt();break}}}function En(){He&&(yr.has(document.activeElement)||Qt())}function fs(e){if(He){var t=e.currentTarget;if(t!==Ne){kt=t.getAttribute("aria-label")||"";var r=je.get(Ne),n=r.items,o=n.find(function(w){return w[Ee]===rt}),i=n.indexOf(o),s=n.splice(i,1)[0],b=je.get(t),v=b.items,u=b.autoAriaDisabled;t.getBoundingClientRect().top<Ne.getBoundingClientRect().top||t.getBoundingClientRect().left<Ne.getBoundingClientRect().left?(v.push(s),u||Nt("Moved item ".concat(ct," to the end of the list ").concat(kt))):(v.unshift(s),u||Nt("Moved item ".concat(ct," to the beginning of the list ").concat(kt)));var c=Ne;Lt(c,n,{trigger:Le.DROPPED_INTO_ANOTHER,id:rt,source:ze.KEYBOARD}),Lt(t,v,{trigger:Le.DROPPED_INTO_ZONE,id:rt,source:ze.KEYBOARD}),Ne=t}}}function On(){la.forEach(function(e,t){var r=e.update;return r(je.get(t))})}function Qt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;je.get(Ne).autoAriaDisabled||Nt("Stopped dragging item ".concat(ct)),yr.has(document.activeElement)&&document.activeElement.blur(),e&&ft(Ne,je.get(Ne).items,{trigger:Le.DRAG_STOPPED,id:rt,source:ze.KEYBOARD}),_r(Xe.get(sa),function(t){return je.get(t).dropTargetStyle},function(t){return je.get(t).dropTargetClasses}),_t=null,rt=null,ct="",sa=null,Ne=null,kt="",He=!1,On()}function bs(e,t){var r={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Va,dropTargetClasses:[],autoAriaDisabled:!1};function n(c,w,p){c.length<=1||c.splice(p,1,c.splice(w,1,c[p])[0])}function o(c){switch(c.key){case"Enter":case" ":{if((c.target.disabled!==void 0||c.target.href||c.target.isContentEditable)&&!yr.has(c.target))return;c.preventDefault(),c.stopPropagation(),He?Qt():i(c);break}case"ArrowDown":case"ArrowRight":{if(!He)return;c.preventDefault(),c.stopPropagation();var w=je.get(e),p=w.items,f=Array.from(e.children),g=f.indexOf(c.currentTarget);g<f.length-1&&(r.autoAriaDisabled||Nt("Moved item ".concat(ct," to position ").concat(g+2," in the list ").concat(kt)),n(p,g,g+1),Lt(e,p,{trigger:Le.DROPPED_INTO_ZONE,id:rt,source:ze.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!He)return;c.preventDefault(),c.stopPropagation();var x=je.get(e),m=x.items,_=Array.from(e.children),y=_.indexOf(c.currentTarget);y>0&&(r.autoAriaDisabled||Nt("Moved item ".concat(ct," to position ").concat(y," in the list ").concat(kt)),n(m,y,y-1),Lt(e,m,{trigger:Le.DROPPED_INTO_ZONE,id:rt,source:ze.KEYBOARD}));break}}}function i(c){b(c.currentTarget),Ne=e,sa=r.type,He=!0;var w=Array.from(Xe.get(r.type)).filter(function(f){return f===Ne||!je.get(f).dropFromOthersDisabled});if(vr(w,function(f){return je.get(f).dropTargetStyle},function(f){return je.get(f).dropTargetClasses}),!r.autoAriaDisabled){var p="Started dragging item ".concat(ct,". Use the arrow keys to move it within its list ").concat(kt);w.length>1&&(p+=", or tab to another list in order to move the item into it"),Nt(p)}ft(e,je.get(e).items,{trigger:Le.DRAG_STARTED,id:rt,source:ze.KEYBOARD}),On()}function s(c){He&&c.currentTarget!==_t&&(c.stopPropagation(),Qt(!1),i(c))}function b(c){var w=je.get(e),p=w.items,f=Array.from(e.children),g=f.indexOf(c);_t=c,_t.tabIndex=r.zoneItemTabIndex,rt=p[g][Ee],ct=f[g].getAttribute("aria-label")||""}function v(c){var w=c.items,p=w===void 0?[]:w,f=c.type,g=f===void 0?us:f,x=c.dragDisabled,m=x===void 0?!1:x,_=c.zoneTabIndex,y=_===void 0?0:_,k=c.zoneItemTabIndex,A=k===void 0?0:k,S=c.dropFromOthersDisabled,I=S===void 0?!1:S,T=c.dropTargetStyle,D=T===void 0?Va:T,C=c.dropTargetClasses,j=C===void 0?[]:C,L=c.autoAriaDisabled,z=L===void 0?!1:L;r.items=Ye(p),r.dragDisabled=m,r.dropFromOthersDisabled=I,r.zoneTabIndex=y,r.zoneItemTabIndex=A,r.dropTargetStyle=D,r.dropTargetClasses=j,r.autoAriaDisabled=z,r.type&&g!==r.type&&Za(e,r.type),r.type=g,vs(e,g),z||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",m?wr.DND_ZONE_DRAG_DISABLED:wr.DND_ZONE_ACTIVE)),je.set(e,r),He?e.tabIndex=e===Ne||_t.contains(e)||r.dropFromOthersDisabled||Ne&&r.type!==je.get(Ne).type?-1:0:e.tabIndex=r.zoneTabIndex,e.addEventListener("focus",fs);for(var Z=function(P){var H=e.children[P];yr.add(H),H.tabIndex=He?-1:r.zoneItemTabIndex,z||H.setAttribute("role","listitem"),H.removeEventListener("keydown",Ha.get(H)),H.removeEventListener("click",Ua.get(H)),m||(H.addEventListener("keydown",o),Ha.set(H,o),H.addEventListener("click",s),Ua.set(H,s)),He&&r.items[P][Ee]===rt&&(_t=H,_t.tabIndex=r.zoneItemTabIndex,H.focus())},G=0;G<e.children.length;G++)Z(G)}v(t);var u={update:function(w){v(w)},destroy:function(){Za(e,r.type),je.delete(e),la.delete(e)}};return la.set(e,u),u}var gs=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function In(e,t){if(ps(e))return{update:function(){},destroy:function(){}};Ya(t);var r=is(e,t),n=bs(e,t);return{update:function(i){Ya(i),r.update(i),n.update(i)},destroy:function(){r.destroy(),n.destroy()}}}function ps(e){return!!e.closest("[".concat(wi,'="true"]'))}function Ya(e){var t=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var r=e.zoneTabIndex,n=e.zoneItemTabIndex;e.dropTargetStyle;var o=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var i=e.delayTouchStart;e.dropAnimationDisabled;var s=si(e,gs);if(Object.keys(s).length>0&&console.warn("dndzone will ignore unknown options",s),!t)throw new Error("no 'items' key provided to dndzone");var b=t.find(function(c){return!{}.hasOwnProperty.call(c,Ee)});if(b)throw new Error("missing '".concat(Ee,"' property for item ").concat(Ut(b)));if(o&&!Array.isArray(o))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(jt(o),", ").concat(Ut(o)));if(r&&!qa(r))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(jt(r),", ").concat(Ut(r)));if(n&&!qa(n))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(jt(n),", ").concat(Ut(n)));if(i!==void 0&&i!==!1){var v=i===!0,u=typeof i=="number"&&isFinite(i)&&i>=0;if(!v&&!u)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(jt(i),", ").concat(Ut(i)))}}function qa(e){return!isNaN(e)&&(function(t){return(t|0)===t})(parseFloat(e))}function ms(e){const t=e-1;return t*t*t+1}function Mr(e){return--e*e*e*e*e+1}function Wt(e,{from:t,to:r},n={}){var{delay:o=0,duration:i=I=>Math.sqrt(I)*120,easing:s=ms}=n,b=getComputedStyle(e),v=b.transform==="none"?"":b.transform,[u,c]=b.transformOrigin.split(" ").map(parseFloat);u/=e.clientWidth,c/=e.clientHeight;var w=hs(e),p=e.clientWidth/r.width/w,f=e.clientHeight/r.height/w,g=t.left+t.width*u,x=t.top+t.height*c,m=r.left+r.width*u,_=r.top+r.height*c,y=(g-m)*p,k=(x-_)*f,A=t.width/r.width,S=t.height/r.height;return{delay:o,duration:typeof i=="function"?i(Math.sqrt(y*y+k*k)):i,easing:s,css:(I,T)=>{var D=T*y,C=T*k,j=I+T*A,L=I+T*S;return`transform: ${v} translate(${D}px, ${C}px) scale(${j}, ${L});`}}}function hs(e){if("currentCSSZoom"in e)return e.currentCSSZoom;for(var t=e,r=1;t!==null;)r*=+getComputedStyle(t).zoom,t=t.parentElement;return r}var _s=R("<span> </span>");function kr(e,t){ye(t,!0);const r={regular:{sev1:"bg-purple-500/20 text-purple-400",sev2:"bg-teal-500/20 text-teal-400",sev3:"bg-sky-500/20 text-sky-400"},maintenance:{sev1:"bg-rose-400/20 text-rose-400",sev2:"bg-lime-500/20 text-lime-400",sev3:"bg-slate-400/20 text-slate-400"}},n=q(()=>Ko[t.type][t.level]),o=q(()=>r[t.type][t.level]||"bg-slate-400/20 text-slate-400");var i=_s(),s=d(i,!0);l(i),oe(()=>{Q(i,1,`inline-flex items-center px-2 py-0.5 rounded font-medium text-2xs tracking-wide ${a(o)??""}`),F(s,a(n))}),O(e,i),we()}var xs=R("<span> </span>");function Bt(e,t){var r=xs(),n=d(r,!0);l(r),oe(()=>{Q(r,1,`inline-flex items-center px-2 py-0.5 rounded font-medium text-2xs tracking-wide ${t.classes??""}`),F(n,t.label)}),O(e,r)}var ys=R('<div class="flex items-center gap-2 p-2 bg-base-200 border border-primary/30 rounded-lg cursor-grab active:cursor-grabbing"><div class="text-2xl"> </div> <div class="flex-1 min-w-0"><p class="text-sm text-base-content truncate"> </p></div> <div><!></div></div>'),ws=R('<div class="flex flex-col gap-2"></div>'),ks=R('<div tabindex="0" role="button"><div class="flex items-start p-3"><div class="flex-1 min-w-0"><div class="flex flex-col gap-3"><p class="text-sm text-base-content"><span class="text-base"> </span> </p> <div class="h-1 bg-base-300/50"><div></div></div> <p class="text-xs gap-1 flex items-center"><!> <!> <!></p></div></div> <button type="button" class="w-7 h-7 flex items-center justify-center rounded text-base-content/30 hover:text-error hover:bg-error/10 transition-colors" title="Remove from week">âœ•</button></div></div>'),Ts=R('<div class="flex flex-col gap-2"></div>'),Ds=R('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No projects assigned to this week</p> <p class="text-base-content/30 text-xs">Go to Areas and assign projects</p></div>'),As=R('<div class="flex flex-col "><!></div>');function Es(e,t){ye(t,!0);const r=200;let n=q(()=>t.assignedProjects.map(f=>({...f,id:f.project.id}))),o=ee(Ze([]));it(()=>{E(o,a(n),!0)});async function i(f,g){f.stopPropagation(),await ln(g,t.currentWeekOf)}function s(f){const g=yt.getByProject(f),x=g.filter(_=>!["completed","cancelled"].includes(_.status)).length,m=g.filter(_=>["completed","cancelled"].includes(_.status)).length;return{active:x,completed:m,total:x+m}}function b(f){E(o,f.detail.items,!0)}function v(f){E(o,f.detail.items,!0);const{info:g}=f.detail,x=g.id,m=a(o).findIndex(S=>S.id===x);if(m===-1)return;const _=m>0?a(o)[m-1]:null,y=m<a(o).length-1?a(o)[m+1]:null;let k=null,A=null;if(_){const S=a(n).findIndex(I=>I.id===_.id);k=_.assignment.order,A=S<a(n).length-1?a(n)[S+1].assignment.order:null}else if(y){const S=a(n).findIndex(I=>I.id===y.id);k=S>0?a(n)[S-1].assignment.order:null,A=y.assignment.order}xo(t.currentWeekOf,x,k,A)}var u=As(),c=d(u);{var w=f=>{var g=be(),x=le(g);{var m=y=>{var k=ws();Te(k,29,()=>a(o),({id:A,project:S,area:I})=>A,(A,S)=>{let I=()=>a(S).project,T=()=>a(S).area;var D=ys(),C=d(D),j=d(C,!0);l(C);var L=h(C,2),z=d(L),Z=d(z,!0);l(z),l(L);var G=h(L,2),V=d(G);kr(V,{get level(){return I().severity},get type(){return I().type}}),l(G),l(D),oe(()=>{F(j,T().icon),F(Z,I().name)}),zt(D,()=>Wt,()=>({duration:r})),O(A,D)}),l(k),fa(k,(A,S)=>In?.(A,S),()=>({items:a(o),flipDurationMs:r,dropTargetStyle:{}})),xt("consider",k,b),xt("finalize",k,v),O(y,k)},_=y=>{var k=Ts();Te(k,21,()=>a(n),We,(A,S)=>{let I=()=>a(S).project,T=()=>a(S).area;const D=q(()=>s(I().id)),C=q(()=>a(D).total>0?a(D).completed/a(D).total*100:0);var j=ks();j.__click=()=>t.navigateToTasks(I());var L=d(j),z=d(L),Z=d(z),G=d(Z),V=d(G),P=d(V,!0);l(V);var H=h(V);l(G);var B=h(G,2),Y=d(B);l(B);var K=h(B,2),N=d(K);kr(N,{get level(){return I().severity},get type(){return I().type}});var U=h(N,2);{let re=q(()=>a(D).active==0?"text-error bg-error/10 border-error/10 border":"bg-base-100 text-base-content/50");Bt(U,{get classes(){return a(re)},get label(){return`${a(D).active??""} available`}})}var J=h(U,2);Bt(J,{classes:"bg-base-100 text-base-content/50",get label(){return T().name}}),l(K),l(Z),l(z);var ie=h(z,2);ie.__click=re=>i(re,I().id),l(L),l(j),oe(()=>{Q(j,1,`bg-base-200 rounded-lg hover:bg-base-100 cursor-pointer overflow-hidden ${I().status=="blocked"?"glow-error":""} `),F(P,T().icon),F(H,` ${I().name??""}`),Q(Y,1,`h-full ${I().status=="cancelled"?"bg-base-100":I().status=="completed"?"bg-success/80":"bg-primary"} transition-all`),ba(Y,`width: ${a(C)??""}%`)}),O(A,j)}),l(k),O(y,k)};$(x,y=>{t.reorderMode?y(m):y(_,!1)})}O(f,g)},p=f=>{var g=Ds();O(f,g)};$(c,f=>{a(o).length>0?f(w):f(p,!1)})}l(u),O(e,u),we()}De(["click"]);var Os=R('<button><div class="flex-1 min-w-0 "><p class="text-sm text-base-content truncate mb-1"> </p> <div class="flex flex-row items-center justify-between"><p class="text-xs text-muted"> </p> <!></div></div></button>'),Is=R('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No tasks available</p> <p class="text-base-content/30 text-xs">Assigned projects have no active tasks</p></div>'),Ss=R('<div class="flex flex-col gap-2"></div>');function Cs(e,t){ye(t,!0);var r=Ss();Te(r,21,()=>t.weekTasks,We,(n,o)=>{const i=q(()=>t.isTaskAssignedToDay(a(o).id));var s=Os();s.__click=m=>t.openDayPicker(m,a(o));var b=d(s),v=d(b),u=d(v,!0);l(v);var c=h(v,2),w=d(c),p=d(w);l(w);var f=h(w,2);{var g=m=>{{let _=q(()=>a(o).status=="cancelled"?"bg-base-100 text-base-content/80 border-base-content/80":"bg-success/10 text-success border-success"),y=q(()=>yo(a(o).completedAt.split(" ")[0]));Bt(m,{get classes(){return a(_)},get label(){return a(y)}})}},x=m=>{var _=be(),y=le(_);{var k=A=>{{let S=q(()=>sn(a(i)));Bt(A,{classes:"bg-primary/10 text-primary border-primary",get label(){return a(S)}})}};$(y,A=>{a(i)&&A(k)},!0)}O(m,_)};$(f,m=>{a(o).completedAt?m(g):m(x,!1)})}l(c),l(b),l(s),oe(()=>{Q(s,1,`${a(o).status=="blocked"?"glow-error":""} text-start flex items-center gap-3 p-3 bg-base-200 rounded-lg hover:bg-base-100 cursor-pointer`),F(u,a(o).name),F(p,`${a(o).areaIcon??""} ${(a(o).type==="oneoff"?"One-off":a(o).projectName)??""}`)}),O(n,s)},n=>{var o=Is();O(n,o)}),l(r),O(e,r),we()}De(["click"]);let qr=Ze({});class da{scrollTimeout;#e=ee();get scrollContainer(){return a(this.#e)}set scrollContainer(t){E(this.#e,t,!0)}pageKey="default"+Math.random();get positions(){return qr}save(t,r){qr[t]=r}get(t){return qr[t]||0}handleScroll=()=>{clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.scrollContainer&&this.save(this.pageKey,this.scrollContainer.scrollTop)},100)};restoreScroll=async(t,r)=>{if(await rn(),this.scrollContainer=t,this.pageKey=r,this.scrollContainer){const n=this.get(this.pageKey);n&&(this.scrollContainer.scrollTop=n)}}}var js=R('<button aria-label="edit"><svg viewBox="0 0 24 24" class="size-4" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M2 11h21V6H2zm1-4h19v3H3zM2 18h21v-5H2zm1-4h19v3H3zm7 6h5l-2.5 2.574zm0-16l2.5-2.574L15 4z"></path><path fill="none" d="M0 0h24v24H0z"></path></g></svg> </button>'),Ms=R('<button type="button"><span>Pending</span></button> <button type="button"><span>Resolved</span></button>',1),Ps=R('<button type="button"><span>Pending</span></button> <button type="button"><span>Resolved</span></button>',1),Ns=R('<div class="flex flex-col h-full"><div class="bg-base-300 ps-4 pe-2 pt-1 pb-0 flex flex-col gap-4 border-b border-b-base-content/10"><div class="flex flex-row justify-between items-center"><div class="text-center w-full"><h2 class="text-lg font-medium">This Week</h2> <p class="text-xs text-base-content/50"> </p></div></div> <div class="flex items-center justify-between h-8"><div class="flex gap-1"><button>Projects</button> <button>Tasks</button></div> <!></div></div> <div class="px-4 py-2 border-b flex justify-end border-b-base-content/10 gap-4"><!></div> <div><!></div> <div><!></div></div> <!>',1);function Rs(e,t){ye(t,!0);let r,n;const o=new da,i=new da;an(()=>{o.restoreScroll(r,"weekview_projects"),i.restoreScroll(n,"weekview_tasks")});let s=ee(!1),b=()=>E(s,!a(s)),v=ee(Ze(localStorage.getItem("weekTabFilterModeProjects")||"pending"));it(()=>{a(v)&&localStorage.setItem("weekTabFilterModeProjects",a(v))});let u=ee(Ze(localStorage.getItem("weekTabFilterModeTasks")||"pending"));it(()=>{a(u)&&localStorage.setItem("weekTabFilterModeTasks",a(u))});let c=ee(Ze(localStorage.getItem("weekTabView")||"projects"));it(()=>{a(c)&&localStorage.setItem("weekTabView",a(c))});let w=Ze(Tt());const p=q(()=>vt.getWeek(w));let f;function g(M){return a(p)?a(p).tasksByDay.find(ae=>ae.taskId===M)?.date??null:null}let x=q(()=>a(p)?a(p).projectAssignments.map(M=>{const W=ot.getById(M.areaId);if(!W)return null;const ne=wt.getByArea(W.id).find(se=>se.id===M.projectId);return ne?{assignment:M,project:ne,area:W}:null}).filter(M=>M!==null):[]),m=q(()=>a(x).filter(M=>a(v)=="resolved"?["completed","cancelled"].includes(M.project.status):!["completed","cancelled"].includes(M.project.status))),_=q(()=>{const M=[];for(const{project:W,area:ae}of a(x)){const ne=yt.getByProject(W.id);for(const se of ne)M.push({type:"task",id:se.id,name:se.name,status:se.status,areaIcon:ae.icon,areaName:ae.name,projectName:W.name,areaId:ae.id,projectId:W.id,completedAt:se.completedAt})}if(a(p))for(const W of a(p).oneOffAssignments){const ae=Mt.getById(W.oneOffId);if(!ae)continue;const ne=ot.getById(W.areaId);ne&&M.push({type:"oneoff",id:ae.id,name:ae.name,status:ae.status,areaIcon:ne.icon,areaName:ne.name,projectName:"One-off",areaId:ne.id,projectId:"",completedAt:ae.completedAt})}return M});const y=q(()=>nn(w)),k=q(()=>a(y)[0]),A=q(()=>a(y)[6]);let S=q(()=>a(_).filter(M=>{if(a(u)=="resolved"){if(!M.completedAt)return!1;const W=M.completedAt.split("T")[0];return W>=a(k)&&W<=a(A)}return!["completed","cancelled"].includes(M.status)}).sort((M,W)=>a(u)=="resolved"?(W.completedAt??"").localeCompare(M.completedAt??""):0));var I=Ns(),T=le(I),D=d(T),C=d(D),j=d(C),L=h(d(j),2),z=d(L,!0);l(L),l(j),l(C);var Z=h(C,2),G=d(Z),V=d(G);V.__click=()=>E(c,"projects");var P=h(V,2);P.__click=()=>E(c,"tasks"),l(G);var H=h(G,2);{var B=M=>{var W=js();W.__click=b;var ae=h(d(W));l(W),oe(()=>{Q(W,1,`btn mb-2 ${a(s)?"btn-success":"btn-ghost"} btn-xs`),F(ae,` ${a(s)?"Done":"Reorder"}`)}),O(M,W)};$(H,M=>{a(c)=="projects"&&a(m).length>1&&M(B)})}l(Z),l(D);var Y=h(D,2),K=d(Y);{var N=M=>{var W=Ms(),ae=le(W);ae.__click=()=>E(v,"pending");var ne=h(ae,2);ne.__click=()=>E(v,"resolved"),oe(()=>{Q(ae,1,`${a(v)=="pending"?"bg-primary/20 text-primary":"text-muted"} px-3 py-1 rounded text-xs cursor-pointer `),Q(ne,1,`${a(v)=="resolved"?"bg-success/20 text-success":"text-muted"} px-3 py-1 rounded text-xs cursor-pointer `)}),O(M,W)},U=M=>{var W=Ps(),ae=le(W);ae.__click=()=>E(u,"pending");var ne=h(ae,2);ne.__click=()=>E(u,"resolved"),oe(()=>{Q(ae,1,`${a(u)=="pending"?"bg-primary/20 text-primary":"text-muted"} px-3 py-1 rounded text-xs cursor-pointer `),Q(ne,1,`${a(u)=="resolved"?"bg-success/20 text-success":"text-muted"} px-3 py-1 rounded text-xs cursor-pointer `)}),O(M,W)};$(K,M=>{a(c)=="projects"?M(N):M(U,!1)})}l(Y);var J=h(Y,2),ie=d(J);{var re=M=>{Es(M,{get reorderMode(){return a(s)},get navigateToTasks(){return t.navigateToTasks},get currentWeekOf(){return w},get assignedProjects(){return a(m)}})};$(ie,M=>{a(c)==="projects"&&M(re)})}l(J),Re(J,M=>r=M,()=>r);var te=h(J,2),ue=d(te);{var de=M=>{Cs(M,{get openDayPicker(){return f.openDayPicker},get weekTasks(){return a(S)},isTaskAssignedToDay:g})};$(ue,M=>{a(c)=="tasks"&&M(de)})}l(te),Re(te,M=>n=M,()=>n),l(T);var me=h(T,2);Re(oi(me,{get currentWeekOf(){return w},isTaskAssignedToDay:g}),M=>f=M,()=>f),oe((M,W)=>{F(z,M),Q(V,1,`capitalize px-3 py-2 border-b border-b-2 text-xs tracking-wider rounded-t-sm transition-colors cursor-pointer whitespace-nowrap ${a(c)=="projects"?"border-primary bg-base-100 ":"border-transparent hover:border-base-100 text-muted hover:text-base-content hover:bg-base-100 "}`),Q(P,1,`capitalize px-3 py-2 border-b border-b-2 text-xs tracking-wider rounded-t-sm transition-colors cursor-pointer whitespace-nowrap ${a(c)=="tasks"?"border-primary bg-base-100 ":"border-transparent hover:border-base-100 text-muted hover:text-base-content hover:bg-base-100 "}`),Q(J,1,`${W??""} flex-1 overflow-y-auto px-3 py-4`),Q(te,1,`${a(c)=="tasks"?"":"hidden"} flex-1 overflow-y-auto px-3 py-4`)},[()=>wo(w),()=>a(c).match(/projects/)?"":"hidden"]),xt("scroll",J,function(...M){o.handleScroll?.apply(this,M)}),xt("scroll",te,function(...M){i.handleScroll?.apply(this,M)}),O(e,I),we()}De(["click"]);var Ls=R('<p class="text-sm italic text-base-content/30 text-center py-2">No follow-ups added</p>'),Fs=R('<div class="flex items-center gap-1"><input type="text" class="input input-bordered flex-1 focus:outline-none focus:border-primary" placeholder="Follow-up task name..."/> <button type="button" class="btn btn-ghost btn-sm btn-square text-error">âœ•</button></div>'),Bs=R('<div class="flex flex-col gap-2"></div>'),zs=R('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 " role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-300 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="p-4 pb-3 border-b border-base-content/10 flex flex-col gap-2"><p class="font-medium text-base-content"> </p> <p class="text-xs text-base-content/50"> </p> <div><button type="button" class="flex rounded-lg text-error bg-error/10 cursor-pointer px-2 py-1 text-xs " title="Remove from the day">Unassign</button></div></div> <div class="py-4 px-3 space-y-4"><div><p class="text-xs uppercase tracking-wider text-base-content/50 mb-2">What happened?</p> <div class="join w-full"><label><input type="radio" name="action" class="hidden"/> <span class="text-xs">Active</span></label> <label><input type="radio" name="action" class="hidden"/> <span class="text-xs">Blocked</span></label> <label><input type="radio" name="action" class="hidden"/> <span class="text-xs">Cancelled</span></label> <label><input type="radio" name="action" class="hidden"/> <span class="text-xs">Completed</span></label></div></div> <div><div class="flex items-center justify-between mb-2"><p class="text-xs uppercase tracking-wider text-base-content/50">Follow-up tasks</p> <button type="button" class="btn btn-sm btn-ghost text-primary">+ Add</button></div> <!></div></div> <div class="flex gap-3 p-4 pb-10 border-t border-base-content/10"><button type="button" class="btn btn-ghost btn-sm flex-1">Cancel</button> <button type="button" class="btn btn-primary btn-sm flex-1">Done</button></div></div></div>');function Ws(e,t){ye(t,!0);const r=[];let n=ee("completed"),o=ee(Ze([]));it(()=>{t.show&&(E(n,t.taskByDay?.status||"completed",!0),E(o,[],!0))});function i(f,g){g&&setTimeout(()=>f.focus(),0)}function s(){E(o,[...a(o),""],!0)}function b(f){E(o,a(o).filter((g,x)=>x!==f),!0)}function v(f,g){E(o,a(o).map((x,m)=>m===f?g:x),!0)}async function u(){if(t.taskByDay){t.taskByDay.isOneOff?await Jr(t.taskByDay.taskId,t.taskByDay.areaId,a(n)):await Qr(t.taskByDay.taskId,t.taskByDay.projectId,a(n));for(const f of a(o))f.trim()&&await $r(t.taskByDay.projectId,t.taskByDay.areaId,f.trim());t.onClose()}}var c=be(),w=le(c);{var p=f=>{var g=zs(),x=d(g);x.__click=function(...de){t.onClose?.apply(this,de)},x.__keydown=de=>de.key==="Escape"&&t.onClose();var m=h(x,2),_=d(m),y=d(_),k=d(y,!0);l(y);var A=h(y,2),S=d(A);l(A);var I=h(A,2),T=d(I);T.__click=()=>{t.removeFromDay(t.taskByDay),t.onClose()},l(I),l(_);var D=h(_,2),C=d(D),j=h(d(C),2),L=d(j),z=d(L);Ke(z),z.value=z.__value="active",ir(2),l(L);var Z=h(L,2),G=d(Z);Ke(G),G.value=G.__value="blocked",ir(2),l(Z);var V=h(Z,2),P=d(V);Ke(P),P.value=P.__value="cancelled",ir(2),l(V);var H=h(V,2),B=d(H);Ke(B),B.value=B.__value="completed",ir(2),l(H),l(j),l(C);var Y=h(C,2),K=d(Y),N=h(d(K),2);N.__click=s,l(K);var U=h(K,2);{var J=de=>{var me=Ls();O(de,me)},ie=de=>{var me=Bs();Te(me,21,()=>a(o),We,(M,W,ae)=>{var ne=Fs(),se=d(ne);Ke(se),se.__input=Ce=>v(ae,Ce.currentTarget.value),fa(se,(Ce,ve)=>i?.(Ce,ve),()=>ae===a(o).length-1);var pe=h(se,2);pe.__click=()=>b(ae),l(ne),oe(()=>ko(se,a(W))),O(M,ne)}),l(me),O(de,me)};$(U,de=>{a(o).length===0?de(J):de(ie,!1)})}l(Y),l(D);var re=h(D,2),te=d(re);te.__click=function(...de){t.onClose?.apply(this,de)};var ue=h(te,2);ue.__click=u,l(re),l(m),l(g),oe(()=>{F(k,t.taskByDay.name),F(S,`${t.areaIcon??""} ${t.areaName??""} Â· ${t.projectName??""}`),Q(L,1,`join-item flex-1 flex items-center justify-center gap-1 p-2 border border-base-content/10 cursor-pointer ${a(n)==="active"?"bg-primary/10 border-primary":""}`),Q(Z,1,`join-item flex-1 flex items-center justify-center gap-1 p-2 border border-base-content/10 cursor-pointer ${a(n)==="blocked"?"bg-error/10 border-error":""}`),Q(V,1,`join-item flex-1 flex items-center justify-center gap-1 p-2 border border-base-content/10 cursor-pointer ${a(n)==="cancelled"?"bg-base-content/10 border-base-content/40":""}`),Q(H,1,`join-item flex-1 flex items-center justify-center gap-1 p-2 border border-base-content/10 cursor-pointer ${a(n)==="completed"?"bg-success/10 border-success":""}`)}),Ge(3,x,()=>Dt,()=>({duration:200})),Ct(r,[],z,()=>a(n),de=>E(n,de)),Ct(r,[],G,()=>a(n),de=>E(n,de)),Ct(r,[],P,()=>a(n),de=>E(n,de)),Ct(r,[],B,()=>a(n),de=>E(n,de)),Ge(3,m,()=>At,()=>({y:300,duration:300})),O(f,g)};$(w,f=>{t.show&&t.taskByDay&&f(p)})}O(e,c),we()}De(["click","keydown","input"]);var Gs=R('<div class="flex items-center gap-2 p-2 bg-base-100 border border-primary/30 rounded-lg cursor-grab active:cursor-grabbing"><div class="text-base-content/30"><svg class="size-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path></svg></div> <div class="flex-1 min-w-0"><p class="text-sm text-base-content truncate "> </p></div></div>'),Vs=R('<div class="flex flex-col gap-2 mb-4"></div>'),Hs=R('<div><button type="button" aria-label="check" class="size-7 rounded-full border-2 border-base-content/30 flex items-center justify-center flex-shrink-0 hover:border-success hover:bg-success/10 transition-colors"></button> <div class="flex-1 min-w-0" tabindex="0" role="button"><p class="text-sm mb-2"> </p> <p class="text-xs text-base-content/50 truncate"> </p></div></div>'),Us=R('<div class="flex flex-col gap-2 mb-4"></div>'),Zs=R('<div class="text-center py-12"><span class="text-4xl block mb-3">ðŸ“‹</span> <p class="text-base-content/50 text-sm mb-2">No tasks for this day</p> <p class="text-base-content/30 text-xs">Go to Week tab and assign tasks</p></div>'),Ys=R('<div class="text-center mb-5 py-12 border-2 border-dashed border-success/30 rounded-lg bg-success/5"><span class="text-4xl block mb-3">ðŸŽ‰</span> <p class="text-sm font-medium text-success">All done for this day!</p> <p class="text-xs text-base-content/50 mt-1">Great work!</p></div>'),qs=bt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>'),Ks=bt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"></path></svg>'),Xs=R('<div class="flex items-center gap-3 p-3 opacity-50 "><button type="button" title="Mark as incomplete"><!></button> <div class="flex-1 min-w-0"><p class="text-sm text-base-content line-through truncate"> </p> <p class="text-xs text-base-content/50"> </p></div></div>'),Js=R('<div><p class="text-xs font-medium uppercase tracking-wider text-base-content/40 mb-2"> </p> <div class="flex flex-col gap-1"></div></div>'),Qs=R('<div class="flex flex-col h-full "><div class="flex flex-col gap-4 pt-1 pb-0 border-b border-base-content/10"><div class="flex flex-row justify-between items-center px-2"><button aria-label="prev" class="cursor-pointer size-5 m-2"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><polyline fill="none" stroke="currentColor" stroke-width="2" points="7 2 17 12 7 22" transform="matrix(-1 0 0 1 24 0)"></polyline></g></svg></button> <button class="cursor-pointer text-center w-full "><h2 class="text-lg font-medium"> </h2> <p class="text-xs text-muted"> </p></button> <button aria-label="next" class="cursor-pointer size-5 m-2"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="transform:rotate(180deg)" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><polyline fill="none" stroke="currentColor" stroke-width="2" points="7 2 17 12 7 22" transform="matrix(-1 0 0 1 24 0)"></polyline></g></svg></button></div> <div class="flex items-center px-2"><div class="flex-1"><div class="px-4 pb-3 flex flex-col"><div class="flex items-center justify-between text-xs text-muted mb-1"><span> </span> <span> </span></div> <div class="h-2 bg-base-100 rounded-full overflow-hidden"><div class="h-full bg-success/85 transition-all rounded-full"></div></div></div></div> <button aria-label="edit"><svg viewBox="0 0 24 24" class="size-4" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M2 11h21V6H2zm1-4h19v3H3zM2 18h21v-5H2zm1-4h19v3H3zm7 6h5l-2.5 2.574zm0-16l2.5-2.574L15 4z"></path><path fill="none" d="M0 0h24v24H0z"></path></g></svg> </button></div></div> <div class="flex-1 overflow-y-auto px-2 py-3"><!> <!></div></div> <!>',1);function $s(e,t){ye(t,!0);let r;const n=new da;an(()=>n.restoreScroll(r,"todayview"));const o=Tt(),i=200,s=()=>E(v,Do(a(u)),!0),b=()=>E(v,Ao(a(u)),!0);let v=ee(Ze(new Date));const u=q(()=>Eo(a(v)));let c=q(()=>{const X=vt.getWeek(o);return X?X.tasksByDay.filter(ce=>ce.date===a(u)).map(ce=>{if(ce.isOneOff){const Oe=Mt.getById(ce.taskId),he=ot.getById(ce.areaId);return{id:ce.taskId,taskByDay:ce,task:Oe,areaIcon:he?.icon??"ðŸ“",areaName:he?.name??"Unknown",projectName:"One-off"}}else{const Oe=yt.getById(ce.taskId),he=ot.getById(ce.areaId),_e=(he?wt.getByArea(he.id):[]).find(fe=>fe.id===ce.projectId);return{id:ce.taskId,taskByDay:ce,task:Oe,areaIcon:he?.icon??"ðŸ“",areaName:he?.name??"Unknown",projectName:_e?.name??"Unknown"}}}):[]}),w=q(()=>a(c)),p=q(()=>a(c).filter(X=>X.taskByDay.status!=="completed"&&X.taskByDay.status!=="cancelled")),f=q(()=>a(c).filter(X=>X.taskByDay.status==="completed"||X.taskByDay.status==="cancelled")),g=ee(!1),x=ee(null),m=ee(""),_=ee(""),y=ee(""),k=ee(!1);const A=()=>{E(k,!a(k))};let S=ee(Ze([]));it(()=>{E(S,a(p),!0)});let I=q(()=>{const X=a(f).length,ce=a(c).length,Oe=ce>0?X/ce*100:0;return{completed:X,total:ce,percent:Oe}});function T(X){E(S,X.detail.items,!0)}function D(X){E(S,X.detail.items,!0);const{info:ce}=X.detail,Oe=ce.id,he=a(S).findIndex(Ae=>Ae.id===Oe);if(he===-1)return;const qe=he>0?a(S)[he-1]:null,_e=he<a(S).length-1?a(S)[he+1]:null;let fe=null,Ie=null;if(qe){const Ae=a(w).findIndex(Ve=>Ve.id===qe.id);fe=qe.taskByDay.order,Ie=Ae<a(w).length-1?a(w)[Ae+1].taskByDay.order:null}else if(_e){const Ae=a(w).findIndex(Ve=>Ve.id===_e.id);fe=Ae>0?a(w)[Ae-1].taskByDay.order:null,Ie=_e.taskByDay.order}Oo(o,a(u),Oe,fe,Ie)}async function C(X){X.isOneOff?await Jr(X.taskId,X.areaId,"completed"):await Qr(X.taskId,X.projectId,"completed")}async function j(X){X.isOneOff?await Jr(X.taskId,X.areaId,"active"):await Qr(X.taskId,X.projectId,"active")}async function L(X){X.isOneOff?await cr(X.taskId,o,a(u)):await ur(X.taskId,X.projectId,o,a(u))}function z(X,ce,Oe,he){E(x,X,!0),E(m,ce,!0),E(_,Oe,!0),E(y,he,!0),E(g,!0)}function Z(){E(g,!1),E(x,null)}var G=Qs(),V=le(G),P=d(V),H=d(P),B=d(H);B.__click=b;var Y=h(B,2);Y.__click=()=>E(v,new Date,!0);var K=d(Y),N=d(K,!0);l(K);var U=h(K,2),J=d(U,!0);l(U),l(Y);var ie=h(Y,2);ie.__click=s,l(H);var re=h(H,2),te=d(re),ue=d(te),de=d(ue),me=d(de),M=d(me);l(me);var W=h(me,2),ae=d(W);l(W),l(de);var ne=h(de,2),se=d(ne);l(ne),l(ue),l(te);var pe=h(te,2);pe.__click=A;var Ce=h(d(pe));l(pe),l(re),l(P);var ve=h(P,2),st=d(ve);{var Pr=X=>{var ce=be(),Oe=le(ce);{var he=_e=>{var fe=Vs();Te(fe,29,()=>a(S),({id:Ie,taskByDay:Ae,areaIcon:Ve,projectName:Qe})=>Ie,(Ie,Ae)=>{let Ve=()=>a(Ae).taskByDay;var Qe=Gs(),Et=h(d(Qe),2),gt=d(Et),pt=d(gt,!0);l(gt),l(Et),l(Qe),oe(()=>F(pt,Ve().name)),zt(Qe,()=>Wt,()=>({duration:i})),O(Ie,Qe)}),l(fe),fa(fe,(Ie,Ae)=>In?.(Ie,Ae),()=>({items:a(S),flipDurationMs:i,dropTargetStyle:{}})),xt("consider",fe,T),xt("finalize",fe,D),O(_e,fe)},qe=_e=>{var fe=Us();Te(fe,21,()=>a(p),We,(Ie,Ae)=>{let Ve=()=>a(Ae).taskByDay,Qe=()=>a(Ae).areaIcon,Et=()=>a(Ae).areaName,gt=()=>a(Ae).projectName;const pt=q(()=>Ve().status=="blocked");var $e=Hs(),rr=d($e);rr.__click=()=>C(Ve());var Gt=h(rr,2);Gt.__click=()=>z(Ve(),Qe(),Et(),gt());var Vt=d(Gt),ar=d(Vt,!0);l(Vt);var Ot=h(Vt,2),Nr=d(Ot);l(Ot),l(Gt),l($e),oe(()=>{Q($e,1,`flex items-start gap-2 p-3 bg-base-200 rounded-lg hover:bg-base-100 cursor-pointer ${a(pt)?"glow-error":""}`),F(ar,Ve().name),F(Nr,`${Qe()??""}  ${gt()??""}`)}),O(Ie,$e)}),l(fe),O(_e,fe)};$(Oe,_e=>{a(k)?_e(he):_e(qe,!1)})}O(X,ce)},Mn=X=>{var ce=be(),Oe=le(ce);{var he=_e=>{var fe=Zs();O(_e,fe)},qe=_e=>{var fe=Ys();O(_e,fe)};$(Oe,_e=>{a(I).total===0?_e(he):_e(qe,!1)},!0)}O(X,ce)};$(st,X=>{a(S).length>0?X(Pr):X(Mn,!1)})}var Pn=h(st,2);{var Nn=X=>{var ce=Js(),Oe=d(ce),he=d(Oe);l(Oe);var qe=h(Oe,2);Te(qe,21,()=>a(f),We,(_e,fe)=>{let Ie=()=>a(fe).taskByDay,Ae=()=>a(fe).areaIcon,Ve=()=>a(fe).areaName,Qe=()=>a(fe).projectName;const Et=q(()=>Ie().status==="completed"),gt=q(()=>Ie().status==="cancelled");var pt=Xs(),$e=d(pt);$e.__click=()=>j(Ie());var rr=d($e);{var Gt=It=>{var nr=qs();O(It,nr)},Vt=It=>{var nr=be(),Fn=le(nr);{var Bn=Rr=>{var zn=Ks();O(Rr,zn)};$(Fn,Rr=>{Ie().status==="cancelled"&&Rr(Bn)},!0)}O(It,nr)};$(rr,It=>{Ie().status==="completed"?It(Gt):It(Vt,!1)})}l($e);var ar=h($e,2),Ot=d(ar),Nr=d(Ot,!0);l(Ot);var ya=h(Ot,2),Ln=d(ya);l(ya),l(ar),l(pt),oe(()=>{Q($e,1,`w-7 h-7 rounded-full ${a(Et)?"bg-success border-success text-success-content":a(gt)?"bg-error border-error text-error-content":"border-base-content/30 hover:border-success"} border-2 flex items-center justify-center flex-shrink-0`),F(Nr,Ie().name),F(Ln,`${Ae()??""} ${Ve()??""} Â· ${Qe()??""}`)}),O(_e,pt)}),l(qe),l(ce),oe(()=>F(he,`Completed (${a(f).length??""})`)),O(X,ce)};$(Pn,X=>{a(f).length>0&&!a(k)&&X(Nn)})}l(ve),Re(ve,X=>r=X,()=>r),l(V);var Rn=h(V,2);Ws(Rn,{get show(){return a(g)},get taskByDay(){return a(x)},removeFromDay:L,get areaIcon(){return a(m)},get areaName(){return a(_)},get projectName(){return a(y)},get weekOf(){return o},onClose:Z}),oe((X,ce)=>{F(N,X),F(J,a(u)),F(M,`${a(I).completed??""} of ${a(I).total??""} completed`),F(ae,`${ce??""}%`),ba(se,`width: ${a(I).percent??""}%`),Q(pe,1,`btn w-20 ${a(k)?"btn-success":"btn-ghost"} btn-xs`),F(Ce,` ${a(k)?"Done":"Reorder"}`)},[()=>on(a(u))?"Today":To(a(u)),()=>Math.round(a(I).percent)]),xt("scroll",ve,function(...X){n.handleScroll?.apply(this,X)}),O(e,G),we()}De(["click"]);const Kr=["reorder","status"],Sn=[{value:"active",label:"Active"},{value:"blocked",label:"Blocked"},{value:"cancelled",label:"Cancelled"},{value:"completed",label:"Completed"}];var el=R('<button class="rounded-lg border border-dashed min-h-30 border-base-content/20 bg-transparent hover:bg-primary/20 transition-colors cursor-pointer w-full"><div class="card-body p-3 items-center justify-center text-center min-h-[88px]"><span class="text-xl text-base-content/50">+</span> <span class="text-xs text-base-content/50">Add Area</span></div></button>');function tl(e,t){var r=el();r.__click=function(...n){t.handleClick?.apply(this,n)},O(e,r)}De(["click"]);var rl=R('<button type="button"> </button>'),al=R('<button type="button" class="btn btn-outline btn-error btn-sm" title="Archive">Archive</button>'),nl=R('<button type="button" class="btn btn-outline btn-primary btn-sm">Unarchive</button>'),ol=R('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-300 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-4 flex flex-col"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Icon</label> <div class="h-40 overflow-y-auto rounded-lg border border-base-content/10 p-2"><div class="grid grid-cols-8 gap-1"></div></div></div> <div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Health, Work, Learning"/></div></div> <div class="flex gap-3 p-4 pb-10 border-t border-base-content/10"><!> <div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function Cn(e,t){ye(t,!0);let r=ee(!1),n=ee(null),o=ee(""),i=ee("ðŸŽ¯"),s;function b(){E(n,null),E(o,""),E(i,"ðŸŽ¯"),E(r,!0),setTimeout(()=>s.focus(),100)}function v(_,y){_.stopPropagation(),E(n,y,!0),E(o,y.name,!0),E(i,y.icon,!0),E(r,!0),setTimeout(()=>s.focus(),100)}function u(){E(r,!1),E(n,null)}async function c(){!a(o).trim()||!a(i)||(a(n)?(await Io(a(n).index,{name:a(o).trim(),icon:a(i)}),a(n).name=a(o).trim(),a(n).icon=a(i)):await So(a(o).trim(),a(i)),u())}async function w(){a(n)&&(await Co(a(n).index),u())}async function p(){a(n)&&(await jo(a(n).index),u())}var f={openCreateAreaModal:b,openEditAreaModal:v},g=be(),x=le(g);{var m=_=>{var y=ol(),k=d(y);k.__click=u,k.__keydown=N=>N.key==="Escape"&&u();var A=h(k,2),S=d(A),I=d(S),T=d(I,!0);l(I);var D=h(I,2);D.__click=u,l(S);var C=h(S,2),j=d(C),L=h(d(j),2),z=d(L);Te(z,21,()=>Xo,We,(N,U)=>{var J=rl();J.__click=()=>E(i,a(U),!0);var ie=d(J,!0);l(J),oe(()=>{Q(J,1,`aspect-square cursor-pointer flex items-center justify-center text-lg rounded-lg transition-colors ${a(i)===a(U)?"bg-primary/20 ring-2 ring-primary":"hover:bg-base-200"}`),F(ie,a(U))}),O(N,J)}),l(z),l(L),l(j);var Z=h(j,2),G=h(d(Z),2);Ke(G),G.__keydown=N=>N.key==="Enter"&&c(),Re(G,N=>s=N,()=>s),l(Z),l(C);var V=h(C,2),P=d(V);{var H=N=>{var U=be(),J=le(U);{var ie=te=>{var ue=al();ue.__click=w,O(te,ue)},re=te=>{var ue=be(),de=le(ue);{var me=M=>{var W=nl();W.__click=p,O(M,W)};$(de,M=>{a(n).status=="archived"&&M(me)},!0)}O(te,ue)};$(J,te=>{a(n).status=="active"?te(ie):te(re,!1)})}O(N,U)};$(P,N=>{a(n)&&N(H)})}var B=h(P,4);B.__click=u;var Y=h(B,2);Y.__click=c;var K=d(Y,!0);l(Y),l(V),l(A),l(y),oe(N=>{F(T,a(n)?"Edit Area":"New Area"),Y.disabled=N,F(K,a(n)?"Save":"Create")},[()=>!a(o).trim()||!a(i)]),Ge(3,k,()=>Dt,()=>({duration:200})),Tr(G,()=>a(o),N=>E(o,N)),Ge(3,A,()=>At,()=>({y:300,duration:300})),O(_,y)};$(x,_=>{a(r)&&_(m)})}return O(e,g),we(f)}De(["click","keydown"]);var il=R("<span> </span>");function sl(e,t){const r={clear:"badge-success",planned:"badge-primary",active:"badge-info",fading:"badge-warning",avoiding:"badge-error"},n=q(()=>r[t.status]||"badge-neutral");var o=il(),i=d(o,!0);l(o),oe(()=>{Q(o,1,`rounded badge badge-sm badge-soft ${a(n)??""} font-semibold uppercase tracking-wide text-[10px]`),F(i,t.status)}),O(e,o)}var ll=R('<div class="flex flex-row gap-1"><button aria-label="edit" class="btn btn-sm btn-ghost">â†</button> <button aria-label="edit" class="btn btn-sm btn-ghost">â†’</button></div>'),dl=R('<div tabindex="0" role="button"><div class="flex flex-col py-4 px-3 items-start text-left"><div class="w-full flex flex-row justify-between items-start"><span class="text-4xl mb-2"> </span> <!></div> <div class="flex flex-row justify-between items-end w-full"><div class="flex flex-col w-full"><div class="text-sm tracking-wide mb-0 pb-1 truncate"> </div> <p class="text-muted text-xs text-base-content/50"> </p></div></div></div></div>');function cl(e,t){ye(t,!0);const r=q(()=>wt.getByArea(t.area.id).filter(y=>!["completed","cancelled"].includes(y.status)).length),n=q(()=>{const y=Tt(),k=vt.getWeek(y),A=wt.getByArea(t.area.id),S=Mt.getByArea(t.area.id),I=A.filter(P=>P.status==="active"||P.status==="blocked"),T=S.filter(P=>P.status==="active"||P.status==="blocked");if(I.length===0&&T.length===0)return{level:"clear",color:"badge-success",icon:"âœ“"};const D=k?.projectAssignments.some(P=>I.some(H=>H.id===P.projectId))??!1,C=k?.oneOffAssignments.some(P=>T.some(H=>H.id===P.oneOffId))??!1;if(D||C)return{level:"planned",color:"text-purple-500",icon:"â—†"};const j=A.filter(P=>P.status==="completed"&&P.completedAt),L=S.filter(P=>P.status==="completed"&&P.completedAt),z=j.map(P=>new Date(P.completedAt).getTime()),Z=L.map(P=>new Date(P.completedAt).getTime()),G=[...z,...Z],V=G.length>0?Math.max(...G):null;if(V){const P=Date.now()-12096e5,H=Date.now()-720*60*60*1e3;if(V>=P)return{level:"active",color:"badge-info",icon:"â—"};if(V>=H)return{level:"fading",color:"badge-warning",icon:"â—‹"}}return{level:"avoiding",color:"badge-error",icon:"!"}});var o=dl();o.__click=()=>t.handleSelect(t.area);var i=d(o),s=d(i),b=d(s),v=d(b,!0);l(b);var u=h(b,2);{var c=y=>{var k=ll(),A=d(k);A.__click=I=>t.handleAreaMoveUp(I,t.index);var S=h(A,2);S.__click=I=>t.handleAreaMoveDown(I,t.index),l(k),oe(()=>A.disabled=t.index==0),O(y,k)},w=y=>{var k=be(),A=le(k);{var S=I=>{sl(I,{get status(){return a(n).level}})};$(A,I=>{t.viewMode=="status"&&I(S)},!0)}O(y,k)};$(u,y=>{t.viewMode=="reorder"?y(c):y(w,!1)})}l(s);var p=h(s,2),f=d(p),g=d(f),x=d(g,!0);l(g);var m=h(g,2),_=d(m);l(m),l(f),l(p),l(i),l(o),oe(()=>{Q(o,1,`rounded-lg bg-base-200 hover:bg-base-100 transition-colors cursor-pointer w-full ${a(n).level==="avoiding"?"border border-error/20":a(n).level==="fading"?"border border-warning/20":a(n).level==="active"?"border border-info/20":a(n).level==="planned"?"border border-purple-500/20":""}`),F(v,t.area.icon),F(x,t.area.name),F(_,`${a(r)??""} project${a(r)!==1?"s":""}`)}),O(e,o),we()}De(["click"]);var ul=R("<button> </button>"),vl=R("<div><!></div>"),fl=R('<div class="flex flex-col h-full bg-base-300"><div class="px-3 pt-1 pb-2 flex flex-row justify-between items-center border-b border-base-content/10"><a href="/" class="flex text-base-content/80 flex-row items-center "><div class="flex flex-col"><div class="text-lg tracking-wider font-medium">Doable</div></div></a> <div class="flex flex-row gap-4"><!> <button class="btn btn-xs btn-ghost"> </button></div></div> <div class="flex-1 min-h-0 overflow-auto"><div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 p-3"><!> <!></div></div> <!></div>');function bl(e,t){ye(t,!0);let r,n=ee(Ze(localStorage.getItem("areasViewMode")||"status"));it(()=>localStorage.setItem("areasViewMode",a(n)));let o=ee(!1),i=()=>E(n,Kr[(Kr.indexOf(a(n))+1)%Kr.length],!0),s=()=>E(o,!a(o));const b=q(()=>a(o)?ot.areas.filter(T=>T.status=="archived"):ot.areas.filter(T=>T.status=="active"));async function v(T,D){if(T.stopPropagation(),D===0)return;const C=ot.areas,j=a(b)[D],L=a(b)[D-1],z=C.findIndex(V=>V.id===L.id),Z=z>0?C[z-1].index:null,G=L.index;await Da(j.index,Z,G)}async function u(T,D){if(T.stopPropagation(),D===a(b).length-1)return;const C=ot.areas,j=a(b)[D],L=a(b)[D+1],z=C.findIndex(V=>V.id===L.id),Z=L.index,G=z<C.length-1?C[z+1].index:null;await Da(j.index,Z,G)}var c=fl(),w=d(c),p=h(d(w),2),f=d(p);{var g=T=>{var D=ul();D.__click=i;var C=d(D,!0);l(D),oe(()=>{Q(D,1,`btn btn-xs capitalize ${a(n)=="reorder"?"btn-success":"btn-ghost"}`),F(C,a(n)=="reorder"?"Done":"Reorder")}),O(T,D)};$(f,T=>{a(o)||T(g)})}var x=h(f,2);x.__click=s;var m=d(x,!0);l(x),l(p),l(w);var _=h(w,2),y=d(_),k=d(y);Te(k,27,()=>a(b),T=>T.id,(T,D,C)=>{var j=vl(),L=d(j);cl(L,{get area(){return a(D)},get handleSelect(){return t.onSelectArea},get index(){return a(C)},handleAreaMoveUp:v,handleAreaMoveDown:u,get viewMode(){return a(n)}}),l(j),zt(j,()=>Wt,()=>({duration:250,easing:Mr})),O(T,j)});var A=h(k,2);{var S=T=>{tl(T,{get handleClick(){return r.openCreateAreaModal}})};$(A,T=>{a(o)||T(S)})}l(y),l(_);var I=h(_,2);Re(Cn(I,{}),T=>r=T,()=>r),l(c),oe(()=>F(m,a(o)?"Active":"Archived")),O(e,c),we()}De(["click"]);var gl=R('<span class="text-xs mx-0.5">â€¢</span> ',1),pl=R('<button aria-label="edit" class="btn btn-ghost btn-xs">â†‘</button> <button aria-label="edit" class="btn btn-ghost btn-xs">â†“</button>',1),ml=R('<button class="cursor-pointer flex items-center"><!></button>'),hl=R('<div class="px-3 "><div role="button" tabindex="0"><div class="flex text-sm "> </div> <div class="flex flex-row items-center justify-between"><div class="flex flex-row gap-2 items-center"><!> <p class="text-2xs text-muted font-medium text-base-content/50 "> <!></p></div> <div class="flex flex-row gap-1 items-center"><!></div></div></div></div>');function _l(e,t){ye(t,!0);const r=q(()=>yt.getByProject(t.project.id)),n=q(()=>a(r).filter(T=>T.status==="active").length),o=q(()=>a(r).filter(T=>T.status==="completed").length);function i(T){for(const[D,C]of Object.entries(vt.weeksByWeekOf))if(C.projectAssignments.some(j=>j.projectId===T))return D;return null}function s(T){const D=Tt();if(T===D)return"This week";const C=new Date(D),j=new Date(T),L=Math.round((j.getTime()-C.getTime())/(1e3*60*60*24)),z=Math.round(L/7);return z===1?"Next week":z>1?`In ${z} weeks`:z===-1?"Last week":T.slice(5)}const b=q(()=>i(t.project.id));var v=hl(),u=d(v);u.__click=()=>t.navigateToTasks(t.project),u.__keydown=T=>T.key==="Enter"&&t.navigateToTasks(t.project);var c=d(u),w=d(c,!0);l(c);var p=h(c,2),f=d(p),g=d(f);kr(g,{get type(){return t.project.type},get level(){return t.project.severity}});var x=h(g,2),m=d(x),_=h(m);{var y=T=>{var D=gl(),C=h(le(D));oe(()=>F(C,` ${a(o)??""} done`)),O(T,D)};$(_,T=>{a(o)>0&&T(y)})}l(x),l(f);var k=h(f,2),A=d(k);{var S=T=>{var D=pl(),C=le(D);C.__click=L=>t.handleProjectMoveUp(L,t.index);var j=h(C,2);j.__click=L=>t.handleProjectMoveDown(L,t.index),O(T,D)},I=T=>{var D=ml();D.__click=j=>t.handleProjectAssign(j,t.project);var C=d(D);{let j=q(()=>a(b)?"bg-accent/20 text-accent":"bg-slate-400/20 text-slate-400"),L=q(()=>a(b)?s(a(b)):"Unassigned");Bt(C,{get classes(){return a(j)},get label(){return a(L)}})}l(D),O(T,D)};$(A,T=>{t.reorderMode?T(S):T(I,!1)})}l(k),l(p),l(u),l(v),oe(()=>{Q(u,1,`flex ${t.project.status=="blocked"?"glow-error":t.project.status=="completed"?"glow-success":""} flex-col p-3 gap-2 transition-colors bg-base-200 cursor-pointer hover:bg-base-100 rounded-lg `),F(w,t.project.name),F(m,`${a(n)??""} active `)}),O(e,v),we()}De(["click","keydown"]);var xl=R('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 " role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 h-[605px] max-h-full bg-base-300 rounded-t-2xl "><div class="flex flex-col h-full"><div class="flex justify-between bg-base-300 items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="flex-1 overflow-auto min-h-0 p-4 space-y-4 "><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Learn Spanish, Build Website"/></div> <div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Type</label> <div class="join w-full"><input type="radio" name="type" class="join-item btn btn-sm flex-1" aria-label="Regular"/> <input type="radio" name="type" class="join-item btn btn-sm flex-1" aria-label="Maintenance"/></div></div> <span class="text-xs text-base-content/50 mb-2 block">Severity</span> <div class="flex flex-col gap-1"><button type="button"><span class="font-bold w-4">1</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">2</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">3</span> <span class="font-normal text-left flex-1"> </span></button></div> <span class="text-xs text-base-content/50 mb-2 block">Status</span> <div class="join w-full"><button type="button">Active</button> <button type="button">Blocked</button> <button type="button">Cancelled</button> <button type="button">Completed</button></div></div> <div class="flex gap-3 p-4 pb-10  border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div></div>');function jn(e,t){ye(t,!0);const r=[];let n=ee(!1),o=ee(null),i=ee(""),s=ee("active"),b=ee("regular"),v=ee("sev3"),u;function c(){console.log("Creating.."),E(o,null),E(i,""),E(s,"active"),E(b,"regular"),E(v,"sev3"),E(n,!0),setTimeout(()=>u.focus(),100)}function w(y,k){y.stopPropagation(),E(o,k,!0),E(i,k.name,!0),E(s,k.status,!0),E(b,k.type||"regular",!0),E(v,k.severity||"sev1",!0),E(n,!0),setTimeout(()=>u.focus(),100)}function p(){E(n,!1),E(o,null)}async function f(){!a(i).trim()||!t.selectedArea||(a(o)?(await Mo(t.selectedArea.id,a(o).index,{name:a(i).trim(),status:a(s),type:a(b),severity:a(v)}),a(o).name=a(i).trim(),a(o).status=a(s),a(o).type=a(b),a(o).severity=a(v)):await Po(t.selectedArea.id,a(i).trim(),a(b),a(v)),p())}var g={openCreateProjectModal:c,openEditProjectModal:w},x=be(),m=le(x);{var _=y=>{var k=xl(),A=d(k);A.__click=p,A.__keydown=ve=>ve.key==="Escape"&&p();var S=h(A,2),I=d(S),T=d(I),D=d(T),C=d(D,!0);l(D);var j=h(D,2);j.__click=p,l(T);var L=h(T,2),z=d(L),Z=h(d(z),2);Ke(Z),Z.__keydown=ve=>ve.key==="Enter"&&f(),Re(Z,ve=>u=ve,()=>u),l(z);var G=h(z,2),V=h(d(G),2),P=d(V);Ke(P),P.value=P.__value="regular";var H=h(P,2);Ke(H),H.value=H.__value="maintenance",l(V),l(G);var B=h(G,4),Y=d(B);Y.__click=()=>E(v,"sev1");var K=h(d(Y),2),N=d(K,!0);l(K),l(Y);var U=h(Y,2);U.__click=()=>E(v,"sev2");var J=h(d(U),2),ie=d(J,!0);l(J),l(U);var re=h(U,2);re.__click=()=>E(v,"sev3");var te=h(d(re),2),ue=d(te,!0);l(te),l(re),l(B);var de=h(B,4),me=d(de);me.__click=()=>E(s,"active");var M=h(me,2);M.__click=()=>E(s,"blocked");var W=h(M,2);W.__click=()=>E(s,"cancelled");var ae=h(W,2);ae.__click=()=>E(s,"completed"),l(de),l(L);var ne=h(L,2),se=h(d(ne),2);se.__click=p;var pe=h(se,2);pe.__click=f;var Ce=d(pe,!0);l(pe),l(ne),l(I),l(S),l(k),oe(ve=>{F(C,a(o)?"Edit Project":"New Project"),Q(Y,1,`hover:bg-purple-500 btn justify-start gap-2 transition-all ${a(v)==="sev1"?"bg-purple-600 text-white":""}`),F(N,Zr[a(b)].sev1),Q(U,1,`hover:bg-emerald-500 hover:text-white btn justify-start gap-2 ${a(v)==="sev2"?"bg-emerald-600 text-white":""} transition-all`),F(ie,Zr[a(b)].sev2),Q(re,1,`hover:bg-slate-500 hover:text-slate-300 ${a(v)==="sev3"?"bg-slate-500 text-white":""} btn justify-start gap-2 transition-all`),F(ue,Zr[a(b)].sev3),Q(me,1,`join-item btn btn-sm flex-1 ${a(s)==="active"?"btn-primary":""}`),Q(M,1,`join-item btn btn-sm flex-1 ${a(s)==="blocked"?"btn-error":""}`),Q(W,1,`join-item btn btn-sm flex-1 ${a(s)==="cancelled"?"bg-base-content/30":""}`),Q(ae,1,`join-item btn btn-sm flex-1 ${a(s)==="completed"?"btn-success":""}`),pe.disabled=ve,F(Ce,a(o)?"Save":"Create")},[()=>!a(i).trim()]),Ge(3,A,()=>Dt,()=>({duration:200})),Tr(Z,()=>a(i),ve=>E(i,ve)),Ct(r,[],P,()=>{"regular";return a(b)},ve=>E(b,ve)),Ct(r,[],H,()=>{"maintenance";return a(b)},ve=>E(b,ve)),Ge(3,S,()=>At,()=>({y:300,duration:300})),O(y,k)};$(m,y=>{a(n)&&y(_)})}return O(e,x),we(g)}De(["click","keydown"]);var yl=R('<button type="button"><div class="font-medium"> </div> <div class="text-xs opacity-70"> </div></button>'),wl=R('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 " role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-300 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold">Assign to Week</h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-100 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-2 pb-10 "></div></div></div>');function kl(e,t){ye(t,!0);let r=ee(!1),n=ee(null),o=ee(void 0);function i(f,g,x){f.stopPropagation(),E(o,g,!0),E(n,x,!0),E(r,!0)}function s(){E(r,!1),E(n,null)}async function b(f,g){!a(n)||!a(o)||(g?await ln(a(n).id,f):await Ro(a(n).id,a(o).id,f),s())}function v(f,g){const x=g??Tt();return vt.getWeek(x)?.projectAssignments.some(_=>_.projectId===f)??!1}var u={openWeekPicker:i},c=be(),w=le(c);{var p=f=>{var g=wl(),x=d(g);x.__click=s,x.__keydown=A=>A.key==="Escape"&&s();var m=h(x,2),_=d(m),y=h(d(_),2);y.__click=s,l(_);var k=h(_,2);Te(k,21,No,We,(A,S)=>{const I=q(()=>v(a(n).id,a(S).weekOf));var T=yl();T.__click=()=>b(a(S).weekOf,a(I));var D=d(T),C=d(D,!0);l(D);var j=h(D,2),L=d(j,!0);l(j),l(T),oe(()=>{Q(T,1,`w-full p-3 text-left rounded-lg border transition-colors ${a(I)?"bg-base-200 text-primary border-primary":"border-base-content/10 hover:border-primary"}`),F(C,a(S).label),F(L,a(S).weekOf)}),O(A,T)}),l(k),l(m),l(g),Ge(3,x,()=>Dt,()=>({duration:200})),Ge(3,m,()=>At,()=>({y:300,duration:300})),O(f,g)};$(w,f=>{a(r)&&a(n)&&f(p)})}return O(e,c),we(u)}De(["click","keydown"]);var Tl=R('<button type="button"> </button>'),Dl=R('<div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Status</label> <div class="join w-full"></div></div>'),Al=R('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-300 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Buy groceries, Call mom"/></div> <!></div> <div class="flex gap-3 p-4 pb-10 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function El(e,t){ye(t,!0);let r=ee(!1),n=ee(null),o=ee(""),i=ee("active"),s;function b(){E(n,null),E(o,""),E(i,"active"),E(r,!0),setTimeout(()=>s.focus(),100)}function v(x,m){x.stopPropagation(),E(n,m,!0),E(o,m.name,!0),E(i,m.status,!0),E(r,!0),setTimeout(()=>s.focus(),100)}function u(){E(r,!1),E(n,null)}async function c(){!a(o).trim()||!t.selectedArea||(a(n)?await dn(t.selectedArea.id,a(n).index,{name:a(o).trim(),status:a(i)}):await Lo(t.selectedArea.id,a(o).trim()),u())}var w={openCreateOneOffModal:b,openEditOneOffModal:v},p=be(),f=le(p);{var g=x=>{var m=Al(),_=d(m);_.__click=u,_.__keydown=P=>P.key==="Escape"&&u();var y=h(_,2),k=d(y),A=d(k),S=d(A,!0);l(A);var I=h(A,2);I.__click=u,l(k);var T=h(k,2),D=d(T),C=h(d(D),2);Ke(C),C.__keydown=P=>P.key==="Enter"&&c(),Re(C,P=>s=P,()=>s),l(D);var j=h(D,2);{var L=P=>{var H=Dl(),B=h(d(H),2);Te(B,21,()=>Sn,We,(Y,K)=>{var N=Tl();N.__click=()=>E(i,a(K).value,!0);var U=d(N,!0);l(N),oe(()=>{Q(N,1,`join-item btn btn-sm flex-1 ${a(i)===a(K).value?a(K).value==="active"?"btn-primary":a(K).value==="blocked"?"btn-warning":a(K).value==="completed"?"btn-success":"btn-neutral":""}`),F(U,a(K).label)}),O(Y,N)}),l(B),l(H),O(P,H)};$(j,P=>{a(n)&&P(L)})}l(T);var z=h(T,2),Z=h(d(z),2);Z.__click=u;var G=h(Z,2);G.__click=c;var V=d(G,!0);l(G),l(z),l(y),l(m),oe(P=>{F(S,a(n)?"Edit One-off":"New One-off"),G.disabled=P,F(V,a(n)?"Save":"Create")},[()=>!a(o).trim()]),Ge(3,_,()=>Dt,()=>({duration:200})),Tr(C,()=>a(o),P=>E(o,P)),Ge(3,y,()=>At,()=>({y:300,duration:300})),O(x,m)};$(f,x=>{a(r)&&x(g)})}return O(e,p),we(w)}De(["click","keydown"]);var Ol=bt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>'),Il=bt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"></path></svg>'),Sl=bt('<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16" rx="1"></rect><rect x="14" y="4" width="4" height="16" rx="1"></rect></svg>'),Cl=R('<button aria-label="edit" class="btn btn-ghost btn-xs">â†‘</button> <button aria-label="edit" class="btn btn-ghost btn-xs">â†“</button>',1),jl=R('<button class="cursor-pointer flex items-center"><!></button>'),Ml=R('<div class="px-2"><div class="flex flex-col gap-1 p-3 bg-base-200 rounded-lg  cursor-pointer hover:bg-base-100 transition-colors" role="button" tabindex="0"><div class="flex flex-row"><button type="button"><!></button> <span> </span></div> <div class="flex flex-row items-center justify-end"><!></div></div></div>'),Pl=R('<div class="text-center py-8 text-base-content/50 text-sm">No one-offs yet</div>'),Nl=R("<!> <!>",1);function Rl(e,t){ye(t,!0);let r=Ia(t,"filterMode",3,"active"),n=Ia(t,"reorderMode",3,!1),o;const i=Tt();let s=q(()=>Mt.getByArea(t.selectedArea.id).filter(_=>{if(r()=="active")return["active","blocked"].includes(_.status)&&b(_.id);if(r()=="someday")return["active","blocked"].includes(_.status)&&!b(_.id);if(r()=="resolved")return["cancelled","completed"].includes(_.status)}));function b(_){return vt.isOneOffAssignedToWeek(_,i)}async function v(_,y){_.stopPropagation();const k=y.status==="completed"?"active":"completed";await dn(t.selectedArea.id,y.index,{status:k})}async function u(_,y){_.stopPropagation(),b(y.id)?await Fo(y.id,i):await Bo(y.id,t.selectedArea.id,i)}async function c(_,y){if(_.stopPropagation(),y===0)return;const k=Mt.getByArea(t.selectedArea.id),A=a(s)[y],S=a(s)[y-1],I=k.findIndex(C=>C.id===S.id),T=I>0?k[I-1].index:null,D=S.index;await Aa(t.selectedArea.id,A.index,T,D)}async function w(_,y){if(_.stopPropagation(),y===a(s).length-1)return;const k=Mt.getByArea(t.selectedArea.id),A=a(s)[y],S=a(s)[y+1],I=k.findIndex(C=>C.id===S.id),T=S.index,D=I<k.length-1?k[I+1].index:null;await Aa(t.selectedArea.id,A.index,T,D)}function p(){o.openCreateOneOffModal()}var f={openCreateModal:p},g=Nl(),x=le(g);Te(x,27,()=>a(s),_=>_.id,(_,y,k)=>{const A=q(()=>b(a(y).id)),S=q(()=>a(y).status=="completed"),I=q(()=>a(y).status=="cancelled"),T=q(()=>a(y).status=="blocked");var D=Ml(),C=d(D);C.__click=N=>o.openEditOneOffModal(N,a(y)),C.__keydown=N=>N.key==="Enter"&&o.openEditOneOffModal(N,a(y));var j=d(C),L=d(j);L.__click=N=>v(N,a(y));var z=d(L);{var Z=N=>{var U=Ol();O(N,U)},G=N=>{var U=be(),J=le(U);{var ie=te=>{var ue=Il();O(te,ue)},re=te=>{var ue=be(),de=le(ue);{var me=M=>{var W=Sl();O(M,W)};$(de,M=>{a(T)&&M(me)},!0)}O(te,ue)};$(J,te=>{a(I)?te(ie):te(re,!1)},!0)}O(N,U)};$(z,N=>{a(S)?N(Z):N(G,!1)})}l(L);var V=h(L,2),P=d(V,!0);l(V),l(j);var H=h(j,2),B=d(H);{var Y=N=>{var U=Cl(),J=le(U);J.__click=re=>c(re,a(k));var ie=h(J,2);ie.__click=re=>w(re,a(k)),O(N,U)},K=N=>{var U=jl();U.__click=ie=>u(ie,a(y));var J=d(U);{let ie=q(()=>a(A)?"bg-accent/20 text-accent":"bg-slate-400/20 text-slate-400"),re=q(()=>a(A)?"This week":"Unassigned");Bt(J,{get classes(){return a(ie)},get label(){return a(re)}})}l(U),O(N,U)};$(B,N=>{n()?N(Y):N(K,!1)})}l(H),l(C),l(D),oe(()=>{Q(L,1,`w-6 h-6 cursor-pointer rounded-full border-2 flex me-2 items-center justify-center text-xs transition-colors flex-shrink-0 ${a(S)?"bg-success/70 border-success/10 text-success-content":a(T)?"text-error border-error bg-error/30":a(I)?"bg-base-content/15 border-base-content/30 text-base-content":"border-base-content/30 hover:border-success/70"}`),L.disabled=a(I),Q(V,1,`flex-1 text-sm ${a(y).status==="completed"?"line-through text-base-content/50":""}`),F(P,a(y).name)}),zt(D,()=>Wt,()=>({duration:250,easing:Mr})),O(_,D)},_=>{var y=Pl();O(_,y)});var m=h(x,2);return Re(El(m,{get selectedArea(){return t.selectedArea}}),_=>o=_,()=>o),O(e,g),we(f)}De(["click","keydown"]);var Ll=R("<button> </button>"),Fl=R('<button type="button"> </button>'),Bl=R("<div><!></div>"),zl=R('<div class="text-center py-8 text-base-content/50 text-sm"> </div>'),Wl=R('<div class="flex flex-col h-full bg-base-300"><div class="flex flex-row items-center justify-between p-3"><div class="flex flex-row gap-2 items-center"><div class="text-3xl"> </div> <h2 class="text-lg tracking-wide"> </h2></div> <div class="flex flex-row gap-2"><button class="btn btn-ghost btn-xs" aria-label="edit"><svg viewBox="0 0 24 24" class="size-4" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button></div></div> <div class="px-4 border-b border-base-content/10 pt-2 pb-0 border-b flex border-b-base-content/10 gap-1"></div> <div class="p-2 border-b border-base-content/10 flex justify-between items-center"><div class="w-20"><button type="button"><div class="gap-1 flex items-center text-xs capitalize"><svg class="size-4" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path fill="none" stroke="currentColor" stroke-width="1.5" d="M11,9 L19,9 M15,13 L15,5 M17,17 L17,23 L1,23 L1,7 L1,7 L7,7 M7,1 L23,1 L23,17 L7,17 L7,1 Z"></path></g></svg> </div></button></div> <div class="shrink-0"></div> <button aria-label="edit"><svg viewBox="0 0 24 24" class="size-4" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M2 11h21V6H2zm1-4h19v3H3zM2 18h21v-5H2zm1-4h19v3H3zm7 6h5l-2.5 2.574zm0-16l2.5-2.574L15 4z"></path><path fill="none" d="M0 0h24v24H0z"></path></g></svg> </button></div> <div class="flex-1 overflow-auto min-h-0 pb-5 pt-2.5"><div class="flex flex-col gap-2.5 py-0"><!></div></div></div> <!> <!> <!>',1);function Gl(e,t){ye(t,!0);let r,n,o,i;const s=Tt(),b=["projects","oneoffs"];let v=ee(Ze(localStorage.getItem("projectTabView")||b[0]));it(()=>{a(v)&&localStorage.setItem("projectTabView",a(v))});const u=["active","someday","resolved"];let c=ee(Ze(localStorage.getItem("projectsTabFilterModeProjects")||u[0]));it(()=>{a(c)&&localStorage.setItem("projectsTabFilterModeProjects",a(c))});let w=ee(!1),p=()=>E(w,!a(w)),f=q(()=>wt.getByArea(t.selectedArea.id).filter(M=>a(v)=="oneoffs"?!1:a(c)=="active"?["active","blocked"].includes(M.status)&&vt.isProjectAssignedToWeek(M.id,s):a(c)=="resolved"?["completed","cancelled"].includes(M.status):["active","blocked"].includes(M.status)&&!vt.isProjectAssignedToWeek(M.id,s)));async function g(M,W){if(M.stopPropagation(),W===0||!t.selectedArea)return;const ae=wt.getByArea(t.selectedArea.id),ne=a(f)[W],se=a(f)[W-1],pe=ae.findIndex(st=>st.id===se.id),Ce=pe>0?ae[pe-1].index:null,ve=se.index;await Ea(t.selectedArea.id,ne.index,Ce,ve)}async function x(M,W){if(M.stopPropagation(),!t.selectedArea||W===a(f).length-1)return;const ae=wt.getByArea(t.selectedArea.id),ne=a(f)[W],se=a(f)[W+1],pe=ae.findIndex(st=>st.id===se.id),Ce=se.index,ve=pe<ae.length-1?ae[pe+1].index:null;console.log(Ce,ve),await Ea(t.selectedArea.id,ne.index,Ce,ve)}async function m(){a(v)=="projects"?o.openCreateProjectModal():a(v)=="oneoffs"&&r.openCreateModal()}function _(){return a(c)=="active"?"bg-accent/20 text-accent":a(c)=="someday"?"bg-primary/20 text-primary":"bg-success/10 text-success"}var y=Wl(),k=le(y),A=d(k),S=d(A),I=d(S),T=d(I,!0);l(I);var D=h(I,2),C=d(D,!0);l(D),l(S);var j=h(S,2),L=d(j);L.__click=M=>n.openEditAreaModal(M,t.selectedArea),l(j),l(A);var z=h(A,2);Te(z,21,()=>u,We,(M,W)=>{const ae=q(()=>a(c)===a(W));var ne=Ll();ne.__click=()=>E(c,a(W),!0);var se=d(ne,!0);l(ne),oe(()=>{Q(ne,1,`capitalize px-3 py-2 border-b border-b-2 text-sm tracking-wider rounded-t-md transition-colors cursor-pointer whitespace-nowrap ${a(ae)?"border-primary bg-base-100 ":"border-transparent hover:border-base-100 text-muted hover:text-base-content hover:bg-base-100 "}`),F(se,a(W))}),O(M,ne)}),l(z);var Z=h(z,2),G=d(Z),V=d(G);let P;V.__click=m;var H=d(V),B=h(d(H));l(H),l(V),l(G);var Y=h(G,2);Te(Y,21,()=>b,We,(M,W)=>{const ae=q(()=>a(v)===a(W)),ne=q(_);var se=Fl();se.__click=()=>E(v,a(W),!0);var pe=d(se,!0);l(se),oe(()=>{Q(se,1,`${(a(ae)?a(ne):"text-muted")??""} capitalize px-3 py-1 rounded text-xs cursor-pointer `),F(pe,a(W))}),O(M,se)}),l(Y);var K=h(Y,2);K.__click=p;var N=h(d(K));l(K),l(Z);var U=h(Z,2),J=d(U),ie=d(J);{var re=M=>{Re(Rl(M,{get selectedArea(){return t.selectedArea},get filterMode(){return a(c)},get reorderMode(){return a(w)}}),W=>r=W,()=>r)},te=M=>{var W=be(),ae=le(W);Te(ae,27,()=>a(f),ne=>ne.id,(ne,se,pe)=>{var Ce=Bl(),ve=d(Ce);_l(ve,{get index(){return a(pe)},get reorderMode(){return a(w)},handleProjectAssign:(st,Pr)=>i.openWeekPicker(st,t.selectedArea,Pr),get navigateToTasks(){return t.navigateToTasks},get project(){return a(se)},handleProjectMoveUp:g,handleProjectMoveDown:x}),l(Ce),zt(Ce,()=>Wt,()=>({duration:250,easing:Mr})),O(ne,Ce)},ne=>{var se=zl(),pe=d(se);l(se),oe(()=>F(pe,`No ${a(v)??""} projects`)),O(ne,se)}),O(M,W)};$(ie,M=>{a(v)==="oneoffs"?M(re):M(te,!1)})}l(J),l(U),l(k);var ue=h(k,2);Re(jn(ue,{get selectedArea(){return t.selectedArea}}),M=>o=M,()=>o);var de=h(ue,2);Re(kl(de,{}),M=>i=M,()=>i);var me=h(de,2);Re(Cn(me,{}),M=>n=M,()=>n),oe(()=>{F(T,t.selectedArea.icon),F(C,t.selectedArea.name),P=Q(V,1,"text-secondary shrink-0 cursor-pointer flex gap-1 justify-center items-center",null,P,{hidden:a(c)!="someday"}),F(B,` ${a(v)=="projects"?"Project":"One-off"}`),Q(K,1,`btn ${a(w)?"btn-success":"btn-ghost"} w-20 btn-xs`),F(N,` ${a(w)?"Done":"Reorder"}`)}),O(e,y),we()}De(["click"]);var Vl=R('<button type="button"> </button>'),Hl=R('<div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Status</label> <div class="flex flex-wrap gap-2"></div></div>'),Ul=R('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 " role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-300 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Read chapter 1, Write blog post"/></div> <!></div> <div class="flex gap-3 p-4 pb-10 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-soft btn-sm"> </button> <button type="button" class="btn btn-primary btn-sm">Create and add new</button></div></div></div>');function Zl(e,t){ye(t,!0);let r=ee(!1),n=ee(null),o=ee(""),i=ee("active"),s;function b(){E(n,null),E(o,""),E(i,"active"),E(r,!0),setTimeout(()=>s.focus(),100)}function v(m,_){m.stopPropagation(),E(n,_,!0),E(o,_.name,!0),E(i,_.status,!0),E(r,!0),setTimeout(()=>s.focus(),100)}function u(){E(r,!1),E(n,null)}async function c(){!a(o).trim()||!t.selectedProject||!t.selectedArea||a(n)||(await $r(t.selectedProject.id,t.selectedArea.id,a(o).trim()),E(o,""),E(i,"active"),setTimeout(()=>s.focus(),100))}async function w(){!a(o).trim()||!t.selectedProject||!t.selectedArea||(a(n)?await cn(t.selectedProject.id,a(n).index,{name:a(o).trim(),status:a(i)}):await $r(t.selectedProject.id,t.selectedArea.id,a(o).trim()),u())}var p={openCreateTaskModal:b,openEditTaskModal:v},f=be(),g=le(f);{var x=m=>{var _=Ul(),y=d(_);y.__click=u,y.__keydown=B=>B.key==="Escape"&&u();var k=h(y,2),A=d(k),S=d(A),I=d(S,!0);l(S);var T=h(S,2);T.__click=u,l(A);var D=h(A,2),C=d(D),j=h(d(C),2);Ke(j),j.__keydown=B=>B.key==="Enter"&&c(),Re(j,B=>s=B,()=>s),l(C);var L=h(C,2);{var z=B=>{var Y=Hl(),K=h(d(Y),2);Te(K,21,()=>Sn,We,(N,U)=>{var J=Vl();J.__click=()=>E(i,a(U).value,!0);var ie=d(J,!0);l(J),oe(()=>{Q(J,1,`px-2 py-1.5 text-sm rounded-lg border transition-colors ${a(i)===a(U).value?"bg-primary text-primary-content border-primary":"border-base-content/20 hover:border-primary"}`),F(ie,a(U).label)}),O(N,J)}),l(K),l(Y),O(B,Y)};$(L,B=>{a(n)&&B(z)})}l(D);var Z=h(D,2),G=h(d(Z),2);G.__click=u;var V=h(G,2);V.__click=w;var P=d(V,!0);l(V);var H=h(V,2);H.__click=c,l(Z),l(k),l(_),oe((B,Y)=>{F(I,a(n)?"Edit Task":"New Task"),V.disabled=B,F(P,a(n)?"Save":"Create"),H.disabled=Y},[()=>!a(o).trim(),()=>!a(o).trim()||!!a(n)]),Ge(3,y,()=>Dt,()=>({duration:200})),Tr(j,()=>a(o),B=>E(o,B)),Ge(3,k,()=>At,()=>({y:300,duration:300})),O(m,_)};$(g,m=>{a(r)&&m(x)})}return O(e,f),we(p)}De(["click","keydown"]);var Yl=bt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>'),ql=bt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"></path></svg>'),Kl=bt('<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16" rx="1"></rect><rect x="14" y="4" width="4" height="16" rx="1"></rect></svg>'),Xl=R('<button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†‘</button> <button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†“</button>',1),Jl=R('<div tabindex="0" role="button" class="hover:bg-base-100 cursor-pointer w-full flex flex-row items-start py-4 px-3 bg-base-200 rounded-md"><button type="button"><!></button> <div class="text-sm text-base-content/80 flex-1 "> </div> <!></div>');function Ql(e,t){ye(t,!0);const r=q(()=>t.task.status==="completed"),n=q(()=>t.task.status==="cancelled"),o=q(()=>t.task.status==="blocked");var i=Jl();i.__click=g=>t.handleEdit(g,t.task);var s=d(i);s.__click=g=>t.toggleTaskComplete(g,t.task);var b=d(s);{var v=g=>{var x=Yl();O(g,x)},u=g=>{var x=be(),m=le(x);{var _=k=>{var A=ql();O(k,A)},y=k=>{var A=be(),S=le(A);{var I=T=>{var D=Kl();O(T,D)};$(S,T=>{a(o)&&T(I)},!0)}O(k,A)};$(m,k=>{a(n)?k(_):k(y,!1)},!0)}O(g,x)};$(b,g=>{a(r)?g(v):g(u,!1)})}l(s);var c=h(s,2),w=d(c,!0);l(c);var p=h(c,2);{var f=g=>{var x=Xl(),m=le(x);m.__click=y=>t.handleTaskMoveUp(y,t.index);var _=h(m,2);_.__click=y=>t.handleTaskMoveDown(y,t.index),O(g,x)};$(p,g=>{t.reorderEnabled&&g(f)})}l(i),oe(()=>{Q(s,1,`w-6 h-6 cursor-pointer rounded-full border-2 flex me-2 items-center justify-center text-xs transition-colors flex-shrink-0 ${a(r)?"bg-success/70 border-success/10 text-success-content":a(o)?"text-error border-error bg-error/30":a(n)?"bg-base-content/15 border-base-content/30 text-base-content":"border-base-content/30 hover:border-success/70"}`),s.disabled=a(n),F(w,t.task.name)}),O(e,i),we()}De(["click"]);var $l=R("<span> </span>");function ed(e,t){const r={active:{label:"Active",class:"bg-info/20 text-info"},blocked:{label:"Blocked",class:"bg-error/20 text-error"},completed:{label:"Completed",class:"bg-success/20 text-success"},cancelled:{label:"Cancelled",class:"bg-base-content/10 text-base-content/40"}},n=q(()=>r[t.status]||r.active);var o=$l(),i=d(o,!0);l(o),oe(()=>{Q(o,1,`inline-flex items-center px-2 py-0.5 rounded text-2xs font-medium ${a(n).class??""}`),F(i,a(n).label)}),O(e,o)}var td=R("<div><!></div>"),rd=R('<div class="flex flex-col h-full w-full bg-base-300"><div class="flex flex-col p-3 gap-3 border-b border-base-content/10"><div class="flex flex-row items-center justify-between h-9"><div class="flex flex-row items-center gap-1 text-xs  text-muted"><div class="text-base"> </div> <div> </div></div> <div class="flex flex-row gap-2"><button aria-label="edit"><svg viewBox="0 0 24 24" class="size-4" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M2 11h21V6H2zm1-4h19v3H3zM2 18h21v-5H2zm1-4h19v3H3zm7 6h5l-2.5 2.574zm0-16l2.5-2.574L15 4z"></path><path fill="none" d="M0 0h24v24H0z"></path></g></svg> </button> <button class="btn btn-ghost btn-xs" aria-label="edit"><svg viewBox="0 0 24 24" class="size-4" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button></div></div> <div class="mb-1"> </div> <div class="flex flex-row items-center justify-between"><div class="flex flex-row gap-2 items-center"><!> <!></div> <button type="button" class="text-xs flex items-center cursor-pointer mb-1 text-primary"><span class="me-1 text-base">+</span> <span>Add Task</span></button></div></div> <div class="flex-1 overflow-auto min-h-0 pb-5 pt-2.5"><div class="flex flex-col px-2 py-0 gap-2"></div></div></div> <!> <!>',1);function ad(e,t){ye(t,!0);let r,n,o=q(()=>yt.getByProject(t.selectedProject.id)),i=ee(!1),s=()=>E(i,!a(i));async function b(B,Y){if(B.stopPropagation(),!t.selectedProject)return;const K=Y.status==="completed"?"active":"completed";await cn(t.selectedProject.id,Y.index,{status:K})}async function v(B,Y){if(B.stopPropagation(),Y===0||!t.selectedProject)return;const K=a(o),N=yt.getByProject(t.selectedProject.id),U=K[Y],J=K[Y-1],ie=N.findIndex(ue=>ue.id===J.id),re=ie>0?N[ie-1].index:null,te=J.index;await Oa(t.selectedProject.id,U.index,re,te)}async function u(B,Y){if(B.stopPropagation(),!t.selectedProject)return;const K=a(o);if(Y===K.length-1)return;const N=yt.getByProject(t.selectedProject.id),U=K[Y],J=K[Y+1],ie=N.findIndex(ue=>ue.id===J.id),re=J.index,te=ie<N.length-1?N[ie+1].index:null;await Oa(t.selectedProject.id,U.index,re,te)}var c=rd(),w=le(c),p=d(w),f=d(p),g=d(f),x=d(g),m=d(x,!0);l(x);var _=h(x,2),y=d(_,!0);l(_),l(g);var k=h(g,2),A=d(k);A.__click=s;var S=h(d(A));l(A);var I=h(A,2);I.__click=B=>r.openEditProjectModal(B,t.selectedProject),l(k),l(f);var T=h(f,2),D=d(T,!0);l(T);var C=h(T,2),j=d(C),L=d(j);ed(L,{get status(){return t.selectedProject.status}});var z=h(L,2);kr(z,{get level(){return t.selectedProject.severity},get type(){return t.selectedProject.type}}),l(j);var Z=h(j,2);Z.__click=function(...B){n.openCreateTaskModal?.apply(this,B)},l(C),l(p);var G=h(p,2),V=d(G);Te(V,31,()=>a(o),B=>B.id,(B,Y,K)=>{var N=td(),U=d(N);Ql(U,{get handleEdit(){return n.openEditTaskModal},handleTaskMoveUp:v,handleTaskMoveDown:u,get index(){return a(K)},get task(){return a(Y)},toggleTaskComplete:b,get reorderEnabled(){return a(i)}}),l(N),zt(N,()=>Wt,()=>({duration:250,easing:Mr})),O(B,N)}),l(V),l(G),l(w);var P=h(w,2);Re(Zl(P,{get selectedArea(){return t.selectedArea},get selectedProject(){return t.selectedProject}}),B=>n=B,()=>n);var H=h(P,2);Re(jn(H,{get selectedArea(){return t.selectedArea}}),B=>r=B,()=>r),oe(()=>{F(m,t.selectedArea.icon),F(y,t.selectedArea.name),Q(A,1,`btn ${a(i)?"btn-success":"btn-ghost"} btn-xs`),F(S,` ${a(i)?"Done":"Reorder"}`),F(D,t.selectedProject.name)}),O(e,c),we()}De(["click"]);var nd=R('<div class="flex items-center justify-center h-full text-base-content/50"><p>Review - Coming soon</p></div>'),od=R('<div class="h-screen flex flex-col bg-base-300 md:ml-20"><div class="max-md:pb-22 h-full"><!></div> <!></div>');function fd(e,t){ye(t,!0);const r=()=>i("areas");let n=ee(void 0),o=ee(void 0);i("areas");function i(g){mo("",{activeTab:g})}function s(g){E(n,g,!0),i("projects")}function b(g){E(o,g,!0),E(n,ot.getById(g.areaId),!0),i("tasks")}var v=od(),u=d(v),c=d(u);{var w=g=>{bl(g,{onSelectArea:s})},p=g=>{var x=be(),m=le(x);{var _=k=>{Gl(k,{navigateBack:r,navigateToTasks:b,get selectedArea(){return a(n)}})},y=k=>{var A=be(),S=le(A);{var I=D=>{ad(D,{get selectedArea(){return a(n)},get selectedProject(){return a(o)}})},T=D=>{var C=be(),j=le(C);{var L=Z=>{Rs(Z,{navigateToTasks:b})},z=Z=>{var G=be(),V=le(G);{var P=B=>{$s(B,{})},H=B=>{var Y=be(),K=le(Y);{var N=U=>{var J=nd();O(U,J)};$(K,U=>{mt.state.activeTab==="review"&&U(N)},!0)}O(B,Y)};$(V,B=>{mt.state.activeTab==="today"?B(P):B(H,!1)},!0)}O(Z,G)};$(j,Z=>{mt.state.activeTab==="week"?Z(L):Z(z,!1)},!0)}O(D,C)};$(S,D=>{mt.state.activeTab=="tasks"?D(I):D(T,!1)},!0)}O(k,A)};$(m,k=>{mt.state.activeTab==="projects"&&a(n)?k(_):k(y,!1)},!0)}O(g,x)};$(c,g=>{mt.state.activeTab==="areas"?g(w):g(p,!1)})}l(u);var f=h(u,2);ei(f,{get activeTab(){return mt.state.activeTab},onTabChange:i}),l(v),O(e,v),we()}export{fd as component};
