import{d as pe,f as B,a as T,s as W,c as de,e as Jt,t as _a,b as gt}from"../chunks/B_UuPxXH.js";import{y as pr,E as rn,K as mr,A as je,aq as an,F as nn,g as n,T as on,H as sn,I as ln,J as qr,L as hr,B as Vt,aa as cn,aE as dn,ah as Kr,o as ht,aG as Je,z as Ar,D as un,a8 as Xr,a4 as vn,aC as Br,aH as fn,aI as bn,aJ as gn,aK as pn,v as xa,x as ya,aL as _r,ay as mn,aB as hn,w as _n,aM as wa,q as Mt,aN as xn,W as yn,aO as wn,aP as Et,e as kn,u as ka,r as Wr,h as Tn,aQ as Dn,aR as En,aS as An,aT as In,aU as On,aV as Sn,aW as Ta,a5 as jn,aX as Cn,aY as Mn,ao as Pn,p as _e,l as xe,n as l,m as u,s as x,t as X,k as ne,O as J,N as O,a6 as $,U as ft,b as bt,ai as Qt}from"../chunks/DI0gOZ3T.js";import{i as q}from"../chunks/kcmh4k54.js";import{a as Nn}from"../chunks/BFHpsUYi.js";import{p as st}from"../chunks/7qubuZD1.js";import{a1 as qt,a2 as Rn,a3 as Ln,a4 as Fn,a5 as Da,a6 as Ea,a7 as ut,a8 as Bn,a9 as Ft,aa as Wn,ab as dt,ac as Ze,ad as Bt,ae as Aa,af as zn,ag as Ia,ah as Gn,ai as Un,aj as Hn,ak as Vn,al as Zn,am as Yn,an as qn,ao as Kn,ap as Jr,aq as Oa,ar as Xn,as as Jn,at as Qn,au as Qr,av as Sa,aw as $r}from"../chunks/CUqpiYYE.js";import{b as Pt}from"../chunks/Amjc5eun.js";function Pe(e,t){return t}function $n(e,t,r){for(var a=[],i=t.length,o,s=t.length,b=0;b<i;b++){let y=t[b];ya(y,()=>{if(o){if(o.pending.delete(y),o.done.add(y),o.pending.size===0){var d=e.outrogroups;Ir(Br(o.done)),d.delete(o),d.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var c=a.length===0&&r!==null;if(c){var g=r,v=g.parentNode;hn(v),v.append(g),e.items.clear()}Ir(t,!c)}else o={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(o)}function Ir(e,t=!0){for(var r=0;r<e.length;r++)_n(e[r],t)}var ea;function De(e,t,r,a,i,o=null){var s=e,b=new Map,c=(t&wa)!==0;if(c){var g=e;s=je?mr(an(g)):g.appendChild(pr())}je&&nn();var v=null,y=on(()=>{var _=r();return fn(_)?_:_==null?[]:Br(_)}),d,m=!0;function f(){p.fallback=v,eo(p,d,s,t,a),v!==null&&(d.length===0?(v.f&Je)===0?xa(v):(v.f^=Je,St(v,null,s)):ya(v,()=>{v=null}))}var h=rn(()=>{d=n(y);var _=d.length;let w=!1;if(je){var D=sn(s)===ln;D!==(_===0)&&(s=qr(),mr(s),hr(!1),w=!0)}for(var E=new Set,S=ht,M=un(),k=0;k<_;k+=1){je&&Vt.nodeType===cn&&Vt.data===dn&&(s=Vt,w=!0,hr(!1));var I=d[k],A=a(I,k),j=m?null:b.get(A);j?(j.v&&Kr(j.v,I),j.i&&Kr(j.i,k),M&&S.skipped_effects.delete(j.e)):(j=to(b,m?s:ea??=pr(),I,A,k,i,t,r),m||(j.e.f|=Je),b.set(A,j)),E.add(A)}if(_===0&&o&&!v&&(m?v=Ar(()=>o(s)):(v=Ar(()=>o(ea??=pr())),v.f|=Je)),je&&_>0&&mr(qr()),!m)if(M){for(const[L,H]of b)E.has(L)||S.skipped_effects.add(H.e);S.oncommit(f),S.ondiscard(()=>{})}else f();w&&hr(!0),n(y)}),p={effect:h,items:b,outrogroups:null,fallback:v};m=!1,je&&(s=Vt)}function eo(e,t,r,a,i){var o=(a&xn)!==0,s=t.length,b=e.items,c=e.effect.first,g,v=null,y,d=[],m=[],f,h,p,_;if(o)for(_=0;_<s;_+=1)f=t[_],h=i(f,_),p=b.get(h).e,(p.f&Je)===0&&(p.nodes?.a?.measure(),(y??=new Set).add(p));for(_=0;_<s;_+=1){if(f=t[_],h=i(f,_),p=b.get(h).e,e.outrogroups!==null)for(const j of e.outrogroups)j.pending.delete(p),j.done.delete(p);if((p.f&Je)!==0)if(p.f^=Je,p===c)St(p,null,r);else{var w=v?v.next:c;p===e.effect.last&&(e.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),$e(e,v,p),$e(e,p,w),St(p,w,r),v=p,d=[],m=[],c=v.next;continue}if((p.f&_r)!==0&&(xa(p),o&&(p.nodes?.a?.unfix(),(y??=new Set).delete(p))),p!==c){if(g!==void 0&&g.has(p)){if(d.length<m.length){var D=m[0],E;v=D.prev;var S=d[0],M=d[d.length-1];for(E=0;E<d.length;E+=1)St(d[E],D,r);for(E=0;E<m.length;E+=1)g.delete(m[E]);$e(e,S.prev,M.next),$e(e,v,S),$e(e,M,D),c=D,v=M,_-=1,d=[],m=[]}else g.delete(p),St(p,c,r),$e(e,p.prev,p.next),$e(e,p,v===null?e.effect.first:v.next),$e(e,v,p),v=p;continue}for(d=[],m=[];c!==null&&c!==p;)(g??=new Set).add(c),m.push(c),c=c.next;if(c===null)continue}(p.f&Je)===0&&d.push(p),v=p,c=p.next}if(e.outrogroups!==null){for(const j of e.outrogroups)j.pending.size===0&&(Ir(Br(j.done)),e.outrogroups?.delete(j));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||g!==void 0){var k=[];if(g!==void 0)for(p of g)(p.f&_r)===0&&k.push(p);for(;c!==null;)(c.f&_r)===0&&c!==e.fallback&&k.push(c),c=c.next;var I=k.length;if(I>0){var A=(a&wa)!==0&&s===0?r:null;if(o){for(_=0;_<I;_+=1)k[_].nodes?.a?.measure();for(_=0;_<I;_+=1)k[_].nodes?.a?.fix()}$n(e,k,A)}}o&&Mt(()=>{if(y!==void 0)for(p of y)p.nodes?.a?.apply()})}function to(e,t,r,a,i,o,s,b){var c=(s&bn)!==0?(s&gn)===0?vn(r,!1,!1):Xr(r):null,g=(s&pn)!==0?Xr(i):null;return{v:c,i:g,e:Ar(()=>(o(t,c??r,g??i,b),()=>{e.delete(a)}))}}function St(e,t,r){if(e.nodes)for(var a=e.nodes.start,i=e.nodes.end,o=t&&(t.f&Je)===0?t.nodes.start:r;a!==null;){var s=mn(a);if(o.before(a),a===i)return;a=s}}function $e(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}const ro=()=>performance.now(),Xe={tick:e=>requestAnimationFrame(e),now:()=>ro(),tasks:new Set};function ja(){const e=Xe.now();Xe.tasks.forEach(t=>{t.c(e)||(Xe.tasks.delete(t),t.f())}),Xe.tasks.size!==0&&Xe.tick(ja)}function ao(e){let t;return Xe.tasks.size===0&&Xe.tick(ja),{promise:new Promise(r=>{Xe.tasks.add(t={c:e,f:r})}),abort(){Xe.tasks.delete(t)}}}function no(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function ta(e){const t={},r=e.split(";");for(const a of r){const[i,o]=a.split(":");if(!i||o===void 0)break;const s=no(i.trim());t[s]=o.trim()}return t}const oo=e=>e;function Ca(e,t,r){var a=yn,i=a.nodes,o,s,b,c=null;i.a??={element:e,measure(){o=this.element.getBoundingClientRect()},apply(){if(b?.abort(),s=this.element.getBoundingClientRect(),o.left!==s.left||o.right!==s.right||o.top!==s.top||o.bottom!==s.bottom){const g=t()(this.element,{from:o,to:s},r?.());b=Ma(this.element,g,void 0,1,()=>{b?.abort(),b=void 0})}},fix(){if(!e.getAnimations().length){var{position:g,width:v,height:y}=getComputedStyle(e);if(g!=="absolute"&&g!=="fixed"){var d=e.style;c={position:d.position,width:d.width,height:d.height,transform:d.transform},d.position="absolute",d.width=v,d.height=y;var m=e.getBoundingClientRect();if(o.left!==m.left||o.top!==m.top){var f=`translate(${o.left-m.left}px, ${o.top-m.top}px)`;d.transform=d.transform?`${d.transform} ${f}`:f}}}},unfix(){if(c){var g=e.style;g.position=c.position,g.width=c.width,g.height=c.height,g.transform=c.transform}}},i.a.element=e}function Ma(e,t,r,a,i){if(wn(t)){var o,s=!1;return Mt(()=>{if(!s){var h=t({direction:"in"});o=Ma(e,h,r,a,i)}}),{abort:()=>{s=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(!t?.duration)return i(),{abort:Et,deactivate:Et,reset:Et,t:()=>a};const{delay:b=0,css:c,tick:g,easing:v=oo}=t;var y=[];if(g&&g(0,1),c){var d=ta(c(0,1));y.push(d,d)}var m=()=>1-a,f=e.animate(y,{duration:b,fill:"forwards"});return f.onfinish=()=>{f.cancel();var h=1-a,p=a-h,_=t.duration*Math.abs(p),w=[];if(_>0){var D=!1;if(c)for(var E=Math.ceil(_/16.666666666666668),S=0;S<=E;S+=1){var M=h+p*v(S/E),k=ta(c(M,1-M));w.push(k),D||=k.overflow==="hidden"}D&&(e.style.overflow="hidden"),m=()=>{var I=f.currentTime;return h+p*v(I/_)},g&&ao(()=>{if(f.playState!=="running")return!1;var I=m();return g(I,1-I),!0})}f=e.animate(w,{duration:_,fill:"forwards"}),f.onfinish=()=>{m=()=>a,g?.(a,1-a),i()}},{abort:()=>{f&&(f.cancel(),f.effect=null,f.onfinish=Et)},deactivate:()=>{i=Et},reset:()=>{},t:()=>m()}}function Pa(e,t,r){kn(()=>{var a=ka(()=>t(e,r?.())||{});if(r&&a?.update){var i=!1,o={};Wr(()=>{var s=r();Tn(s),i&&Dn(o,s)&&(o=s,a.update(s))}),i=!0}if(a?.destroy)return()=>a.destroy()})}const ra=[...` 	
\r\fÂ \v\uFEFF`];function io(e,t,r){var a=e==null?"":""+e;if(t&&(a=a?a+" "+t:t),r){for(var i in r)if(r[i])a=a?a+" "+i:i;else if(a.length)for(var o=i.length,s=0;(s=a.indexOf(i,s))>=0;){var b=s+o;(s===0||ra.includes(a[s-1]))&&(b===a.length||ra.includes(a[b]))?a=(s===0?"":a.substring(0,s))+a.substring(b+1):s=b}}return a===""?null:a}function aa(e,t=!1){var r=t?" !important;":";",a="";for(var i in e){var o=e[i];o!=null&&o!==""&&(a+=" "+i+": "+o+r)}return a}function xr(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function so(e,t){if(t){var r="",a,i;if(Array.isArray(t)?(a=t[0],i=t[1]):a=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,b=!1,c=[];a&&c.push(...Object.keys(a).map(xr)),i&&c.push(...Object.keys(i).map(xr));var g=0,v=-1;const h=e.length;for(var y=0;y<h;y++){var d=e[y];if(b?d==="/"&&e[y-1]==="*"&&(b=!1):o?o===d&&(o=!1):d==="/"&&e[y+1]==="*"?b=!0:d==='"'||d==="'"?o=d:d==="("?s++:d===")"&&s--,!b&&o===!1&&s===0){if(d===":"&&v===-1)v=y;else if(d===";"||y===h-1){if(v!==-1){var m=xr(e.substring(g,v).trim());if(!c.includes(m)){d!==";"&&y++;var f=e.substring(g,y).trim();r+=" "+f+";"}}g=y+1,v=-1}}}}return a&&(r+=aa(a)),i&&(r+=aa(i,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function ie(e,t,r,a,i,o){var s=e.__className;if(je||s!==r||s===void 0){var b=io(r,a,o);(!je||b!==e.getAttribute("class"))&&(b==null?e.removeAttribute("class"):e.className=b),e.__className=r}else if(o&&i!==o)for(var c in o){var g=!!o[c];(i==null||g!==!!i[c])&&e.classList.toggle(c,g)}return o}function yr(e,t={},r,a){for(var i in r){var o=r[i];t[i]!==o&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,a))}}function Wt(e,t,r,a){var i=e.__style;if(je||i!==t){var o=so(t,a);(!je||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}else a&&(Array.isArray(a)?(yr(e,r?.[0],a[0]),yr(e,r?.[1],a[1],"important")):yr(e,r,a));return a}const lo=Symbol("is custom element"),co=Symbol("is html");function rt(e){if(je){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var a=e.value;Or(e,"value",null),e.value=a}if(e.hasAttribute("checked")){var i=e.checked;Or(e,"checked",null),e.checked=i}}};e.__on_r=r,Mt(r),En()}}function uo(e,t){var r=Na(e);r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Or(e,t,r,a){var i=Na(e);je&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=r)&&(t==="loading"&&(e[An]=r),r==null?e.removeAttribute(t):typeof r!="string"&&vo(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Na(e){return e.__attributes??={[lo]:e.nodeName.includes("-"),[co]:e.namespaceURI===In}}var na=new Map;function vo(e){var t=e.getAttribute("is")||e.nodeName,r=na.get(t);if(r)return r;na.set(t,r=[]);for(var a,i=e,o=Element.prototype;o!==i;){a=Sn(i);for(var s in a)a[s].set&&r.push(s);i=On(i)}return r}function zr(e,t,r=t){var a=new WeakSet;Ta(e,"input",async i=>{var o=i?e.defaultValue:e.value;if(o=kr(e)?Tr(o):o,r(o),ht!==null&&a.add(ht),await jn(),o!==(o=t())){var s=e.selectionStart,b=e.selectionEnd,c=e.value.length;if(e.value=o??"",b!==null){var g=e.value.length;s===b&&b===c&&g>c?(e.selectionStart=g,e.selectionEnd=g):(e.selectionStart=s,e.selectionEnd=Math.min(b,g))}}}),(je&&e.defaultValue!==e.value||ka(t)==null&&e.value)&&(r(kr(e)?Tr(e.value):e.value),ht!==null&&a.add(ht)),Wr(()=>{var i=t();if(e===document.activeElement){var o=Cn??ht;if(a.has(o))return}kr(e)&&i===Tr(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}const wr=new Set;function $t(e,t,r,a,i=a){var o=r.getAttribute("type")==="checkbox",s=e;let b=!1;if(t!==null)for(var c of t)s=s[c]??=[];s.push(r),Ta(r,"change",()=>{var g=r.__value;o&&(g=oa(s,g,r.checked)),i(g)},()=>i(o?[]:null)),Wr(()=>{var g=a();if(je&&r.defaultChecked!==r.checked){b=!0;return}o?(g=g||[],r.checked=g.includes(r.__value)):r.checked=Mn(r.__value,g)}),Pn(()=>{var g=s.indexOf(r);g!==-1&&s.splice(g,1)}),wr.has(s)||(wr.add(s),Mt(()=>{s.sort((g,v)=>g.compareDocumentPosition(v)===4?-1:1),wr.delete(s)})),Mt(()=>{if(b){var g;if(o)g=oa(s,g,r.checked);else{var v=s.find(y=>y.checked);g=v?.__value}i(g)}})}function oa(e,t,r){for(var a=new Set,i=0;i<e.length;i+=1)e[i].checked&&a.add(e[i].__value);return r||a.delete(t),Array.from(a)}function kr(e){var t=e.type;return t==="number"||t==="range"}function Tr(e){return e===""?null:+e}const At={regular:{sev1:"Core to who I am or want to become",sev2:"Significant progress toward a major goal",sev3:"Meaningful but not defining",sev4:"Nice to do, no real deadline",sev5:"Pure exploration or fun"},maintenance:{sev1:"Immediate risk if ignored (safety, legal, financial)",sev2:"Disrupts daily life if neglected",sev3:"Routine upkeep, flexible timing",sev4:"Minor improvement, no consequences",sev5:"Cosmetic or nice-to-have"}},fo=["ðŸ’¼","ðŸ ","ðŸ’ª","ðŸ“š","ðŸ’°","â¤ï¸","ðŸŽ¯","ðŸš€","ðŸŽ¨","ðŸŽµ","âœˆï¸","ðŸŽ","ðŸ§˜","ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦","ðŸ¤","ðŸ“±","ðŸ’»","ðŸ”§","ðŸ“","ðŸŽ“","ðŸƒ","ðŸ§ ","ðŸŒ±","â­","ðŸ”¥","ðŸ’¡","ðŸŽ®","ðŸ“¸","ðŸ›’","ðŸ¦","ðŸš—","ðŸ‹ï¸"];pe(["click","keydown"]);var bo=B('<button><span class="text-lg"> </span> <span class="text-[10px] font-medium truncate"> </span></button>'),go=B('<nav class="pb-6 fixed bottom-0 left-0 right-0 bg-base-200 border-t border-base-content/10 flex justify-around pt-2 px-1 safe-bottom"></nav>');function po(e,t){_e(t,!0);const r=[{id:"areas",icon:"ðŸ“",label:"Areas"},{id:"week",icon:"ðŸ“…",label:"Week"},{id:"today",icon:"â˜€ï¸",label:"Today"}];var a=go();De(a,21,()=>r,Pe,(i,o)=>{var s=bo();let b;s.__click=()=>t.onTabChange(n(o).id);let c;var g=u(s),v=u(g,!0);l(g);var y=x(g,2),d=u(y,!0);l(y),l(s),X(()=>{b=ie(s,1,"flex flex-col items-center gap-1 px-3 py-1 rounded-lg transition-colors min-w-0 flex-1",null,b,{"text-primary":t.activeTab===n(o).id,"text-base-content":t.activeTab!==n(o).id}),c=Wt(s,"",c,{opacity:t.activeTab===n(o).id?1:.4}),W(v,n(o).icon),W(d,n(o).label)}),T(i,s)}),l(a),T(e,a),xe()}pe(["click"]);var mo=B('<button type="button"><span class="text-xs font-medium"> </span> <span class="text-lg"> </span></button>'),ho=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><div><h2 class="text-lg font-semibold">Assign to Day</h2> <p class="text-xs text-base-content/50 truncate"> </p></div> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 grid grid-cols-7 gap-1"></div> <div class="p-4 pt-0"><button type="button" class="w-full p-3 text-sm text-base-content/50 hover:text-base-content rounded-lg border border-base-content/10 hover:border-primary transition-colors">Remove from all days</button></div></div></div>');function _o(e,t){_e(t,!0);let r=J(!1),a=J(null);function i(d,m,f,h){d.stopPropagation(),O(a,{task:m,project:f,area:h},!0),O(r,!0)}function o(){O(r,!1),O(a,null)}function s(){return Ln(t.currentWeekOf).map(d=>({date:d,dayName:Da(d),isToday:Fn(d)}))}async function b(d){if(!n(a))return;const{task:m,project:f,area:h}=n(a);o();const p=t.isTaskAssignedToDay(m.id);p===d?await qt(m.id,f.id,t.currentWeekOf,d):(p&&await qt(m.id,f.id,t.currentWeekOf,p),await Rn(m.id,f.id,h.id,m.name,t.currentWeekOf,d,!1))}var c={openDayPicker:i},g=de(),v=ne(g);{var y=d=>{var m=ho(),f=u(m);f.__click=o,f.__keydown=I=>I.key==="Escape"&&o();var h=x(f,2),p=u(h),_=u(p),w=x(u(_),2),D=u(w,!0);l(w),l(_);var E=x(_,2);E.__click=o,l(p);var S=x(p,2);De(S,21,s,Pe,(I,A)=>{const j=$(()=>t.isTaskAssignedToDay(n(a).task.id)===n(A).date);var L=mo();L.__click=()=>b(n(A).date);var H=u(L),z=u(H,!0);l(H);var V=x(H,2),P=u(V,!0);l(V),l(L),X(G=>{ie(L,1,`flex flex-col items-center p-2 rounded-lg border transition-colors ${n(j)?"bg-primary text-primary-content border-primary":n(A).isToday?"border-primary/50 hover:border-primary":"border-base-content/10 hover:border-primary"}`),W(z,n(A).dayName),W(P,G)},[()=>n(A).date.split("-")[2]]),T(I,L)}),l(S);var M=x(S,2),k=u(M);k.__click=()=>{const I=t.isTaskAssignedToDay(n(a).task.id);I&&qt(n(a).task.id,n(a).project.id,t.currentWeekOf,I),o()},l(M),l(h),l(m),X(()=>W(D,n(a).task.name)),T(d,m)};q(v,d=>{n(r)&&n(a)&&d(y)})}return T(e,g),xe(c)}pe(["click","keydown"]);function ia(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ia(Object(r),!0).forEach(function(a){wt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ia(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function _t(e){"@babel/helpers - typeof";return _t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(e)}function wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xo(e,t){if(e==null)return{};var r={},a=Object.keys(e),i,o;for(o=0;o<a.length;o++)i=a[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function yo(e,t){if(e==null)return{};var r=xo(e,t),a,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)a=o[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function wo(e,t){return To(e)||Eo(e,t)||Gr(e,t)||Io()}function Be(e){return ko(e)||Do(e)||Gr(e)||Ao()}function ko(e){if(Array.isArray(e))return Sr(e)}function To(e){if(Array.isArray(e))return e}function Do(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Eo(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a=[],i=!0,o=!1,s,b;try{for(r=r.call(e);!(i=(s=r.next()).done)&&(a.push(s.value),!(t&&a.length===t));i=!0);}catch(c){o=!0,b=c}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw b}}return a}}function Gr(e,t){if(e){if(typeof e=="string")return Sr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sr(e,t)}}function Sr(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Ao(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Io(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zt(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Gr(e))||t){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,b;return{s:function(){r=r.call(e)},n:function(){var c=r.next();return o=c.done,c},e:function(c){s=!0,b=c},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(s)throw b}}}}var Oo="finalize",So="consider";function kt(e,t,r){e.dispatchEvent(new CustomEvent(Oo,{detail:{items:t,info:r}}))}function nt(e,t,r){e.dispatchEvent(new CustomEvent(So,{detail:{items:t,info:r}}))}var sr="draggedEntered",Gt="draggedLeft",lr="draggedOverIndex",Ur="draggedLeftDocument",tr={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function jo(e,t,r){e.dispatchEvent(new CustomEvent(sr,{detail:{indexObj:t,draggedEl:r}}))}function Co(e,t,r){e.dispatchEvent(new CustomEvent(Gt,{detail:{draggedEl:t,type:tr.LEFT_FOR_ANOTHER,theOtherDz:r}}))}function Mo(e,t){e.dispatchEvent(new CustomEvent(Gt,{detail:{draggedEl:t,type:tr.OUTSIDE_OF_ANY}}))}function Po(e,t,r){e.dispatchEvent(new CustomEvent(lr,{detail:{indexObj:t,draggedEl:r}}))}function No(e){window.dispatchEvent(new CustomEvent(Ur,{detail:{draggedEl:e}}))}var Ie={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:sr,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:lr,DRAGGED_LEFT:Gt,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Me={POINTER:"pointer",KEYBOARD:"keyboard"},cr="isDndShadowItem",dr="data-is-dnd-shadow-item-internal",Ro="data-is-dnd-shadow-item-hint",Ra="id:dnd-shadow-placeholder-0000",Lo="dnd-action-dragged-el",ge="id",jr=0;function La(){jr++}function Fa(){if(jr===0)throw new Error("Bug! trying to decrement when there are no dropzones");jr--}var Hr=typeof window>"u";function Cr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r,a=t?Wo(e):e.getBoundingClientRect(),i=getComputedStyle(e),o=i.transform;if(o){var s,b,c,g;if(o.startsWith("matrix3d("))r=o.slice(9,-1).split(/, /),s=+r[0],b=+r[5],c=+r[12],g=+r[13];else if(o.startsWith("matrix("))r=o.slice(7,-1).split(/, /),s=+r[0],b=+r[3],c=+r[4],g=+r[5];else return a;var v=i.transformOrigin,y=a.x-c-(1-s)*parseFloat(v),d=a.y-g-(1-b)*parseFloat(v.slice(v.indexOf(" ")+1)),m=s?a.width/s:e.offsetWidth,f=b?a.height/b:e.offsetHeight;return{x:y,y:d,width:m,height:f,top:d,right:y+m,bottom:d+f,left:y}}else return a}function Ba(e){var t=Cr(e);return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function Wa(e){var t=e.getBoundingClientRect();return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function za(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Fo(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ur(e,t){return e.y<=t.bottom&&e.y>=t.top&&e.x>=t.left&&e.x<=t.right}function Nt(e){return za(Wa(e))}function sa(e,t){var r=Nt(e),a=Ba(t);return ur(r,a)}function la(e,t){var r=Nt(e),a=Nt(t);return Fo(r,a)}function Bo(e){var t=Wa(e);return t.right<0||t.left>document.documentElement.scrollWidth||t.bottom<0||t.top>document.documentElement.scrollHeight}function Wo(e){for(var t=e.getBoundingClientRect(),r={top:t.top,bottom:t.bottom,left:t.left,right:t.right},a=!1,i=!1,o=e.parentElement;o&&o!==document.body;){var s=window.getComputedStyle(o),b=s.overflowY,c=s.overflowX,g=b==="scroll"||b==="auto",v=c==="scroll"||c==="auto";if(g||v){var y=o.getBoundingClientRect();if(g){var d=Math.max(r.top,y.top),m=Math.min(r.bottom,y.bottom);(d!==r.top||m!==r.bottom)&&(a=!0),r.top=d,r.bottom=m}if(v){var f=Math.max(r.left,y.left),h=Math.min(r.right,y.right);(f!==r.left||h!==r.right)&&(i=!0),r.left=f,r.right=h}}o=o.parentElement}return a||i?{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}:{top:t.top,bottom:t.bottom,left:t.left,right:t.right,width:Math.max(0,t.right-t.left),height:Math.max(0,t.bottom-t.top)}}var xt;function Vr(){xt=new Map}Vr();function zo(e){var t=Array.from(e.children).findIndex(function(r){return r.getAttribute(dr)});if(t>=0)return xt.has(e)||xt.set(e,new Map),xt.get(e).set(t,Ba(e.children[t])),t}function Go(e,t){if(!sa(e,t))return null;var r=t.children;if(r.length===0)return{index:0,isProximityBased:!0};for(var a=zo(t),i=0;i<r.length;i++)if(sa(e,r[i])){var o=xt.has(t)&&xt.get(t).get(i);return o&&!ur(Nt(e),o)?{index:a,isProximityBased:!1}:{index:i,isProximityBased:!1}}for(var s=Number.MAX_VALUE,b=void 0,c=0;c<r.length;c++){var g=la(e,r[c]);g<s&&(s=g,b=c)}if(r.length>0){var v=r.length,y=r[v-1],d=y.cloneNode(!1);d.style.visibility="hidden",d.style.pointerEvents="none",t.appendChild(d);var m=la(e,d);m<s&&(b=v),t.removeChild(d)}return{index:b,isProximityBased:!0}}function It(e){return JSON.stringify(e,null,2)}function rr(e){if(!e)throw new Error("cannot get depth of a falsy node");return Ga(e,0)}function Ga(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?Ga(e.parentElement,t+1):t-1}function Uo(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!{}.hasOwnProperty.call(t,r)||t[r]!==e[r])return!1;return!0}function Ho(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var Vo=200,ca=10,Mr;function Zo(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Vo,a=arguments.length>3?arguments[3]:void 0,i,o,s=!1,b,c=Array.from(t).sort(function(v,y){return rr(y)-rr(v)});function g(){var v=Nt(e),y=a.multiScrollIfNeeded();if(!y&&b&&Math.abs(b.x-v.x)<ca&&Math.abs(b.y-v.y)<ca){Mr=window.setTimeout(g,r);return}if(Bo(e)){No(e);return}b=v;var d=!1,m=zt(c),f;try{for(m.s();!(f=m.n()).done;){var h=f.value;y&&Vr();var p=Go(e,h);if(p!==null){var _=p.index;d=!0,h!==i?(i&&Co(i,e,h),jo(h,p,e),i=h):_!==o&&(Po(h,p,e),o=_);break}}}catch(w){m.e(w)}finally{m.f()}!d&&s&&i?(Mo(i,e),i=void 0,o=void 0,s=!1):s=!0,Mr=window.setTimeout(g,r)}g()}function Yo(){clearTimeout(Mr),Vr()}var Ot=30;function qo(){var e;function t(){e={directionObj:void 0,stepPx:0}}t();function r(o){var s=e,b=s.directionObj,c=s.stepPx;b&&(o.scrollBy(b.x*c,b.y*c),window.requestAnimationFrame(function(){return r(o)}))}function a(o){return Ot-o}function i(o,s){if(!s)return!1;var b=Ko(o,s),c=!!e.directionObj;if(b===null)return c&&t(),!1;var g=!1,v=!1;return s.scrollHeight>s.clientHeight&&(b.bottom<Ot?(g=!0,e.directionObj={x:0,y:1},e.stepPx=a(b.bottom)):b.top<Ot&&(g=!0,e.directionObj={x:0,y:-1},e.stepPx=a(b.top)),!c&&g)||s.scrollWidth>s.clientWidth&&(b.right<Ot?(v=!0,e.directionObj={x:1,y:0},e.stepPx=a(b.right)):b.left<Ot&&(v=!0,e.directionObj={x:-1,y:0},e.stepPx=a(b.left)),!c&&v)?(r(s),!0):(t(),!1)}return{scrollIfNeeded:i,resetScrolling:t}}function Ko(e,t){var r=t===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:t.getBoundingClientRect();return ur(e,r)?{top:e.y-r.top,bottom:r.bottom-e.y,left:e.x-r.left,right:r.right-e.x}:null}function Xo(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=Qo(e),a=Array.from(r).sort(function(c,g){return rr(g)-rr(c)}),i=qo(),o=i.scrollIfNeeded,s=i.resetScrolling;function b(){var c=t();if(!c||!a)return!1;for(var g=a.filter(function(d){return ur(c,d.getBoundingClientRect())||d===document.scrollingElement}),v=0;v<g.length;v++){var y=o(c,g[v]);if(y)return!0}return!1}return{multiScrollIfNeeded:r.size>0?b:function(){return!1},destroy:function(){return s()}}}function Jo(e){if(!e)return[];for(var t=[],r=e;r;){var a=window.getComputedStyle(r),i=a.overflow;i.split(" ").some(function(o){return o.includes("auto")||o.includes("scroll")})&&t.push(r),r=r.parentElement}return t}function Qo(e){var t=new Set,r=zt(e),a;try{for(r.s();!(a=r.n()).done;){var i=a.value;Jo(i).forEach(function(o){return t.add(o)})}}catch(o){r.e(o)}finally{r.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&t.add(document.scrollingElement),t}function $o(e){var t=e.cloneNode(!0),r=[],a=e.tagName==="SELECT",i=a?[e]:Be(e.querySelectorAll("select")),o=zt(i),s;try{for(o.s();!(s=o.n()).done;){var b=s.value;r.push(b.value)}}catch(D){o.e(D)}finally{o.f()}if(i.length>0)for(var c=a?[t]:Be(t.querySelectorAll("select")),g=0;g<c.length;g++){var v=c[g],y=r[g],d=v.querySelector('option[value="'.concat(y,'"'));d&&d.setAttribute("selected",!0)}var m=e.tagName==="CANVAS",f=m?[e]:Be(e.querySelectorAll("canvas"));if(f.length>0)for(var h=m?[t]:Be(t.querySelectorAll("canvas")),p=0;p<h.length;p++){var _=f[p],w=h[p];w.width=_.width,w.height=_.height,_.width>0&&_.height>0&&w.getContext("2d").drawImage(_,0,0)}return t}var Rt=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),ei=wt({},Rt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function Ua(e){if(!Rt[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(Rt)));return ei[e]}var ti=.2;function lt(e){return"".concat(e," ").concat(ti,"s ease")}function ri(e,t){var r=e.getBoundingClientRect(),a=$o(e);Ha(e,a),a.id=Lo,a.style.position="fixed";var i=r.top,o=r.left;if(a.style.top="".concat(i,"px"),a.style.left="".concat(o,"px"),t){var s=za(r);i-=s.y-t.y,o-=s.x-t.x,window.setTimeout(function(){a.style.top="".concat(i,"px"),a.style.left="".concat(o,"px")},0)}return a.style.margin="0",a.style.boxSizing="border-box",a.style.height="".concat(r.height,"px"),a.style.width="".concat(r.width,"px"),a.style.transition="".concat(lt("top"),", ").concat(lt("left"),", ").concat(lt("background-color"),", ").concat(lt("opacity"),", ").concat(lt("color")," "),window.setTimeout(function(){return a.style.transition+=", ".concat(lt("width"),", ").concat(lt("height"))},0),a.style.zIndex="9999",a.style.cursor="grabbing",a}function ai(e){e.style.cursor="grab"}function ni(e,t,r,a){Ha(t,e);var i=t.getBoundingClientRect(),o=e.getBoundingClientRect(),s=i.width-o.width,b=i.height-o.height;if(s||b){var c={left:(r-o.left)/o.width,top:(a-o.top)/o.height};Ua(Rt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(i.height,"px"),e.style.width="".concat(i.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-c.left*s,"px"),e.style.top="".concat(parseFloat(e.style.top)-c.top*b,"px")}}function Ha(e,t){var r=window.getComputedStyle(e);Array.from(r).filter(function(a){return a.startsWith("background")||a.startsWith("padding")||a.startsWith("font")||a.startsWith("text")||a.startsWith("align")||a.startsWith("justify")||a.startsWith("display")||a.startsWith("flex")||a.startsWith("border")||a==="opacity"||a==="color"||a==="list-style-type"||Ua(Rt.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(a==="width"||a==="height")}).forEach(function(a){return t.style.setProperty(a,r.getPropertyValue(a),r.getPropertyPriority(a))})}function oi(e,t){e.draggable=!1,e.ondragstart=function(){return!1},t?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function Va(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function ii(e){e.style.visibility="hidden",e.setAttribute(dr,"true")}function si(e){e.style.visibility="",e.removeAttribute(dr)}function Kt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(a){var i=t(a);Object.keys(i).forEach(function(o){a.style[o]=i[o]}),r(a).forEach(function(o){return a.classList.add(o)})})}function ar(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(a){var i=t(a);Object.keys(i).forEach(function(o){a.style[o]=""}),r(a).forEach(function(o){return a.classList.contains(o)&&a.classList.remove(o)})})}function li(e){var t=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var r=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=t,e.style.minWidth=r}}var ci="--any--",di=100,ui=20,Zt=3,vi=80,da={outline:"rgba(255, 255, 102, 0.7) solid 2px"},ua="data-is-dnd-original-dragged-item",Se,he,Ce,vr,ue,fr,at,we,Ue,ke,et=!1,Zr=!1,Yr,Ut=!1,Xt=[],Ct,He,jt=!1,Ge=new Map,fe=new Map,Dr=new WeakMap;function fi(e,t){Ge.has(t)||Ge.set(t,new Set),Ge.get(t).has(e)||(Ge.get(t).add(e),La())}function va(e,t){Ge.get(t).delete(e),Fa(),Ge.get(t).size===0&&Ge.delete(t)}function bi(){var e=Ge.get(vr),t=zt(e),r;try{for(t.s();!(r=t.n()).done;){var a=r.value;a.addEventListener(sr,Za),a.addEventListener(Gt,Ya),a.addEventListener(lr,qa)}}catch(s){t.e(s)}finally{t.f()}window.addEventListener(Ur,Tt);var i=Math.max.apply(Math,Be(Array.from(e.keys()).map(function(s){return fe.get(s).dropAnimationDurationMs}))),o=i===0?ui:Math.max(i,di);Ct=Xo(e,function(){return ke}),Zo(he,e,o*1.07,Ct)}function gi(){var e=Ge.get(vr),t=zt(e),r;try{for(t.s();!(r=t.n()).done;){var a=r.value;a.removeEventListener(sr,Za),a.removeEventListener(Gt,Ya),a.removeEventListener(lr,qa)}}catch(i){t.e(i)}finally{t.f()}window.removeEventListener(Ur,Tt),Ct&&(Ct.destroy(),Ct=void 0),Yo()}function br(e){return e.findIndex(function(t){return!!t[cr]})}function pi(e){var t;return er(er({},e),{},(t={},wt(t,cr,!0),wt(t,ge,Ra),t))}function Za(e){var t=fe.get(e.currentTarget),r=t.items,a=t.dropFromOthersDisabled;if(!(a&&e.currentTarget!==ue)){if(Ut=!1,r=r.filter(function(b){return b[ge]!==at[ge]&&b[ge]!==Ra}),ue!==e.currentTarget){var i=fe.get(ue).items,o=i.filter(function(b){return!b[cr]});nt(ue,o,{trigger:Ie.DRAGGED_ENTERED_ANOTHER,id:Ce[ge],source:Me.POINTER})}var s=e.detail.indexObj.index;we=e.currentTarget,r.splice(s,0,at),nt(e.currentTarget,r,{trigger:Ie.DRAGGED_ENTERED,id:Ce[ge],source:Me.POINTER})}}function Ya(e){if(et){var t=fe.get(e.currentTarget),r=t.items,a=t.dropFromOthersDisabled;if(!(a&&e.currentTarget!==ue&&e.currentTarget!==we)){var i=Be(r),o=br(i);o!==-1&&i.splice(o,1);var s=we;we=void 0;var b=e.detail,c=b.type,g=b.theOtherDz;if(c===tr.OUTSIDE_OF_ANY||c===tr.LEFT_FOR_ANOTHER&&g!==ue&&fe.get(g).dropFromOthersDisabled){Ut=!0,we=ue;var v=s===ue?i:Be(fe.get(ue).items);v.splice(fr,0,at),nt(ue,v,{trigger:Ie.DRAGGED_LEFT_ALL,id:Ce[ge],source:Me.POINTER})}nt(e.currentTarget,i,{trigger:Ie.DRAGGED_LEFT,id:Ce[ge],source:Me.POINTER})}}}function qa(e){var t=fe.get(e.currentTarget),r=t.items,a=t.dropFromOthersDisabled;if(!(a&&e.currentTarget!==ue)){var i=Be(r);Ut=!1;var o=e.detail.indexObj.index,s=br(i);s!==-1&&i.splice(s,1),i.splice(o,0,at),nt(e.currentTarget,i,{trigger:Ie.DRAGGED_OVER_INDEX,id:Ce[ge],source:Me.POINTER})}}function nr(e){e.preventDefault();var t=e.touches?e.touches[0]:e;ke={x:t.clientX,y:t.clientY},he.style.transform="translate3d(".concat(ke.x-Ue.x,"px, ").concat(ke.y-Ue.y,"px, 0)")}function Tt(){Zr=!0,window.removeEventListener("mousemove",nr),window.removeEventListener("touchmove",nr),window.removeEventListener("mouseup",Tt),window.removeEventListener("touchend",Tt),gi(),ai(he),we||(we=ue);var e=fe.get(we),t=e.items,r=e.type;ar(Ge.get(r),function(o){return fe.get(o).dropTargetStyle},function(o){return fe.get(o).dropTargetClasses});var a=br(t);a===-1&&we===ue&&(a=fr),t=t.map(function(o){return o[cr]?Ce:o});function i(){Yr(),kt(we,t,{trigger:Ut?Ie.DROPPED_OUTSIDE_OF_ANY:Ie.DROPPED_INTO_ZONE,id:Ce[ge],source:Me.POINTER}),we!==ue&&kt(ue,fe.get(ue).items,{trigger:Ie.DROPPED_INTO_ANOTHER,id:Ce[ge],source:Me.POINTER});var o=Array.from(we.children).find(function(s){return s.getAttribute(dr)});o&&si(o),_i()}fe.get(we).dropAnimationDisabled?i():mi(a,i)}function mi(e,t){var r=e>-1?Cr(we.children[e],!1):Cr(we,!1),a={x:r.left-parseFloat(he.style.left),y:r.top-parseFloat(he.style.top)},i=fe.get(we),o=i.dropAnimationDurationMs,s="transform ".concat(o,"ms ease");he.style.transition=he.style.transition?he.style.transition+","+s:s,he.style.transform="translate3d(".concat(a.x,"px, ").concat(a.y,"px, 0)"),window.setTimeout(t,o)}function hi(e,t){Xt.push({dz:e,destroy:t}),window.requestAnimationFrame(function(){Va(e),document.body.appendChild(e)})}function _i(){he&&he.remove&&he.remove(),Se&&Se.remove&&Se.remove(),he=void 0,Se=void 0,Ce=void 0,vr=void 0,ue=void 0,fr=void 0,at=void 0,we=void 0,Ue=void 0,ke=void 0,et=!1,Zr=!1,Yr=void 0,Ut=!1,He&&clearTimeout(He),He=void 0,jt=!1,Xt.length&&(Xt.forEach(function(e){var t=e.dz,r=e.destroy;r(),t.remove()}),Xt=[])}function xi(e,t){var r=!1,a={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:da,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},i=new Map;function o(){window.addEventListener("mousemove",c,{passive:!1}),window.addEventListener("touchmove",c,{passive:!1,capture:!1}),window.addEventListener("mouseup",b,{passive:!1}),window.addEventListener("touchend",b,{passive:!1})}function s(){window.removeEventListener("mousemove",c),window.removeEventListener("touchmove",c),window.removeEventListener("mouseup",b),window.removeEventListener("touchend",b),He&&(clearTimeout(He),He=void 0,jt=!1)}function b(d){if(s(),Se=void 0,Ue=void 0,ke=void 0,d.type==="touchend"){var m=new Event("click",{bubbles:!0,cancelable:!0});d.target.dispatchEvent(m)}}function c(d){var m=!!d.touches,f=m?d.touches[0]:d;if(m&&a.delayTouchStartMs>0&&!jt){ke={x:f.clientX,y:f.clientY},(Math.abs(ke.x-Ue.x)>=Zt||Math.abs(ke.y-Ue.y)>=Zt)&&(He&&(clearTimeout(He),He=void 0),b(d));return}d.preventDefault(),ke={x:f.clientX,y:f.clientY},(Math.abs(ke.x-Ue.x)>=Zt||Math.abs(ke.y-Ue.y)>=Zt)&&(s(),v())}function g(d){if(!(d.target!==d.currentTarget&&(d.target.value!==void 0||d.target.isContentEditable))&&!d.button&&!et){var m=!!d.touches,f=m&&a.delayTouchStartMs>0;f||d.preventDefault(),d.stopPropagation();var h=m?d.touches[0]:d;Ue={x:h.clientX,y:h.clientY},ke=er({},Ue),Se=d.currentTarget,f&&(jt=!1,He=window.setTimeout(function(){Se&&(jt=!0,s(),v())},a.delayTouchStartMs)),o()}}function v(){et=!0;var d=i.get(Se);fr=d,ue=Se.parentElement;var m=ue.closest("dialog")||ue.closest("[popover]")||ue.getRootNode(),f=m.body||m,h=a.items,p=a.type,_=a.centreDraggedOnCursor,w=Be(h);Ce=w[d],vr=p,at=pi(Ce),he=ri(Se,_&&ke),f.appendChild(he);function D(){Se.parentElement?window.requestAnimationFrame(D):(Se.setAttribute(ua,!0),f.appendChild(Se),bi(),Va(Se),at[ge]=Ce[ge],he.focus())}window.requestAnimationFrame(D),Kt(Array.from(Ge.get(a.type)).filter(function(E){return E===ue||!fe.get(E).dropFromOthersDisabled}),function(E){return fe.get(E).dropTargetStyle},function(E){return fe.get(E).dropTargetClasses}),w.splice(d,1,at),Yr=li(ue),nt(ue,w,{trigger:Ie.DRAG_STARTED,id:Ce[ge],source:Me.POINTER}),window.addEventListener("mousemove",nr,{passive:!1}),window.addEventListener("touchmove",nr,{passive:!1,capture:!1}),window.addEventListener("mouseup",Tt,{passive:!1}),window.addEventListener("touchend",Tt,{passive:!1})}function y(d){var m=d.items,f=m===void 0?void 0:m,h=d.flipDurationMs,p=h===void 0?0:h,_=d.type,w=_===void 0?ci:_,D=d.dragDisabled,E=D===void 0?!1:D,S=d.morphDisabled,M=S===void 0?!1:S,k=d.dropFromOthersDisabled,I=k===void 0?!1:k,A=d.dropTargetStyle,j=A===void 0?da:A,L=d.dropTargetClasses,H=L===void 0?[]:L,z=d.transformDraggedElement,V=z===void 0?function(){}:z,P=d.centreDraggedOnCursor,G=P===void 0?!1:P,U=d.dropAnimationDisabled,K=U===void 0?!1:U,R=d.delayTouchStart,C=R===void 0?!1:R;a.dropAnimationDurationMs=p;var F=0;C===!0?F=vi:typeof C=="number"&&isFinite(C)&&C>=0&&(F=C),a.delayTouchStartMs=F,a.type&&w!==a.type&&va(e,a.type),a.type=w,a.items=Be(f),a.dragDisabled=E,a.morphDisabled=M,a.transformDraggedElement=V,a.centreDraggedOnCursor=G,a.dropAnimationDisabled=K,r&&et&&!Zr&&(!Uo(j,a.dropTargetStyle)||!Ho(H,a.dropTargetClasses))&&(ar([e],function(){return a.dropTargetStyle},function(){return H}),Kt([e],function(){return j},function(){return H})),a.dropTargetStyle=j,a.dropTargetClasses=Be(H);function Y(N,Z){return fe.get(N)?fe.get(N)[Z]:a[Z]}r&&et&&a.dropFromOthersDisabled!==I&&(I?ar([e],function(N){return Y(N,"dropTargetStyle")},function(N){return Y(N,"dropTargetClasses")}):Kt([e],function(N){return Y(N,"dropTargetStyle")},function(N){return Y(N,"dropTargetClasses")})),a.dropFromOthersDisabled=I,fe.set(e,a),fi(e,w);for(var Q=et?br(a.items):-1,se=0;se<e.children.length;se++){var oe=e.children[se];if(oi(oe,E),se===Q){M||ni(he,oe,ke.x,ke.y),a.transformDraggedElement(he,Ce,se),ii(oe);continue}oe.removeEventListener("mousedown",Dr.get(oe)),oe.removeEventListener("touchstart",Dr.get(oe)),E||(oe.addEventListener("mousedown",g),oe.addEventListener("touchstart",g),Dr.set(oe,g)),i.set(oe,se),r||(r=!0)}}return y(t),{update:function(m){y(m)},destroy:function(){function m(){va(e,fe.get(e).type),fe.delete(e)}et&&!e.closest("[".concat(ua,"]"))?hi(e,m):m()}}}var Yt,Pr={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Ka=(Yt={},wt(Yt,Pr.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),wt(Yt,Pr.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),Yt),yi="dnd-action-aria-alert",be;function Nr(){be||(be=document.createElement("div"),(function(){be.id=yi,be.style.position="fixed",be.style.bottom="0",be.style.left="0",be.style.zIndex="-5",be.style.opacity="0",be.style.height="0",be.style.width="0",be.setAttribute("role","alert")})(),document.body.prepend(be),Object.entries(Ka).forEach(function(e){var t=wo(e,2),r=t[0],a=t[1];return document.body.prepend(Ti(r,a))}))}function wi(){return Hr?null:(document.readyState==="complete"?Nr():window.addEventListener("DOMContentLoaded",Nr),er({},Pr))}function ki(){Hr||!be||(Object.keys(Ka).forEach(function(e){var t;return(t=document.getElementById(e))===null||t===void 0?void 0:t.remove()}),be.remove(),be=void 0)}function Ti(e,t){var r=document.createElement("div");return r.id=e,r.innerHTML="<p>".concat(t,"</p>"),r.style.display="none",r.style.position="fixed",r.style.zIndex="-5",r}function yt(e){if(!Hr){be||Nr(),be.innerHTML="";var t=document.createTextNode(e);be.appendChild(t),be.style.display="none",be.style.display="inline"}}var Di="--any--",fa={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Fe=!1,Rr,Te,vt="",ct,Ve,tt="",or=new WeakSet,ba=new WeakMap,ga=new WeakMap,Lr=new Map,ye=new Map,ze=new Map,ir;function Ei(e,t){ze.size===0&&(ir=wi(),window.addEventListener("keydown",Xa),window.addEventListener("click",Ja)),ze.has(t)||ze.set(t,new Set),ze.get(t).has(e)||(ze.get(t).add(e),La())}function pa(e,t){Te===e&&Lt(),ze.get(t).delete(e),Fa(),ze.get(t).size===0&&ze.delete(t),ze.size===0&&(window.removeEventListener("keydown",Xa),window.removeEventListener("click",Ja),ir=void 0,ki())}function Xa(e){if(Fe)switch(e.key){case"Escape":{Lt();break}}}function Ja(){Fe&&(or.has(document.activeElement)||Lt())}function Ai(e){if(Fe){var t=e.currentTarget;if(t!==Te){vt=t.getAttribute("aria-label")||"";var r=ye.get(Te),a=r.items,i=a.find(function(y){return y[ge]===Ve}),o=a.indexOf(i),s=a.splice(o,1)[0],b=ye.get(t),c=b.items,g=b.autoAriaDisabled;t.getBoundingClientRect().top<Te.getBoundingClientRect().top||t.getBoundingClientRect().left<Te.getBoundingClientRect().left?(c.push(s),g||yt("Moved item ".concat(tt," to the end of the list ").concat(vt))):(c.unshift(s),g||yt("Moved item ".concat(tt," to the beginning of the list ").concat(vt)));var v=Te;kt(v,a,{trigger:Ie.DROPPED_INTO_ANOTHER,id:Ve,source:Me.KEYBOARD}),kt(t,c,{trigger:Ie.DROPPED_INTO_ZONE,id:Ve,source:Me.KEYBOARD}),Te=t}}}function Qa(){Lr.forEach(function(e,t){var r=e.update;return r(ye.get(t))})}function Lt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;ye.get(Te).autoAriaDisabled||yt("Stopped dragging item ".concat(tt)),or.has(document.activeElement)&&document.activeElement.blur(),e&&nt(Te,ye.get(Te).items,{trigger:Ie.DRAG_STOPPED,id:Ve,source:Me.KEYBOARD}),ar(ze.get(Rr),function(t){return ye.get(t).dropTargetStyle},function(t){return ye.get(t).dropTargetClasses}),ct=null,Ve=null,tt="",Rr=null,Te=null,vt="",Fe=!1,Qa()}function Ii(e,t){var r={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:fa,dropTargetClasses:[],autoAriaDisabled:!1};function a(v,y,d){v.length<=1||v.splice(d,1,v.splice(y,1,v[d])[0])}function i(v){switch(v.key){case"Enter":case" ":{if((v.target.disabled!==void 0||v.target.href||v.target.isContentEditable)&&!or.has(v.target))return;v.preventDefault(),v.stopPropagation(),Fe?Lt():o(v);break}case"ArrowDown":case"ArrowRight":{if(!Fe)return;v.preventDefault(),v.stopPropagation();var y=ye.get(e),d=y.items,m=Array.from(e.children),f=m.indexOf(v.currentTarget);f<m.length-1&&(r.autoAriaDisabled||yt("Moved item ".concat(tt," to position ").concat(f+2," in the list ").concat(vt)),a(d,f,f+1),kt(e,d,{trigger:Ie.DROPPED_INTO_ZONE,id:Ve,source:Me.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!Fe)return;v.preventDefault(),v.stopPropagation();var h=ye.get(e),p=h.items,_=Array.from(e.children),w=_.indexOf(v.currentTarget);w>0&&(r.autoAriaDisabled||yt("Moved item ".concat(tt," to position ").concat(w," in the list ").concat(vt)),a(p,w,w-1),kt(e,p,{trigger:Ie.DROPPED_INTO_ZONE,id:Ve,source:Me.KEYBOARD}));break}}}function o(v){b(v.currentTarget),Te=e,Rr=r.type,Fe=!0;var y=Array.from(ze.get(r.type)).filter(function(m){return m===Te||!ye.get(m).dropFromOthersDisabled});if(Kt(y,function(m){return ye.get(m).dropTargetStyle},function(m){return ye.get(m).dropTargetClasses}),!r.autoAriaDisabled){var d="Started dragging item ".concat(tt,". Use the arrow keys to move it within its list ").concat(vt);y.length>1&&(d+=", or tab to another list in order to move the item into it"),yt(d)}nt(e,ye.get(e).items,{trigger:Ie.DRAG_STARTED,id:Ve,source:Me.KEYBOARD}),Qa()}function s(v){Fe&&v.currentTarget!==ct&&(v.stopPropagation(),Lt(!1),o(v))}function b(v){var y=ye.get(e),d=y.items,m=Array.from(e.children),f=m.indexOf(v);ct=v,ct.tabIndex=r.zoneItemTabIndex,Ve=d[f][ge],tt=m[f].getAttribute("aria-label")||""}function c(v){var y=v.items,d=y===void 0?[]:y,m=v.type,f=m===void 0?Di:m,h=v.dragDisabled,p=h===void 0?!1:h,_=v.zoneTabIndex,w=_===void 0?0:_,D=v.zoneItemTabIndex,E=D===void 0?0:D,S=v.dropFromOthersDisabled,M=S===void 0?!1:S,k=v.dropTargetStyle,I=k===void 0?fa:k,A=v.dropTargetClasses,j=A===void 0?[]:A,L=v.autoAriaDisabled,H=L===void 0?!1:L;r.items=Be(d),r.dragDisabled=p,r.dropFromOthersDisabled=M,r.zoneTabIndex=w,r.zoneItemTabIndex=E,r.dropTargetStyle=I,r.dropTargetClasses=j,r.autoAriaDisabled=H,r.type&&f!==r.type&&pa(e,r.type),r.type=f,Ei(e,f),H||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",p?ir.DND_ZONE_DRAG_DISABLED:ir.DND_ZONE_ACTIVE)),ye.set(e,r),Fe?e.tabIndex=e===Te||ct.contains(e)||r.dropFromOthersDisabled||Te&&r.type!==ye.get(Te).type?-1:0:e.tabIndex=r.zoneTabIndex,e.addEventListener("focus",Ai);for(var z=function(G){var U=e.children[G];or.add(U),U.tabIndex=Fe?-1:r.zoneItemTabIndex,H||U.setAttribute("role","listitem"),U.removeEventListener("keydown",ba.get(U)),U.removeEventListener("click",ga.get(U)),p||(U.addEventListener("keydown",i),ba.set(U,i),U.addEventListener("click",s),ga.set(U,s)),Fe&&r.items[G][ge]===Ve&&(ct=U,ct.tabIndex=r.zoneItemTabIndex,U.focus())},V=0;V<e.children.length;V++)z(V)}c(t);var g={update:function(y){c(y)},destroy:function(){pa(e,r.type),ye.delete(e),Lr.delete(e)}};return Lr.set(e,g),g}var Oi=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function $a(e,t){if(Si(e))return{update:function(){},destroy:function(){}};ma(t);var r=xi(e,t),a=Ii(e,t);return{update:function(o){ma(o),r.update(o),a.update(o)},destroy:function(){r.destroy(),a.destroy()}}}function Si(e){return!!e.closest("[".concat(Ro,'="true"]'))}function ma(e){var t=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var r=e.zoneTabIndex,a=e.zoneItemTabIndex;e.dropTargetStyle;var i=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var o=e.delayTouchStart;e.dropAnimationDisabled;var s=yo(e,Oi);if(Object.keys(s).length>0&&console.warn("dndzone will ignore unknown options",s),!t)throw new Error("no 'items' key provided to dndzone");var b=t.find(function(v){return!{}.hasOwnProperty.call(v,ge)});if(b)throw new Error("missing '".concat(ge,"' property for item ").concat(It(b)));if(i&&!Array.isArray(i))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(_t(i),", ").concat(It(i)));if(r&&!ha(r))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(_t(r),", ").concat(It(r)));if(a&&!ha(a))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(_t(a),", ").concat(It(a)));if(o!==void 0&&o!==!1){var c=o===!0,g=typeof o=="number"&&isFinite(o)&&o>=0;if(!c&&!g)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(_t(o),", ").concat(It(o)))}}function ha(e){return!isNaN(e)&&(function(t){return(t|0)===t})(parseFloat(e))}function ji(e){const t=e-1;return t*t*t+1}function en(e,{from:t,to:r},a={}){var{delay:i=0,duration:o=M=>Math.sqrt(M)*120,easing:s=ji}=a,b=getComputedStyle(e),c=b.transform==="none"?"":b.transform,[g,v]=b.transformOrigin.split(" ").map(parseFloat);g/=e.clientWidth,v/=e.clientHeight;var y=Ci(e),d=e.clientWidth/r.width/y,m=e.clientHeight/r.height/y,f=t.left+t.width*g,h=t.top+t.height*v,p=r.left+r.width*g,_=r.top+r.height*v,w=(f-p)*d,D=(h-_)*m,E=t.width/r.width,S=t.height/r.height;return{delay:i,duration:typeof o=="function"?o(Math.sqrt(w*w+D*D)):o,easing:s,css:(M,k)=>{var I=k*w,A=k*D,j=M+k*E,L=M+k*S;return`transform: ${c} translate(${I}px, ${A}px) scale(${j}, ${L});`}}}function Ci(e){if("currentCSSZoom"in e)return e.currentCSSZoom;for(var t=e,r=1;t!==null;)r*=+getComputedStyle(t).zoom,t=t.parentElement;return r}var Mi=B('<span class="text-center text-xs font-semibold bg-purple-500/20 text-purple-400 rounded w-full h-full  items-center justify-center flex">1</span>'),Pi=B('<span class="text-center text-xs font-semibold bg-red-500/20 text-red-400 rounded w-full h-full items-center justify-center flex">2</span>'),Ni=B('<span class="text-center text-xs font-semibold bg-yellow-500/20 text-yellow-400 rounded w-full h-full items-center justify-center flex">3</span>'),Ri=B('<span class="text-center text-xs font-semibold bg-blue-500/20 text-blue-500 rounded w-full h-full items-center justify-center flex">4</span>'),Li=B('<span class="text-center text-xs font-semibold bg-emerald-500/20 text-emerald-300 rounded w-full h-full items-center justify-center flex">5</span>');function Fr(e,t){var r=de(),a=ne(r);{var i=s=>{var b=Mi();T(s,b)},o=s=>{var b=de(),c=ne(b);{var g=y=>{var d=Pi();T(y,d)},v=y=>{var d=de(),m=ne(d);{var f=p=>{var _=Ni();T(p,_)},h=p=>{var _=de(),w=ne(_);{var D=S=>{var M=Ri();T(S,M)},E=S=>{var M=Li();T(S,M)};q(w,S=>{t.level=="sev4"?S(D):S(E,!1)},!0)}T(p,_)};q(m,p=>{t.level=="sev3"?p(f):p(h,!1)},!0)}T(y,d)};q(c,y=>{t.level=="sev2"?y(g):y(v,!1)},!0)}T(s,b)};q(a,s=>{t.level=="sev1"?s(i):s(o,!1)})}T(e,r)}var Fi=B('<div class="flex items-center gap-3 p-3 bg-base-100 border border-primary/30 rounded-lg cursor-grab active:cursor-grabbing"><div class="text-base-content/30"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path></svg></div> <div class="flex-1 min-w-0"><p class="text-sm font-medium text-base-content truncate"> </p> <p class="text-xs text-base-content/50 truncate"> </p></div></div>'),Bi=B('<div class="flex flex-col gap-2"></div>'),Wi=B('<div class="h-1 bg-base-300"><div class="h-full bg-base-content/20 transition-all"></div></div>'),zi=B('<div class="bg-base-100 rounded-lg hover:bg-primary/20 cursor-pointer overflow-hidden" tabindex="0" role="button"><!> <div class="flex items-start gap-2 p-2"><div class="size-8 mt-0.5"><!></div> <div class="flex-1 min-w-0"><p class="text-sm font-medium text-base-content mb-1"> </p> <p class="text-sm"><span> </span> <span class="text-xs mx-0.5">â€¢</span> <span class="text-base-content/50"> </span></p></div> <button type="button" class="w-7 h-7 flex items-center justify-center rounded text-base-content/30 hover:text-error hover:bg-error/10 transition-colors" title="Remove from week">âœ•</button></div></div>'),Gi=B('<div class="flex flex-col gap-2"></div>'),Ui=B('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No projects assigned to this week</p> <p class="text-base-content/30 text-xs">Go to Areas and assign projects</p></div>'),Hi=B('<div class="flex flex-col gap-2"><div class="flex justify-between items-center"><div class="text-xs tracking-wider text-base-content/50 uppercase">Assigned projects</div></div> <!></div>');function Vi(e,t){_e(t,!0);const r=200;let a=$(()=>t.assignedProjects.map(f=>({...f,id:f.project.id}))),i=$(()=>t.filterCompleted?n(a).filter(f=>!["completed","cancelled"].includes(f.project.status)):n(a)),o=J(ft([]));bt(()=>{O(o,n(i),!0)});async function s(f,h){f.stopPropagation(),await Ea(h,t.currentWeekOf)}function b(f){const h=ut.getByProject(f),p=h.filter(w=>w.status==="active").length,_=h.filter(w=>w.status==="completed").length;return{active:p,completed:_,total:p+_}}function c(f){O(o,f.detail.items,!0)}function g(f){O(o,f.detail.items,!0);const{info:h}=f.detail,p=h.id,_=n(o).findIndex(M=>M.id===p);if(_===-1)return;const w=_>0?n(o)[_-1]:null,D=_<n(o).length-1?n(o)[_+1]:null;let E=null,S=null;if(w){const M=n(a).findIndex(k=>k.id===w.id);E=w.assignment.order,S=M<n(a).length-1?n(a)[M+1].assignment.order:null}else if(D){const M=n(a).findIndex(k=>k.id===D.id);E=M>0?n(a)[M-1].assignment.order:null,S=D.assignment.order}Bn(t.currentWeekOf,p,E,S)}var v=Hi(),y=x(u(v),2);{var d=f=>{var h=de(),p=ne(h);{var _=D=>{var E=Bi();De(E,29,()=>n(o),({id:S,project:M,area:k})=>S,(S,M)=>{let k=()=>n(M).project,I=()=>n(M).area;var A=Fi(),j=x(u(A),2),L=u(j),H=u(L,!0);l(L);var z=x(L,2),V=u(z,!0);l(z),l(j),l(A),X(()=>{W(H,k().name),W(V,I().name)}),Ca(A,()=>en,()=>({duration:r})),T(S,A)}),l(E),Pa(E,(S,M)=>$a?.(S,M),()=>({items:n(o),flipDurationMs:r,dropTargetStyle:{}})),Jt("consider",E,c),Jt("finalize",E,g),T(D,E)},w=D=>{var E=Gi();De(E,21,()=>n(i),Pe,(S,M)=>{let k=()=>n(M).project,I=()=>n(M).area;const A=$(()=>b(k().id)),j=$(()=>n(A).total>0?n(A).completed/n(A).total*100:0);var L=zi();L.__click=()=>t.navigateToTasks(k());var H=u(L);{var z=N=>{var Z=Wi(),te=u(Z);l(Z),X(()=>Wt(te,`width: ${n(j)??""}%`)),T(N,Z)};q(H,N=>{n(A).total>0&&N(z)})}var V=x(H,2),P=u(V),G=u(P);Fr(G,{get level(){return k().severity}}),l(P);var U=x(P,2),K=u(U),R=u(K,!0);l(K);var C=x(K,2),F=u(C),Y=u(F);l(F);var Q=x(F,4),se=u(Q,!0);l(Q),l(C),l(U);var oe=x(U,2);oe.__click=N=>s(N,k().id),l(V),l(L),X(()=>{W(R,k().name),ie(F,1,`text-base-content/50 ${n(A).active==0?"text-error":""}`),W(Y,`${n(A).active??""} available`),W(se,I().name)}),T(S,L)}),l(E),T(D,E)};q(p,D=>{t.reorderMode?D(_):D(w,!1)})}T(f,h)},m=f=>{var h=Ui();T(f,h)};q(y,f=>{n(o).length>0?f(d):f(m,!1)})}l(v),T(e,v),xe()}pe(["click"]);var Zi=B('<span class="text-xs text-primary-content px-2 py-1 bg-primary rounded"> </span>'),Yi=B('<button class="text-start flex items-center gap-3 p-3 bg-base-100 rounded-lg transition-all hover:bg-primary/20 cursor-pointer"><div class="flex-1 min-w-0 "><p class="text-sm text-base-content truncate mb-1"> </p> <p class="text-xs text-base-content/50"> </p></div> <!></button>'),qi=B('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No tasks available</p> <p class="text-base-content/30 text-xs">Assigned projects have no active tasks</p></div>'),Ki=B('<div class="flex flex-col gap-2"></div>');function Xi(e,t){_e(t,!0);var r=Ki();De(r,21,()=>t.weekTasks,Pe,(a,i)=>{let o=()=>n(i).task,s=()=>n(i).project,b=()=>n(i).area;const c=$(()=>t.isTaskAssignedToDay(o().id));var g=Yi();g.__click=_=>t.openDayPicker(_,o(),s(),b());var v=u(g),y=u(v),d=u(y,!0);l(y);var m=x(y,2),f=u(m);l(m),l(v);var h=x(v,2);{var p=_=>{var w=Zi(),D=u(w,!0);l(w),X(E=>W(D,E),[()=>Da(n(c))]),T(_,w)};q(h,_=>{n(c)&&_(p)})}l(g),X(()=>{W(d,o().name),W(f,`${b().icon??""} ${s().name??""}`)}),T(a,g)},a=>{var i=qi();T(a,i)}),l(r),T(e,r),xe()}pe(["click"]);var Ji=gt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path></svg> Reorder',1),Qi=B("<button><!></button>"),$i=B('<div class="flex flex-col h-full"><div class="bg-base-100 border-b border-b-base-content/10"><div class="flex ps-4 pe-2 pt-4 pb-2 flex-row justify-between items-center"><div><h2 class="text-lg font-medium">Week</h2> <p class="text-xs text-base-content/50"> </p></div> <div class="flex gap-2"><button> </button> <!></div></div> <div class="flex gap-1 px-4 pb-3"><button> </button> <button> </button></div></div> <div class="flex-1 overflow-y-auto px-2 py-4"><!></div></div> <!>',1);function es(e,t){_e(t,!0);let r=J(localStorage.getItem("filterAssignedProject")=="true"),a=J(!1),i=()=>O(r,!n(r)),o=()=>O(a,!n(a));bt(()=>{localStorage.setItem("filterAssignedProject",n(r)+"")});let s=J(ft(localStorage.getItem("weekTabView")||"projects"));bt(()=>{n(s)&&localStorage.setItem("weekTabView",n(s))});let b=ft(Ft());const c=$(()=>Bt.getWeek(b));let g;function v(R){return n(c)?n(c).tasksByDay.find(F=>F.taskId===R)?.date??null:null}let y=$(()=>n(c)?n(c).projectAssignments.map(R=>{const C=dt.getById(R.areaId);if(!C)return null;const Y=Ze.getByArea(C.id).find(Q=>Q.id===R.projectId);return Y?{assignment:R,project:Y,area:C}:null}).filter(R=>R!==null):[]),d=$(()=>{const R=[];for(const{project:C,area:F}of n(y)){const Y=ut.getByProject(C.id).filter(Q=>Q.status==="active");for(const Q of Y)R.push({task:Q,project:C,area:F})}return R});var m=$i(),f=ne(m),h=u(f),p=u(h),_=u(p),w=x(u(_),2),D=u(w,!0);l(w),l(_);var E=x(_,2),S=u(E);S.__click=i;var M=u(S);l(S);var k=x(S,2);{var I=R=>{var C=Qi();C.__click=o;var F=u(C);{var Y=se=>{var oe=_a("Done");T(se,oe)},Q=se=>{var oe=Ji();Qt(),T(se,oe)};q(F,se=>{n(a)?se(Y):se(Q,!1)})}l(C),X(()=>ie(C,1,`btn btn-xs w-20 ${n(a)?"btn-primary":"btn-secondary btn-soft"}`)),T(R,C)};q(k,R=>{n(y).length>1&&R(I)})}l(E),l(p);var A=x(p,2),j=u(A);j.__click=()=>O(s,"projects");var L=u(j);l(j);var H=x(j,2);H.__click=()=>O(s,"tasks");var z=u(H);l(H),l(A),l(h);var V=x(h,2),P=u(V);{var G=R=>{Vi(R,{get reorderMode(){return n(a)},get filterCompleted(){return n(r)},get navigateToTasks(){return t.navigateToTasks},get currentWeekOf(){return b},get assignedProjects(){return n(y)}})},U=R=>{Xi(R,{get openDayPicker(){return g.openDayPicker},get weekTasks(){return n(d)},isTaskAssignedToDay:v})};q(P,R=>{n(s)==="projects"?R(G):R(U,!1)})}l(V),l(f);var K=x(f,2);Pt(_o(K,{get currentWeekOf(){return b},isTaskAssignedToDay:v}),R=>g=R,()=>g),X(R=>{W(D,R),ie(S,1,`w-20 btn btn-xs ${n(r)?"btn-primary":"btn-secondary btn-soft"}`),W(M,`Filter :${n(r)?"ON":"OFF"}`),ie(j,1,`px-4 py-1.5 text-sm rounded-lg transition-colors ${n(s)==="projects"?"bg-primary/20 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),W(L,`Projects (${n(y).length??""})`),ie(H,1,`px-4 py-1.5 text-sm rounded-lg transition-colors ${n(s)==="tasks"?"bg-primary/20 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),W(z,`Tasks (${n(d).length??""})`)},[()=>Wn(b)]),T(e,m),xe()}pe(["click"]);var ts=B('<p class="text-sm italic text-base-content/30 text-center py-2">No follow-ups added</p>'),rs=B('<div class="flex items-center gap-1"><input type="text" class="input input-bordered flex-1 focus:outline-none focus:border-primary" placeholder="Follow-up task name..."/> <button type="button" class="btn btn-ghost btn-sm btn-square text-error">âœ•</button></div>'),as=B('<div class="flex flex-col gap-2"></div>'),ns=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="py-4 px-2 border-b border-base-content/10"><p class="font-medium text-base-content"> </p> <p class="text-xs text-base-content/50"> </p></div> <div class="py-4 px-2 space-y-4"><div><p class="text-xs uppercase tracking-wider text-base-content/50 mb-2">What happened?</p> <div class="flex gap-2"><label><input type="radio" name="action" class="radio radio-success radio-sm"/> <span class="text-sm">Completed</span></label> <label><input type="radio" name="action" class="radio radio-error radio-sm"/> <span class="text-sm">Cancelled</span></label></div></div> <div><div class="flex items-center justify-between mb-2"><p class="text-xs uppercase tracking-wider text-base-content/50">Follow-up tasks</p> <button type="button" class="btn btn-sm btn-ghost text-primary">+ Add</button></div> <!></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><button type="button" class="btn btn-ghost btn-sm flex-1">Cancel</button> <button type="button" class="btn btn-primary btn-sm flex-1">Done</button></div></div></div>');function os(e,t){_e(t,!0);const r=[];let a=J("completed"),i=J(ft([]));bt(()=>{t.show&&(O(a,"completed"),O(i,[],!0))});function o(){O(i,[...n(i),""],!0)}function s(d){O(i,n(i).filter((m,f)=>f!==d),!0)}function b(d,m){O(i,n(i).map((f,h)=>h===d?m:f),!0)}async function c(){if(t.taskByDay){n(a)==="completed"?await Aa(t.taskByDay.taskId,t.taskByDay.projectId,t.weekOf,t.taskByDay.date):await zn(t.taskByDay.taskId,t.taskByDay.projectId,t.weekOf,t.taskByDay.date);for(const d of n(i))d.trim()&&await Ia(t.taskByDay.projectId,t.taskByDay.areaId,d.trim());t.onClose()}}var g=de(),v=ne(g);{var y=d=>{var m=ns(),f=u(m);f.__click=function(...F){t.onClose?.apply(this,F)},f.__keydown=F=>F.key==="Escape"&&t.onClose();var h=x(f,2),p=u(h),_=u(p),w=u(_,!0);l(_);var D=x(_,2),E=u(D);l(D),l(p);var S=x(p,2),M=u(S),k=x(u(M),2),I=u(k),A=u(I);rt(A),A.value=A.__value="completed",Qt(2),l(I);var j=x(I,2),L=u(j);rt(L),L.value=L.__value="cancelled",Qt(2),l(j),l(k),l(M);var H=x(M,2),z=u(H),V=x(u(z),2);V.__click=o,l(z);var P=x(z,2);{var G=F=>{var Y=ts();T(F,Y)},U=F=>{var Y=as();De(Y,21,()=>n(i),Pe,(Q,se,oe)=>{var N=rs(),Z=u(N);rt(Z),Z.__input=ae=>b(oe,ae.currentTarget.value);var te=x(Z,2);te.__click=()=>s(oe),l(N),X(()=>uo(Z,n(se))),T(Q,N)}),l(Y),T(F,Y)};q(P,F=>{n(i).length===0?F(G):F(U,!1)})}l(H),l(S);var K=x(S,2),R=u(K);R.__click=function(...F){t.onClose?.apply(this,F)};var C=x(R,2);C.__click=c,l(K),l(h),l(m),X(()=>{W(w,t.taskByDay.name),W(E,`${t.areaIcon??""} ${t.areaName??""} Â· ${t.projectName??""}`),ie(I,1,`flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border border-base-content/10 cursor-pointer hover:border-success ${n(a)==="completed"?"border-success bg-success/10":""}`),ie(j,1,`flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border border-base-content/10 cursor-pointer hover:border-error ${n(a)==="cancelled"?"border-error bg-error/10":""}`)}),$t(r,[],A,()=>n(a),F=>O(a,F)),$t(r,[],L,()=>n(a),F=>O(a,F)),T(d,m)};q(v,d=>{t.show&&t.taskByDay&&d(y)})}T(e,g),xe()}pe(["click","keydown","input"]);var is=gt('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path></svg> Reorder',1),ss=B('<button type="button"><!></button>'),ls=B('<div class="px-4 pb-3"><div class="flex items-center justify-between text-xs text-base-content/50 mb-1"><span> </span> <span> </span></div> <div class="h-2 bg-base-100 rounded-full overflow-hidden"><div class="h-full bg-success transition-all rounded-full"></div></div></div>'),cs=B('<div class="flex items-center gap-3 p-3 bg-base-100 border border-primary/30 rounded-lg cursor-grab active:cursor-grabbing"><div class="text-base-content/30"><svg class="size-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path></svg></div> <div class="flex-1 min-w-0"><p class="text-sm text-base-content truncate mb-2"> </p> <p class="text-xs text-base-content/50 truncate"> </p></div></div>'),ds=B('<div class="flex flex-col gap-2 mb-4"></div>'),us=B('<div class="flex items-start gap-3 p-3 bg-base-100 border border-transparent rounded-lg"><button type="button" aria-label="check" class="size-7 rounded-full border-2 border-base-content/30 flex items-center justify-center flex-shrink-0 hover:border-success hover:bg-success/10 transition-colors"></button> <div class="flex-1 min-w-0" tabindex="0" role="button"><p class="text-sm text-base-content mb-2"> </p> <p class="text-xs text-base-content/50 truncate"> </p></div> <button type="button" class="w-7 h-7 flex items-center justify-center rounded text-base-content/30 hover:text-error hover:bg-error/10 transition-colors" title="Remove from today">âœ•</button></div>'),vs=B('<div class="flex flex-col gap-2 mb-4"></div>'),fs=B('<div class="text-center py-12"><span class="text-4xl block mb-3">ðŸ“‹</span> <p class="text-base-content/50 text-sm mb-2">No tasks for today</p> <p class="text-base-content/30 text-xs">Go to Week tab and assign tasks</p></div>'),bs=B('<div class="text-center mb-5 py-12 border-2 border-dashed border-success/30 rounded-lg bg-success/5"><span class="text-4xl block mb-3">ðŸŽ‰</span> <p class="text-sm font-medium text-success">All done for today!</p> <p class="text-xs text-base-content/50 mt-1">Great work!</p></div>'),gs=gt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>'),ps=gt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"></path></svg>'),ms=B('<div class="flex items-center gap-3 p-3 opacity-50"><button type="button" title="Mark as incomplete"><!></button> <div class="flex-1 min-w-0"><p class="text-sm text-base-content line-through truncate"> </p> <p class="text-xs text-base-content/50"> </p></div></div>'),hs=B('<div><p class="text-xs font-medium uppercase tracking-wider text-base-content/40 mb-2"> </p> <div class="flex flex-col gap-1"></div></div>'),_s=B('<div class="flex flex-col h-full"><div class="px-4 pt-4 pb-2 flex justify-between items-start"><div><h2 class="text-lg font-medium">Today</h2> <p class="text-xs text-base-content/50"> </p></div> <!></div> <!> <div class="flex-1 overflow-y-auto px-3 pb-4"><!> <!></div></div> <!>',1);function xs(e,t){_e(t,!0);const r=Gn(),a=Ft(),i=200;let o=J(!1),s=J(null),b=J(""),c=J(""),g=J(""),v=J(!1);const y=()=>{O(v,!n(v))};let d=$(()=>{const N=Bt.getWeek(a);return N?N.tasksByDay.filter(Z=>Z.date===r).map(Z=>{const te=ut.getById(Z.taskId),ae=dt.getById(Z.areaId),re=(ae?Ze.getByArea(ae.id):[]).find(ee=>ee.id===Z.projectId);return{id:Z.taskId,taskByDay:Z,task:te,areaIcon:ae?.icon??"ðŸ“",areaName:ae?.name??"Unknown",projectName:re?.name??"Unknown"}}):[]}),m=$(()=>n(d)),f=$(()=>n(d).filter(N=>N.taskByDay.status!=="completed"&&N.taskByDay.status!=="cancelled")),h=$(()=>n(d).filter(N=>N.taskByDay.status==="completed"||N.taskByDay.status==="cancelled")),p=J(ft([]));bt(()=>{O(p,n(f),!0)});function _(){const N=n(h).length,Z=n(d).length,te=Z>0?N/Z*100:0;return{completed:N,total:Z,percent:te}}function w(N){O(p,N.detail.items,!0)}function D(N){O(p,N.detail.items,!0);const{info:Z}=N.detail,te=Z.id,ae=n(p).findIndex(le=>le.id===te);if(ae===-1)return;const ce=ae>0?n(p)[ae-1]:null,re=ae<n(p).length-1?n(p)[ae+1]:null;let ee=null,ve=null;if(ce){const le=n(m).findIndex(me=>me.id===ce.id);ee=ce.taskByDay.order,ve=le<n(m).length-1?n(m)[le+1].taskByDay.order:null}else if(re){const le=n(m).findIndex(me=>me.id===re.id);ee=le>0?n(m)[le-1].taskByDay.order:null,ve=re.taskByDay.order}Vn(a,r,te,ee,ve)}async function E(N){await Aa(N.taskId,N.projectId,a,r)}async function S(N){await Hn(N.taskId,N.projectId,a,r)}async function M(N){await qt(N.taskId,N.projectId,a,r)}function k(N,Z,te,ae){O(s,N,!0),O(b,Z,!0),O(c,te,!0),O(g,ae,!0),O(o,!0)}function I(){O(o,!1),O(s,null)}var A=_s(),j=ne(A),L=u(j),H=u(L),z=x(u(H),2),V=u(z);l(z),l(H);var P=x(H,2);{var G=N=>{var Z=ss();Z.__click=y;var te=u(Z);{var ae=re=>{var ee=_a("Done");T(re,ee)},ce=re=>{var ee=is();Qt(),T(re,ee)};q(te,re=>{n(v)?re(ae):re(ce,!1)})}l(Z),X(()=>ie(Z,1,`btn btn-xs ${n(v)?"btn-primary":"btn-accent btn-soft"}`)),T(N,Z)};q(P,N=>{n(f).length>1&&N(G)})}l(L);var U=x(L,2);{var K=N=>{const Z=$(_);var te=ls(),ae=u(te),ce=u(ae),re=u(ce);l(ce);var ee=x(ce,2),ve=u(ee);l(ee),l(ae);var le=x(ae,2),me=u(le);l(le),l(te),X(Ne=>{W(re,`${n(Z).completed??""} of ${n(Z).total??""} completed`),W(ve,`${Ne??""}%`),Wt(me,`width: ${n(Z).percent??""}%`)},[()=>Math.round(n(Z).percent)]),T(N,te)};q(U,N=>{_().total>0&&N(K)})}var R=x(U,2),C=u(R);{var F=N=>{var Z=de(),te=ne(Z);{var ae=re=>{var ee=ds();De(ee,29,()=>n(p),({id:ve,taskByDay:le,areaIcon:me,projectName:Ne})=>ve,(ve,le)=>{let me=()=>n(le).taskByDay,Ne=()=>n(le).areaIcon,ot=()=>n(le).projectName;var Re=cs(),Oe=x(u(Re),2),Ee=u(Oe),Le=u(Ee,!0);l(Ee);var We=x(Ee,2),Ye=u(We);l(We),l(Oe),l(Re),X(()=>{W(Le,me().name),W(Ye,`${Ne()??""}  ${ot()??""}`)}),Ca(Re,()=>en,()=>({duration:i})),T(ve,Re)}),l(ee),Pa(ee,(ve,le)=>$a?.(ve,le),()=>({items:n(p),flipDurationMs:i,dropTargetStyle:{}})),Jt("consider",ee,w),Jt("finalize",ee,D),T(re,ee)},ce=re=>{var ee=vs();De(ee,21,()=>n(f),Pe,(ve,le)=>{let me=()=>n(le).taskByDay,Ne=()=>n(le).areaIcon,ot=()=>n(le).areaName,Re=()=>n(le).projectName;var Oe=us(),Ee=u(Oe);Ee.__click=()=>E(me());var Le=x(Ee,2);Le.__click=()=>k(me(),Ne(),ot(),Re());var We=u(Le),Ye=u(We,!0);l(We);var Qe=x(We,2),qe=u(Qe);l(Qe),l(Le);var pt=x(Le,2);pt.__click=()=>M(me()),l(Oe),X(()=>{W(Ye,me().name),W(qe,`${Ne()??""}  ${Re()??""}`)}),T(ve,Oe)}),l(ee),T(re,ee)};q(te,re=>{n(v)?re(ae):re(ce,!1)})}T(N,Z)},Y=N=>{var Z=de(),te=ne(Z);{var ae=re=>{var ee=fs();T(re,ee)},ce=re=>{var ee=bs();T(re,ee)};q(te,re=>{_().total===0?re(ae):re(ce,!1)},!0)}T(N,Z)};q(C,N=>{n(p).length>0?N(F):N(Y,!1)})}var Q=x(C,2);{var se=N=>{var Z=hs(),te=u(Z),ae=u(te);l(te);var ce=x(te,2);De(ce,21,()=>n(h),Pe,(re,ee)=>{let ve=()=>n(ee).taskByDay,le=()=>n(ee).areaIcon,me=()=>n(ee).areaName,Ne=()=>n(ee).projectName;const ot=$(()=>ve().status==="completed"),Re=$(()=>ve().status==="cancelled");var Oe=ms(),Ee=u(Oe);Ee.__click=()=>S(ve());var Le=u(Ee);{var We=Ke=>{var it=gs();T(Ke,it)},Ye=Ke=>{var it=de(),mt=ne(it);{var gr=Ae=>{var tn=ps();T(Ae,tn)};q(mt,Ae=>{ve().status==="cancelled"&&Ae(gr)},!0)}T(Ke,it)};q(Le,Ke=>{ve().status==="completed"?Ke(We):Ke(Ye,!1)})}l(Ee);var Qe=x(Ee,2),qe=u(Qe),pt=u(qe,!0);l(qe);var Dt=x(qe,2),Ht=u(Dt);l(Dt),l(Qe),l(Oe),X(()=>{ie(Ee,1,`w-7 h-7 rounded-full ${n(ot)?"bg-success border-success text-success-content":n(Re)?"bg-error border-error text-error-content":"border-base-content/30 hover:border-success"} border-2 flex items-center justify-center flex-shrink-0`),W(pt,ve().name),W(Ht,`${le()??""} ${me()??""} Â· ${Ne()??""}`)}),T(re,Oe)}),l(ce),l(Z),X(()=>W(ae,`Completed (${n(h).length??""})`)),T(N,Z)};q(Q,N=>{n(h).length>0&&!n(v)&&N(se)})}l(R),l(j);var oe=x(j,2);os(oe,{get show(){return n(o)},get taskByDay(){return n(s)},get areaIcon(){return n(b)},get areaName(){return n(c)},get projectName(){return n(g)},get weekOf(){return a},onClose:I}),X(N=>W(V,`${N??""}, ${r??""}`),[()=>Un(r)]),T(e,A),xe()}pe(["click"]);const Er=["none","reorder","edit","status"],ys=[{value:"active",label:"Active",color:"border-s-primary"},{value:"blocked",label:"Blocked",color:"border-s-warning"},{value:"someday",label:"Someday",color:"border-s-info"},{value:"completed",label:"Completed",color:"border-s-success"},{value:"cancelled",label:"Cancelled",color:"border-s-error"}],ws=[{value:"active",label:"Active"},{value:"blocked",label:"Blocked"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}];var ks=B('<button class="rounded-lg border border-dashed min-h-30 border-base-content/20 bg-transparent hover:bg-primary/20 transition-colors cursor-pointer w-full"><div class="card-body p-3 items-center justify-center text-center min-h-[88px]"><span class="text-xl text-base-content/50">+</span> <span class="text-xs text-base-content/50">Add Area</span></div></button>');function Ts(e,t){var r=ks();r.__click=function(...a){t.handleClick?.apply(this,a)},T(e,r)}pe(["click"]);var Ds=B('<button type="button"> </button>'),Es=B('<button type="button" class="btn btn-outline btn-error btn-sm">Archive</button>'),As=B('<button type="button" class="btn btn-outline btn-primary btn-sm">Unarchive</button>'),Is=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Icon</label> <div class="grid grid-cols-8 gap-1"></div></div> <div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Health, Work, Learning"/></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><!> <div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function Os(e,t){_e(t,!0);let r=J(!1),a=J(null),i=J(""),o=J("ðŸŽ¯");function s(){O(a,null),O(i,""),O(o,"ðŸŽ¯"),O(r,!0)}function b(_,w){_.stopPropagation(),O(a,w,!0),O(i,w.name,!0),O(o,w.icon,!0),O(r,!0)}function c(){O(r,!1),O(a,null)}async function g(){!n(i).trim()||!n(o)||(n(a)?await Zn(n(a).index,{name:n(i).trim(),icon:n(o)}):await Yn(n(i).trim(),n(o)),c())}function v(_){return n(a)&&n(a).status=="archived"?!1:Ze.getByArea(_.id).filter(D=>D.status==="active").length===0}async function y(){!n(a)||!v(n(a))||(await qn(n(a).index),c())}async function d(){n(a)&&(await Kn(n(a).index),c())}var m={openCreateAreaModal:s,openEditAreaModal:b},f=de(),h=ne(f);{var p=_=>{var w=Is(),D=u(w);D.__click=c,D.__keydown=C=>C.key==="Escape"&&c();var E=x(D,2),S=u(E),M=u(S),k=u(M,!0);l(M);var I=x(M,2);I.__click=c,l(S);var A=x(S,2),j=u(A),L=x(u(j),2);De(L,21,()=>fo,Pe,(C,F)=>{var Y=Ds();Y.__click=()=>O(o,n(F),!0);var Q=u(Y,!0);l(Y),X(()=>{ie(Y,1,`aspect-square flex items-center justify-center text-lg rounded-lg transition-colors ${n(o)===n(F)?"bg-primary text-primary-content":"hover:bg-base-200"}`),W(Q,n(F))}),T(C,Y)}),l(L),l(j);var H=x(j,2),z=x(u(H),2);rt(z),z.__keydown=C=>C.key==="Enter"&&g(),l(H),l(A);var V=x(A,2),P=u(V);{var G=C=>{var F=de(),Y=ne(F);{var Q=oe=>{var N=Es();N.__click=y,X((Z,te)=>{N.disabled=Z,Or(N,"title",te)},[()=>!v(n(a)),()=>v(n(a))?"Archive area":"Cannot archive: has active projects"]),T(oe,N)},se=oe=>{var N=de(),Z=ne(N);{var te=ae=>{var ce=As();ce.__click=d,T(ae,ce)};q(Z,ae=>{n(a).status=="archived"&&ae(te)},!0)}T(oe,N)};q(Y,oe=>{n(a).status=="active"?oe(Q):oe(se,!1)})}T(C,F)};q(P,C=>{n(a)&&C(G)})}var U=x(P,4);U.__click=c;var K=x(U,2);K.__click=g;var R=u(K,!0);l(K),l(V),l(E),l(w),X(C=>{W(k,n(a)?"Edit Area":"New Area"),K.disabled=C,W(R,n(a)?"Save":"Create")},[()=>!n(i).trim()||!n(o)]),zr(z,()=>n(i),C=>O(i,C)),T(_,w)};q(h,_=>{n(r)&&_(p)})}return T(e,f),xe(m)}pe(["click","keydown"]);var Ss=B('<button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center"><svg viewBox="0 0 24 24" class="size-6" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button>'),js=B('<div class="flex flex-row gap-1"><button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†</button> <button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†’</button></div>'),Cs=B("<div> </div>"),Ms=B('<div tabindex="0" role="button"><div class="flex flex-col py-4 px-3 items-start text-left"><div class="w-full flex flex-row justify-between items-start"><span class="text-4xl mb-2"> </span> <!></div> <div class="flex flex-row justify-between items-end w-full"><div class="flex flex-col w-full"><div class="text-sm font-medium mb-0 pb-1 truncate"> </div> <p class="text-xs text-base-content/50"> </p></div></div></div></div>');function Ps(e,t){_e(t,!0);const r=$(()=>Ze.getByArea(t.area.id).filter(w=>w.status==="active").length),a=$(()=>{const w=Ft(),D=Bt.getWeek(w),E=Ze.getByArea(t.area.id),S=E.filter(A=>A.status==="active"||A.status==="blocked"||A.status==="someday");if(S.length===0)return{level:"clear",color:"badge-success",icon:"âœ“"};if(D?.projectAssignments.some(A=>S.some(j=>j.id===A.projectId))??!1)return{level:"planned",color:"text-purple-500",icon:"â—†"};const k=E.filter(A=>A.status==="completed"&&A.completedAt),I=k.length>0?Math.max(...k.map(A=>new Date(A.completedAt).getTime())):null;if(I){const A=Date.now()-12096e5,j=Date.now()-720*60*60*1e3;if(I>=A)return{level:"active",color:"badge-info",icon:"â—"};if(I>=j)return{level:"fading",color:"badge-warning",icon:"â—‹"}}return{level:"avoiding",color:"badge-error",icon:"!"}});var i=Ms();i.__click=()=>t.handleSelect(t.area);var o=u(i),s=u(o),b=u(s),c=u(b,!0);l(b);var g=x(b,2);{var v=w=>{var D=Ss();D.__click=E=>t.handleEdit(E,t.area),T(w,D)},y=w=>{var D=de(),E=ne(D);{var S=k=>{var I=js(),A=u(I);A.__click=L=>t.handleAreaMoveUp(L,t.index);var j=x(A,2);j.__click=L=>t.handleAreaMoveDown(L,t.index),l(I),X(()=>A.disabled=t.index==0),T(k,I)},M=k=>{var I=de(),A=ne(I);{var j=L=>{var H=Cs(),z=u(H,!0);l(H),X(()=>{ie(H,1,`badge badge-sm rounded ${n(a).color??""} badge-soft`),W(z,n(a).level)}),T(L,H)};q(A,L=>{t.viewMode=="status"&&L(j)},!0)}T(k,I)};q(E,k=>{t.viewMode=="reorder"?k(S):k(M,!1)},!0)}T(w,D)};q(g,w=>{t.viewMode=="edit"?w(v):w(y,!1)})}l(s);var d=x(s,2),m=u(d),f=u(m),h=u(f,!0);l(f);var p=x(f,2),_=u(p);l(p),l(m),l(d),l(o),l(i),X(()=>{ie(i,1,`rounded-lg bg-base-100 hover:bg-primary/20 transition-colors cursor-pointer w-full ${n(a).level==="avoiding"?"border border-error/20":n(a).level==="fading"?"border border-warning/20":n(a).level==="active"?"border border-info/20":n(a).level==="planned"?"border border-purple-500/20":""}`),Wt(i,n(a).level==="avoiding"?"background: rgba(248, 114, 114, 0.05); box-shadow: inset 0 0 20px rgba(248, 114, 114, 0.08); ":n(a).level==="fading"?"box-shadow: inset 0 0 30px rgba(251, 189, 35, 0.1);":n(a).level==="active"?"box-shadow: inset 0 0 30px rgba(58, 191, 248, 0.1);":n(a).level==="planned"?"box-shadow: inset 0 0 30px rgba(168, 85, 247, 0.1);":""),W(c,t.area.icon),W(h,t.area.name),W(_,`${n(r)??""} project${n(r)!==1?"s":""}`)}),T(e,i),xe()}pe(["click"]);var Ns=B('<button class="link text-base-content/50 text-sm capitalize"> </button>'),Rs=B('<div class="flex flex-col h-full"><div class="px-3 pt-5 pb-4 flex flex-row justify-between items-center bg-base-100 border-b border-base-content/10"><a href="/" class="flex flex-row items-center text-base-content/80"><svg version="1.1" id="Icons" class="size-12 mt-1 me-2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" xml:space="preserve" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><style type="text/css">.st0{fill:none;stroke:currentColor;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><path class="st0" d="M11,13H5c-1.1,0-2-0.9-2-2V5c0-1.1,0.9-2,2-2h6c1.1,0,2,0.9,2,2v6C13,12.1,12.1,13,11,13z"></path><path class="st0" d="M11,29H5c-1.1,0-2-0.9-2-2v-6c0-1.1,0.9-2,2-2h6c1.1,0,2,0.9,2,2v6C13,28.1,12.1,29,11,29z"></path><line class="st0" x1="17" y1="5" x2="29" y2="5"></line><line class="st0" x1="17" y1="9" x2="24" y2="9"></line><line class="st0" x1="17" y1="21" x2="29" y2="21"></line><line class="st0" x1="17" y1="25" x2="24" y2="25"></line><polyline class="st0" points="6,7 8,9 11,6 "></polyline></g></svg> <div class="flex flex-col"><div class="text-xl text-base-content/80 tracking-wider font-medium">Doable</div> <div class="text-sm text-base-content/50">Life areas at a glance</div></div></a> <div class="flex flex-row gap-4"><!> <button class="link text-base-content/50 text-sm"> </button></div></div> <div class="flex-1 min-h-0 overflow-auto"><div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 p-3"><!> <!></div></div> <!></div>');function Ls(e,t){_e(t,!0);let r,a=J(ft(localStorage.getItem("areasViewMode")||"none"));bt(()=>localStorage.setItem("areasViewMode",n(a)));let i=J(!1),o=()=>O(a,Er[(Er.indexOf(n(a))+1)%Er.length],!0),s=()=>O(i,!n(i));const b=$(()=>n(i)?dt.areas.filter(k=>k.status=="archived"):dt.areas.filter(k=>k.status=="active"));async function c(k,I){if(k.stopPropagation(),I===0)return;const A=dt.areas,j=n(b)[I],L=n(b)[I-1],H=A.findIndex(P=>P.id===L.id),z=H>0?A[H-1].index:null,V=L.index;await Jr(j.index,z,V)}async function g(k,I){if(k.stopPropagation(),I===n(b).length-1)return;const A=dt.areas,j=n(b)[I],L=n(b)[I+1],H=A.findIndex(P=>P.id===L.id),z=L.index,V=H<A.length-1?A[H+1].index:null;await Jr(j.index,z,V)}var v=Rs(),y=u(v),d=x(u(y),2),m=u(d);{var f=k=>{var I=Ns();I.__click=o;var A=u(I,!0);l(I),X(()=>W(A,n(a))),T(k,I)};q(m,k=>{n(i)||k(f)})}var h=x(m,2);h.__click=s;var p=u(h,!0);l(h),l(d),l(y);var _=x(y,2),w=u(_),D=u(w);De(D,17,()=>n(b),Pe,(k,I,A)=>{Ps(k,{get area(){return n(I)},get handleSelect(){return t.onSelectArea},index:A,handleAreaMoveUp:c,handleAreaMoveDown:g,get viewMode(){return n(a)},get handleEdit(){return r.openEditAreaModal}})});var E=x(D,2);{var S=k=>{Ts(k,{get handleClick(){return r.openCreateAreaModal}})};q(E,k=>{n(i)||k(S)})}l(w),l(_);var M=x(_,2);Pt(Os(M,{}),k=>r=k,()=>r),l(v),X(()=>W(p,n(i)?"Active":"Archived")),T(e,v),xe()}pe(["click"]);var Fs=B('<button aria-label="edit"> </button>'),Bs=B('<div tabindex="0" role="button" class="flex flex-row gap-2 items-start text-left"><p class="px-2 flex flex-row gap-2 text-sm mb-1.5 w-full text-base-content"><span class="w-8 h-8 flex mt-0.5"><!></span> <span class="flex-1"> </span> <!></p></div>'),Ws=B('<div class="h-full bg-primary/80 transition-all"></div>'),zs=B('<span class="text-xs mx-0.5">â€¢</span> ',1),Gs=B('<button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†‘</button> <button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†“</button>',1),Us=B('<button aria-label="edit"> </button>'),Hs=B('<div class="w-full transition-colors bg-base-100 cursor-pointer hover:bg-primary/20" role="button" tabindex="0"><div class="flex-1 min-w-0 p-2 pt-4"><div class="flex flex-row items-start gap-2 "><div class="shrink-0 size-8"><!></div> <p class="text-sm mb-1.5 text-base-content"> </p></div> <div class="mb-2 mt-3 w-full items-center flex h-1 bg-neutral"><!></div> <div class="flex flex-row justify-between items-center ms-2"><p class="text-xs font-semibold text-base-content/50 "> <!></p> <div class="flex flex-row gap-2 items-center mt-1"><!> <button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center"><svg viewBox="0 0 24 24" class="size-5" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button> <!></div></div></div></div>'),Vs=B("<div><!></div>");function Zs(e,t){_e(t,!0);const r=$(()=>ut.getByProject(t.project.id)),a=$(()=>n(r).filter(f=>f.status==="active").length),i=$(()=>n(r).filter(f=>f.status==="completed").length),o=$(()=>n(r).filter(f=>f.status==="active"||f.status==="completed").length),s=$(()=>n(o)>0?n(i)/n(o)*100:0);function b(f){for(const[h,p]of Object.entries(Bt.weeksByWeekOf))if(p.projectAssignments.some(_=>_.projectId===f))return h;return null}function c(f){const h=Ft();if(f===h)return"This week";const p=new Date(h),_=new Date(f),w=Math.round((_.getTime()-p.getTime())/(1e3*60*60*24)),D=Math.round(w/7);return D===1?"Next week":D>1?`In ${D} weeks`:D===-1?"Last week":f.slice(5)}const g=$(()=>b(t.project.id));var v=Vs(),y=u(v);{var d=f=>{var h=Bs();h.__click=()=>t.onclick(t.project);var p=u(h),_=u(p),w=u(_);Fr(w,{get level(){return t.project.severity}}),l(_);var D=x(_,2),E=u(D,!0);l(D);var S=x(D,2);{var M=k=>{var I=Fs();I.__click=j=>t.handleProjectAssign(j,t.project);var A=u(I,!0);l(I),X(j=>{ie(I,1,`badge badge-lg badge-soft ${n(g)?"badge-accent":"badge-ghost text-base-content/40"} text-xs p-1.5 w-20 cursor-pointer justify-center rounded-lg items-center flex`),W(A,j)},[()=>c(n(g))]),T(k,I)};q(S,k=>{n(g)&&k(M)})}l(p),l(h),X(()=>W(E,t.project.name)),T(f,h)},m=f=>{var h=Hs();h.__click=()=>t.navigateToTasks(t.project),h.__keydown=C=>C.key==="Enter"&&t.navigateToTasks(t.project);var p=u(h),_=u(p),w=u(_),D=u(w);Fr(D,{get level(){return t.project.severity}}),l(w);var E=x(w,2),S=u(E,!0);l(E),l(_);var M=x(_,2),k=u(M);{var I=C=>{var F=Ws();X(()=>Wt(F,`width: ${n(s)??""}%`)),T(C,F)};q(k,C=>{n(o)>0&&C(I)})}l(M);var A=x(M,2),j=u(A),L=u(j),H=x(L);{var z=C=>{var F=zs(),Y=x(ne(F));X(()=>W(Y,` ${n(i)??""} done`)),T(C,F)};q(H,C=>{n(i)>0&&C(z)})}l(j);var V=x(j,2),P=u(V);{var G=C=>{var F=Gs(),Y=ne(F);Y.__click=se=>t.handleProjectMoveUp(se,t.index);var Q=x(Y,2);Q.__click=se=>t.handleProjectMoveDown(se,t.index),T(C,F)};q(P,C=>{t.allowReorder&&C(G)})}var U=x(P,2);U.__click=C=>t.handleEdit(C,t.project);var K=x(U,2);{var R=C=>{var F=Us();F.__click=Q=>t.handleProjectAssign(Q,t.project);var Y=u(F,!0);l(F),X(Q=>{ie(F,1,`badge badge-lg badge-soft ${n(g)?"badge-accent":"badge-ghost text-base-content/40"} text-xs p-1.5 w-20 cursor-pointer flex justify-center rounded-lg items-center`),W(Y,Q)},[()=>n(g)?c(n(g)):"Unassigned"]),T(C,F)};q(K,C=>{t.allowWeekAssignment&&C(R)})}l(V),l(A),l(p),l(h),X(()=>{W(S,t.project.name),W(L,`${n(a)??""} active `)}),T(f,h)};q(y,f=>{t.isSelected?f(m,!1):f(d)})}l(v),T(e,v),xe()}pe(["click","keydown"]);var Ys=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 h-[650px] max-h-full bg-base-100 rounded-t-2xl "><div class="flex flex-col h-full"><div class="flex justify-between bg-base-200 items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="flex-1 overflow-auto min-h-0 p-4 space-y-4 "><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Learn Spanish, Build Website"/></div> <div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Type</label> <div class="join w-full"><input type="radio" name="type" class="join-item btn btn-sm flex-1" aria-label="Regular"/> <input type="radio" name="type" class="join-item btn btn-sm flex-1" aria-label="Maintenance"/></div></div> <span class="text-xs text-base-content/50 mb-2 block">Severity</span> <div class="flex flex-col gap-1"><button type="button"><span class="font-bold w-4">1</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">2</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">3</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">4</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">5</span> <span class="font-normal text-left flex-1"> </span></button></div> <span class="text-xs text-base-content/50 mb-2 block">Status</span> <div class="grid grid-cols-3 gap-1"><button type="button">Active</button> <button type="button">Blocked</button> <button type="button">Someday</button> <button type="button">Cancelled</button> <button type="button">Done</button></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div></div>');function qs(e,t){_e(t,!0);const r=[];let a=J(!1),i=J(null),o=J(""),s=J("active"),b=J("regular"),c=J("sev3");function g(){console.log("Creating.."),O(i,null),O(o,""),O(s,"active"),O(b,"regular"),O(c,"sev3"),O(a,!0)}function v(_,w){_.stopPropagation(),O(i,w,!0),O(o,w.name,!0),O(s,w.status,!0),O(b,w.type||"regular",!0),O(c,w.severity||"sev1",!0),O(a,!0)}function y(){O(a,!1),O(i,null)}async function d(){!n(o).trim()||!t.selectedArea||(n(i)?await Oa(t.selectedArea.id,n(i).index,{name:n(o).trim(),status:n(s),type:n(b),severity:n(c)}):await Xn(t.selectedArea.id,n(o).trim(),n(b),n(c)),y())}var m={openCreateProjectModal:g,openEditProjectModal:v},f=de(),h=ne(f);{var p=_=>{var w=Ys(),D=u(w);D.__click=y,D.__keydown=Ae=>Ae.key==="Escape"&&y();var E=x(D,2),S=u(E),M=u(S),k=u(M),I=u(k,!0);l(k);var A=x(k,2);A.__click=y,l(M);var j=x(M,2),L=u(j),H=x(u(L),2);rt(H),H.__keydown=Ae=>Ae.key==="Enter"&&d(),l(L);var z=x(L,2),V=x(u(z),2),P=u(V);rt(P),P.value=P.__value="regular";var G=x(P,2);rt(G),G.value=G.__value="maintenance",l(V),l(z);var U=x(z,4),K=u(U);let R;K.__click=()=>O(c,"sev1");var C=x(u(K),2),F=u(C,!0);l(C),l(K);var Y=x(K,2);let Q;Y.__click=()=>O(c,"sev2");var se=x(u(Y),2),oe=u(se,!0);l(se),l(Y);var N=x(Y,2);let Z;N.__click=()=>O(c,"sev3");var te=x(u(N),2),ae=u(te,!0);l(te),l(N);var ce=x(N,2);let re;ce.__click=()=>O(c,"sev4");var ee=x(u(ce),2),ve=u(ee,!0);l(ee),l(ce);var le=x(ce,2);let me;le.__click=()=>O(c,"sev5");var Ne=x(u(le),2),ot=u(Ne,!0);l(Ne),l(le),l(U);var Re=x(U,4),Oe=u(Re);let Ee;Oe.__click=()=>O(s,"active");var Le=x(Oe,2);let We;Le.__click=()=>O(s,"blocked");var Ye=x(Le,2);let Qe;Ye.__click=()=>O(s,"someday");var qe=x(Ye,2);let pt;qe.__click=()=>O(s,"cancelled");var Dt=x(qe,2);let Ht;Dt.__click=()=>O(s,"completed"),l(Re),l(j);var Ke=x(j,2),it=x(u(Ke),2);it.__click=y;var mt=x(it,2);mt.__click=d;var gr=u(mt,!0);l(mt),l(Ke),l(S),l(E),l(w),X(Ae=>{W(I,n(i)?"Edit Project":"New Project"),R=ie(K,1,"hover:bg-purple-600 btn btn-sm justify-start gap-2 transition-all",null,R,{"bg-purple-600":n(c)==="sev1","text-white":n(c)==="sev1"}),W(F,At[n(b)].sev1),Q=ie(Y,1,"hover:bg-red-500 btn btn-sm justify-start gap-2 transition-all",null,Q,{"bg-red-500":n(c)==="sev2","text-white":n(c)==="sev2"}),W(oe,At[n(b)].sev2),Z=ie(N,1,"hover:bg-yellow-500 hover:text-black btn btn-sm justify-start gap-2 transition-all",null,Z,{"bg-yellow-500":n(c)==="sev3","text-black":n(c)==="sev3"}),W(ae,At[n(b)].sev3),re=ie(ce,1,"hover:bg-sky-500 hover:text-black btn btn-sm justify-start gap-2 transition-all",null,re,{"bg-sky-500":n(c)==="sev4","text-black":n(c)==="sev4"}),W(ve,At[n(b)].sev4),me=ie(le,1,"hover:bg-emerald-500 hover:text-black btn btn-sm justify-start gap-3 transition-all",null,me,{"bg-emerald-500":n(c)==="sev5","text-black":n(c)==="sev5"}),W(ot,At[n(b)].sev5),Ee=ie(Oe,1,"btn btn-sm hover:bg-warning hover:text-warning-content",null,Ee,{"btn-warning":n(s)==="active"}),We=ie(Le,1,"btn btn-sm hover:btn-error",null,We,{"btn-error":n(s)==="blocked"}),Qe=ie(Ye,1,"btn btn-sm hover:btn-info",null,Qe,{"btn-info":n(s)==="someday"}),pt=ie(qe,1,"btn btn-sm hover:btn-neutral",null,pt,{"btn-info":n(s)==="cancelled"}),Ht=ie(Dt,1,"btn btn-sm hover:btn-success",null,Ht,{"btn-success":n(s)==="completed"}),mt.disabled=Ae,W(gr,n(i)?"Save":"Create")},[()=>!n(o).trim()]),zr(H,()=>n(o),Ae=>O(o,Ae)),$t(r,[],P,()=>{"regular";return n(b)},Ae=>O(b,Ae)),$t(r,[],G,()=>{"maintenance";return n(b)},Ae=>O(b,Ae)),T(_,w)};q(h,_=>{n(a)&&_(p)})}return T(e,f),xe(m)}pe(["click","keydown"]);var Ks=B('<button type="button"><div class="font-medium"> </div> <div class="text-xs opacity-70"> </div></button>'),Xs=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold">Assign to Week</h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-2"></div></div></div>');function Js(e,t){_e(t,!0);let r=J(!1),a=J(null),i=J(void 0);function o(m,f,h){m.stopPropagation(),O(i,f,!0),O(a,h,!0),O(r,!0)}function s(){O(r,!1),O(a,null)}async function b(m,f){!n(a)||!n(i)||(f?await Ea(n(a).id,m):await Qn(n(a).id,n(i).id,m),s())}function c(m,f){const h=f??Ft();return Bt.getWeek(h)?.projectAssignments.some(_=>_.projectId===m)??!1}var g={openWeekPicker:o},v=de(),y=ne(v);{var d=m=>{var f=Xs(),h=u(f);h.__click=s,h.__keydown=E=>E.key==="Escape"&&s();var p=x(h,2),_=u(p),w=x(u(_),2);w.__click=s,l(_);var D=x(_,2);De(D,21,Jn,Pe,(E,S)=>{const M=$(()=>c(n(a).id,n(S).weekOf));var k=Ks();k.__click=()=>b(n(S).weekOf,n(M));var I=u(k),A=u(I,!0);l(I);var j=x(I,2),L=u(j,!0);l(j),l(k),X(()=>{ie(k,1,`w-full p-3 text-left rounded-lg border transition-colors ${n(M)?"bg-primary/20 text-primary-content border-primary":"border-base-content/10 hover:border-primary"}`),W(A,n(S).label),W(L,n(S).weekOf)}),T(E,k)}),l(D),l(p),l(f),T(m,f)};q(y,m=>{n(r)&&n(a)&&m(d)})}return T(e,v),xe(g)}pe(["click","keydown"]);var Qs=B("<button> </button>"),$s=B('<div class="text-center py-8 text-base-content/50 text-sm"> </div>'),el=B('<button type="button" class="flex items-center justify-center h-12 mx-3 border-2 border-dashed border-base-content/20 rounded-lg text-base-content/50 cursor-pointer transition-all hover:border-primary hover:text-primary"><span class="text-lg">+</span> <span class="text-sm">Add Project</span></button>'),tl=B('<div class="flex flex-col h-full"><div class="flex flex-col border-b border-base-content/10 bg-base-100"><div class="flex flex-col items-start px-2"><div class="h-12 flex items-center "><button class="gap-2 text-sm text-secondary flex items-center justify-center rounded-lg hover:bg-base-100 text-base-content/70"><span>â†</span> <span>Back</span></button></div> <div class="flex items-center gap-3 pe-2"><span class="text-4xl"> </span> <h2 class="text-lg"> </h2></div></div> <div class="flex gap-1 mt-4 px-3 pb-2 overflow-x-auto"></div></div> <div class="flex-1 overflow-auto min-h-0 pb-5 pt-2.5"><div class="flex flex-col gap-2.5 py-0"><!> <!></div></div></div> <!> <!>',1);function rl(e,t){_e(t,!0);let r=J(void 0);const a=P=>O(r,P.id,!0);let i,o,s=J(ft(localStorage.getItem("projectTabView")||"active"));bt(()=>{n(s)&&localStorage.setItem("projectTabView",n(s))});let b=$(()=>!["completed","cancelled"].includes(n(s))),c=$(()=>Ze.getByArea(t.selectedArea.id).filter(P=>P.status===n(s)));function g(P){return Ze.getByArea(t.selectedArea.id).filter(G=>G.status===P).length}async function v(P,G){if(P.stopPropagation(),G===0||!t.selectedArea)return;const U=Ze.getByArea(t.selectedArea.id),K=n(c)[G],R=n(c)[G-1],C=U.findIndex(Q=>Q.id===R.id),F=C>0?U[C-1].index:null,Y=R.index;await Qr(t.selectedArea.id,K.index,F,Y)}async function y(P,G){if(P.stopPropagation(),!t.selectedArea||G===n(c).length-1)return;const U=Ze.getByArea(t.selectedArea.id),K=n(c)[G],R=n(c)[G+1],C=U.findIndex(Q=>Q.id===R.id),F=R.index,Y=C<U.length-1?U[C+1].index:null;console.log(F,Y),await Qr(t.selectedArea.id,K.index,F,Y)}var d=tl(),m=ne(d),f=u(m),h=u(f),p=u(h),_=u(p);_.__click=function(...P){t.navigateBack?.apply(this,P)},l(p);var w=x(p,2),D=u(w),E=u(D,!0);l(D);var S=x(D,2),M=u(S,!0);l(S),l(w),l(h);var k=x(h,2);De(k,21,()=>ys,Pe,(P,G)=>{const U=$(()=>n(s)===n(G).value),K=$(()=>g(n(G).value));var R=Qs();R.__click=()=>O(s,n(G).value,!0);var C=u(R);l(R),X(()=>{ie(R,1,`px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap ${n(U)?"bg-primary/40 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),W(C,`${n(G).label??""} (${n(K)??""})`)}),T(P,R)}),l(k),l(f);var I=x(f,2),A=u(I),j=u(A);De(j,17,()=>n(c),Pe,(P,G,U)=>{{let K=$(()=>n(r)==n(G).id);Zs(P,{get isSelected(){return n(K)},onclick:a,handleProjectAssign:(R,C)=>o.openWeekPicker(R,t.selectedArea,C),index:U,get allowReorder(){return n(b)},get navigateToTasks(){return t.navigateToTasks},get project(){return n(G)},get allowWeekAssignment(){return n(b)},get handleEdit(){return i.openEditProjectModal},handleProjectMoveUp:v,handleProjectMoveDown:y})}},P=>{var G=$s(),U=u(G);l(G),X(()=>W(U,`No ${n(s)??""} projects`)),T(P,G)});var L=x(j,2);{var H=P=>{var G=el();G.__click=function(...U){i.openCreateProjectModal?.apply(this,U)},T(P,G)};q(L,P=>{n(s)=="active"&&P(H)})}l(A),l(I),l(m);var z=x(m,2);Pt(qs(z,{get selectedArea(){return t.selectedArea}}),P=>i=P,()=>i);var V=x(z,2);Pt(Js(V,{}),P=>o=P,()=>o),X(()=>{W(E,t.selectedArea.icon),W(M,t.selectedArea.name)}),T(e,d),xe()}pe(["click"]);var al=B('<button type="button"> </button>'),nl=B('<div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Status</label> <div class="flex flex-wrap gap-2"></div></div>'),ol=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Read chapter 1, Write blog post"/></div> <!></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function il(e,t){_e(t,!0);let r=J(!1),a=J(null),i=J(""),o=J("active");function s(){O(a,null),O(i,""),O(o,"active"),O(r,!0)}function b(f,h){f.stopPropagation(),O(a,h,!0),O(i,h.name,!0),O(o,h.status,!0),O(r,!0)}function c(){O(r,!1),O(a,null)}async function g(){!n(i).trim()||!t.selectedProject||!t.selectedArea||(n(a)?await Sa(t.selectedProject.id,n(a).index,{name:n(i).trim(),status:n(o)}):await Ia(t.selectedProject.id,t.selectedArea.id,n(i).trim()),c())}var v={openCreateTaskModal:s,openEditTaskModal:b},y=de(),d=ne(y);{var m=f=>{var h=ol(),p=u(h);p.__click=c,p.__keydown=P=>P.key==="Escape"&&c();var _=x(p,2),w=u(_),D=u(w),E=u(D,!0);l(D);var S=x(D,2);S.__click=c,l(w);var M=x(w,2),k=u(M),I=x(u(k),2);rt(I),I.__keydown=P=>P.key==="Enter"&&g(),l(k);var A=x(k,2);{var j=P=>{var G=nl(),U=x(u(G),2);De(U,21,()=>ws,Pe,(K,R)=>{var C=al();C.__click=()=>O(o,n(R).value,!0);var F=u(C,!0);l(C),X(()=>{ie(C,1,`px-3 py-1.5 text-sm rounded-lg border transition-colors ${n(o)===n(R).value?"bg-primary text-primary-content border-primary":"border-base-content/20 hover:border-primary"}`),W(F,n(R).label)}),T(K,C)}),l(U),l(G),T(P,G)};q(A,P=>{n(a)&&P(j)})}l(M);var L=x(M,2),H=x(u(L),2);H.__click=c;var z=x(H,2);z.__click=g;var V=u(z,!0);l(z),l(L),l(_),l(h),X(P=>{W(E,n(a)?"Edit Task":"New Task"),z.disabled=P,W(V,n(a)?"Save":"Create")},[()=>!n(i).trim()]),zr(I,()=>n(i),P=>O(i,P)),T(f,h)};q(d,f=>{n(r)&&f(m)})}return T(e,y),xe(v)}pe(["click","keydown"]);var sl=gt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>'),ll=gt('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"></path></svg>'),cl=gt('<svg class="w-3 h-3 text-warning" fill="currentColor" viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16" rx="1"></rect><rect x="14" y="4" width="4" height="16" rx="1"></rect></svg>'),dl=B('<button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†‘</button> <button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†“</button>',1),ul=B('<div tabindex="0" role="button" class="hover:bg-primary/20 cursor-pointer w-full flex flex-row items-start border-b border-b-base-content/10 p-2"><button type="button"><!></button> <div class="text-sm text-base-content/80 flex-1 "> </div> <!></div>');function vl(e,t){_e(t,!0);const r=$(()=>t.task.status==="completed"),a=$(()=>t.task.status==="cancelled"),i=$(()=>t.task.status==="blocked");var o=ul();o.__click=f=>t.handleEdit(f,t.task);var s=u(o);s.__click=f=>t.toggleTaskComplete(f,t.task);var b=u(s);{var c=f=>{var h=sl();T(f,h)},g=f=>{var h=de(),p=ne(h);{var _=D=>{var E=ll();T(D,E)},w=D=>{var E=de(),S=ne(E);{var M=k=>{var I=cl();T(k,I)};q(S,k=>{n(i)&&k(M)},!0)}T(D,E)};q(p,D=>{n(a)?D(_):D(w,!1)},!0)}T(f,h)};q(b,f=>{n(r)?f(c):f(g,!1)})}l(s);var v=x(s,2),y=u(v,!0);l(v);var d=x(v,2);{var m=f=>{var h=dl(),p=ne(h);p.__click=w=>t.handleTaskMoveUp(w,t.index);var _=x(p,2);_.__click=w=>t.handleTaskMoveDown(w,t.index),T(f,h)};q(d,f=>{t.reorderEnabled&&f(m)})}l(o),X(()=>{ie(s,1,`w-6 h-6 cursor-pointer rounded-full border-2 flex me-2 items-center justify-center text-xs transition-colors flex-shrink-0 ${n(r)?"bg-success border-success text-success-content":n(i)?"border-warning":n(a)?"bg-error border-error text-error-content":"border-base-content/30 hover:border-success"}`),s.disabled=n(a),W(y,t.task.name)}),T(e,o),xe()}pe(["click"]);var fl=B('<div class="flex flex-col h-full w-full"><div class="flex flex-col border-b border-base-content/10 bg-base-100"><div class="flex flex-col w-full items-start px-2"><div class="flex flex-row w-full justify-between h-12 items-center "><button class="gap-2 text-sm text-secondary flex items-center justify-center rounded-lg hover:bg-base-100 text-base-content/70"><span>â†</span> <span>Back</span></button> <div class="badge badge-sm badge-secondary rounded"> </div></div> <div class="flex items-center gap-2"><svg class="size-10 inline shrink-0 text-base-content/40 align-text-bottom -mb-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <h2 class="text-base "> </h2></div> <div class="flex gap-1 overflow-x-auto my-2"><button class="text-base-content/50 bg-base-300 hover:bg-primary/50 hover:text-primary-content px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap">+ New</button> <button>Reorder</button> <button class="px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap text-base-content/50 bg-base-300 hover:text-base-content hover:bg-primary/50">Complete project</button></div></div></div> <div class="flex-1 overflow-auto bg-base-200  min-h-0 pb-5 pt-2.5"><div class="flex flex-col px-2 py-0"></div></div></div> <!>',1);function bl(e,t){_e(t,!0);let r,a=$(()=>Ze.getById(t.selectedProject.id)?.status),i=$(()=>ut.getByProject(t.selectedProject.id)),o=J(!1),s=()=>O(o,!n(o));async function b(z){await Oa(t.selectedArea.id,t.selectedProject.index,{status:"completed"})}async function c(z,V){if(z.stopPropagation(),!t.selectedProject)return;const P=V.status==="completed"?"active":"completed";await Sa(t.selectedProject.id,V.index,{status:P})}async function g(z,V){if(z.stopPropagation(),V===0||!t.selectedProject)return;const P=n(i),G=ut.getByProject(t.selectedProject.id),U=P[V],K=P[V-1],R=G.findIndex(Y=>Y.id===K.id),C=R>0?G[R-1].index:null,F=K.index;await $r(t.selectedProject.id,U.index,C,F)}async function v(z,V){if(z.stopPropagation(),!t.selectedProject)return;const P=n(i);if(V===P.length-1)return;const G=ut.getByProject(t.selectedProject.id),U=P[V],K=P[V+1],R=G.findIndex(Y=>Y.id===K.id),C=K.index,F=R<G.length-1?G[R+1].index:null;await $r(t.selectedProject.id,U.index,C,F)}var y=fl(),d=ne(y),m=u(d),f=u(m),h=u(f),p=u(h);p.__click=function(...z){t.navigateBack?.apply(this,z)};var _=x(p,2),w=u(_,!0);l(_),l(h);var D=x(h,2),E=x(u(D),2),S=u(E,!0);l(E),l(D);var M=x(D,2),k=u(M);k.__click=function(...z){r.openCreateTaskModal?.apply(this,z)};var I=x(k,2);I.__click=s;var A=x(I,2);A.__click=b,l(M),l(f),l(m);var j=x(m,2),L=u(j);De(L,21,()=>n(i),Pe,(z,V,P)=>{vl(z,{get handleEdit(){return r.openEditTaskModal},handleTaskMoveUp:g,handleTaskMoveDown:v,index:P,get task(){return n(V)},toggleTaskComplete:c,get reorderEnabled(){return n(o)}})}),l(L),l(j),l(d);var H=x(d,2);Pt(il(H,{get selectedArea(){return t.selectedArea},get selectedProject(){return t.selectedProject}}),z=>r=z,()=>r),X(()=>{W(w,n(a)),W(S,t.selectedProject.name),ie(I,1,`px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap ${n(o)?"bg-primary/40 text-primary-content":"text-base-content/50 bg-base-300 hover:text-base-content hover:bg-primary/50"}`)}),T(e,y),xe()}pe(["click"]);var gl=B('<div class="flex items-center justify-center h-full text-base-content/50"><p>Review - Coming soon</p></div>'),pl=B('<div class="h-screen flex flex-col bg-base-300"><div class="pb-22 h-full"><!></div> <!></div>');function Tl(e,t){_e(t,!0);const r=()=>s("areas"),a=()=>s("projects");let i=J(void 0),o=J(void 0);s("areas");function s(h){Nn("",{activeTab:h})}function b(h){O(i,h,!0),s("projects")}function c(h){O(o,h,!0),O(i,dt.getById(h.areaId),!0),s("tasks")}var g=pl(),v=u(g),y=u(v);{var d=h=>{Ls(h,{onSelectArea:b})},m=h=>{var p=de(),_=ne(p);{var w=E=>{rl(E,{navigateBack:r,navigateToTasks:c,get selectedArea(){return n(i)}})},D=E=>{var S=de(),M=ne(S);{var k=A=>{bl(A,{navigateBack:a,get selectedArea(){return n(i)},get selectedProject(){return n(o)}})},I=A=>{var j=de(),L=ne(j);{var H=V=>{es(V,{navigateToTasks:c})},z=V=>{var P=de(),G=ne(P);{var U=R=>{xs(R,{})},K=R=>{var C=de(),F=ne(C);{var Y=Q=>{var se=gl();T(Q,se)};q(F,Q=>{st.state.activeTab==="review"&&Q(Y)},!0)}T(R,C)};q(G,R=>{st.state.activeTab==="today"?R(U):R(K,!1)},!0)}T(V,P)};q(L,V=>{st.state.activeTab==="week"?V(H):V(z,!1)},!0)}T(A,j)};q(M,A=>{st.state.activeTab=="tasks"?A(k):A(I,!1)},!0)}T(E,S)};q(_,E=>{st.state.activeTab==="projects"?E(w):E(D,!1)},!0)}T(h,p)};q(y,h=>{st.state.activeTab==="areas"?h(d):h(m,!1)})}l(v);var f=x(v,2);po(f,{get activeTab(){return st.state.activeTab},onTabChange:s}),l(g),T(e,g),xe()}export{Tl as component};
