import{d as re,f as O,a as A,s as L,c as ee,b as Ee}from"../chunks/C0mSsNzB.js";import{y as $e,E as Ut,K as et,A as ie,ao as Ht,F as Gt,g as e,T as qt,H as Jt,I as Kt,J as _t,L as tt,B as Ge,aa as Yt,aC as Qt,ah as kt,o as Me,aE as me,z as ct,D as Xt,a8 as ht,a4 as Zt,aA as bt,aF as $t,aG as ea,aH as ta,aI as aa,v as It,x as Dt,aJ as at,aw as ra,az as sa,w as na,aK as Et,q as Je,aL as oa,aM as la,aN as ia,aO as ca,aP as da,aQ as va,aR as Bt,a5 as ua,u as ba,r as Nt,aS as fa,aT as ga,aU as xa,p as se,l as ne,n as s,m as n,s as d,t as K,k as Z,O as Y,N as C,a6 as Q,b as Be,U as Ke,ai as yt}from"../chunks/BqVyvuT7.js";import{i as J}from"../chunks/Dgz-J3ua.js";import{a as ma}from"../chunks/DGnxZIJJ.js";import{p as we}from"../chunks/BDzIhjaA.js";import{a1 as qe,a2 as pa,a3 as _a,a4 as ka,a5 as Wt,a6 as Ot,a7 as Ae,a8 as Ne,a9 as ha,aa as je,ab as xe,ac as We,ad as Rt,ae as ya,af as Lt,ag as wa,ah as ja,ai as Aa,aj as Ta,ak as Pa,al as Ma,am as Ca,an as wt,ao as zt,ap as Sa,aq as Ia,ar as Da,as as jt,at as Vt,au as At}from"../chunks/lVIqt-6C.js";import{b as De}from"../chunks/BYS0SYey.js";function ce(a,t){return t}function Ea(a,t,o){for(var r=[],l=t.length,i,c=t.length,m=0;m<l;m++){let h=t[m];Dt(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var p=a.outrogroups;dt(bt(i.done)),p.delete(i),p.size===0&&(a.outrogroups=null)}}else c-=1},!1)}if(c===0){var v=r.length===0&&o!==null;if(v){var g=o,k=g.parentNode;sa(k),k.append(g),a.items.clear()}dt(t,!v)}else i={pending:new Set(t),done:new Set},(a.outrogroups??=new Set).add(i)}function dt(a,t=!0){for(var o=0;o<a.length;o++)na(a[o],t)}var Tt;function de(a,t,o,r,l,i=null){var c=a,m=new Map,v=(t&Et)!==0;if(v){var g=a;c=ie?et(Ht(g)):g.appendChild($e())}ie&&Gt();var k=null,h=qt(()=>{var x=o();return $t(x)?x:x==null?[]:bt(x)}),p,y=!0;function f(){u.fallback=k,Ba(u,p,c,t,r),k!==null&&(p.length===0?(k.f&me)===0?It(k):(k.f^=me,Ie(k,null,c)):Dt(k,()=>{k=null}))}var b=Ut(()=>{p=e(h);var x=p.length;let T=!1;if(ie){var S=Jt(c)===Kt;S!==(x===0)&&(c=_t(),et(c),tt(!1),T=!0)}for(var E=new Set,B=Me,R=Xt(),w=0;w<x;w+=1){ie&&Ge.nodeType===Yt&&Ge.data===Qt&&(c=Ge,T=!0,tt(!1));var P=p[w],_=r(P,w),I=y?null:m.get(_);I?(I.v&&kt(I.v,P),I.i&&kt(I.i,w),R&&B.skipped_effects.delete(I.e)):(I=Na(m,y?c:Tt??=$e(),P,_,w,l,t,o),y||(I.e.f|=me),m.set(_,I)),E.add(_)}if(x===0&&i&&!k&&(y?k=ct(()=>i(c)):(k=ct(()=>i(Tt??=$e())),k.f|=me)),ie&&x>0&&et(_t()),!y)if(R){for(const[V,q]of m)E.has(V)||B.skipped_effects.add(q.e);B.oncommit(f),B.ondiscard(()=>{})}else f();T&&tt(!0),e(h)}),u={effect:b,items:m,outrogroups:null,fallback:k};y=!1,ie&&(c=Ge)}function Ba(a,t,o,r,l){var i=(r&oa)!==0,c=t.length,m=a.items,v=a.effect.first,g,k=null,h,p=[],y=[],f,b,u,x;if(i)for(x=0;x<c;x+=1)f=t[x],b=l(f,x),u=m.get(b).e,(u.f&me)===0&&(u.nodes?.a?.measure(),(h??=new Set).add(u));for(x=0;x<c;x+=1){if(f=t[x],b=l(f,x),u=m.get(b).e,a.outrogroups!==null)for(const I of a.outrogroups)I.pending.delete(u),I.done.delete(u);if((u.f&me)!==0)if(u.f^=me,u===v)Ie(u,null,o);else{var T=k?k.next:v;u===a.effect.last&&(a.effect.last=u.prev),u.prev&&(u.prev.next=u.next),u.next&&(u.next.prev=u.prev),pe(a,k,u),pe(a,u,T),Ie(u,T,o),k=u,p=[],y=[],v=k.next;continue}if((u.f&at)!==0&&(It(u),i&&(u.nodes?.a?.unfix(),(h??=new Set).delete(u))),u!==v){if(g!==void 0&&g.has(u)){if(p.length<y.length){var S=y[0],E;k=S.prev;var B=p[0],R=p[p.length-1];for(E=0;E<p.length;E+=1)Ie(p[E],S,o);for(E=0;E<y.length;E+=1)g.delete(y[E]);pe(a,B.prev,R.next),pe(a,k,B),pe(a,R,S),v=S,k=R,x-=1,p=[],y=[]}else g.delete(u),Ie(u,v,o),pe(a,u.prev,u.next),pe(a,u,k===null?a.effect.first:k.next),pe(a,k,u),k=u;continue}for(p=[],y=[];v!==null&&v!==u;)(g??=new Set).add(v),y.push(v),v=v.next;if(v===null)continue}(u.f&me)===0&&p.push(u),k=u,v=u.next}if(a.outrogroups!==null){for(const I of a.outrogroups)I.pending.size===0&&(dt(bt(I.done)),a.outrogroups?.delete(I));a.outrogroups.size===0&&(a.outrogroups=null)}if(v!==null||g!==void 0){var w=[];if(g!==void 0)for(u of g)(u.f&at)===0&&w.push(u);for(;v!==null;)(v.f&at)===0&&v!==a.fallback&&w.push(v),v=v.next;var P=w.length;if(P>0){var _=(r&Et)!==0&&c===0?o:null;if(i){for(x=0;x<P;x+=1)w[x].nodes?.a?.measure();for(x=0;x<P;x+=1)w[x].nodes?.a?.fix()}Ea(a,w,_)}}i&&Je(()=>{if(h!==void 0)for(u of h)u.nodes?.a?.apply()})}function Na(a,t,o,r,l,i,c,m){var v=(c&ea)!==0?(c&ta)===0?Zt(o,!1,!1):ht(o):null,g=(c&aa)!==0?ht(l):null;return{v,i:g,e:ct(()=>(i(t,v??o,g??l,m),()=>{a.delete(r)}))}}function Ie(a,t,o){if(a.nodes)for(var r=a.nodes.start,l=a.nodes.end,i=t&&(t.f&me)===0?t.nodes.start:o;r!==null;){var c=ra(r);if(i.before(r),r===l)return;r=c}}function pe(a,t,o){t===null?a.effect.first=o:t.next=o,o===null?a.effect.last=t:o.prev=t}const Pt=[...` 	
\r\f¬†\v\uFEFF`];function Wa(a,t,o){var r=a==null?"":""+a;if(t&&(r=r?r+" "+t:t),o){for(var l in o)if(o[l])r=r?r+" "+l:l;else if(r.length)for(var i=l.length,c=0;(c=r.indexOf(l,c))>=0;){var m=c+i;(c===0||Pt.includes(r[c-1]))&&(m===r.length||Pt.includes(r[m]))?r=(c===0?"":r.substring(0,c))+r.substring(m+1):c=m}}return r===""?null:r}function Mt(a,t=!1){var o=t?" !important;":";",r="";for(var l in a){var i=a[l];i!=null&&i!==""&&(r+=" "+l+": "+i+o)}return r}function rt(a){return a[0]!=="-"||a[1]!=="-"?a.toLowerCase():a}function Oa(a,t){if(t){var o="",r,l;if(Array.isArray(t)?(r=t[0],l=t[1]):r=t,a){a=String(a).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,c=0,m=!1,v=[];r&&v.push(...Object.keys(r).map(rt)),l&&v.push(...Object.keys(l).map(rt));var g=0,k=-1;const b=a.length;for(var h=0;h<b;h++){var p=a[h];if(m?p==="/"&&a[h-1]==="*"&&(m=!1):i?i===p&&(i=!1):p==="/"&&a[h+1]==="*"?m=!0:p==='"'||p==="'"?i=p:p==="("?c++:p===")"&&c--,!m&&i===!1&&c===0){if(p===":"&&k===-1)k=h;else if(p===";"||h===b-1){if(k!==-1){var y=rt(a.substring(g,k).trim());if(!v.includes(y)){p!==";"&&h++;var f=a.substring(g,h).trim();o+=" "+f+";"}}g=h+1,k=-1}}}}return r&&(o+=Mt(r)),l&&(o+=Mt(l,!0)),o=o.trim(),o===""?null:o}return a==null?null:String(a)}function $(a,t,o,r,l,i){var c=a.__className;if(ie||c!==o||c===void 0){var m=Wa(o,r,i);(!ie||m!==a.getAttribute("class"))&&(m==null?a.removeAttribute("class"):a.className=m),a.__className=o}else if(i&&l!==i)for(var v in i){var g=!!i[v];(l==null||g!==!!l[v])&&a.classList.toggle(v,g)}return i}function st(a,t={},o,r){for(var l in o){var i=o[l];t[l]!==i&&(o[l]==null?a.style.removeProperty(l):a.style.setProperty(l,i,r))}}function Oe(a,t,o,r){var l=a.__style;if(ie||l!==t){var i=Oa(t,r);(!ie||i!==a.getAttribute("style"))&&(i==null?a.removeAttribute("style"):a.style.cssText=i),a.__style=t}else r&&(Array.isArray(r)?(st(a,o?.[0],r[0]),st(a,o?.[1],r[1],"important")):st(a,o,r));return r}const Ra=Symbol("is custom element"),La=Symbol("is html");function _e(a){if(ie){var t=!1,o=()=>{if(!t){if(t=!0,a.hasAttribute("value")){var r=a.value;vt(a,"value",null),a.value=r}if(a.hasAttribute("checked")){var l=a.checked;vt(a,"checked",null),a.checked=l}}};a.__on_r=o,Je(o),la()}}function vt(a,t,o,r){var l=za(a);ie&&(l[t]=a.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&a.nodeName==="LINK")||l[t]!==(l[t]=o)&&(t==="loading"&&(a[ia]=o),o==null?a.removeAttribute(t):typeof o!="string"&&Va(a).includes(t)?a[t]=o:a.setAttribute(t,o))}function za(a){return a.__attributes??={[Ra]:a.nodeName.includes("-"),[La]:a.namespaceURI===ca}}var Ct=new Map;function Va(a){var t=a.getAttribute("is")||a.nodeName,o=Ct.get(t);if(o)return o;Ct.set(t,o=[]);for(var r,l=a,i=Element.prototype;i!==l;){r=va(l);for(var c in r)r[c].set&&o.push(c);l=da(l)}return o}function Qe(a,t,o=t){var r=new WeakSet;Bt(a,"input",async l=>{var i=l?a.defaultValue:a.value;if(i=ot(a)?lt(i):i,o(i),Me!==null&&r.add(Me),await ua(),i!==(i=t())){var c=a.selectionStart,m=a.selectionEnd,v=a.value.length;if(a.value=i??"",m!==null){var g=a.value.length;c===m&&m===v&&g>v?(a.selectionStart=g,a.selectionEnd=g):(a.selectionStart=c,a.selectionEnd=Math.min(m,g))}}}),(ie&&a.defaultValue!==a.value||ba(t)==null&&a.value)&&(o(ot(a)?lt(a.value):a.value),Me!==null&&r.add(Me)),Nt(()=>{var l=t();if(a===document.activeElement){var i=fa??Me;if(r.has(i))return}ot(a)&&l===lt(a.value)||a.type==="date"&&!l&&!a.value||l!==a.value&&(a.value=l??"")})}const nt=new Set;function Ye(a,t,o,r,l=r){var i=o.getAttribute("type")==="checkbox",c=a;let m=!1;if(t!==null)for(var v of t)c=c[v]??=[];c.push(o),Bt(o,"change",()=>{var g=o.__value;i&&(g=St(c,g,o.checked)),l(g)},()=>l(i?[]:null)),Nt(()=>{var g=r();if(ie&&o.defaultChecked!==o.checked){m=!0;return}i?(g=g||[],o.checked=g.includes(o.__value)):o.checked=ga(o.__value,g)}),xa(()=>{var g=c.indexOf(o);g!==-1&&c.splice(g,1)}),nt.has(c)||(nt.add(c),Je(()=>{c.sort((g,k)=>g.compareDocumentPosition(k)===4?-1:1),nt.delete(c)})),Je(()=>{if(m){var g;if(i)g=St(c,g,o.checked);else{var k=c.find(h=>h.checked);g=k?.__value}l(g)}})}function St(a,t,o){for(var r=new Set,l=0;l<a.length;l+=1)a[l].checked&&r.add(a[l].__value);return o||r.delete(t),Array.from(r)}function ot(a){var t=a.type;return t==="number"||t==="range"}function lt(a){return a===""?null:+a}const Se={regular:{sev1:"Core to who I am or want to become",sev2:"Significant progress toward a major goal",sev3:"Meaningful but not defining",sev4:"Nice to do, no real deadline",sev5:"Pure exploration or fun"},maintenance:{sev1:"Immediate risk if ignored (safety, legal, financial)",sev2:"Disrupts daily life if neglected",sev3:"Routine upkeep, flexible timing",sev4:"Minor improvement, no consequences",sev5:"Cosmetic or nice-to-have"}},Fa=["üíº","üè†","üí™","üìö","üí∞","‚ù§Ô∏è","üéØ","üöÄ","üé®","üéµ","‚úàÔ∏è","üçé","üßò","üë®‚Äçüë©‚Äçüëß‚Äçüë¶","ü§ù","üì±","üíª","üîß","üìù","üéì","üèÉ","üß†","üå±","‚≠ê","üî•","üí°","üéÆ","üì∏","üõí","üè¶","üöó","üèãÔ∏è"];re(["click","keydown"]);var Ua=O('<button><span class="text-lg"> </span> <span class="text-[10px] font-medium truncate"> </span></button>'),Ha=O('<nav class="pb-6 fixed bottom-0 left-0 right-0 bg-base-200 border-t border-base-content/10 flex justify-around pt-2 px-1 safe-bottom"></nav>');function Ga(a,t){se(t,!0);const o=[{id:"areas",icon:"üìÅ",label:"Areas"},{id:"week",icon:"üìÖ",label:"Week"},{id:"today",icon:"‚òÄÔ∏è",label:"Today"}];var r=Ha();de(r,21,()=>o,ce,(l,i)=>{var c=Ua();let m;c.__click=()=>t.onTabChange(e(i).id);let v;var g=n(c),k=n(g,!0);s(g);var h=d(g,2),p=n(h,!0);s(h),s(c),K(()=>{m=$(c,1,"flex flex-col items-center gap-1 px-3 py-1 rounded-lg transition-colors min-w-0 flex-1",null,m,{"text-primary":t.activeTab===e(i).id,"text-base-content":t.activeTab!==e(i).id}),v=Oe(c,"",v,{opacity:t.activeTab===e(i).id?1:.4}),L(k,e(i).icon),L(p,e(i).label)}),A(l,c)}),s(r),A(a,r),ne()}re(["click"]);var qa=O('<button type="button"><span class="text-xs font-medium"> </span> <span class="text-lg"> </span></button>'),Ja=O('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><div><h2 class="text-lg font-semibold">Assign to Day</h2> <p class="text-xs text-base-content/50 truncate"> </p></div> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">‚úï</button></div> <div class="p-4 grid grid-cols-7 gap-1"></div> <div class="p-4 pt-0"><button type="button" class="w-full p-3 text-sm text-base-content/50 hover:text-base-content rounded-lg border border-base-content/10 hover:border-primary transition-colors">Remove from all days</button></div></div></div>');function Ka(a,t){se(t,!0);let o=Y(!1),r=Y(null);function l(p,y,f,b){p.stopPropagation(),C(r,{task:y,project:f,area:b},!0),C(o,!0)}function i(){C(o,!1),C(r,null)}function c(){return _a(t.currentWeekOf).map(p=>({date:p,dayName:Wt(p),isToday:ka(p)}))}async function m(p){if(!e(r))return;const{task:y,project:f,area:b}=e(r);i();const u=t.isTaskAssignedToDay(y.id);u===p?await qe(y.id,f.id,t.currentWeekOf,p):(u&&await qe(y.id,f.id,t.currentWeekOf,u),await pa(y.id,f.id,b.id,y.name,t.currentWeekOf,p,!1))}var v={openDayPicker:l},g=ee(),k=Z(g);{var h=p=>{var y=Ja(),f=n(y);f.__click=i,f.__keydown=P=>P.key==="Escape"&&i();var b=d(f,2),u=n(b),x=n(u),T=d(n(x),2),S=n(T,!0);s(T),s(x);var E=d(x,2);E.__click=i,s(u);var B=d(u,2);de(B,21,c,ce,(P,_)=>{const I=Q(()=>t.isTaskAssignedToDay(e(r).task.id)===e(_).date);var V=qa();V.__click=()=>m(e(_).date);var q=n(V),U=n(q,!0);s(q);var z=d(q,2),D=n(z,!0);s(z),s(V),K(j=>{$(V,1,`flex flex-col items-center p-2 rounded-lg border transition-colors ${e(I)?"bg-primary text-primary-content border-primary":e(_).isToday?"border-primary/50 hover:border-primary":"border-base-content/10 hover:border-primary"}`),L(U,e(_).dayName),L(D,j)},[()=>e(_).date.split("-")[2]]),A(P,V)}),s(B);var R=d(B,2),w=n(R);w.__click=()=>{const P=t.isTaskAssignedToDay(e(r).task.id);P&&qe(e(r).task.id,e(r).project.id,t.currentWeekOf,P),i()},s(R),s(b),s(y),K(()=>L(S,e(r).task.name)),A(p,y)};J(k,p=>{e(o)&&e(r)&&p(h)})}return A(a,g),ne(v)}re(["click","keydown"]);var Ya=O('<span class="text-center text-xs font-semibold bg-purple-500/20 text-purple-400 rounded w-full h-full  items-center justify-center flex">1</span>'),Qa=O('<span class="text-center text-xs font-semibold bg-red-500/20 text-red-400 rounded w-full h-full items-center justify-center flex">2</span>'),Xa=O('<span class="text-center text-xs font-semibold bg-yellow-500/20 text-yellow-400 rounded w-full h-full items-center justify-center flex">3</span>'),Za=O('<span class="text-center text-xs font-semibold bg-blue-500/20 text-blue-500 rounded w-full h-full items-center justify-center flex">4</span>'),$a=O('<span class="text-center text-xs font-semibold bg-emerald-500/20 text-emerald-300 rounded w-full h-full items-center justify-center flex">5</span>');function ut(a,t){var o=ee(),r=Z(o);{var l=c=>{var m=Ya();A(c,m)},i=c=>{var m=ee(),v=Z(m);{var g=h=>{var p=Qa();A(h,p)},k=h=>{var p=ee(),y=Z(p);{var f=u=>{var x=Xa();A(u,x)},b=u=>{var x=ee(),T=Z(x);{var S=B=>{var R=Za();A(B,R)},E=B=>{var R=$a();A(B,R)};J(T,B=>{t.level=="sev4"?B(S):B(E,!1)},!0)}A(u,x)};J(y,u=>{t.level=="sev3"?u(f):u(b,!1)},!0)}A(h,p)};J(v,h=>{t.level=="sev2"?h(g):h(k,!1)},!0)}A(c,m)};J(r,c=>{t.level=="sev1"?c(l):c(i,!1)})}A(a,o)}var er=O('<div class="h-1 bg-base-300"><div class="h-full bg-base-content/20 transition-all"></div></div>'),tr=O('<div class="bg-base-100 rounded-lg hover:bg-primary/20 cursor-pointer overflow-hidden" tabindex="0" role="button"><!> <div class="flex items-start gap-2 p-2"><div class="size-8 mt-0.5"><!></div> <div class="flex-1 min-w-0"><p class="text-sm font-medium text-base-content mb-1"> </p> <p class="text-sm "><span> </span> <span class="text-xs mx-0.5">‚Ä¢</span> <span class="text-base-content/50"> </span></p></div> <button type="button" class="w-7 h-7 flex items-center justify-center rounded text-base-content/30 hover:text-error hover:bg-error/10 transition-colors" title="Remove from week">‚úï</button></div></div>'),ar=O('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No projects assigned to this week</p> <p class="text-base-content/30 text-xs">Go to Areas and assign projects</p></div>'),rr=O('<div class="flex flex-col gap-2"><div class="flex justify-between items-center"><div class="text-xs tracking-wider text-base-content/50 uppercase">Assigned projects</div> <button> </button></div> <!></div>');function sr(a,t){se(t,!0);let o=Y(localStorage.getItem("filterAssignedProject")=="true"),r=()=>C(o,!e(o));Be(()=>{localStorage.setItem("filterAssignedProject",e(o)+"")});async function l(h,p){h.stopPropagation(),await Ot(p,t.currentWeekOf)}function i(h){const p=Ae.getByProject(h),y=p.filter(b=>b.status==="active").length,f=p.filter(b=>b.status==="completed").length;return{active:y,completed:f,total:y+f}}var c=rr(),m=n(c),v=d(n(m),2);v.__click=r;var g=n(v);s(v),s(m);var k=d(m,2);de(k,17,()=>t.assignedProjects,ce,(h,p)=>{let y=()=>e(p).project,f=()=>e(p).area;const b=Q(()=>i(y().id)),u=Q(()=>e(b).total>0?e(b).completed/e(b).total*100:0);var x=ee(),T=Z(x);{var S=E=>{var B=tr();B.__click=()=>t.navigateToTasks(y());var R=n(B);{var w=M=>{var F=er(),G=n(F);s(F),K(()=>Oe(G,`width: ${e(u)??""}%`)),A(M,F)};J(R,M=>{e(b).total>0&&M(w)})}var P=d(R,2),_=n(P),I=n(_);ut(I,{get level(){return y().severity}}),s(_);var V=d(_,2),q=n(V),U=n(q,!0);s(q);var z=d(q,2),D=n(z),j=n(D);s(D);var N=d(D,4),H=n(N,!0);s(N),s(z),s(V);var W=d(V,2);W.__click=M=>l(M,y().id),s(P),s(B),K(()=>{L(U,y().name),$(D,1,`text-base-content/50 ${e(b).active==0?"text-error":""}`),L(j,`${e(b).active??""} available`),L(H,f().name)}),A(E,B)};J(T,E=>{(!["completed","cancelled"].includes(y().status)&&e(o)||!e(o))&&E(S)})}A(h,x)},h=>{var p=ar();A(h,p)}),s(c),K(()=>{$(v,1,`w-20 btn btn-xs btn-soft btn-secondary ${e(o)?"bg-secondary text-secondary-content":""}`),L(g,`Filter :${e(o)?"ON":"OFF"}`)}),A(a,c),ne()}re(["click"]);var nr=O('<span class="text-xs text-primary-content px-2 py-1 bg-primary rounded"> </span>'),or=O('<button class="text-start flex items-center gap-3 p-3 bg-base-100 rounded-lg transition-all hover:bg-primary/20 cursor-pointer"><div class="flex-1 min-w-0 "><p class="text-sm text-base-content truncate mb-1"> </p> <p class="text-xs text-base-content/50"> </p></div> <!></button>'),lr=O('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No tasks available</p> <p class="text-base-content/30 text-xs">Assigned projects have no active tasks</p></div>'),ir=O('<div class="flex flex-col gap-2"></div>');function cr(a,t){se(t,!0);var o=ir();de(o,21,()=>t.weekTasks,ce,(r,l)=>{let i=()=>e(l).task,c=()=>e(l).project,m=()=>e(l).area;const v=Q(()=>t.isTaskAssignedToDay(i().id));var g=or();g.__click=x=>t.openDayPicker(x,i(),c(),m());var k=n(g),h=n(k),p=n(h,!0);s(h);var y=d(h,2),f=n(y);s(y),s(k);var b=d(k,2);{var u=x=>{var T=nr(),S=n(T,!0);s(T),K(E=>L(S,E),[()=>Wt(e(v))]),A(x,T)};J(b,x=>{e(v)&&x(u)})}s(g),K(()=>{L(p,i().name),L(f,`${m().icon??""} ${c().name??""}`)}),A(r,g)},r=>{var l=lr();A(r,l)}),s(o),A(a,o),ne()}re(["click"]);var dr=O('<div class="flex flex-col h-full"><div class="bg-base-100 border-b border-b-base-content/10"><div class="px-4 pt-4 pb-2 "><h2 class="text-lg font-medium">Week</h2> <p class="text-xs text-base-content/50"> </p></div> <div class="flex gap-1 px-4 pb-3"><button> </button> <button> </button></div></div> <div class="flex-1 overflow-y-auto px-2 py-4"><!></div></div> <!>',1);function vr(a,t){se(t,!0);let o=Y(Ke(localStorage.getItem("weekTabView")||"projects"));Be(()=>{e(o)&&localStorage.setItem("weekTabView",e(o))});let r=Ke(Ne());const l=Q(()=>We.getWeek(r));let i;function c(_){return e(l)?e(l).tasksByDay.find(V=>V.taskId===_)?.date??null:null}let m=Q(()=>e(l)?e(l).projectAssignments.map(_=>{const I=je.getById(_.areaId);if(!I)return null;const q=xe.getByArea(I.id).find(U=>U.id===_.projectId);return q?{assignment:_,project:q,area:I}:null}).filter(_=>_!==null):[]),v=Q(()=>{const _=[];for(const{project:I,area:V}of e(m)){const q=Ae.getByProject(I.id).filter(U=>U.status==="active");for(const U of q)_.push({task:U,project:I,area:V})}return _});var g=dr(),k=Z(g),h=n(k),p=n(h),y=d(n(p),2),f=n(y,!0);s(y),s(p);var b=d(p,2),u=n(b);u.__click=()=>C(o,"projects");var x=n(u);s(u);var T=d(u,2);T.__click=()=>C(o,"tasks");var S=n(T);s(T),s(b),s(h);var E=d(h,2),B=n(E);{var R=_=>{sr(_,{get navigateToTasks(){return t.navigateToTasks},get currentWeekOf(){return r},get assignedProjects(){return e(m)}})},w=_=>{cr(_,{get openDayPicker(){return i.openDayPicker},get weekTasks(){return e(v)},isTaskAssignedToDay:c})};J(B,_=>{e(o)==="projects"?_(R):_(w,!1)})}s(E),s(k);var P=d(k,2);De(Ka(P,{get currentWeekOf(){return r},isTaskAssignedToDay:c}),_=>i=_,()=>i),K(_=>{L(f,_),$(u,1,`px-4 py-1.5 text-sm rounded-lg transition-colors ${e(o)==="projects"?"bg-primary/20 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),L(x,`Projects (${e(m).length??""})`),$(T,1,`px-4 py-1.5 text-sm rounded-lg transition-colors ${e(o)==="tasks"?"bg-primary/20 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),L(S,`Tasks (${e(v).length??""})`)},[()=>ha(r)]),A(a,g),ne()}re(["click"]);var ur=O('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="p-4 border-b border-base-content/10"><p class="font-medium text-base-content"> </p> <p class="text-xs text-base-content/50"> </p></div> <div class="p-4 space-y-4"><div><p class="text-xs uppercase tracking-wider text-base-content/50 mb-2">What happened?</p> <div class="flex gap-2"><label><input type="radio" name="action" class="radio radio-success radio-sm"/> <span class="text-sm">Completed</span></label> <label><input type="radio" name="action" class="radio radio-error radio-sm"/> <span class="text-sm">Cancelled</span></label></div></div> <div><p class="text-xs uppercase tracking-wider text-base-content/50 mb-2">Follow-up task (optional)</p> <input type="text" class="input input-bordered w-full" placeholder="Enter to create a follow-up..."/></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><button type="button" class="btn btn-ghost btn-sm flex-1">Cancel</button> <button type="button" class="btn btn-primary btn-sm flex-1">Done</button></div></div></div>');function br(a,t){se(t,!0);const o=[];let r=Y("completed"),l=Y("");Be(()=>{t.show&&(C(r,"completed"),C(l,""))});async function i(){t.taskByDay&&(e(r)==="completed"?await Rt(t.taskByDay.taskId,t.taskByDay.projectId,t.weekOf,t.taskByDay.date):await ya(t.taskByDay.taskId,t.taskByDay.projectId,t.weekOf,t.taskByDay.date),e(l).trim()&&await Lt(t.taskByDay.projectId,t.taskByDay.areaId,e(l).trim()),t.onClose())}var c=ee(),m=Z(c);{var v=g=>{var k=ur(),h=n(k);h.__click=function(...z){t.onClose?.apply(this,z)},h.__keydown=z=>z.key==="Escape"&&t.onClose();var p=d(h,2),y=n(p),f=n(y),b=n(f,!0);s(f);var u=d(f,2),x=n(u);s(u),s(y);var T=d(y,2),S=n(T),E=d(n(S),2),B=n(E),R=n(B);_e(R),R.value=R.__value="completed",yt(2),s(B);var w=d(B,2),P=n(w);_e(P),P.value=P.__value="cancelled",yt(2),s(w),s(E),s(S);var _=d(S,2),I=d(n(_),2);_e(I),I.__keydown=z=>z.key==="Enter"&&i(),s(_),s(T);var V=d(T,2),q=n(V);q.__click=function(...z){t.onClose?.apply(this,z)};var U=d(q,2);U.__click=i,s(V),s(p),s(k),K(()=>{L(b,t.taskByDay.name),L(x,`${t.areaIcon??""} ${t.areaName??""} ¬∑ ${t.projectName??""}`),$(B,1,`flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border border-base-content/10 cursor-pointer hover:border-success ${e(r)==="completed"?"border-success bg-success/10":""}`),$(w,1,`flex-1 flex items-center justify-center gap-2 p-3 rounded-lg border border-base-content/10 cursor-pointer hover:border-error ${e(r)==="cancelled"?"border-error bg-error/10":""}`)}),Ye(o,[],R,()=>e(r),z=>C(r,z)),Ye(o,[],P,()=>e(r),z=>C(r,z)),Qe(I,()=>e(l),z=>C(l,z)),A(g,k)};J(m,g=>{t.show&&t.taskByDay&&g(v)})}A(a,c),ne()}re(["click","keydown"]);var fr=O('<div class="px-4 pb-3"><div class="flex items-center justify-between text-xs text-base-content/50 mb-1"><span> </span> <span> </span></div> <div class="h-2 bg-base-100 rounded-full overflow-hidden"><div class="h-full bg-success transition-all rounded-full"></div></div></div>'),gr=O('<div class="flex items-center gap-3 p-3 bg-base-100 border border-base-content/10 rounded-lg"><button type="button" aria-label="check" class="w-7 h-7 rounded-full border-2 border-base-content/30 flex items-center justify-center flex-shrink-0 hover:border-success hover:bg-success/10 transition-colors"></button> <div class="flex-1 min-w-0" tabindex="0" role="button"><p class="text-sm text-base-content mb-2"> </p> <p class="text-xs text-base-content/50 truncate"> </p></div> <button type="button" class="w-7 h-7 flex items-center justify-center rounded text-base-content/30 hover:text-error hover:bg-error/10 transition-colors" title="Remove from today">‚úï</button></div>'),xr=O('<div class="flex flex-col gap-2 mb-4"></div>'),mr=O('<div class="text-center py-12"><span class="text-4xl block mb-3">üìã</span> <p class="text-base-content/50 text-sm mb-2">No tasks for today</p> <p class="text-base-content/30 text-xs">Go to Week tab and assign tasks</p></div>'),pr=O('<div class="text-center mb-5 py-12 border-2 border-dashed border-success/30 rounded-lg bg-success/5"><span class="text-4xl block mb-3">üéâ</span> <p class="text-sm font-medium text-success">All done for today!</p> <p class="text-xs text-base-content/50 mt-1">Great work!</p></div>'),_r=Ee('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>'),kr=Ee('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"></path></svg>'),hr=O('<div class="flex items-center gap-3 p-3 opacity-50"><button type="button" title="Mark as incomplete"><!></button> <div class="flex-1 min-w-0"><p class="text-sm text-base-content line-through truncate"> </p> <p class="text-xs text-base-content/50"> </p></div></div>'),yr=O('<div><p class="text-xs font-medium uppercase tracking-wider text-base-content/40 mb-2"> </p> <div class="flex flex-col gap-1"></div></div>'),wr=O('<div class="flex flex-col h-full"><div class="px-4 pt-4 pb-2"><h2 class="text-lg font-medium">Today</h2> <p class="text-xs text-base-content/50"> </p></div> <!> <div class="flex-1 overflow-y-auto px-3 pb-4"><!> <!></div></div> <!>',1);function jr(a,t){se(t,!0);const o=wa(),r=Ne();let l=Y(!1),i=Y(null),c=Y(""),m=Y(""),v=Y(""),g=Q(()=>{const j=We.getWeek(r);return j?j.tasksByDay.filter(N=>N.date===o).map(N=>{const H=Ae.getById(N.taskId),W=je.getById(N.areaId),F=(W?xe.getByArea(W.id):[]).find(G=>G.id===N.projectId);return{taskByDay:N,task:H,areaIcon:W?.icon??"üìÅ",areaName:W?.name??"Unknown",projectName:F?.name??"Unknown"}}):[]}),k=Q(()=>e(g).filter(j=>j.taskByDay.status!=="completed"&&j.taskByDay.status!="cancelled")),h=Q(()=>e(g).filter(j=>j.taskByDay.status==="completed"||j.taskByDay.status=="cancelled"));function p(){const j=e(g),N=j.filter(M=>M.taskByDay.status==="completed"||M.taskByDay.status=="cancelled").length,H=j.length,W=H>0?N/H*100:0;return{completed:N,total:H,percent:W}}async function y(j){await Rt(j.taskId,j.projectId,r,o)}async function f(j){await Aa(j.taskId,j.projectId,r,o)}async function b(j){await qe(j.taskId,j.projectId,r,o)}function u(j,N,H,W){C(i,j,!0),C(c,N,!0),C(m,H,!0),C(v,W,!0),C(l,!0)}function x(){C(l,!1),C(i,null)}var T=wr(),S=Z(T),E=n(S),B=d(n(E),2),R=n(B);s(B),s(E);var w=d(E,2);{var P=j=>{const N=Q(p);var H=fr(),W=n(H),M=n(W),F=n(M);s(M);var G=d(M,2),X=n(G);s(G),s(W);var ae=d(W,2),le=n(ae);s(ae),s(H),K(te=>{L(F,`${e(N).completed??""} of ${e(N).total??""} completed`),L(X,`${te??""}%`),Oe(le,`width: ${e(N).percent??""}%`)},[()=>Math.round(e(N).percent)]),A(j,H)};J(w,j=>{p().total>0&&j(P)})}var _=d(w,2),I=n(_);{var V=j=>{var N=xr();de(N,21,()=>e(k),ce,(H,W)=>{let M=()=>e(W).taskByDay,F=()=>e(W).areaIcon,G=()=>e(W).areaName,X=()=>e(W).projectName;var ae=gr(),le=n(ae);le.__click=()=>y(M());var te=d(le,2);te.__click=()=>u(M(),F(),G(),X());var ve=n(te),fe=n(ve,!0);s(ve);var ue=d(ve,2),oe=n(ue);s(ue),s(te);var Te=d(te,2);Te.__click=()=>b(M()),s(ae),K(()=>{L(fe,M().name),L(oe,`${F()??""}  ${X()??""}`)}),A(H,ae)}),s(N),A(j,N)},q=j=>{var N=ee(),H=Z(N);{var W=F=>{var G=mr();A(F,G)},M=F=>{var G=pr();A(F,G)};J(H,F=>{p().total===0?F(W):F(M,!1)},!0)}A(j,N)};J(I,j=>{e(k).length>0?j(V):j(q,!1)})}var U=d(I,2);{var z=j=>{var N=yr(),H=n(N),W=n(H);s(H);var M=d(H,2);de(M,21,()=>e(h),ce,(F,G)=>{let X=()=>e(G).taskByDay,ae=()=>e(G).areaIcon,le=()=>e(G).areaName,te=()=>e(G).projectName;const ve=Q(()=>X().status==="completed"),fe=Q(()=>X().status==="cancelled");var ue=hr(),oe=n(ue);oe.__click=()=>f(X());var Te=n(oe);{var Re=ge=>{var he=_r();A(ge,he)},Xe=ge=>{var he=ee(),Ce=Z(he);{var Fe=ye=>{var Ue=kr();A(ye,Ue)};J(Ce,ye=>{X().status=="cancelled"&&ye(Fe)},!0)}A(ge,he)};J(Te,ge=>{X().status=="completed"?ge(Re):ge(Xe,!1)})}s(oe);var ke=d(oe,2),Pe=n(ke),Le=n(Pe,!0);s(Pe);var ze=d(Pe,2),Ve=n(ze);s(ze),s(ke),s(ue),K(()=>{$(oe,1,`w-7 h-7 rounded-full ${e(ve)?"bg-success border-success text-success-content":e(fe)?"bg-error border-error text-error-content":"border-base-content/30 hover:border-success"} border-2 flex items-center justify-center flex-shrink-0 `),L(Le,X().name),L(Ve,`${ae()??""} ${le()??""} ¬∑ ${te()??""}`)}),A(F,ue)}),s(M),s(N),K(()=>L(W,`Completed (${e(h).length??""})`)),A(j,N)};J(U,j=>{e(h).length>0&&j(z)})}s(_),s(S);var D=d(S,2);br(D,{get show(){return e(l)},get taskByDay(){return e(i)},get areaIcon(){return e(c)},get areaName(){return e(m)},get projectName(){return e(v)},get weekOf(){return r},onClose:x}),K(j=>L(R,`${j??""}, ${o??""}`),[()=>ja(o)]),A(a,T),ne()}re(["click"]);const it=["none","reorder","edit","status"],Ar=[{value:"active",label:"Active",color:"border-s-primary"},{value:"blocked",label:"Blocked",color:"border-s-warning"},{value:"someday",label:"Someday",color:"border-s-info"},{value:"completed",label:"Completed",color:"border-s-success"},{value:"cancelled",label:"Cancelled",color:"border-s-error"}],Tr=[{value:"active",label:"Active"},{value:"blocked",label:"Blocked"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}];var Pr=O('<button class="rounded-lg border border-dashed min-h-30 border-base-content/20 bg-transparent hover:bg-primary/20 transition-colors cursor-pointer w-full"><div class="card-body p-3 items-center justify-center text-center min-h-[88px]"><span class="text-xl text-base-content/50">+</span> <span class="text-xs text-base-content/50">Add Area</span></div></button>');function Mr(a,t){var o=Pr();o.__click=function(...r){t.handleClick?.apply(this,r)},A(a,o)}re(["click"]);var Cr=O('<button type="button"> </button>'),Sr=O('<button type="button" class="btn btn-outline btn-error btn-sm">Archive</button>'),Ir=O('<button type="button" class="btn btn-outline btn-primary btn-sm">Unarchive</button>'),Dr=O('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">‚úï</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Icon</label> <div class="grid grid-cols-8 gap-1"></div></div> <div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Health, Work, Learning"/></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><!> <div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function Er(a,t){se(t,!0);let o=Y(!1),r=Y(null),l=Y(""),i=Y("üéØ");function c(){C(r,null),C(l,""),C(i,"üéØ"),C(o,!0)}function m(x,T){x.stopPropagation(),C(r,T,!0),C(l,T.name,!0),C(i,T.icon,!0),C(o,!0)}function v(){C(o,!1),C(r,null)}async function g(){!e(l).trim()||!e(i)||(e(r)?await Ta(e(r).index,{name:e(l).trim(),icon:e(i)}):await Pa(e(l).trim(),e(i)),v())}function k(x){return e(r)&&e(r).status=="archived"?!1:xe.getByArea(x.id).filter(S=>S.status==="active").length===0}async function h(){!e(r)||!k(e(r))||(await Ma(e(r).index),v())}async function p(){e(r)&&(await Ca(e(r).index),v())}var y={openCreateAreaModal:c,openEditAreaModal:m},f=ee(),b=Z(f);{var u=x=>{var T=Dr(),S=n(T);S.__click=v,S.__keydown=M=>M.key==="Escape"&&v();var E=d(S,2),B=n(E),R=n(B),w=n(R,!0);s(R);var P=d(R,2);P.__click=v,s(B);var _=d(B,2),I=n(_),V=d(n(I),2);de(V,21,()=>Fa,ce,(M,F)=>{var G=Cr();G.__click=()=>C(i,e(F),!0);var X=n(G,!0);s(G),K(()=>{$(G,1,`aspect-square flex items-center justify-center text-lg rounded-lg transition-colors ${e(i)===e(F)?"bg-primary text-primary-content":"hover:bg-base-200"}`),L(X,e(F))}),A(M,G)}),s(V),s(I);var q=d(I,2),U=d(n(q),2);_e(U),U.__keydown=M=>M.key==="Enter"&&g(),s(q),s(_);var z=d(_,2),D=n(z);{var j=M=>{var F=ee(),G=Z(F);{var X=le=>{var te=Sr();te.__click=h,K((ve,fe)=>{te.disabled=ve,vt(te,"title",fe)},[()=>!k(e(r)),()=>k(e(r))?"Archive area":"Cannot archive: has active projects"]),A(le,te)},ae=le=>{var te=ee(),ve=Z(te);{var fe=ue=>{var oe=Ir();oe.__click=p,A(ue,oe)};J(ve,ue=>{e(r).status=="archived"&&ue(fe)},!0)}A(le,te)};J(G,le=>{e(r).status=="active"?le(X):le(ae,!1)})}A(M,F)};J(D,M=>{e(r)&&M(j)})}var N=d(D,4);N.__click=v;var H=d(N,2);H.__click=g;var W=n(H,!0);s(H),s(z),s(E),s(T),K(M=>{L(w,e(r)?"Edit Area":"New Area"),H.disabled=M,L(W,e(r)?"Save":"Create")},[()=>!e(l).trim()||!e(i)]),Qe(U,()=>e(l),M=>C(l,M)),A(x,T)};J(b,x=>{e(o)&&x(u)})}return A(a,f),ne(y)}re(["click","keydown"]);var Br=O('<button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center"><svg viewBox="0 0 24 24" class="size-6" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button>'),Nr=O('<div class="flex flex-row gap-1"><button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üê</button> <button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üí</button></div>'),Wr=O("<div> </div>"),Or=O('<div tabindex="0" role="button"><div class="flex flex-col py-4 px-3 items-start text-left"><div class="w-full flex flex-row justify-between items-start"><span class="text-4xl mb-2"> </span> <!></div> <div class="flex flex-row justify-between items-end w-full"><div class="flex flex-col w-full"><div class="text-sm font-medium mb-0 pb-1 truncate"> </div> <p class="text-xs text-base-content/50"> </p></div></div></div></div>');function Rr(a,t){se(t,!0);const o=Q(()=>xe.getByArea(t.area.id).filter(T=>T.status==="active").length),r=Q(()=>{const T=Ne(),S=We.getWeek(T),E=xe.getByArea(t.area.id),B=E.filter(_=>_.status==="active"||_.status==="blocked"||_.status==="someday");if(B.length===0)return{level:"clear",color:"badge-success",icon:"‚úì"};if(S?.projectAssignments.some(_=>B.some(I=>I.id===_.projectId))??!1)return{level:"planned",color:"text-purple-500",icon:"‚óÜ"};const w=E.filter(_=>_.status==="completed"&&_.completedAt),P=w.length>0?Math.max(...w.map(_=>new Date(_.completedAt).getTime())):null;if(P){const _=Date.now()-12096e5,I=Date.now()-720*60*60*1e3;if(P>=_)return{level:"active",color:"badge-info",icon:"‚óè"};if(P>=I)return{level:"fading",color:"badge-warning",icon:"‚óã"}}return{level:"avoiding",color:"badge-error",icon:"!"}});var l=Or();l.__click=()=>t.handleSelect(t.area);var i=n(l),c=n(i),m=n(c),v=n(m,!0);s(m);var g=d(m,2);{var k=T=>{var S=Br();S.__click=E=>t.handleEdit(E,t.area),A(T,S)},h=T=>{var S=ee(),E=Z(S);{var B=w=>{var P=Nr(),_=n(P);_.__click=V=>t.handleAreaMoveUp(V,t.index);var I=d(_,2);I.__click=V=>t.handleAreaMoveDown(V,t.index),s(P),K(()=>_.disabled=t.index==0),A(w,P)},R=w=>{var P=ee(),_=Z(P);{var I=V=>{var q=Wr(),U=n(q,!0);s(q),K(()=>{$(q,1,`badge badge-sm rounded ${e(r).color??""} badge-soft`),L(U,e(r).level)}),A(V,q)};J(_,V=>{t.viewMode=="status"&&V(I)},!0)}A(w,P)};J(E,w=>{t.viewMode=="reorder"?w(B):w(R,!1)},!0)}A(T,S)};J(g,T=>{t.viewMode=="edit"?T(k):T(h,!1)})}s(c);var p=d(c,2),y=n(p),f=n(y),b=n(f,!0);s(f);var u=d(f,2),x=n(u);s(u),s(y),s(p),s(i),s(l),K(()=>{$(l,1,`rounded-lg bg-base-100 hover:bg-primary/20 transition-colors cursor-pointer w-full ${e(r).level==="avoiding"?"border border-error/20":e(r).level==="fading"?"border border-warning/20":e(r).level==="active"?"border border-info/20":e(r).level==="planned"?"border border-purple-500/20":""}`),Oe(l,e(r).level==="avoiding"?"background: rgba(248, 114, 114, 0.05); box-shadow: inset 0 0 20px rgba(248, 114, 114, 0.08); ":e(r).level==="fading"?"box-shadow: inset 0 0 30px rgba(251, 189, 35, 0.1);":e(r).level==="active"?"box-shadow: inset 0 0 30px rgba(58, 191, 248, 0.1);":e(r).level==="planned"?"box-shadow: inset 0 0 30px rgba(168, 85, 247, 0.1);":""),L(v,t.area.icon),L(b,t.area.name),L(x,`${e(o)??""} project${e(o)!==1?"s":""}`)}),A(a,l),ne()}re(["click"]);var Lr=O('<button class="link text-base-content/50 text-sm capitalize"> </button>'),zr=O('<div class="flex flex-col h-full"><div class="px-3 pt-5 pb-4 flex flex-row justify-between items-center bg-base-100 border-b border-base-content/10"><a href="/" class="flex flex-row items-center text-base-content/80"><svg version="1.1" id="Icons" class="size-12 mt-1 me-2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" xml:space="preserve" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><style type="text/css">.st0{fill:none;stroke:currentColor;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><path class="st0" d="M11,13H5c-1.1,0-2-0.9-2-2V5c0-1.1,0.9-2,2-2h6c1.1,0,2,0.9,2,2v6C13,12.1,12.1,13,11,13z"></path><path class="st0" d="M11,29H5c-1.1,0-2-0.9-2-2v-6c0-1.1,0.9-2,2-2h6c1.1,0,2,0.9,2,2v6C13,28.1,12.1,29,11,29z"></path><line class="st0" x1="17" y1="5" x2="29" y2="5"></line><line class="st0" x1="17" y1="9" x2="24" y2="9"></line><line class="st0" x1="17" y1="21" x2="29" y2="21"></line><line class="st0" x1="17" y1="25" x2="24" y2="25"></line><polyline class="st0" points="6,7 8,9 11,6 "></polyline></g></svg> <div class="flex flex-col"><div class="text-xl text-base-content/80 tracking-wider font-medium">Doable</div> <div class="text-sm text-base-content/50">Life areas at a glance</div></div></a> <div class="flex flex-row gap-4"><!> <button class="link text-base-content/50 text-sm"> </button></div></div> <div class="flex-1 min-h-0 overflow-auto"><div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 p-3"><!> <!></div></div> <!></div>');function Vr(a,t){se(t,!0);let o,r=Y(Ke(localStorage.getItem("areasViewMode")||"none"));Be(()=>localStorage.setItem("areasViewMode",e(r)));let l=Y(!1),i=()=>C(r,it[(it.indexOf(e(r))+1)%it.length],!0),c=()=>C(l,!e(l));const m=Q(()=>e(l)?je.areas.filter(w=>w.status=="archived"):je.areas.filter(w=>w.status=="active"));async function v(w,P){if(w.stopPropagation(),P===0)return;const _=je.areas,I=e(m)[P],V=e(m)[P-1],q=_.findIndex(D=>D.id===V.id),U=q>0?_[q-1].index:null,z=V.index;await wt(I.index,U,z)}async function g(w,P){if(w.stopPropagation(),P===e(m).length-1)return;const _=je.areas,I=e(m)[P],V=e(m)[P+1],q=_.findIndex(D=>D.id===V.id),U=V.index,z=q<_.length-1?_[q+1].index:null;await wt(I.index,U,z)}var k=zr(),h=n(k),p=d(n(h),2),y=n(p);{var f=w=>{var P=Lr();P.__click=i;var _=n(P,!0);s(P),K(()=>L(_,e(r))),A(w,P)};J(y,w=>{e(l)||w(f)})}var b=d(y,2);b.__click=c;var u=n(b,!0);s(b),s(p),s(h);var x=d(h,2),T=n(x),S=n(T);de(S,17,()=>e(m),ce,(w,P,_)=>{Rr(w,{get area(){return e(P)},get handleSelect(){return t.onSelectArea},index:_,handleAreaMoveUp:v,handleAreaMoveDown:g,get viewMode(){return e(r)},get handleEdit(){return o.openEditAreaModal}})});var E=d(S,2);{var B=w=>{Mr(w,{get handleClick(){return o.openCreateAreaModal}})};J(E,w=>{e(l)||w(B)})}s(T),s(x);var R=d(x,2);De(Er(R,{}),w=>o=w,()=>o),s(k),K(()=>L(u,e(l)?"Active":"Archived")),A(a,k),ne()}re(["click"]);var Fr=O('<button aria-label="edit"> </button>'),Ur=O('<div tabindex="0" role="button" class="flex flex-row gap-2 items-start text-left"><p class="px-2 flex flex-row gap-2 text-sm mb-1.5 w-full text-base-content"><span class="w-8 h-8 flex mt-0.5"><!></span> <span class="flex-1"> </span> <!></p></div>'),Hr=O('<div class="h-full bg-primary/80 transition-all"></div>'),Gr=O('<span class="text-xs mx-0.5">‚Ä¢</span> ',1),qr=O('<button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üë</button> <button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üì</button>',1),Jr=O('<button aria-label="edit"> </button>'),Kr=O('<div class="w-full transition-colors bg-base-100 cursor-pointer hover:bg-primary/20" role="button" tabindex="0"><div class="flex-1 min-w-0 p-2 pt-4"><div class="flex flex-row items-start gap-2 "><div class="shrink-0 size-8"><!></div> <p class="text-sm mb-1.5 text-base-content"> </p></div> <div class="mb-2 mt-3 w-full items-center flex h-1 bg-neutral"><!></div> <div class="flex flex-row justify-between items-center ms-2"><p class="text-xs font-semibold text-base-content/50 "> <!></p> <div class="flex flex-row gap-2 items-center mt-1"><!> <button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center"><svg viewBox="0 0 24 24" class="size-5" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button> <!></div></div></div></div>'),Yr=O("<div><!></div>");function Qr(a,t){se(t,!0);const o=Q(()=>Ae.getByProject(t.project.id)),r=Q(()=>e(o).filter(f=>f.status==="active").length),l=Q(()=>e(o).filter(f=>f.status==="completed").length),i=Q(()=>e(o).filter(f=>f.status==="active"||f.status==="completed").length),c=Q(()=>e(i)>0?e(l)/e(i)*100:0);function m(f){for(const[b,u]of Object.entries(We.weeksByWeekOf))if(u.projectAssignments.some(x=>x.projectId===f))return b;return null}function v(f){const b=Ne();if(f===b)return"This week";const u=new Date(b),x=new Date(f),T=Math.round((x.getTime()-u.getTime())/(1e3*60*60*24)),S=Math.round(T/7);return S===1?"Next week":S>1?`In ${S} weeks`:S===-1?"Last week":f.slice(5)}const g=Q(()=>m(t.project.id));var k=Yr(),h=n(k);{var p=f=>{var b=Ur();b.__click=()=>t.onclick(t.project);var u=n(b),x=n(u),T=n(x);ut(T,{get level(){return t.project.severity}}),s(x);var S=d(x,2),E=n(S,!0);s(S);var B=d(S,2);{var R=w=>{var P=Fr();P.__click=I=>t.handleProjectAssign(I,t.project);var _=n(P,!0);s(P),K(I=>{$(P,1,`badge badge-lg badge-soft ${e(g)?"badge-accent":"badge-ghost text-base-content/40"} text-xs p-1.5 w-20 cursor-pointer justify-center rounded-lg items-center flex`),L(_,I)},[()=>v(e(g))]),A(w,P)};J(B,w=>{e(g)&&w(R)})}s(u),s(b),K(()=>L(E,t.project.name)),A(f,b)},y=f=>{var b=Kr();b.__click=()=>t.navigateToTasks(t.project),b.__keydown=M=>M.key==="Enter"&&t.navigateToTasks(t.project);var u=n(b),x=n(u),T=n(x),S=n(T);ut(S,{get level(){return t.project.severity}}),s(T);var E=d(T,2),B=n(E,!0);s(E),s(x);var R=d(x,2),w=n(R);{var P=M=>{var F=Hr();K(()=>Oe(F,`width: ${e(c)??""}%`)),A(M,F)};J(w,M=>{e(i)>0&&M(P)})}s(R);var _=d(R,2),I=n(_),V=n(I),q=d(V);{var U=M=>{var F=Gr(),G=d(Z(F));K(()=>L(G,` ${e(l)??""} done`)),A(M,F)};J(q,M=>{e(l)>0&&M(U)})}s(I);var z=d(I,2),D=n(z);{var j=M=>{var F=qr(),G=Z(F);G.__click=ae=>t.handleProjectMoveUp(ae,t.index);var X=d(G,2);X.__click=ae=>t.handleProjectMoveDown(ae,t.index),A(M,F)};J(D,M=>{t.allowReorder&&M(j)})}var N=d(D,2);N.__click=M=>t.handleEdit(M,t.project);var H=d(N,2);{var W=M=>{var F=Jr();F.__click=X=>t.handleProjectAssign(X,t.project);var G=n(F,!0);s(F),K(X=>{$(F,1,`badge badge-lg badge-soft ${e(g)?"badge-accent":"badge-ghost text-base-content/40"} text-xs p-1.5 w-20 cursor-pointer flex justify-center rounded-lg items-center`),L(G,X)},[()=>e(g)?v(e(g)):"Unassigned"]),A(M,F)};J(H,M=>{t.allowWeekAssignment&&M(W)})}s(z),s(_),s(u),s(b),K(()=>{L(B,t.project.name),L(V,`${e(r)??""} active `)}),A(f,b)};J(h,f=>{t.isSelected?f(y,!1):f(p)})}s(k),A(a,k),ne()}re(["click","keydown"]);var Xr=O('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 h-[650px] max-h-full bg-base-100 rounded-t-2xl "><div class="flex flex-col h-full"><div class="flex justify-between bg-base-200 items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">‚úï</button></div> <div class="flex-1 overflow-auto min-h-0 p-4 space-y-4 "><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Learn Spanish, Build Website"/></div> <div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Type</label> <div class="join w-full"><input type="radio" name="type" class="join-item btn btn-sm flex-1" aria-label="Regular"/> <input type="radio" name="type" class="join-item btn btn-sm flex-1" aria-label="Maintenance"/></div></div> <span class="text-xs text-base-content/50 mb-2 block">Severity</span> <div class="flex flex-col gap-1"><button type="button"><span class="font-bold w-4">1</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">2</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">3</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">4</span> <span class="font-normal text-left flex-1"> </span></button> <button type="button"><span class="font-bold w-4">5</span> <span class="font-normal text-left flex-1"> </span></button></div> <span class="text-xs text-base-content/50 mb-2 block">Status</span> <div class="grid grid-cols-3 gap-1"><button type="button">Active</button> <button type="button">Blocked</button> <button type="button">Someday</button> <button type="button">Cancelled</button> <button type="button">Done</button></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div></div>');function Zr(a,t){se(t,!0);const o=[];let r=Y(!1),l=Y(null),i=Y(""),c=Y("active"),m=Y("regular"),v=Y("sev3");function g(){console.log("Creating.."),C(l,null),C(i,""),C(c,"active"),C(m,"regular"),C(v,"sev3"),C(r,!0)}function k(x,T){x.stopPropagation(),C(l,T,!0),C(i,T.name,!0),C(c,T.status,!0),C(m,T.type||"regular",!0),C(v,T.severity||"sev1",!0),C(r,!0)}function h(){C(r,!1),C(l,null)}async function p(){!e(i).trim()||!t.selectedArea||(e(l)?await zt(t.selectedArea.id,e(l).index,{name:e(i).trim(),status:e(c),type:e(m),severity:e(v)}):await Sa(t.selectedArea.id,e(i).trim(),e(m),e(v)),h())}var y={openCreateProjectModal:g,openEditProjectModal:k},f=ee(),b=Z(f);{var u=x=>{var T=Xr(),S=n(T);S.__click=h,S.__keydown=be=>be.key==="Escape"&&h();var E=d(S,2),B=n(E),R=n(B),w=n(R),P=n(w,!0);s(w);var _=d(w,2);_.__click=h,s(R);var I=d(R,2),V=n(I),q=d(n(V),2);_e(q),q.__keydown=be=>be.key==="Enter"&&p(),s(V);var U=d(V,2),z=d(n(U),2),D=n(z);_e(D),D.value=D.__value="regular";var j=d(D,2);_e(j),j.value=j.__value="maintenance",s(z),s(U);var N=d(U,4),H=n(N);let W;H.__click=()=>C(v,"sev1");var M=d(n(H),2),F=n(M,!0);s(M),s(H);var G=d(H,2);let X;G.__click=()=>C(v,"sev2");var ae=d(n(G),2),le=n(ae,!0);s(ae),s(G);var te=d(G,2);let ve;te.__click=()=>C(v,"sev3");var fe=d(n(te),2),ue=n(fe,!0);s(fe),s(te);var oe=d(te,2);let Te;oe.__click=()=>C(v,"sev4");var Re=d(n(oe),2),Xe=n(Re,!0);s(Re),s(oe);var ke=d(oe,2);let Pe;ke.__click=()=>C(v,"sev5");var Le=d(n(ke),2),ze=n(Le,!0);s(Le),s(ke),s(N);var Ve=d(N,4),ge=n(Ve);let he;ge.__click=()=>C(c,"active");var Ce=d(ge,2);let Fe;Ce.__click=()=>C(c,"blocked");var ye=d(Ce,2);let Ue;ye.__click=()=>C(c,"someday");var Ze=d(ye,2);let ft;Ze.__click=()=>C(c,"cancelled");var gt=d(Ze,2);let xt;gt.__click=()=>C(c,"completed"),s(Ve),s(I);var mt=d(I,2),pt=d(n(mt),2);pt.__click=h;var He=d(pt,2);He.__click=p;var Ft=n(He,!0);s(He),s(mt),s(B),s(E),s(T),K(be=>{L(P,e(l)?"Edit Project":"New Project"),W=$(H,1,"hover:bg-purple-600 btn btn-sm justify-start gap-2 transition-all",null,W,{"bg-purple-600":e(v)==="sev1","text-white":e(v)==="sev1"}),L(F,Se[e(m)].sev1),X=$(G,1,"hover:bg-red-500 btn btn-sm justify-start gap-2 transition-all",null,X,{"bg-red-500":e(v)==="sev2","text-white":e(v)==="sev2"}),L(le,Se[e(m)].sev2),ve=$(te,1,"hover:bg-yellow-500 hover:text-black btn btn-sm justify-start gap-2 transition-all",null,ve,{"bg-yellow-500":e(v)==="sev3","text-black":e(v)==="sev3"}),L(ue,Se[e(m)].sev3),Te=$(oe,1,"hover:bg-sky-500 hover:text-black btn btn-sm justify-start gap-2 transition-all",null,Te,{"bg-sky-500":e(v)==="sev4","text-black":e(v)==="sev4"}),L(Xe,Se[e(m)].sev4),Pe=$(ke,1,"hover:bg-emerald-500 hover:text-black btn btn-sm justify-start gap-3 transition-all",null,Pe,{"bg-emerald-500":e(v)==="sev5","text-black":e(v)==="sev5"}),L(ze,Se[e(m)].sev5),he=$(ge,1,"btn btn-sm hover:bg-warning hover:text-warning-content",null,he,{"btn-warning":e(c)==="active"}),Fe=$(Ce,1,"btn btn-sm hover:btn-error",null,Fe,{"btn-error":e(c)==="blocked"}),Ue=$(ye,1,"btn btn-sm hover:btn-info",null,Ue,{"btn-info":e(c)==="someday"}),ft=$(Ze,1,"btn btn-sm hover:btn-neutral",null,ft,{"btn-info":e(c)==="cancelled"}),xt=$(gt,1,"btn btn-sm hover:btn-success",null,xt,{"btn-success":e(c)==="completed"}),He.disabled=be,L(Ft,e(l)?"Save":"Create")},[()=>!e(i).trim()]),Qe(q,()=>e(i),be=>C(i,be)),Ye(o,[],D,()=>{"regular";return e(m)},be=>C(m,be)),Ye(o,[],j,()=>{"maintenance";return e(m)},be=>C(m,be)),A(x,T)};J(b,x=>{e(r)&&x(u)})}return A(a,f),ne(y)}re(["click","keydown"]);var $r=O('<button type="button"><div class="font-medium"> </div> <div class="text-xs opacity-70"> </div></button>'),es=O('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold">Assign to Week</h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">‚úï</button></div> <div class="p-4 space-y-2"></div></div></div>');function ts(a,t){se(t,!0);let o=Y(!1),r=Y(null),l=Y(void 0);function i(y,f,b){y.stopPropagation(),C(l,f,!0),C(r,b,!0),C(o,!0)}function c(){C(o,!1),C(r,null)}async function m(y,f){!e(r)||!e(l)||(f?await Ot(e(r).id,y):await Da(e(r).id,e(l).id,y),c())}function v(y,f){const b=f??Ne();return We.getWeek(b)?.projectAssignments.some(x=>x.projectId===y)??!1}var g={openWeekPicker:i},k=ee(),h=Z(k);{var p=y=>{var f=es(),b=n(f);b.__click=c,b.__keydown=E=>E.key==="Escape"&&c();var u=d(b,2),x=n(u),T=d(n(x),2);T.__click=c,s(x);var S=d(x,2);de(S,21,Ia,ce,(E,B)=>{const R=Q(()=>v(e(r).id,e(B).weekOf));var w=$r();w.__click=()=>m(e(B).weekOf,e(R));var P=n(w),_=n(P,!0);s(P);var I=d(P,2),V=n(I,!0);s(I),s(w),K(()=>{$(w,1,`w-full p-3 text-left rounded-lg border transition-colors ${e(R)?"bg-primary/20 text-primary-content border-primary":"border-base-content/10 hover:border-primary"}`),L(_,e(B).label),L(V,e(B).weekOf)}),A(E,w)}),s(S),s(u),s(f),A(y,f)};J(h,y=>{e(o)&&e(r)&&y(p)})}return A(a,k),ne(g)}re(["click","keydown"]);var as=O("<button> </button>"),rs=O('<div class="text-center py-8 text-base-content/50 text-sm"> </div>'),ss=O('<button type="button" class="flex items-center h-16 gap-2 p-3 border-2 border-dashed border-base-content/20 rounded-lg text-base-content/50 cursor-pointer transition-all hover:border-primary hover:text-primary"><span class="text-lg">+</span> <span class="text-sm">Add Project</span></button>'),ns=O('<div class="flex flex-col h-full"><div class="flex flex-col border-b border-base-content/10 bg-base-100"><div class="flex flex-col items-start px-2"><div class="h-12 flex items-center "><button class="gap-2 text-sm text-secondary flex items-center justify-center rounded-lg hover:bg-base-100 text-base-content/70"><span>‚Üê</span> <span>Back</span></button></div> <div class="flex items-center gap-3 pe-2"><span class="text-4xl"> </span> <h2 class="text-lg"> </h2></div></div> <div class="flex gap-1 mt-4 px-3 pb-2 overflow-x-auto"></div></div> <div class="flex-1 overflow-auto min-h-0 pb-5 pt-2.5"><div class="flex flex-col gap-2.5 py-0"><!> <!></div></div></div> <!> <!>',1);function os(a,t){se(t,!0);let o=Y(void 0);const r=D=>C(o,D.id,!0);let l,i,c=Y(Ke(localStorage.getItem("projectTabView")||"active"));Be(()=>{e(c)&&localStorage.setItem("projectTabView",e(c))});let m=Q(()=>!["completed","cancelled"].includes(e(c))),v=Q(()=>xe.getByArea(t.selectedArea.id).filter(D=>D.status===e(c)));function g(D){return xe.getByArea(t.selectedArea.id).filter(j=>j.status===D).length}async function k(D,j){if(D.stopPropagation(),j===0||!t.selectedArea)return;const N=xe.getByArea(t.selectedArea.id),H=e(v)[j],W=e(v)[j-1],M=N.findIndex(X=>X.id===W.id),F=M>0?N[M-1].index:null,G=W.index;await jt(t.selectedArea.id,H.index,F,G)}async function h(D,j){if(D.stopPropagation(),!t.selectedArea||j===e(v).length-1)return;const N=xe.getByArea(t.selectedArea.id),H=e(v)[j],W=e(v)[j+1],M=N.findIndex(X=>X.id===W.id),F=W.index,G=M<N.length-1?N[M+1].index:null;console.log(F,G),await jt(t.selectedArea.id,H.index,F,G)}var p=ns(),y=Z(p),f=n(y),b=n(f),u=n(b),x=n(u);x.__click=function(...D){t.navigateBack?.apply(this,D)},s(u);var T=d(u,2),S=n(T),E=n(S,!0);s(S);var B=d(S,2),R=n(B,!0);s(B),s(T),s(b);var w=d(b,2);de(w,21,()=>Ar,ce,(D,j)=>{const N=Q(()=>e(c)===e(j).value),H=Q(()=>g(e(j).value));var W=as();W.__click=()=>C(c,e(j).value,!0);var M=n(W);s(W),K(()=>{$(W,1,`px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap ${e(N)?"bg-primary/40 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),L(M,`${e(j).label??""} (${e(H)??""})`)}),A(D,W)}),s(w),s(f);var P=d(f,2),_=n(P),I=n(_);de(I,17,()=>e(v),ce,(D,j,N)=>{{let H=Q(()=>e(o)==e(j).id);Qr(D,{get isSelected(){return e(H)},onclick:r,handleProjectAssign:(W,M)=>i.openWeekPicker(W,t.selectedArea,M),index:N,get allowReorder(){return e(m)},get navigateToTasks(){return t.navigateToTasks},get project(){return e(j)},get allowWeekAssignment(){return e(m)},get handleEdit(){return l.openEditProjectModal},handleProjectMoveUp:k,handleProjectMoveDown:h})}},D=>{var j=rs(),N=n(j);s(j),K(()=>L(N,`No ${e(c)??""} projects`)),A(D,j)});var V=d(I,2);{var q=D=>{var j=ss();j.__click=function(...N){l.openCreateProjectModal?.apply(this,N)},A(D,j)};J(V,D=>{e(c)=="active"&&D(q)})}s(_),s(P),s(y);var U=d(y,2);De(Zr(U,{get selectedArea(){return t.selectedArea}}),D=>l=D,()=>l);var z=d(U,2);De(ts(z,{}),D=>i=D,()=>i),K(()=>{L(E,t.selectedArea.icon),L(R,t.selectedArea.name)}),A(a,p),ne()}re(["click"]);var ls=O('<button type="button"> </button>'),is=O('<div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Status</label> <div class="flex flex-wrap gap-2"></div></div>'),cs=O('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">‚úï</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Read chapter 1, Write blog post"/></div> <!></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function ds(a,t){se(t,!0);let o=Y(!1),r=Y(null),l=Y(""),i=Y("active");function c(){C(r,null),C(l,""),C(i,"active"),C(o,!0)}function m(f,b){f.stopPropagation(),C(r,b,!0),C(l,b.name,!0),C(i,b.status,!0),C(o,!0)}function v(){C(o,!1),C(r,null)}async function g(){!e(l).trim()||!t.selectedProject||!t.selectedArea||(e(r)?await Vt(t.selectedProject.id,e(r).index,{name:e(l).trim(),status:e(i)}):await Lt(t.selectedProject.id,t.selectedArea.id,e(l).trim()),v())}var k={openCreateTaskModal:c,openEditTaskModal:m},h=ee(),p=Z(h);{var y=f=>{var b=cs(),u=n(b);u.__click=v,u.__keydown=D=>D.key==="Escape"&&v();var x=d(u,2),T=n(x),S=n(T),E=n(S,!0);s(S);var B=d(S,2);B.__click=v,s(T);var R=d(T,2),w=n(R),P=d(n(w),2);_e(P),P.__keydown=D=>D.key==="Enter"&&g(),s(w);var _=d(w,2);{var I=D=>{var j=is(),N=d(n(j),2);de(N,21,()=>Tr,ce,(H,W)=>{var M=ls();M.__click=()=>C(i,e(W).value,!0);var F=n(M,!0);s(M),K(()=>{$(M,1,`px-3 py-1.5 text-sm rounded-lg border transition-colors ${e(i)===e(W).value?"bg-primary text-primary-content border-primary":"border-base-content/20 hover:border-primary"}`),L(F,e(W).label)}),A(H,M)}),s(N),s(j),A(D,j)};J(_,D=>{e(r)&&D(I)})}s(R);var V=d(R,2),q=d(n(V),2);q.__click=v;var U=d(q,2);U.__click=g;var z=n(U,!0);s(U),s(V),s(x),s(b),K(D=>{L(E,e(r)?"Edit Task":"New Task"),U.disabled=D,L(z,e(r)?"Save":"Create")},[()=>!e(l).trim()]),Qe(P,()=>e(l),D=>C(l,D)),A(f,b)};J(p,f=>{e(o)&&f(y)})}return A(a,h),ne(k)}re(["click","keydown"]);var vs=Ee('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>'),us=Ee('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"></path></svg>'),bs=Ee('<svg class="w-3 h-3 text-warning" fill="currentColor" viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16" rx="1"></rect><rect x="14" y="4" width="4" height="16" rx="1"></rect></svg>'),fs=O('<button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üë</button> <button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">‚Üì</button>',1),gs=O('<div tabindex="0" role="button" class="hover:bg-primary/20 cursor-pointer w-full flex flex-row items-start border-b border-b-base-content/10 p-2"><button type="button"><!></button> <div class="text-sm text-base-content/80 flex-1 "> </div> <!></div>');function xs(a,t){se(t,!0);const o=Q(()=>t.task.status==="completed"),r=Q(()=>t.task.status==="cancelled"),l=Q(()=>t.task.status==="blocked");var i=gs();i.__click=f=>t.handleEdit(f,t.task);var c=n(i);c.__click=f=>t.toggleTaskComplete(f,t.task);var m=n(c);{var v=f=>{var b=vs();A(f,b)},g=f=>{var b=ee(),u=Z(b);{var x=S=>{var E=us();A(S,E)},T=S=>{var E=ee(),B=Z(E);{var R=w=>{var P=bs();A(w,P)};J(B,w=>{e(l)&&w(R)},!0)}A(S,E)};J(u,S=>{e(r)?S(x):S(T,!1)},!0)}A(f,b)};J(m,f=>{e(o)?f(v):f(g,!1)})}s(c);var k=d(c,2),h=n(k,!0);s(k);var p=d(k,2);{var y=f=>{var b=fs(),u=Z(b);u.__click=T=>t.handleTaskMoveUp(T,t.index);var x=d(u,2);x.__click=T=>t.handleTaskMoveDown(T,t.index),A(f,b)};J(p,f=>{t.reorderEnabled&&f(y)})}s(i),K(()=>{$(c,1,`w-6 h-6 cursor-pointer rounded-full border-2 flex me-2 items-center justify-center text-xs transition-colors flex-shrink-0 ${e(o)?"bg-success border-success text-success-content":e(l)?"border-warning":e(r)?"bg-error border-error text-error-content":"border-base-content/30 hover:border-success"}`),c.disabled=e(r),L(h,t.task.name)}),A(a,i),ne()}re(["click"]);var ms=O('<div class="flex flex-col h-full w-full"><div class="flex flex-col border-b border-base-content/10 bg-base-100"><div class="flex flex-col w-full items-start px-2"><div class="flex flex-row w-full justify-between h-12 items-center "><button class="gap-2 text-sm text-secondary flex items-center justify-center rounded-lg hover:bg-base-100 text-base-content/70"><span>‚Üê</span> <span>Back</span></button> <div class="badge badge-sm badge-secondary rounded"> </div></div> <div class="flex items-center gap-2"><svg class="size-10 inline shrink-0 text-base-content/40 align-text-bottom -mb-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <h2 class="text-base "> </h2></div> <div class="flex gap-1 overflow-x-auto my-2"><button class="text-base-content/50 bg-base-300 hover:bg-primary/50 hover:text-primary-content px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap">+ New</button> <button>Reorder</button> <button class="px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap text-base-content/50 bg-base-300 hover:text-base-content hover:bg-primary/50">Complete project</button></div></div></div> <div class="flex-1 overflow-auto bg-base-200  min-h-0 pb-5 pt-2.5"><div class="flex flex-col px-2 py-0"></div></div></div> <!>',1);function ps(a,t){se(t,!0);let o,r=Q(()=>xe.getById(t.selectedProject.id)?.status),l=Q(()=>Ae.getByProject(t.selectedProject.id)),i=Y(!1),c=()=>C(i,!e(i));async function m(U){await zt(t.selectedArea.id,t.selectedProject.index,{status:"completed"})}async function v(U,z){if(U.stopPropagation(),!t.selectedProject)return;const D=z.status==="completed"?"active":"completed";await Vt(t.selectedProject.id,z.index,{status:D})}async function g(U,z){if(U.stopPropagation(),z===0||!t.selectedProject)return;const D=e(l),j=Ae.getByProject(t.selectedProject.id),N=D[z],H=D[z-1],W=j.findIndex(G=>G.id===H.id),M=W>0?j[W-1].index:null,F=H.index;await At(t.selectedProject.id,N.index,M,F)}async function k(U,z){if(U.stopPropagation(),!t.selectedProject)return;const D=e(l);if(z===D.length-1)return;const j=Ae.getByProject(t.selectedProject.id),N=D[z],H=D[z+1],W=j.findIndex(G=>G.id===H.id),M=H.index,F=W<j.length-1?j[W+1].index:null;await At(t.selectedProject.id,N.index,M,F)}var h=ms(),p=Z(h),y=n(p),f=n(y),b=n(f),u=n(b);u.__click=function(...U){t.navigateBack?.apply(this,U)};var x=d(u,2),T=n(x,!0);s(x),s(b);var S=d(b,2),E=d(n(S),2),B=n(E,!0);s(E),s(S);var R=d(S,2),w=n(R);w.__click=function(...U){o.openCreateTaskModal?.apply(this,U)};var P=d(w,2);P.__click=c;var _=d(P,2);_.__click=m,s(R),s(f),s(y);var I=d(y,2),V=n(I);de(V,21,()=>e(l),ce,(U,z,D)=>{xs(U,{get handleEdit(){return o.openEditTaskModal},handleTaskMoveUp:g,handleTaskMoveDown:k,index:D,get task(){return e(z)},toggleTaskComplete:v,get reorderEnabled(){return e(i)}})}),s(V),s(I),s(p);var q=d(p,2);De(ds(q,{get selectedArea(){return t.selectedArea},get selectedProject(){return t.selectedProject}}),U=>o=U,()=>o),K(()=>{L(T,e(r)),L(B,t.selectedProject.name),$(P,1,`px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap ${e(i)?"bg-primary/40 text-primary-content":"text-base-content/50 bg-base-300 hover:text-base-content hover:bg-primary/50"}`)}),A(a,h),ne()}re(["click"]);var _s=O('<div class="flex items-center justify-center h-full text-base-content/50"><p>Review - Coming soon</p></div>'),ks=O('<div class="h-screen flex flex-col bg-base-300"><div class="pb-22 h-full"><!></div> <!></div>');function Ms(a,t){se(t,!0);const o=()=>c("areas"),r=()=>c("projects");let l=Y(void 0),i=Y(void 0);c("areas");function c(b){ma("",{activeTab:b})}function m(b){C(l,b,!0),c("projects")}function v(b){C(i,b,!0),C(l,je.getById(b.areaId),!0),c("tasks")}var g=ks(),k=n(g),h=n(k);{var p=b=>{Vr(b,{onSelectArea:m})},y=b=>{var u=ee(),x=Z(u);{var T=E=>{os(E,{navigateBack:o,navigateToTasks:v,get selectedArea(){return e(l)}})},S=E=>{var B=ee(),R=Z(B);{var w=_=>{ps(_,{navigateBack:r,get selectedArea(){return e(l)},get selectedProject(){return e(i)}})},P=_=>{var I=ee(),V=Z(I);{var q=z=>{vr(z,{navigateToTasks:v})},U=z=>{var D=ee(),j=Z(D);{var N=W=>{jr(W,{})},H=W=>{var M=ee(),F=Z(M);{var G=X=>{var ae=_s();A(X,ae)};J(F,X=>{we.state.activeTab==="review"&&X(G)},!0)}A(W,M)};J(j,W=>{we.state.activeTab==="today"?W(N):W(H,!1)},!0)}A(z,D)};J(V,z=>{we.state.activeTab==="week"?z(q):z(U,!1)},!0)}A(_,I)};J(R,_=>{we.state.activeTab=="tasks"?_(w):_(P,!1)},!0)}A(E,B)};J(x,E=>{we.state.activeTab==="projects"?E(T):E(S,!1)},!0)}A(b,u)};J(h,b=>{we.state.activeTab==="areas"?b(p):b(y,!1)})}s(k);var f=d(k,2);Ga(f,{get activeTab(){return we.state.activeTab},onTabChange:c}),s(g),A(a,g),ne()}export{Ms as component};
