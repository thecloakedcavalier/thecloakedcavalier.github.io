import{O as is,q as yi,aW as wi,aX as Ei,aY as Si,aZ as bi,a_ as Ai,a1 as se,x as qe,g as oe,y as ie}from"./CrC6LAkw.js";import{_ as xn}from"./D-eac2Jt.js";const Ii=Symbol("is custom element"),xi=Symbol("is html");function fy(t){if(is){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;Kn(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var s=t.checked;Kn(t,"checked",null),t.checked=s}}};t.__on_r=n,yi(n),wi()}}function hy(t,e){var n=as(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Kn(t,e,n,r){var s=as(t);is&&(s[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||s[e]!==(s[e]=n)&&(e==="loading"&&(t[Ei]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Ti(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function as(t){return t.__attributes??={[Ii]:t.nodeName.includes("-"),[xi]:t.namespaceURI===Si}}var qn=new Map;function Ti(t){var e=t.getAttribute("is")||t.nodeName,n=qn.get(e);if(n)return n;qn.set(e,n=[]);for(var r,s=t,o=Element.prototype;o!==s;){r=Ai(s);for(var i in r)r[i].set&&n.push(i);s=bi(s)}return n}var lt;(function(t){t.HTTP="http",t.HTTPS="https"})(lt||(lt={}));var Nt;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(Nt||(Nt={}));const mn="__smithy_context",Xe=t=>t[mn]||(t[mn]={}),ce=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},cs="preferred",vi=["disabled","preferred","required"];function Ci(t){return vi.includes(t)}const Ri=t=>{const{accountIdEndpointMode:e}=t,n=ce(e??cs);return Object.assign(t,{accountIdEndpointMode:async()=>{const r=await n();if(!Ci(r))throw new Error(`Invalid value for accountIdEndpointMode: ${r}. Valid values are: "required", "preferred", "disabled".`);return r}})},ki=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,n){t.httpHandler?.updateHttpClientConfig(e,n)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),Oi=t=>({httpHandler:t.httpHandler()});class G{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const n=new G({...e,headers:{...e.headers}});return n.query&&(n.query=Pi(n.query)),n}static isInstance(e){if(!e)return!1;const n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){return G.clone(this)}}function Pi(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{})}class Ge{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const n=e;return typeof n.statusCode=="number"&&typeof n.headers=="object"}}function _i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qt,Gn;function Di(){if(Gn)return Qt;Gn=1;function t(e){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:e}),this.done=!1}return t.prototype.next=function(){if(this.done)return{done:!0};var e=this._next();return e.done&&(this.done=!0),e},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=function(){return this}),t.of=function(){var e=arguments,n=e.length,r=0;return new t(function(){return r>=n?{done:!0}:{done:!1,value:e[r++]}})},t.empty=function(){var e=new t(null);return e.done=!0,e},t.is=function(e){return e instanceof t?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},Qt=t,Qt}var Yt,Jn;function us(){if(Jn)return Yt;Jn=1;var t=typeof ArrayBuffer<"u",e=typeof Symbol<"u";function n(r,s){var o,i,a,c,u;if(!r)throw new Error("obliterator/forEach: invalid iterable.");if(typeof s!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(r)||t&&ArrayBuffer.isView(r)||typeof r=="string"||r.toString()==="[object Arguments]"){for(a=0,c=r.length;a<c;a++)s(r[a],a);return}if(typeof r.forEach=="function"){r.forEach(s);return}if(e&&Symbol.iterator in r&&typeof r.next!="function"&&(r=r[Symbol.iterator]()),typeof r.next=="function"){for(o=r,a=0;u=o.next(),u.done!==!0;)s(u.value,a),a++;return}for(i in r)r.hasOwnProperty(i)&&s(r[i],i)}return n.forEachWithNullKeys=function(r,s){var o,i,a,c,u;if(!r)throw new Error("obliterator/forEachWithNullKeys: invalid iterable.");if(typeof s!="function")throw new Error("obliterator/forEachWithNullKeys: expecting a callback.");if(Array.isArray(r)||t&&ArrayBuffer.isView(r)||typeof r=="string"||r.toString()==="[object Arguments]"){for(a=0,c=r.length;a<c;a++)s(r[a],null);return}if(r instanceof Set){r.forEach(function(l){s(l,null)});return}if(typeof r.forEach=="function"){r.forEach(s);return}if(e&&Symbol.iterator in r&&typeof r.next!="function"&&(r=r[Symbol.iterator]()),typeof r.next=="function"){for(o=r,a=0;u=o.next(),u.done!==!0;)s(u.value,null),a++;return}for(i in r)r.hasOwnProperty(i)&&s(r[i],i)},Yt=n,Yt}var Xt={},Qn;function ds(){return Qn||(Qn=1,(function(t){var e=Math.pow(2,8)-1,n=Math.pow(2,16)-1,r=Math.pow(2,32)-1,s=Math.pow(2,7)-1,o=Math.pow(2,15)-1,i=Math.pow(2,31)-1;t.getPointerArray=function(c){var u=c-1;return u<=e?Uint8Array:u<=n?Uint16Array:u<=r?Uint32Array:Float64Array},t.getSignedPointerArray=function(c){var u=c-1;return u<=s?Int8Array:u<=o?Int16Array:u<=i?Int32Array:Float64Array},t.getNumberType=function(c){return c===(c|0)?Math.sign(c)===-1?c<=127&&c>=-128?Int8Array:c<=32767&&c>=-32768?Int16Array:Int32Array:c<=255?Uint8Array:c<=65535?Uint16Array:Uint32Array:Float64Array};var a={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};t.getMinimalRepresentation=function(c,u){var l=null,d=0,f,p,m,E,g;for(E=0,g=c.length;E<g;E++)m=u?u(c[E]):c[E],p=t.getNumberType(m),f=a[p.name],f>d&&(d=f,l=p);return l},t.isTypedArray=function(c){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(c)},t.concat=function(){var c=0,u,l,d;for(u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var f=new arguments[0].constructor(c);for(u=0,l=0;u<d;u++)f.set(arguments[u],l),l+=arguments[u].length;return f},t.indices=function(c){for(var u=t.getPointerArray(c),l=new u(c),d=0;d<c;d++)l[d]=d;return l}})(Xt)),Xt}var He={},Yn;function Ni(){if(Yn)return He;Yn=1;var t=us(),e=ds();function n(i){return Array.isArray(i)||e.isTypedArray(i)}function r(i){if(typeof i.length=="number")return i.length;if(typeof i.size=="number")return i.size}function s(i){var a=r(i),c=typeof a=="number"?new Array(a):[],u=0;return t(i,function(l){c[u++]=l}),c}function o(i){var a=r(i),c=typeof a=="number"?e.getPointerArray(a):Array,u=typeof a=="number"?new Array(a):[],l=typeof a=="number"?new c(a):[],d=0;return t(i,function(f){u[d]=f,l[d]=d++}),[u,l]}return He.isArrayLike=n,He.guessLength=r,He.toArray=s,He.toArrayWithIndices=o,He}var Zt,Xn;function Mi(){if(Xn)return Zt;Xn=1;var t=Di(),e=us(),n=ds(),r=Ni();function s(o,i,a){if(arguments.length<2&&(a=o,o=null,i=null),this.capacity=a,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");var c=n.getPointerArray(a);this.forward=new c(a),this.backward=new c(a),this.K=typeof o=="function"?new o(a):new Array(a),this.V=typeof i=="function"?new i(a):new Array(a),this.size=0,this.head=0,this.tail=0,this.items={}}return s.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}},s.prototype.splayOnTop=function(o){var i=this.head;if(this.head===o)return this;var a=this.backward[o],c=this.forward[o];return this.tail===o?this.tail=a:this.backward[c]=a,this.forward[a]=c,this.backward[i]=o,this.head=o,this.forward[o]=i,this},s.prototype.set=function(o,i){var a=this.items[o];if(typeof a<"u"){this.splayOnTop(a),this.V[a]=i;return}this.size<this.capacity?a=this.size++:(a=this.tail,this.tail=this.backward[a],delete this.items[this.K[a]]),this.items[o]=a,this.K[a]=o,this.V[a]=i,this.forward[a]=this.head,this.backward[this.head]=a,this.head=a},s.prototype.setpop=function(o,i){var a=null,c=null,u=this.items[o];return typeof u<"u"?(this.splayOnTop(u),a=this.V[u],this.V[u]=i,{evicted:!1,key:o,value:a}):(this.size<this.capacity?u=this.size++:(u=this.tail,this.tail=this.backward[u],a=this.V[u],c=this.K[u],delete this.items[this.K[u]]),this.items[o]=u,this.K[u]=o,this.V[u]=i,this.forward[u]=this.head,this.backward[this.head]=u,this.head=u,c?{evicted:!0,key:c,value:a}:null)},s.prototype.has=function(o){return o in this.items},s.prototype.get=function(o){var i=this.items[o];if(!(typeof i>"u"))return this.splayOnTop(i),this.V[i]},s.prototype.peek=function(o){var i=this.items[o];if(!(typeof i>"u"))return this.V[i]},s.prototype.forEach=function(o,i){i=arguments.length>1?i:this;for(var a=0,c=this.size,u=this.head,l=this.K,d=this.V,f=this.forward;a<c;)o.call(i,d[u],l[u],this),u=f[u],a++},s.prototype.keys=function(){var o=0,i=this.size,a=this.head,c=this.K,u=this.forward;return new t(function(){if(o>=i)return{done:!0};var l=c[a];return o++,o<i&&(a=u[a]),{done:!1,value:l}})},s.prototype.values=function(){var o=0,i=this.size,a=this.head,c=this.V,u=this.forward;return new t(function(){if(o>=i)return{done:!0};var l=c[a];return o++,o<i&&(a=u[a]),{done:!1,value:l}})},s.prototype.entries=function(){var o=0,i=this.size,a=this.head,c=this.K,u=this.V,l=this.forward;return new t(function(){if(o>=i)return{done:!0};var d=c[a],f=u[a];return o++,o<i&&(a=l[a]),{done:!1,value:[d,f]}})},typeof Symbol<"u"&&(s.prototype[Symbol.iterator]=s.prototype.entries),s.prototype.inspect=function(){for(var o=new Map,i=this.entries(),a;a=i.next(),!a.done;)o.set(a.value[0],a.value[1]);return Object.defineProperty(o,"constructor",{value:s,enumerable:!1}),o},typeof Symbol<"u"&&(s.prototype[Symbol.for("nodejs.util.inspect.custom")]=s.prototype.inspect),s.from=function(o,i,a,c){if(arguments.length<2){if(c=r.guessLength(o),typeof c!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(c=i,i=null,a=null);var u=new s(i,a,c);return e(o,function(l,d){u.set(d,l)}),u},Zt=s,Zt}var $i=Mi();const Bi=_i($i);let Ui=class{cache;constructor(e){this.cache=new Bi(e)}getEndpoint(e){const n=this.get(e);if(!n||n.length===0)return;const r=n.map(s=>s.Address);return r[Math.floor(Math.random()*r.length)]}get(e){if(!this.has(e))return;const n=this.cache.get(e);if(!n)return;const r=Date.now(),s=n.filter(o=>r<o.Expires);if(s.length===0){this.delete(e);return}return s}set(e,n){const r=Date.now();this.cache.set(e,n.map(({Address:s,CachePeriodInMinutes:o})=>({Address:s,Expires:r+o*60*1e3})))}delete(e){this.cache.set(e,[])}has(e){if(!this.cache.has(e))return!1;const n=this.cache.peek(e);return n?n.length>0:!1}clear(){this.cache.clear()}};const Li=(t,{endpointDiscoveryCommandCtor:e})=>{const{endpointCacheSize:n,endpointDiscoveryEnabled:r,endpointDiscoveryEnabledProvider:s}=t;return Object.assign(t,{endpointDiscoveryCommandCtor:e,endpointCache:new Ui(n??1e3),endpointDiscoveryEnabled:r!==void 0?()=>Promise.resolve(r):s,isClientEndpointDiscoveryEnabled:r!==void 0})};function my(t){return t}const ji=t=>e=>async n=>{if(!G.isInstance(n.request))return e(n);const{request:r}=n,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!r.headers[":authority"])delete r.headers.host,r.headers[":authority"]=r.hostname+(r.port?":"+r.port:"");else if(!r.headers.host){let o=r.hostname;r.port!=null&&(o+=`:${r.port}`),r.headers.host=o}return e(n)},Fi={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},zi=t=>({applyToStack:e=>{e.add(ji(t),Fi)}}),Hi=()=>(t,e)=>async n=>{try{const r=await t(n),{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,l=c??e.inputFilterSensitiveLog,d=u??e.outputFilterSensitiveLog,{$metadata:f,...p}=r.output;return i?.info?.({clientName:s,commandName:o,input:l(n.input),output:d(p),metadata:f}),r}catch(r){const{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c}=a,u=c??e.inputFilterSensitiveLog;throw i?.error?.({clientName:s,commandName:o,input:u(n.input),error:r,metadata:r.$metadata}),r}},Wi={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Vi=t=>({applyToStack:e=>{e.add(Hi(),Wi)}}),Ki={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},qi=()=>t=>async e=>t(e),Gi=t=>({applyToStack:e=>{e.add(qi(),Ki)}}),Ji=(t,e)=>{if(!e||e.length===0)return t;const n=[];for(const r of e)for(const s of t)s.schemeId.split("#")[1]===r&&n.push(s);for(const r of t)n.find(({schemeId:s})=>s===r.schemeId)||n.push(r);return n};function Qi(t){const e=new Map;for(const n of t)e.set(n.schemeId,n);return e}const Yi=(t,e)=>(n,r)=>async s=>{const o=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,r,s.input)),i=t.authSchemePreference?await t.authSchemePreference():[],a=Ji(o,i),c=Qi(t.httpAuthSchemes),u=Xe(r),l=[];for(const d of a){const f=c.get(d.schemeId);if(!f){l.push(`HttpAuthScheme \`${d.schemeId}\` was not enabled for this service.`);continue}const p=f.identityProvider(await e.identityProviderConfigProvider(t));if(!p){l.push(`HttpAuthScheme \`${d.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:m={},signingProperties:E={}}=d.propertiesExtractor?.(t,r)||{};d.identityProperties=Object.assign(d.identityProperties||{},m),d.signingProperties=Object.assign(d.signingProperties||{},E),u.selectedHttpAuthScheme={httpAuthOption:d,identity:await p(d.identityProperties),signer:f.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(l.join(`
`));return n(s)},Xi={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Zi=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(Yi(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n}),Xi)}}),ea={name:"serializerMiddleware"},ta=t=>e=>{throw e},na=(t,e)=>{},ra=t=>(e,n)=>async r=>{if(!G.isInstance(r.request))return e(r);const o=Xe(n).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:i={}},identity:a,signer:c}=o,u=await e({...r,request:await c.sign(r.request,a,i)}).catch((c.errorHandler||ta)(i));return(c.successHandler||na)(u.response,i),u},sa={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},oa=t=>({applyToStack:e=>{e.addRelativeTo(ra(),sa)}}),ct=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},ls="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zn=Object.entries(ls).reduce((t,[e,n])=>(t[n]=Number(e),t),{}),ia=ls.split(""),Ke=6,ut=8,aa=63,bt=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const n=new ArrayBuffer(e),r=new DataView(n);for(let s=0;s<t.length;s+=4){let o=0,i=0;for(let u=s,l=s+3;u<=l;u++)if(t[u]!=="="){if(!(t[u]in Zn))throw new TypeError(`Invalid character ${t[u]} in base64 string.`);o|=Zn[t[u]]<<(l-u)*Ke,i+=Ke}else o>>=Ke;const a=s/4*3;o>>=i%ut;const c=Math.floor(i/ut);for(let u=0;u<c;u++){const l=(c-u-1)*ut;r.setUint8(a+u,(o&255<<l)>>l)}}return new Uint8Array(n)},Je=t=>new TextEncoder().encode(t),ft=t=>typeof t=="string"?Je(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),Tn=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)};function ht(t){let e;typeof t=="string"?e=Je(t):e=t;const n=typeof e=="object"&&typeof e.length=="number",r=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!n&&!r)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let o=0;o<e.length;o+=3){let i=0,a=0;for(let u=o,l=Math.min(o+3,e.length);u<l;u++)i|=e[u]<<(l-u-1)*ut,a+=ut;const c=Math.ceil(a/Ke);i<<=c*Ke-a;for(let u=1;u<=c;u++){const l=(c-u)*Ke;s+=ia[(i&aa<<l)>>l]}s+="==".slice(0,4-c)}return s}class _e extends Uint8Array{static fromString(e,n="utf-8"){if(typeof e=="string")return n==="base64"?_e.mutate(bt(e)):_e.mutate(Je(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,_e.prototype),e}transformToString(e="utf-8"){return e==="base64"?ht(this):Tn(this)}}const De=t=>encodeURIComponent(t).replace(/[!'()*]/g,ca),ca=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function ua(t){const e=[];for(let n of Object.keys(t).sort()){const r=t[n];if(n=De(n),Array.isArray(r))for(let s=0,o=r.length;s<o;s++)e.push(`${n}=${De(r[s])}`);else{let s=n;(r||typeof r=="string")&&(s+=`=${De(r)}`),e.push(s)}}return e.join("&")}function er(t,e){return new Request(t,e)}function da(t=0){return new Promise((e,n)=>{t&&setTimeout(()=>{const r=new Error(`Request did not complete within ${t} ms`);r.name="TimeoutError",n(r)},t)})}const en={supported:void 0};class vn{config;configProvider;static create(e){return typeof e?.handle=="function"?e:new vn(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(n=>n||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),en.supported===void 0&&(en.supported=typeof Request<"u"&&"keepalive"in er("https://[::1]"))}destroy(){}async handle(e,{abortSignal:n,requestTimeout:r}={}){this.config||(this.config=await this.configProvider);const s=r??this.config.requestTimeout,o=this.config.keepAlive===!0,i=this.config.credentials;if(n?.aborted){const A=new Error("Request aborted");return A.name="AbortError",Promise.reject(A)}let a=e.path;const c=ua(e.query||{});c&&(a+=`?${c}`),e.fragment&&(a+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){const A=e.username??"",U=e.password??"";u=`${A}:${U}@`}const{port:l,method:d}=e,f=`${e.protocol}//${u}${e.hostname}${l?`:${l}`:""}${a}`,p=d==="GET"||d==="HEAD"?void 0:e.body,m={body:p,headers:new Headers(e.headers),method:d,credentials:i};this.config?.cache&&(m.cache=this.config.cache),p&&(m.duplex="half"),typeof AbortController<"u"&&(m.signal=n),en.supported&&(m.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(m,this.config.requestInit(e));let E=()=>{};const g=er(f,m),I=[fetch(g).then(A=>{const U=A.headers,N={};for(const we of U.entries())N[we[0]]=we[1];return A.body!=null?{response:new Ge({headers:N,reason:A.statusText,statusCode:A.status,body:A.body})}:A.blob().then(we=>({response:new Ge({headers:N,reason:A.statusText,statusCode:A.status,body:we})}))}),da(s)];return n&&I.push(new Promise((A,U)=>{const N=()=>{const Q=new Error("Request aborted");Q.name="AbortError",U(Q)};if(typeof n.addEventListener=="function"){const Q=n;Q.addEventListener("abort",N,{once:!0}),E=()=>Q.removeEventListener("abort",N)}else n.onabort=N})),Promise.race(I).finally(E)}updateHttpClientConfig(e,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[e]=n,r))}httpHandlerConfigs(){return this.config??{}}}const la=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):fa(t):ha(t);async function fa(t){const e=await pa(t),n=bt(e);return new Uint8Array(n)}async function ha(t){const e=[],n=t.getReader();let r=!1,s=0;for(;!r;){const{done:a,value:c}=await n.read();c&&(e.push(c),s+=c.length),r=a}const o=new Uint8Array(s);let i=0;for(const a of e)o.set(a,i),i+=a.length;return o}function pa(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{if(r.readyState!==2)return n(new Error("Reader aborted too early"));const s=r.result??"",o=s.indexOf(","),i=o>-1?o+1:s.length;e(s.substring(i))},r.onabort=()=>n(new Error("Read aborted")),r.onerror=()=>n(r.error),r.readAsDataURL(t)})}const fs={},gn={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),fs[t]=e,gn[e]=t}function ma(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2){const r=t.slice(n,n+2).toLowerCase();if(r in gn)e[n/2]=gn[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return e}function Ne(t){let e="";for(let n=0;n<t.byteLength;n++)e+=fs[t[n]];return e}const yn=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return _e.mutate(t);if(!t)return _e.mutate(new Uint8Array);const n=e.streamCollector(t);return _e.mutate(await n)},kt=t=>typeof t=="function"?t():t,hs=(t,e,n,r,s)=>({name:e,namespace:t,traits:n,input:r,output:s}),ga=t=>(e,n)=>async r=>{const{response:s}=await e(r),{operationSchema:o}=Xe(n),[,i,a,c,u,l]=o??[];try{const d=await t.protocol.deserializeResponse(hs(i,a,c,u,l),{...t,...n},s);return{response:s,output:d}}catch(d){if(Object.defineProperty(d,"$response",{value:s,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in d)){const f="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{d.message+=`
  `+f}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(f):n.logger?.warn?.(f)}typeof d.$responseBodyText<"u"&&d.$response&&(d.$response.body=d.$responseBodyText);try{if(Ge.isInstance(s)){const{headers:p={}}=s,m=Object.entries(p);d.$metadata={httpStatusCode:s.statusCode,requestId:tn(/^x-[\w-]+-request-?id$/,m),extendedRequestId:tn(/^x-[\w-]+-id-2$/,m),cfId:tn(/^x-[\w-]+-cf-id$/,m)}}}catch{}}throw d}},tn=(t,e)=>(e.find(([n])=>n.match(t))||[void 0,void 0])[1],ya=t=>(e,n)=>async r=>{const{operationSchema:s}=Xe(n),[,o,i,a,c,u]=s??[],l=n.endpointV2?.url&&t.urlParser?async()=>t.urlParser(n.endpointV2.url):t.endpoint,d=await t.protocol.serializeRequest(hs(o,i,a,c,u),r.input,{...t,...n,endpoint:l});return e({...r,request:d})},wa={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Ea={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Sa(t){return{applyToStack:e=>{e.add(ya(t),Ea),e.add(ga(t),wa),t.protocol.setSerdeContext(t)}}}function it(t){if(typeof t=="object")return t;t=t|0;const e={};let n=0;for(const r of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>n++&1)===1&&(e[r]=1);return e}class D{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=D.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,n){this.ref=e,this.memberName=n;const r=[];let s=e,o=e;for(this._isMemberSchema=!1;nn(s);)r.push(s[1]),s=s[0],o=kt(s),this._isMemberSchema=!0;if(r.length>0){this.memberTraits={};for(let i=r.length-1;i>=0;--i){const a=r[i];Object.assign(this.memberTraits,it(a))}}else this.memberTraits=0;if(o instanceof D){const i=this.memberTraits;Object.assign(this,o),this.memberTraits=Object.assign({},i,o.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=n??o.memberName;return}if(this.schema=kt(o),ba(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(o),this.traits=0),this._isMemberSchema&&!n)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){const n=this.prototype.isPrototypeOf(e);return!n&&typeof e=="object"&&e!==null?e.symbol===this.symbol:n}static of(e){const n=kt(e);if(n instanceof D)return n;if(nn(n)){const[r,s]=n;if(r instanceof D)return Object.assign(r.getMergedTraits(),it(s)),r;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new D(n)}getSchema(){const e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){const{name:n}=this;return!e&&n&&n.includes("#")?n.split("#")[1]:n||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){const e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){const e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){const e=this.getSchema();return e[0]===3||e[0]===-3}isBlobSchema(){const e=this.getSchema();return e===21||e===42}isTimestampSchema(){const e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){const{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){const e=o=>(o&4)===4||!!o?.idempotencyToken,{normalizedTraits:n,traits:r,memberTraits:s}=this;return e(n)||e(r)||e(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return it(this.memberTraits)}getOwnTraits(){return it(this.traits)}getKeySchema(){const[e,n]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!n)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);const r=this.getSchema(),s=e?15:r[4]??0;return st([s,0],"key")}getValueSchema(){const e=this.getSchema(),[n,r,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],o=typeof e=="number"?63&e:e&&typeof e=="object"&&(r||s)?e[3+e[0]]:n?15:void 0;if(o!=null)return st([o,0],r?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){const n=this.getSchema();if(this.isStructSchema()&&n[4].includes(e)){const r=n[4].indexOf(e),s=n[5][r];return st(nn(s)?s:[s,0],e)}if(this.isDocumentSchema())return st([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){const e={};try{for(const[n,r]of this.structIterator())e[n]=r}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(const[e,n]of this.structIterator())if(n.isStreaming()&&n.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");const e=this.getSchema();for(let n=0;n<e[4].length;++n)yield[e[4][n],st([e[5][n],0],e[4][n])]}}function st(t,e){if(t instanceof D)return Object.assign(t,{memberName:e,_isMemberSchema:!0});const n=D;return new n(t,e)}const nn=t=>Array.isArray(t)&&t.length===2,ba=t=>Array.isArray(t)&&t.length>=5;class b{namespace;schemas;exceptions;static registries=new Map;constructor(e,n=new Map,r=new Map){this.namespace=e,this.schemas=n,this.exceptions=r}static for(e){return b.registries.has(e)||b.registries.set(e,new b(e)),b.registries.get(e)}register(e,n){const r=this.normalizeShapeId(e);b.for(r.split("#")[0]).schemas.set(r,n)}getSchema(e){const n=this.normalizeShapeId(e);if(!this.schemas.has(n))throw new Error(`@smithy/core/schema - schema not found for ${n}`);return this.schemas.get(n)}registerError(e,n){const r=e,s=b.for(r[1]);s.schemas.set(r[1]+"#"+r[2],r),s.exceptions.set(r,n)}getErrorCtor(e){const n=e;return b.for(n[1]).exceptions.get(n)}getBaseException(){for(const e of this.exceptions.keys())if(Array.isArray(e)){const[,n,r]=e,s=n+"#"+r;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}}const wn=t=>{if(t!=null){if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&Oa.warn(ka(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},Aa=Math.ceil(2**127*(2-2**-23)),tr=t=>{const e=wn(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>Aa)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},Ia=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},nr=t=>ps(t,16),rr=t=>ps(t,8),ps=(t,e)=>{const n=Ia(t);if(n!==void 0&&xa(n,e)!==n)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return n},xa=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},Ta=t=>wn(typeof t=="string"?Wt(t):t),va=t=>tr(typeof t=="string"?Wt(t):t),Ca=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Wt=t=>{const e=t.match(Ca);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},Mt=t=>nr(typeof t=="string"?Wt(t):t),Ra=t=>rr(typeof t=="string"?Wt(t):t),ka=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),Oa={warn:console.warn},Pa=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Cn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function _a(t){const e=t.getUTCFullYear(),n=t.getUTCMonth(),r=t.getUTCDay(),s=t.getUTCDate(),o=t.getUTCHours(),i=t.getUTCMinutes(),a=t.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=o<10?`0${o}`:`${o}`,l=i<10?`0${i}`:`${i}`,d=a<10?`0${a}`:`${a}`;return`${Pa[r]}, ${c} ${Cn[n]} ${e} ${u}:${l}:${d} GMT`}const Da=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Na=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const e=Da.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");const[n,r,s,o,i,a,c,u,l]=e,d=Mt(pt(r)),f=be(s,"month",1,12),p=be(o,"day",1,31),m=Ot(d,f,p,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u});return l.toUpperCase()!="Z"&&m.setTime(m.getTime()-qa(l)),m},Ma=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),$a=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Ba=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Ua=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=Ma.exec(t);if(e){const[n,r,s,o,i,a,c,u]=e;return Ot(Mt(pt(o)),rn(s),be(r,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u})}if(e=$a.exec(t),e){const[n,r,s,o,i,a,c,u]=e;return za(Ot(ja(o),rn(s),be(r,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(e=Ba.exec(t),e){const[n,r,s,o,i,a,c,u]=e;return Ot(Mt(pt(u)),rn(r),be(s.trimLeft(),"day",1,31),{hours:o,minutes:i,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},La=t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=Ta(t);else if(typeof t=="object"&&t.tag===1)e=t.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},Ot=(t,e,n,r)=>{const s=e-1;return Wa(t,s,n),new Date(Date.UTC(t,s,n,be(r.hours,"hour",0,23),be(r.minutes,"minute",0,59),be(r.seconds,"seconds",0,60),Ka(r.fractionalMilliseconds)))},ja=t=>{const e=new Date().getUTCFullYear(),n=Math.floor(e/100)*100+Mt(pt(t));return n<e?n+100:n},Fa=50*365*24*60*60*1e3,za=t=>t.getTime()-new Date().getTime()>Fa?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,rn=t=>{const e=Cn.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},Ha=[31,28,31,30,31,30,31,31,30,31,30,31],Wa=(t,e,n)=>{let r=Ha[e];if(e===1&&Va(t)&&(r=29),n>r)throw new TypeError(`Invalid day for ${Cn[e]} in ${t}: ${n}`)},Va=t=>t%4===0&&(t%100!==0||t%400===0),be=(t,e,n,r)=>{const s=Ra(pt(t));if(s<n||s>r)throw new TypeError(`${e} must be between ${n} and ${r}, inclusive`);return s},Ka=t=>t==null?0:va("0."+t)*1e3,qa=t=>{const e=t[0];let n=1;if(e=="+")n=1;else if(e=="-")n=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);const r=Number(t.substring(1,3)),s=Number(t.substring(4,6));return n*(r*60+s)*60*1e3},pt=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)},sr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),H=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),ms=()=>{if(sr)return sr();const t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,H[t[0]]+H[t[1]]+H[t[2]]+H[t[3]]+"-"+H[t[4]]+H[t[5]]+"-"+H[t[6]]+H[t[7]]+"-"+H[t[8]]+H[t[9]]+"-"+H[t[10]]+H[t[11]]+H[t[12]]+H[t[13]]+H[t[14]]+H[t[15]]},Se=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};Se.from=t=>t&&typeof t=="object"&&(t instanceof Se||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?Se(String(t)):Se(JSON.stringify(t));Se.fromObject=Se.from;const or=/^-?\d*(\.\d+)?$/;class ae{string;type;constructor(e,n){if(this.string=e,this.type=n,!or.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;const n=e;return ae.prototype.isPrototypeOf(e)||n.type==="bigDecimal"&&or.test(n.string)}}class Ga{serdeContext;setSerdeContext(e){this.serdeContext=e}}class Ja extends Ga{options;constructor(e){super(),this.options=e}getRequestType(){return G}getResponseType(){return Ge}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,n){if("url"in n){e.protocol=n.url.protocol,e.hostname=n.url.hostname,e.port=n.url.port?Number(n.url.port):void 0,e.path=n.url.pathname,e.fragment=n.url.hash||void 0,e.username=n.url.username||void 0,e.password=n.url.password||void 0,e.query||(e.query={});for(const[r,s]of n.url.searchParams.entries())e.query[r]=s;return e}else return e.protocol=n.protocol,e.hostname=n.hostname,e.port=n.port?Number(n.port):void 0,e.path=n.path,e.query={...n.query},e}setHostPrefix(e,n,r){const s=D.of(n.input),o=it(n.traits??{});if(o.endpoint){let i=o.endpoint?.[0];if(typeof i=="string"){const a=[...s.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(const[c]of a){const u=r[c];if(typeof u!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);i=i.replace(`{${c}}`,u)}e.hostname=i+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:e,requestSchema:n,initialRequest:r}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:n,initialRequest:r})}async deserializeEventStream({response:e,responseSchema:n,initialResponseContainer:r}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:n,initialResponseContainer:r})}async loadEventStreamCapability(){const{EventStreamSerde:e}=await xn(async()=>{const{EventStreamSerde:n}=await import("./BuuSxMog.js");return{EventStreamSerde:n}},[],import.meta.url);return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,n,r,s,o){return[]}getEventStreamMarshaller(){const e=this.serdeContext;if(!e.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return e.eventStreamMarshaller}}class Qa extends Ja{async serializeRequest(e,n,r){const s=this.serializer,o={},i={},a=await r.endpoint(),c=D.of(e?.input),u=c.getSchema();let l;const d=new G({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:o,headers:i,body:void 0});a&&(this.updateServiceEndpoint(d,a),this.setHostPrefix(d,e,n));const f={...n};if(n){const p=c.getEventStreamMember();if(p){if(f[p]){const m={};for(const[E,g]of c.structIterator())E!==p&&f[E]&&(s.write(g,f[E]),m[E]=s.flush());l=await this.serializeEventStream({eventStream:f[p],requestSchema:c,initialRequest:m})}}else s.write(u,f),l=s.flush()}return d.headers=i,d.query=o,d.body=l,d.method="POST",d}async deserializeResponse(e,n,r){const s=this.deserializer,o=D.of(e.output),i={};if(r.statusCode>=300){const c=await yn(r.body,n);throw c.byteLength>0&&Object.assign(i,await s.read(15,c)),await this.handleError(e,n,r,i,this.deserializeMetadata(r)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(const c in r.headers){const u=r.headers[c];delete r.headers[c],r.headers[c.toLowerCase()]=u}const a=o.getEventStreamMember();if(a)i[a]=await this.deserializeEventStream({response:r,responseSchema:o,initialResponseContainer:i});else{const c=await yn(r.body,n);c.byteLength>0&&Object.assign(i,await s.read(o,c))}return i.$metadata=this.deserializeMetadata(r),i}}function gs(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();const{httpLabel:n,httpPrefixHeaders:r,httpHeader:s,httpQuery:o}=t.getMergedTraits();return(e.httpBindings?typeof r=="string"||s?6:o||n?5:void 0:void 0)??e.timestampFormat.default}function Ya(t,e,n){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=n}class Xa{authSchemes=new Map;constructor(e){for(const[n,r]of Object.entries(e))r!==void 0&&this.authSchemes.set(n,r)}getIdentityProvider(e){return this.authSchemes.get(e)}}const Za=t=>function(n){return ys(n)&&n.expiration.getTime()-Date.now()<t},ec=3e5,tc=Za(ec),ys=t=>t.expiration!==void 0,nc=(t,e,n)=>{if(t===void 0)return;const r=typeof t!="function"?async()=>Promise.resolve(t):t;let s,o,i,a=!1;const c=async u=>{o||(o=r(u));try{s=await o,i=!0,a=!1}finally{o=void 0}return s};return e===void 0?async u=>((!i||u?.forceRefresh)&&(s=await c(u)),s):async u=>((!i||u?.forceRefresh)&&(s=await c(u)),a?s:n(s)?(e(s)&&await c(u),s):(a=!0,s))},rc=void 0;function sc(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function oc(t){const e=ct(t.userAgentAppId??rc),{customUserAgent:n}=t;return Object.assign(t,{customUserAgent:typeof n=="string"?[[n]]:n,userAgentAppId:async()=>{const r=await e();if(!sc(r)){const s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof r!="string"?s?.warn("userAgentAppId must be a string or undefined."):r.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return r}})}class ic{capacity;data=new Map;parameters=[];constructor({size:e,params:n}){this.capacity=e??50,n&&(this.parameters=n)}get(e,n){const r=this.hash(e);if(r===!1)return n();if(!this.data.has(r)){if(this.data.size>this.capacity+10){const s=this.data.keys();let o=0;for(;;){const{value:i,done:a}=s.next();if(this.data.delete(i),a||++o>10)break}}this.data.set(r,n())}return this.data.get(r)}size(){return this.data.size}hash(e){let n="";const{parameters:r}=this;if(r.length===0)return!1;for(const s of r){const o=String(e[s]??"");if(o.includes("|;"))return!1;n+=o+"|;"}return n}}const ac=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),ws=t=>ac.test(t)||t.startsWith("[")&&t.endsWith("]"),cc=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Vt=(t,e=!1)=>{if(!e)return cc.test(t);const n=t.split(".");for(const r of n)if(!Vt(r))return!1;return!0},$t={},mt="endpoints";function Ae(t){return typeof t!="object"||t==null?t:"ref"in t?`$${Ae(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(Ae).join(", ")})`:JSON.stringify(t,null,2)}class J extends Error{constructor(e){super(e),this.name="EndpointError"}}const uc=(t,e)=>t===e,dc=t=>{const e=t.split("."),n=[];for(const r of e){const s=r.indexOf("[");if(s!==-1){if(r.indexOf("]")!==r.length-1)throw new J(`Path: '${t}' does not end with ']'`);const o=r.slice(s+1,-1);if(Number.isNaN(parseInt(o)))throw new J(`Invalid array index: '${o}' in path: '${t}'`);s!==0&&n.push(r.slice(0,s)),n.push(o)}else n.push(r)}return n},Es=(t,e)=>dc(e).reduce((n,r)=>{if(typeof n!="object")throw new J(`Index '${r}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]},t),lc=t=>t!=null,fc=t=>!t,sn={[lt.HTTP]:80,[lt.HTTPS]:443},hc=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:f,port:p,protocol:m="",path:E="",query:g={}}=t,I=new URL(`${m}//${f}${p?`:${p}`:""}${E}`);return I.search=Object.entries(g).map(([A,U])=>`${A}=${U}`).join("&"),I}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const n=e.href,{host:r,hostname:s,pathname:o,protocol:i,search:a}=e;if(a)return null;const c=i.slice(0,-1);if(!Object.values(lt).includes(c))return null;const u=ws(s),l=n.includes(`${r}:${sn[c]}`)||typeof t=="string"&&t.includes(`${r}:${sn[c]}`),d=`${r}${l?`:${sn[c]}`:""}`;return{scheme:c,authority:d,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:u}},pc=(t,e)=>t===e,mc=(t,e,n,r)=>e>=n||t.length<n?null:r?t.substring(t.length-n,t.length-e):t.substring(e,n),gc=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),yc={booleanEquals:uc,getAttr:Es,isSet:lc,isValidHostLabel:Vt,not:fc,parseURL:hc,stringEquals:pc,substring:mc,uriEncode:gc},Ss=(t,e)=>{const n=[],r={...e.endpointParams,...e.referenceRecord};let s=0;for(;s<t.length;){const o=t.indexOf("{",s);if(o===-1){n.push(t.slice(s));break}n.push(t.slice(s,o));const i=t.indexOf("}",o);if(i===-1){n.push(t.slice(o));break}t[o+1]==="{"&&t[i+1]==="}"&&(n.push(t.slice(o+1,i)),s=i+2);const a=t.substring(o+1,i);if(a.includes("#")){const[c,u]=a.split("#");n.push(Es(r[c],u))}else n.push(r[a]);s=i+1}return n.join("")},wc=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],Kt=(t,e,n)=>{if(typeof t=="string")return Ss(t,n);if(t.fn)return As.callFunction(t,n);if(t.ref)return wc(t,n);throw new J(`'${e}': ${String(t)} is not a string, function or reference.`)},bs=({fn:t,argv:e},n)=>{const r=e.map(o=>["boolean","number"].includes(typeof o)?o:As.evaluateExpression(o,"arg",n)),s=t.split(".");return s[0]in $t&&s[1]!=null?$t[s[0]][s[1]](...r):yc[t](...r)},As={evaluateExpression:Kt,callFunction:bs},Ec=({assign:t,...e},n)=>{if(t&&t in n.referenceRecord)throw new J(`'${t}' is already defined in Reference Record.`);const r=bs(e,n);return n.logger?.debug?.(`${mt} evaluateCondition: ${Ae(e)} = ${Ae(r)}`),{result:r===""?!0:!!r,...t!=null&&{toAssign:{name:t,value:r}}}},Rn=(t=[],e)=>{const n={};for(const r of t){const{result:s,toAssign:o}=Ec(r,{...e,referenceRecord:{...e.referenceRecord,...n}});if(!s)return{result:s};o&&(n[o.name]=o.value,e.logger?.debug?.(`${mt} assign: ${o.name} := ${Ae(o.value)}`))}return{result:!0,referenceRecord:n}},Sc=(t,e)=>Object.entries(t).reduce((n,[r,s])=>({...n,[r]:s.map(o=>{const i=Kt(o,"Header value entry",e);if(typeof i!="string")throw new J(`Header '${r}' value '${i}' is not a string`);return i})}),{}),Is=(t,e)=>Object.entries(t).reduce((n,[r,s])=>({...n,[r]:Ts.getEndpointProperty(s,e)}),{}),xs=(t,e)=>{if(Array.isArray(t))return t.map(n=>xs(n,e));switch(typeof t){case"string":return Ss(t,e);case"object":if(t===null)throw new J(`Unexpected endpoint property: ${t}`);return Ts.getEndpointProperties(t,e);case"boolean":return t;default:throw new J(`Unexpected endpoint property type: ${typeof t}`)}},Ts={getEndpointProperty:xs,getEndpointProperties:Is},bc=(t,e)=>{const n=Kt(t,"Endpoint URL",e);if(typeof n=="string")try{return new URL(n)}catch(r){throw console.error(`Failed to construct URL with ${n}`,r),r}throw new J(`Endpoint URL must be a string, got ${typeof n}`)},Ac=(t,e)=>{const{conditions:n,endpoint:r}=t,{result:s,referenceRecord:o}=Rn(n,e);if(!s)return;const i={...e,referenceRecord:{...e.referenceRecord,...o}},{url:a,properties:c,headers:u}=r;return e.logger?.debug?.(`${mt} Resolving endpoint from template: ${Ae(r)}`),{...u!=null&&{headers:Sc(u,i)},...c!=null&&{properties:Is(c,i)},url:bc(a,i)}},Ic=(t,e)=>{const{conditions:n,error:r}=t,{result:s,referenceRecord:o}=Rn(n,e);if(s)throw new J(Kt(r,"Error",{...e,referenceRecord:{...e.referenceRecord,...o}}))},vs=(t,e)=>{for(const n of t)if(n.type==="endpoint"){const r=Ac(n,e);if(r)return r}else if(n.type==="error")Ic(n,e);else if(n.type==="tree"){const r=Cs.evaluateTreeRule(n,e);if(r)return r}else throw new J(`Unknown endpoint rule: ${n}`);throw new J("Rules evaluation failed")},xc=(t,e)=>{const{conditions:n,rules:r}=t,{result:s,referenceRecord:o}=Rn(n,e);if(s)return Cs.evaluateRules(r,{...e,referenceRecord:{...e.referenceRecord,...o}})},Cs={evaluateRules:vs,evaluateTreeRule:xc},Tc=(t,e)=>{const{endpointParams:n,logger:r}=e,{parameters:s,rules:o}=t;e.logger?.debug?.(`${mt} Initial EndpointParams: ${Ae(n)}`);const i=Object.entries(s).filter(([,u])=>u.default!=null).map(([u,l])=>[u,l.default]);if(i.length>0)for(const[u,l]of i)n[u]=n[u]??l;const a=Object.entries(s).filter(([,u])=>u.required).map(([u])=>u);for(const u of a)if(n[u]==null)throw new J(`Missing required parameter: '${u}'`);const c=vs(o,{endpointParams:n,logger:r,referenceRecord:{}});return e.logger?.debug?.(`${mt} Resolved endpoint: ${Ae(c)}`),c},Rs=(t,e=!1)=>{if(e){for(const n of t.split("."))if(!Rs(n))return!1;return!0}return!(!Vt(t)||t.length<3||t.length>63||t!==t.toLowerCase()||ws(t))},ir=":",vc="/",Cc=t=>{const e=t.split(ir);if(e.length<6)return null;const[n,r,s,o,i,...a]=e;if(n!=="arn"||r===""||s===""||a.join(ir)==="")return null;const c=a.map(u=>u.split(vc)).flat();return{partition:r,service:s,region:o,accountId:i,resourceId:c}},Rc=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],kc={partitions:Rc};let Oc=kc;const Pc=t=>{const{partitions:e}=Oc;for(const r of e){const{regions:s,outputs:o}=r;for(const[i,a]of Object.entries(s))if(i===t)return{...o,...a}}for(const r of e){const{regionRegex:s,outputs:o}=r;if(new RegExp(s).test(t))return{...o}}const n=e.find(r=>r.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}},ks={isVirtualHostableS3Bucket:Rs,parseArn:Cc,partition:Pc};$t.aws=ks;function _c(t){const e={};if(t=t.replace(/^\?/,""),t)for(const n of t.split("&")){let[r,s=null]=n.split("=");r=decodeURIComponent(r),s&&(s=decodeURIComponent(s)),r in e?Array.isArray(e[r])?e[r].push(s):e[r]=[e[r],s]:e[r]=s}return e}const Bt=t=>{if(typeof t=="string")return Bt(new URL(t));const{hostname:e,pathname:n,port:r,protocol:s,search:o}=t;let i;return o&&(i=_c(o)),{hostname:e,port:r?parseInt(r):void 0,protocol:s,path:n,query:i}};function Dc(t,e,n){return t.$source||(t.$source={}),t.$source[e]=n,t}function Z(t,e,n){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=n}const ar=t=>Ge.isInstance(t)?t.headers?.date??t.headers?.Date:void 0,Os=t=>new Date(Date.now()+t),Nc=(t,e)=>Math.abs(Os(e).getTime()-t)>=3e5,cr=(t,e)=>{const n=Date.parse(t);return Nc(n,e)?n-Date.now():e},dt=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},Mc=async t=>{const e=dt("context",t.context),n=dt("config",t.config),r=e.endpointV2?.properties?.authSchemes?.[0],o=await dt("signer",n.signer)(r),i=t?.signingRegion,a=t?.signingRegionSet,c=t?.signingName;return{config:n,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}};class $c{async sign(e,n,r){if(!G.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await Mc(r),{config:o,signer:i}=s;let{signingRegion:a,signingName:c}=s;const u=r.context;if(u?.authSchemes?.length??!1){const[d,f]=u.authSchemes;d?.name==="sigv4a"&&f?.name==="sigv4"&&(a=f?.signingRegion??a,c=f?.signingName??c)}return await i.sign(e,{signingDate:Os(o.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(e){return n=>{const r=n.ServerTime??ar(n.$response);if(r){const s=dt("config",e.config),o=s.systemClockOffset;s.systemClockOffset=cr(r,s.systemClockOffset),s.systemClockOffset!==o&&n.$metadata&&(n.$metadata.clockSkewCorrected=!0)}throw n}}successHandler(e,n){const r=ar(e);if(r){const s=dt("config",n.config);s.systemClockOffset=cr(r,s.systemClockOffset)}}}class kn extends Error{name="ProviderError";tryNextLink;constructor(e,n=!0){let r,s=!0;typeof n=="boolean"?(r=void 0,s=n):n!=null&&typeof n=="object"&&(r=n.logger,s=n.tryNextLink??!0),super(e),this.tryNextLink=s,Object.setPrototypeOf(this,kn.prototype),r?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${e}`)}static from(e,n=!0){return Object.assign(new this(e.message,n),e)}}class Ze extends kn{name="CredentialsProviderError";constructor(e,n=!0){super(e,n),Object.setPrototypeOf(this,Ze.prototype)}}const Bc=(t,e,n)=>{let r,s,o,i=!1;const a=async()=>{s||(s=t());try{r=await s,o=!0,i=!1}finally{s=void 0}return r};return async c=>((!o||c?.forceRefresh)&&(r=await a()),r)},Uc="X-Amz-Algorithm",Lc="X-Amz-Credential",Ps="X-Amz-Date",jc="X-Amz-SignedHeaders",Fc="X-Amz-Expires",_s="X-Amz-Signature",Ds="X-Amz-Security-Token",Ns="authorization",Ms=Ps.toLowerCase(),zc="date",Hc=[Ns,Ms,zc],Wc=_s.toLowerCase(),En="x-amz-content-sha256",Vc=Ds.toLowerCase(),Kc={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},qc=/^proxy-/,Gc=/^sec-/,on="AWS4-HMAC-SHA256",Jc="AWS4-HMAC-SHA256-PAYLOAD",Qc="UNSIGNED-PAYLOAD",Yc=50,$s="aws4_request",Xc=3600*24*7,Ct={},an=[],cn=(t,e,n)=>`${t}/${e}/${n}/${$s}`,Zc=async(t,e,n,r,s)=>{const o=await ur(t,e.secretAccessKey,e.accessKeyId),i=`${n}:${r}:${s}:${Ne(o)}:${e.sessionToken}`;if(i in Ct)return Ct[i];for(an.push(i);an.length>Yc;)delete Ct[an.shift()];let a=`AWS4${e.secretAccessKey}`;for(const c of[n,r,s,$s])a=await ur(t,a,c);return Ct[i]=a},ur=(t,e,n)=>{const r=new t(e);return r.update(ft(n)),r.digest()},dr=({headers:t},e,n)=>{const r={};for(const s of Object.keys(t).sort()){if(t[s]==null)continue;const o=s.toLowerCase();(o in Kc||e?.has(o)||qc.test(o)||Gc.test(o))&&(!n||n&&!n.has(o))||(r[o]=t[s].trim().replace(/\s+/g," "))}return r},eu=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",un=async({headers:t,body:e},n)=>{for(const r of Object.keys(t))if(r.toLowerCase()===En)return t[r];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||eu(e)){const r=new n;return r.update(ft(e)),Ne(await r.digest())}return Qc};class tu{format(e){const n=[];for(const o of Object.keys(e)){const i=Je(o);n.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(e[o]))}const r=new Uint8Array(n.reduce((o,i)=>o+i.byteLength,0));let s=0;for(const o of n)r.set(o,s),s+=o.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,e.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);const i=new Uint8Array(o.buffer);return i.set(e.value,3),i;case"string":const a=Je(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);const u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":const l=new Uint8Array(9);return l[0]=8,l.set(On.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!nu.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(ma(e.value.replace(/\-/g,"")),1),d}}}var lr;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(lr||(lr={}));const nu=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class On{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(e));r>-1&&s>0;r--,s/=256)n[r]=s;return e<0&&fr(n),new On(n)}valueOf(){const e=this.bytes.slice(0),n=e[0]&128;return n&&fr(e),parseInt(Ne(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}}function fr(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}const ru=(t,e)=>{t=t.toLowerCase();for(const n of Object.keys(e))if(t===n.toLowerCase())return!0;return!1},su=(t,e={})=>{const{headers:n,query:r={}}=G.clone(t);for(const s of Object.keys(n)){const o=s.toLowerCase();(o.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(o)||e.hoistableHeaders?.has(o))&&(r[s]=n[s],delete n[s])}return{...t,headers:n,query:r}},hr=t=>{t=G.clone(t);for(const e of Object.keys(t.headers))Hc.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},ou=({query:t={}})=>{const e=[],n={};for(const r of Object.keys(t)){if(r.toLowerCase()===Wc)continue;const s=De(r);e.push(s);const o=t[r];typeof o=="string"?n[s]=`${s}=${De(o)}`:Array.isArray(o)&&(n[s]=o.slice(0).reduce((i,a)=>i.concat([`${s}=${De(a)}`]),[]).sort().join("&"))}return e.sort().map(r=>n[r]).filter(r=>r).join("&")},iu=t=>au(t).toISOString().replace(/\.\d{3}Z$/,"Z"),au=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class cu{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:n,region:r,service:s,sha256:o,uriEscapePath:i=!0}){this.service=s,this.sha256=o,this.uriEscapePath=i,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=ce(r),this.credentialProvider=ce(n)}createCanonicalRequest(e,n,r){const s=Object.keys(n).sort();return`${e.method}
${this.getCanonicalPath(e)}
${ou(e)}
${s.map(o=>`${o}:${n[o]}`).join(`
`)}

${s.join(";")}
${r}`}async createStringToSign(e,n,r,s){const o=new this.sha256;o.update(ft(r));const i=await o.digest();return`${s}
${e}
${n}
${Ne(i)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const n=[];for(const o of e.split("/"))o?.length!==0&&o!=="."&&(o===".."?n.pop():n.push(o));const r=`${e?.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&e?.endsWith("/")?"/":""}`;return De(r).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){const n=iu(e).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class pr extends cu{headerFormatter=new tu;constructor({applyChecksum:e,credentials:n,region:r,service:s,sha256:o,uriEscapePath:i=!0}){super({applyChecksum:e,credentials:n,region:r,service:s,sha256:o,uriEscapePath:i})}async presign(e,n={}){const{signingDate:r=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:c,signingRegion:u,signingService:l}=n,d=await this.credentialProvider();this.validateResolvedCredentials(d);const f=u??await this.regionProvider(),{longDate:p,shortDate:m}=this.formatDate(r);if(s>Xc)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const E=cn(m,f,l??this.service),g=su(hr(e),{unhoistableHeaders:i,hoistableHeaders:c});d.sessionToken&&(g.query[Ds]=d.sessionToken),g.query[Uc]=on,g.query[Lc]=`${d.accessKeyId}/${E}`,g.query[Ps]=p,g.query[Fc]=s.toString(10);const I=dr(g,o,a);return g.query[jc]=this.getCanonicalHeaderList(I),g.query[_s]=await this.getSignature(p,E,this.getSigningKey(d,f,m,l),this.createCanonicalRequest(g,I,await un(e,this.sha256))),g}async sign(e,n){return typeof e=="string"?this.signString(e,n):e.headers&&e.payload?this.signEvent(e,n):e.message?this.signMessage(e,n):this.signRequest(e,n)}async signEvent({headers:e,payload:n},{signingDate:r=new Date,priorSignature:s,signingRegion:o,signingService:i}){const a=o??await this.regionProvider(),{shortDate:c,longDate:u}=this.formatDate(r),l=cn(c,a,i??this.service),d=await un({headers:{},body:n},this.sha256),f=new this.sha256;f.update(e);const p=Ne(await f.digest()),m=[Jc,u,l,s,p,d].join(`
`);return this.signString(m,{signingDate:r,signingRegion:a,signingService:i})}async signMessage(e,{signingDate:n=new Date,signingRegion:r,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:n,signingRegion:r,signingService:s,priorSignature:e.priorSignature}).then(i=>({message:e.message,signature:i}))}async signString(e,{signingDate:n=new Date,signingRegion:r,signingService:s}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const i=r??await this.regionProvider(),{shortDate:a}=this.formatDate(n),c=new this.sha256(await this.getSigningKey(o,i,a,s));return c.update(ft(e)),Ne(await c.digest())}async signRequest(e,{signingDate:n=new Date,signableHeaders:r,unsignableHeaders:s,signingRegion:o,signingService:i}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const c=o??await this.regionProvider(),u=hr(e),{longDate:l,shortDate:d}=this.formatDate(n),f=cn(d,c,i??this.service);u.headers[Ms]=l,a.sessionToken&&(u.headers[Vc]=a.sessionToken);const p=await un(u,this.sha256);!ru(En,u.headers)&&this.applyChecksum&&(u.headers[En]=p);const m=dr(u,s,r),E=await this.getSignature(l,f,this.getSigningKey(a,c,d,i),this.createCanonicalRequest(u,m,p));return u.headers[Ns]=`${on} Credential=${a.accessKeyId}/${f}, SignedHeaders=${this.getCanonicalHeaderList(m)}, Signature=${E}`,u}async getSignature(e,n,r,s){const o=await this.createStringToSign(e,n,s,on),i=new this.sha256(await r);return i.update(ft(o)),Ne(await i.digest())}getSigningKey(e,n,r,s){return Zc(this.sha256,e,r,n,s||this.service)}}const uu=t=>{let e=t.credentials,n=!!t.credentials,r;Object.defineProperty(t,"credentials",{set(u){u&&u!==e&&u!==r&&(n=!0),e=u;const l=du(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),d=lu(t,l);n&&!d.attributed?(r=async f=>d(f).then(p=>Dc(p,"CREDENTIALS_CODE","e")),r.memoized=d.memoized,r.configBound=d.configBound,r.attributed=!0):r=d},get(){return r},enumerable:!0,configurable:!0}),t.credentials=e;const{signingEscapePath:s=!0,systemClockOffset:o=t.systemClockOffset||0,sha256:i}=t;let a;return t.signer?a=ct(t.signer):t.regionInfoProvider?a=()=>ct(t.region)().then(async u=>[await t.regionInfoProvider(u,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},u]).then(([u,l])=>{const{signingRegion:d,signingService:f}=u;t.signingRegion=t.signingRegion||d||l,t.signingName=t.signingName||f||t.serviceId;const p={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:s},m=t.signerConstructor||pr;return new m(p)}):a=async u=>{u=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await ct(t.region)(),properties:{}},u);const l=u.signingRegion,d=u.signingName;t.signingRegion=t.signingRegion||l,t.signingName=t.signingName||d||t.serviceId;const f={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:s},p=t.signerConstructor||pr;return new p(f)},Object.assign(t,{systemClockOffset:o,signingEscapePath:s,signer:a})};function du(t,{credentials:e,credentialDefaultProvider:n}){let r;return e?e?.memoized?r=e:r=nc(e,tc,ys):n?r=ct(n(Object.assign({},t,{parentClientConfig:t}))):r=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},r.memoized=!0,r}function lu(t,e){if(e.configBound)return e;const n=async r=>e({...r,callerClientConfig:t});return n.memoized=e.memoized,n.configBound=!0,n}const mr=typeof TextEncoder=="function"?new TextEncoder:null,fu=t=>{if(typeof t=="string"){if(mr)return mr.encode(t).byteLength;let e=t.length;for(let n=e-1;n>=0;n--){const r=t.charCodeAt(n);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&n--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)},Oe=(t,e)=>{const n=[];if(t&&n.push(t),e)for(const r of e)n.push(r);return n},Ee=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,Ut=()=>{let t=[],e=[],n=!1;const r=new Set,s=d=>d.sort((f,p)=>gr[p.step]-gr[f.step]||yr[p.priority||"normal"]-yr[f.priority||"normal"]),o=d=>{let f=!1;const p=m=>{const E=Oe(m.name,m.aliases);if(E.includes(d)){f=!0;for(const g of E)r.delete(g);return!1}return!0};return t=t.filter(p),e=e.filter(p),f},i=d=>{let f=!1;const p=m=>{if(m.middleware===d){f=!0;for(const E of Oe(m.name,m.aliases))r.delete(E);return!1}return!0};return t=t.filter(p),e=e.filter(p),f},a=d=>(t.forEach(f=>{d.add(f.middleware,{...f})}),e.forEach(f=>{d.addRelativeTo(f.middleware,{...f})}),d.identifyOnResolve?.(l.identifyOnResolve()),d),c=d=>{const f=[];return d.before.forEach(p=>{p.before.length===0&&p.after.length===0?f.push(p):f.push(...c(p))}),f.push(d),d.after.reverse().forEach(p=>{p.before.length===0&&p.after.length===0?f.push(p):f.push(...c(p))}),f},u=(d=!1)=>{const f=[],p=[],m={};return t.forEach(g=>{const I={...g,before:[],after:[]};for(const A of Oe(I.name,I.aliases))m[A]=I;f.push(I)}),e.forEach(g=>{const I={...g,before:[],after:[]};for(const A of Oe(I.name,I.aliases))m[A]=I;p.push(I)}),p.forEach(g=>{if(g.toMiddleware){const I=m[g.toMiddleware];if(I===void 0){if(d)return;throw new Error(`${g.toMiddleware} is not found when adding ${Ee(g.name,g.aliases)} middleware ${g.relation} ${g.toMiddleware}`)}g.relation==="after"&&I.after.push(g),g.relation==="before"&&I.before.push(g)}}),s(f).map(c).reduce((g,I)=>(g.push(...I),g),[])},l={add:(d,f={})=>{const{name:p,override:m,aliases:E}=f,g={step:"initialize",priority:"normal",middleware:d,...f},I=Oe(p,E);if(I.length>0){if(I.some(A=>r.has(A))){if(!m)throw new Error(`Duplicate middleware name '${Ee(p,E)}'`);for(const A of I){const U=t.findIndex(Q=>Q.name===A||Q.aliases?.some(we=>we===A));if(U===-1)continue;const N=t[U];if(N.step!==g.step||g.priority!==N.priority)throw new Error(`"${Ee(N.name,N.aliases)}" middleware with ${N.priority} priority in ${N.step} step cannot be overridden by "${Ee(p,E)}" middleware with ${g.priority} priority in ${g.step} step.`);t.splice(U,1)}}for(const A of I)r.add(A)}t.push(g)},addRelativeTo:(d,f)=>{const{name:p,override:m,aliases:E}=f,g={middleware:d,...f},I=Oe(p,E);if(I.length>0){if(I.some(A=>r.has(A))){if(!m)throw new Error(`Duplicate middleware name '${Ee(p,E)}'`);for(const A of I){const U=e.findIndex(Q=>Q.name===A||Q.aliases?.some(we=>we===A));if(U===-1)continue;const N=e[U];if(N.toMiddleware!==g.toMiddleware||N.relation!==g.relation)throw new Error(`"${Ee(N.name,N.aliases)}" middleware ${N.relation} "${N.toMiddleware}" middleware cannot be overridden by "${Ee(p,E)}" middleware ${g.relation} "${g.toMiddleware}" middleware.`);e.splice(U,1)}}for(const A of I)r.add(A)}e.push(g)},clone:()=>a(Ut()),use:d=>{d.applyToStack(l)},remove:d=>typeof d=="string"?o(d):i(d),removeByTag:d=>{let f=!1;const p=m=>{const{tags:E,name:g,aliases:I}=m;if(E&&E.includes(d)){const A=Oe(g,I);for(const U of A)r.delete(U);return f=!0,!1}return!0};return t=t.filter(p),e=e.filter(p),f},concat:d=>{const f=a(Ut());return f.use(d),f.identifyOnResolve(n||f.identifyOnResolve()||(d.identifyOnResolve?.()??!1)),f},applyToStack:a,identify:()=>u(!0).map(d=>{const f=d.step??d.relation+" "+d.toMiddleware;return Ee(d.name,d.aliases)+" - "+f}),identifyOnResolve(d){return typeof d=="boolean"&&(n=d),n},resolve:(d,f)=>{for(const p of u().map(m=>m.middleware).reverse())d=p(d,f);return n&&console.log(l.identify()),d}};return l},gr={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},yr={high:3,normal:2,low:1};class Bs{config;middlewareStack=Ut();initConfig;handlers;constructor(e){this.config=e}send(e,n,r){const s=typeof n!="function"?n:void 0,o=typeof n=="function"?n:r,i=s===void 0&&this.config.cacheMiddleware===!0;let a;if(i){this.handlers||(this.handlers=new WeakMap);const c=this.handlers;c.has(e.constructor)?a=c.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),c.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(o)a(e).then(c=>o(null,c.output),c=>o(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}const dn="***SensitiveInformation***";function Sn(t,e){if(e==null)return e;const n=D.of(t);if(n.getMergedTraits().sensitive)return dn;if(n.isListSchema()){if(!!n.getValueSchema().getMergedTraits().sensitive)return dn}else if(n.isMapSchema()){if(!!n.getKeySchema().getMergedTraits().sensitive||!!n.getValueSchema().getMergedTraits().sensitive)return dn}else if(n.isStructSchema()&&typeof e=="object"){const r=e,s={};for(const[o,i]of n.structIterator())r[o]!=null&&(s[o]=Sn(i,r[o]));return s}return e}class de{middlewareStack=Ut();schema;static classBuilder(){return new hu}resolveMiddlewareWithContext(e,n,r,{middlewareFn:s,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:l,CommandCtor:d}){for(const g of s.bind(this)(d,e,n,r))this.middlewareStack.use(g);const f=e.concat(this.middlewareStack),{logger:p}=n,m={logger:p,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[mn]:{commandInstance:this,...u},...l},{requestHandler:E}=n;return f.resolve(g=>E.handle(g.request,r||{}),m)}}class hu{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,n,r={}){return this._smithyContext={service:e,operation:n,...r},this}c(e={}){return this._additionalContext=e,this}n(e,n){return this._clientName=e,this._commandName=n,this}f(e=r=>r,n=r=>r){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=n,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let n;return n=class extends de{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[r]){super(),this.input=r??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(r,s,o){const i=e._operationSchema,a=i?.[4]??i?.input,c=i?.[5]??i?.output;return this.resolveMiddlewareWithContext(r,s,o,{CommandCtor:n,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(i?Sn.bind(null,a):u=>u),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(i?Sn.bind(null,c):u=>u),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}}class We extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const n=e;return We.prototype.isPrototypeOf(n)||!!n.$fault&&!!n.$metadata&&(n.$fault==="client"||n.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;const n=e;return this===We?We.isInstance(e):We.isInstance(e)?n.name&&this.name?this.prototype.isPrototypeOf(e)||n.name===this.name:this.prototype.isPrototypeOf(e):!1}}const wr=(t,e={})=>{Object.entries(e).filter(([,r])=>r!==void 0).forEach(([r,s])=>{(t[r]==null||t[r]==="")&&(t[r]=s)});const n=t.message||t.Message||"UnknownError";return t.message=n,delete t.Message,t},pu=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},mu=t=>{const e=[];for(const n in Nt){const r=Nt[n];t[r]!==void 0&&e.push({algorithmId:()=>r,checksumConstructor:()=>t[r]})}return{addChecksumAlgorithm(n){e.push(n)},checksumAlgorithms(){return e}}},gu=t=>{const e={};return t.checksumAlgorithms().forEach(n=>{e[n.algorithmId()]=n.checksumConstructor()}),e},yu=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),wu=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},Eu=t=>Object.assign(mu(t),yu(t)),Su=t=>Object.assign(gu(t),wu(t));class Us{trace(){}debug(){}info(){}warn(){}error(){}}const Lt=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(Lt);if(typeof t=="object"){const e={};for(const n of Object.keys(t))t[n]!=null&&(e[n]=Lt(t[n]));return e}return t};class bu{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,n){const r=n.getMemberSchemas(),s=Object.values(r).find(o=>!!o.getMergedTraits().httpPayload);if(s){const o=s.getMergedTraits().mediaType;return o||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":e)}else if(!n.isUnitSchema()&&Object.values(r).find(i=>{const{httpQuery:a,httpQueryParams:c,httpHeader:u,httpLabel:l,httpPrefixHeaders:d}=i.getMergedTraits();return!a&&!c&&!u&&!l&&d===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,n,r,s,o,i){let a=n,c=e;e.includes("#")&&([a,c]=e.split("#"));const u={$metadata:o,$fault:r.statusCode<500?"client":"server"},l=b.for(a);try{return{errorSchema:i?.(l,c)??l.getSchema(e),errorMetadata:u}}catch{s.message=s.message??s.Message??"UnknownError";const f=b.for("smithy.ts.sdk.synthetic."+a),p=f.getBaseException();if(p){const m=f.getErrorCtor(p)??Error;throw this.decorateServiceException(Object.assign(new m({name:c}),u),s)}throw this.decorateServiceException(Object.assign(new Error(c),u),s)}}decorateServiceException(e,n={}){if(this.queryCompat){const r=e.Message??n.Message,s=wr(e,n);r&&(s.message=r),s.Error={...s.Error,Type:s.Error.Type,Code:s.Error.Code,Message:s.Error.message??s.Error.Message??r};const o=s.$metadata.requestId;return o&&(s.RequestId=o),s}return wr(e,n)}setQueryCompatError(e,n){const r=n.headers?.["x-amzn-query-error"];if(e!==void 0&&r!=null){const[s,o]=r.split(";"),i=Object.entries(e),a={Code:s,Type:o};Object.assign(e,a);for(const[c,u]of i)a[c==="message"?"Message":c]=u;delete a.__type,e.Error=a}}queryCompatOutput(e,n){e.Error&&(n.Error=e.Error),e.Type&&(n.Type=e.Type),e.Code&&(n.Code=e.Code)}findQueryCompatibleError(e,n){try{return e.getSchema(n)}catch{return e.find(s=>D.of(s).getMergedTraits().awsQueryError?.[0]===n)}}}class Pn{serdeContext;setSerdeContext(e){this.serdeContext=e}}function*Au(t,e){if(t.isUnitSchema())return;const n=t.getSchema();for(let r=0;r<n[4].length;++r){const s=n[4][r],o=n[5][r],i=new D([o,0],s);!(s in e)&&!i.isIdempotencyToken()||(yield[s,i])}}function*Iu(t,e,n){if(t.isUnitSchema())return;const r=t.getSchema();let s=Object.keys(e).filter(o=>o!=="__type").length;for(let o=0;o<r[4].length&&s!==0;++o){const i=r[4][o],a=r[5][o],c=new D([a,0],i);let u=i;n&&(u=c.getMergedTraits()[n]??i),u in e&&(yield[i,c],s-=1)}}function xu(t,e,n){if(n?.source){const r=n.source;if(typeof e=="number"&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||r!==String(e)))return r.includes(".")?new ae(r,"bigDecimal"):BigInt(r)}return e}const Tu=(t,e)=>yn(t,e).then(n=>(e?.utf8Encoder??Tn)(n)),vu=(t,e)=>Tu(t,e).then(n=>{if(n.length)try{return JSON.parse(n)}catch(r){throw r?.name==="SyntaxError"&&Object.defineProperty(r,"$responseBodyText",{value:n}),r}return{}}),Cu=(t,e)=>{const n=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),r=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=n(t.headers,"x-amzn-errortype");if(s!==void 0)return r(t.headers[s]);if(e&&typeof e=="object"){const o=n(e,"code");if(o&&e[o]!==void 0)return r(e[o]);if(e.__type!==void 0)return r(e.__type)}};class Ls extends Pn{settings;constructor(e){super(),this.settings=e}async read(e,n){return this._read(e,typeof n=="string"?JSON.parse(n,xu):await vu(n,this.serdeContext))}readObject(e,n){return this._read(e,n)}_read(e,n){const r=n!==null&&typeof n=="object",s=D.of(e);if(r){if(s.isStructSchema()){const i={};for(const[a,c]of Iu(s,n,this.settings.jsonName?"jsonName":!1)){const u=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,l=this._read(c,n[u]);l!=null&&(i[a]=l)}return i}if(Array.isArray(n)&&s.isListSchema()){const i=s.getValueSchema(),a=[],c=!!s.getMergedTraits().sparse;for(const u of n)(c||u!=null)&&a.push(this._read(i,u));return a}if(s.isMapSchema()){const i=s.getValueSchema(),a={},c=!!s.getMergedTraits().sparse;for(const[u,l]of Object.entries(n))(c||l!=null)&&(a[u]=this._read(i,l));return a}}if(s.isBlobSchema()&&typeof n=="string")return bt(n);const o=s.getMergedTraits().mediaType;if(s.isStringSchema()&&typeof n=="string"&&o)return o==="application/json"||o.endsWith("+json")?Se.from(n):n;if(s.isTimestampSchema()&&n!=null)switch(gs(s,this.settings)){case 5:return Na(n);case 6:return Ua(n);case 7:return La(n);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",n),new Date(n)}if(s.isBigIntegerSchema()&&(typeof n=="number"||typeof n=="string"))return BigInt(n);if(s.isBigDecimalSchema()&&n!=null){if(n instanceof ae)return n;const i=n;return i.type==="bigDecimal"&&"string"in i?new ae(i.string,i.type):new ae(String(n),"bigDecimal")}if(s.isNumericSchema()&&typeof n=="string"){switch(n){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return n}if(s.isDocumentSchema())if(r){const i=Array.isArray(n)?[]:{};for(const[a,c]of Object.entries(n))c instanceof ae?i[a]=c:i[a]=this._read(s,c);return i}else return structuredClone(n);return n}}const Er="";class Ru{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(e,n)=>{if(n instanceof ae){const r=`${Er+"nv"+this.counter++}_`+n.string;return this.values.set(`"${r}"`,n.string),r}if(typeof n=="bigint"){const r=n.toString(),s=`${Er+"b"+this.counter++}_`+r;return this.values.set(`"${s}"`,r),s}return n}}replaceInJson(e){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return e;for(const[n,r]of this.values)e=e.replace(n,r);return e}}class js extends Pn{settings;buffer;useReplacer=!1;rootSchema;constructor(e){super(),this.settings=e}write(e,n){this.rootSchema=D.of(e),this.buffer=this._write(this.rootSchema,n)}writeDiscriminatedDocument(e,n){this.write(e,n),typeof this.buffer=="object"&&(this.buffer.__type=D.of(e).getName(!0))}flush(){const{rootSchema:e,useReplacer:n}=this;if(this.rootSchema=void 0,this.useReplacer=!1,e?.isStructSchema()||e?.isDocumentSchema()){if(!n)return JSON.stringify(this.buffer);const r=new Ru;return r.replaceInJson(JSON.stringify(this.buffer,r.createReplacer(),0))}return this.buffer}_write(e,n,r){const s=n!==null&&typeof n=="object",o=D.of(e);if(s){if(o.isStructSchema()){const i={};for(const[a,c]of Au(o,n)){const u=this._write(c,n[a],o);if(u!==void 0){const l=c.getMergedTraits().jsonName,d=this.settings.jsonName?l??a:a;i[d]=u}}return i}if(Array.isArray(n)&&o.isListSchema()){const i=o.getValueSchema(),a=[],c=!!o.getMergedTraits().sparse;for(const u of n)(c||u!=null)&&a.push(this._write(i,u));return a}if(o.isMapSchema()){const i=o.getValueSchema(),a={},c=!!o.getMergedTraits().sparse;for(const[u,l]of Object.entries(n))(c||l!=null)&&(a[u]=this._write(i,l));return a}if(n instanceof Uint8Array&&(o.isBlobSchema()||o.isDocumentSchema()))return o===this.rootSchema?n:(this.serdeContext?.base64Encoder??ht)(n);if(n instanceof Date&&(o.isTimestampSchema()||o.isDocumentSchema()))switch(gs(o,this.settings)){case 5:return n.toISOString().replace(".000Z","Z");case 6:return _a(n);case 7:return n.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",n),n.getTime()/1e3}n instanceof ae&&(this.useReplacer=!0)}if(!(n===null&&r?.isStructSchema())){if(o.isStringSchema()){if(typeof n>"u"&&o.isIdempotencyToken())return ms();const i=o.getMergedTraits().mediaType;return n!=null&&i&&(i==="application/json"||i.endsWith("+json"))?Se.from(n):n}if(typeof n=="number"&&o.isNumericSchema())return Math.abs(n)===1/0||isNaN(n)?String(n):n;if(typeof n=="string"&&o.isBlobSchema())return o===this.rootSchema?n:(this.serdeContext?.base64Encoder??ht)(n);if(typeof n=="bigint"&&(this.useReplacer=!0),o.isDocumentSchema())if(s){const i=Array.isArray(n)?[]:{};for(const[a,c]of Object.entries(n))c instanceof ae?(this.useReplacer=!0,i[a]=c):i[a]=this._write(o,c);return i}else return structuredClone(n);return n}}}class Fs extends Pn{settings;constructor(e){super(),this.settings=e}createSerializer(){const e=new js(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){const e=new Ls(this.settings);return e.setSerdeContext(this.serdeContext),e}}class ku extends Qa{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:e,serviceTarget:n,awsQueryCompatible:r,jsonCodec:s}){super({defaultNamespace:e}),this.serviceTarget=n,this.codec=s??new Fs({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!r,this.mixin=new bu(this.awsQueryCompatible)}async serializeRequest(e,n,r){const s=await super.serializeRequest(e,n,r);return s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${e.name}`}),this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),(kt(e.input)==="unit"||!s.body)&&(s.body="{}"),s}getPayloadCodec(){return this.codec}async handleError(e,n,r,s,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,r);const i=Cu(r,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,r,s,o,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),u=D.of(a),l=s.message??s.Message??"Unknown",d=b.for(a[1]).getErrorCtor(a)??Error,f=new d(l),p={};for(const[m,E]of u.structIterator())s[m]!=null&&(p[m]=this.codec.createDeserializer().readObject(E,s[m]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,p),this.mixin.decorateServiceException(Object.assign(f,c,{$fault:u.getMergedTraits().error,message:l},p),s)}}class Ou extends ku{constructor({defaultNamespace:e,serviceTarget:n,awsQueryCompatible:r,jsonCodec:s}){super({defaultNamespace:e,serviceTarget:n,awsQueryCompatible:r,jsonCodec:s})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}const Pu=/\d{12}\.ddb/;async function _u(t,e,n){if(n.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Z(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const o=await e.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?Z(t,"RETRY_MODE_ADAPTIVE","F"):Z(t,"RETRY_MODE_STANDARD","E"):Z(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const o=t.endpointV2;switch(String(o?.url?.hostname).match(Pu)&&Z(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":Z(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Z(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Z(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){const o=s;o.accountId&&Z(t,"RESOLVED_ACCOUNT_ID","T");for(const[i,a]of Object.entries(o.$source??{}))Z(t,i,a)}}const Sr="user-agent",ln="x-amz-user-agent",br=" ",fn="/",Du=/[^!$%&'*+\-.^_`|~\w]/g,Nu=/[^!$%&'*+\-.^_`|~\w#]/g,Ar="-",Mu=1024;function $u(t){let e="";for(const n in t){const r=t[n];if(e.length+r.length+1<=Mu){e.length?e+=","+r:e+=r;continue}break}return e}const Bu=t=>(e,n)=>async r=>{const{request:s}=r;if(!G.isInstance(s))return e(r);const{headers:o}=s,i=n?.userAgent?.map(Rt)||[],a=(await t.defaultUserAgentProvider()).map(Rt);await _u(n,t,r);const c=n;a.push(`m/${$u(Object.assign({},n.__smithy_context?.features,c.__aws_sdk_context?.features))}`);const u=t?.customUserAgent?.map(Rt)||[],l=await t.userAgentAppId();l&&a.push(Rt(["app",`${l}`]));const d=[].concat([...a,...i,...u]).join(br),f=[...a.filter(p=>p.startsWith("aws-sdk-")),...u].join(br);return t.runtime!=="browser"?(f&&(o[ln]=o[ln]?`${o[Sr]} ${f}`:f),o[Sr]=d):o[ln]=d,e({...r,request:s})},Rt=t=>{const e=t[0].split(fn).map(i=>i.replace(Du,Ar)).join(fn),n=t[1]?.replace(Nu,Ar),r=e.indexOf(fn),s=e.substring(0,r);let o=e.substring(r+1);return s==="api"&&(o=o.toLowerCase()),[s,o,n].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},Uu={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Lu=t=>({applyToStack:e=>{e.add(Bu(t),Uu)}}),ju=!1,Fu=!1,Ir=new Set,zu=(t,e=Vt)=>{if(!Ir.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else Ir.add(t)},zs=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),Hu=t=>zs(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,Wu=t=>{const{region:e,useFipsEndpoint:n}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{const r=typeof e=="function"?await e():e,s=Hu(r);return zu(s),s},useFipsEndpoint:async()=>{const r=typeof e=="string"?e:await e();return zs(r)?!0:typeof n!="function"?Promise.resolve(!!n):n()}})},xr="content-length";function Vu(t){return e=>async n=>{const r=n.request;if(G.isInstance(r)){const{body:s,headers:o}=r;if(s&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(xr)===-1)try{const i=t(s);r.headers={...r.headers,[xr]:String(i)}}catch{}}return e({...n,request:r})}}const Ku={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},qu=t=>({applyToStack:e=>{e.add(Vu(t.bodyLengthChecker),Ku)}}),Gu=async t=>{const e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Zu(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Xu(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},Ju=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Qu=/(\d+\.){3}\d+/,Yu=/\.\./,Xu=t=>Ju.test(t)&&!Qu.test(t)&&!Yu.test(t),Zu=t=>{const[e,n,r,,,s]=t.split(":"),o=e==="arn"&&t.split(":").length>=6,i=!!(o&&n&&r&&s);if(o&&!i)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return i},ed=(t,e,n)=>{const r=async()=>{const s=n[t]??n[e];return typeof s=="function"?s():s};return t==="credentialScope"||e==="CredentialScope"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.credentialScope??s?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.accountId??s?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(n.isCustomEndpoint===!1)return;const s=await r();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:o,hostname:i,port:a,path:c}=s;return`${o}//${i}${a?":"+a:""}${c}`}}return s}:r},Hs=async t=>{},Ws=t=>typeof t=="object"?"url"in t?Bt(t.url):t:Bt(t),td=async(t,e,n,r)=>{if(!n.isCustomEndpoint){let i;n.serviceConfiguredEndpoint?i=await n.serviceConfiguredEndpoint():i=await Hs(n.serviceId),i&&(n.endpoint=()=>Promise.resolve(Ws(i)),n.isCustomEndpoint=!0)}const s=await nd(t,e,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(s,r)},nd=async(t,e,n)=>{const r={},s=e?.getEndpointParameterInstructions?.()||{};for(const[o,i]of Object.entries(s))switch(i.type){case"staticContextParams":r[o]=i.value;break;case"contextParams":r[o]=t[i.name];break;case"clientContextParams":case"builtInParams":r[o]=await ed(i.name,o,n)();break;case"operationContextParams":r[o]=i.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(s).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()==="s3"&&await Gu(r),r},rd=({config:t,instructions:e})=>(n,r)=>async s=>{t.isCustomEndpoint&&Ya(r,"ENDPOINT_OVERRIDE","N");const o=await td(s.input,{getEndpointParameterInstructions(){return e}},{...t},r);r.endpointV2=o,r.authSchemes=o.properties?.authSchemes;const i=r.authSchemes?.[0];if(i){r.signing_region=i.signingRegion,r.signing_service=i.signingName;const c=Xe(r)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return n({...s})},sd={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:ea.name},xe=(t,e)=>({applyToStack:n=>{n.addRelativeTo(rd({config:t,instructions:e}),sd)}}),od=t=>{const e=t.tls??!0,{endpoint:n,useDualstackEndpoint:r,useFipsEndpoint:s}=t,o=n!=null?async()=>Ws(await ce(n)()):void 0,a=Object.assign(t,{endpoint:o,tls:e,isCustomEndpoint:!!n,useDualstackEndpoint:ce(r??!1),useFipsEndpoint:ce(s??!1)});let c;return a.serviceConfiguredEndpoint=async()=>(t.serviceId&&!c&&(c=Hs(t.serviceId)),c),a};var Qe;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(Qe||(Qe={}));const jt=3,id=Qe.STANDARD,ad=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],cd=["TimeoutError","RequestTimeout","RequestTimeoutException"],ud=[500,502,503,504],dd=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],ld=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],fd=t=>t?.$retryable!==void 0,hd=t=>t.$metadata?.clockSkewCorrected,pd=t=>{const e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},Vs=t=>t.$metadata?.httpStatusCode===429||ad.includes(t.name)||t.$retryable?.throttling==!0,_n=(t,e=0)=>fd(t)||hd(t)||cd.includes(t.name)||dd.includes(t?.code||"")||ld.includes(t?.code||"")||ud.includes(t.$metadata?.httpStatusCode||0)||pd(t)||t.cause!==void 0&&e<=10&&_n(t.cause,e+1),md=t=>{if(t.$metadata?.httpStatusCode!==void 0){const e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!_n(t)}return!1};class Dn{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const n=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(r=>Dn.setTimeoutFn(r,n))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const n=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=e}updateClientSendingRate(e){let n;if(this.updateMeasuredRate(),Vs(e)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());const r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),n=Math.floor(e*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){const r=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(e){return parseFloat(e.toFixed(8))}}const bn=100,Ks=20*1e3,gd=500,Tr=500,yd=5,wd=10,Ed=1,Sd="amz-sdk-invocation-id",bd="amz-sdk-request",Ad=()=>{let t=bn;return{computeNextBackoffDelay:r=>Math.floor(Math.min(Ks,Math.random()*2**r*t)),setDelayBase:r=>{t=r}}},vr=({retryDelay:t,retryCount:e,retryCost:n})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(Ks,t),getRetryCost:()=>n});class qs{maxAttempts;mode=Qe.STANDARD;capacity=Tr;retryBackoffStrategy=Ad();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return vr({retryDelay:bn,retryCount:0})}async refreshRetryTokenForRetry(e,n){const r=await this.getMaxAttempts();if(this.shouldRetry(e,n,r)){const s=n.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?gd:bn);const o=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),i=n.retryAfterHint?Math.max(n.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(s);return this.capacity-=a,vr({retryDelay:i,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(Tr,this.capacity+(e.getRetryCost()??Ed))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${jt}`),jt}}shouldRetry(e,n,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(n.errorType)&&this.isRetryableError(n.errorType)}getCapacityCost(e){return e==="TRANSIENT"?wd:yd}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class Id{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=Qe.ADAPTIVE;constructor(e,n){this.maxAttemptsProvider=e;const{rateLimiter:r}=n??{};this.rateLimiter=r??new Dn,this.standardRetryStrategy=new qs(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(e,n)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}const xd=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),Td=t=>{const{retryStrategy:e,retryMode:n,maxAttempts:r}=t,s=ce(r??jt);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await ce(n)()===Qe.ADAPTIVE?new Id(s):new qs(s))})},vd=t=>t?.body instanceof ReadableStream,Cd=t=>(e,n)=>async r=>{let s=await t.retryStrategy();const o=await t.maxAttempts();if(Rd(s)){s=s;let i=await s.acquireInitialRetryToken(n.partition_id),a=new Error,c=0,u=0;const{request:l}=r,d=G.isInstance(l);for(d&&(l.headers[Sd]=ms());;)try{d&&(l.headers[bd]=`attempt=${c+1}; max=${o}`);const{response:f,output:p}=await e(r);return s.recordSuccess(i),p.$metadata.attempts=c+1,p.$metadata.totalRetryDelay=u,{response:f,output:p}}catch(f){const p=kd(f);if(a=xd(f),d&&vd(l))throw(n.logger instanceof Us?console:n.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await s.refreshRetryTokenForRetry(i,p)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=i.getRetryCount();const m=i.getRetryDelay();u+=m,await new Promise(E=>setTimeout(E,m))}}else return s=s,s?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,r)},Rd=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",kd=t=>{const e={error:t,errorType:Od(t)},n=Dd(t.$response);return n&&(e.retryAfterHint=n),e},Od=t=>Vs(t)?"THROTTLING":_n(t)?"TRANSIENT":md(t)?"SERVER_ERROR":"CLIENT_ERROR",Pd={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},_d=t=>({applyToStack:e=>{e.add(Cd(t),Pd)}}),Dd=t=>{if(!Ge.isInstance(t))return;const e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;const n=t.headers[e],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(r*1e3)},Nd=async(t,e,n)=>({operation:Xe(e).operation,region:await ce(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Md(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"dynamodb",region:t.region},propertiesExtractor:(e,n)=>({signingProperties:{config:e,context:n}})}}const $d=t=>{const e=[];switch(t.operation){default:e.push(Md(t))}return e},Bd=t=>{const e=uu(t);return Object.assign(e,{authSchemePreference:ce(t.authSchemePreference??[])})},Ud=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"dynamodb"}),Te={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},AccountId:{type:"builtInParams",name:"accountId"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"},AccountIdEndpointMode:{type:"builtInParams",name:"accountIdEndpointMode"}};let T=class Gs extends We{constructor(e){super(e),Object.setPrototypeOf(this,Gs.prototype)}},Ld=class Js extends T{name="BackupInUseException";$fault="client";constructor(e){super({name:"BackupInUseException",$fault:"client",...e}),Object.setPrototypeOf(this,Js.prototype)}},jd=class Qs extends T{name="BackupNotFoundException";$fault="client";constructor(e){super({name:"BackupNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,Qs.prototype)}},Fd=class Ys extends T{name="InternalServerError";$fault="server";constructor(e){super({name:"InternalServerError",$fault:"server",...e}),Object.setPrototypeOf(this,Ys.prototype)}},zd=class Xs extends T{name="RequestLimitExceeded";$fault="client";ThrottlingReasons;constructor(e){super({name:"RequestLimitExceeded",$fault:"client",...e}),Object.setPrototypeOf(this,Xs.prototype),this.ThrottlingReasons=e.ThrottlingReasons}},Hd=class Zs extends T{name="ThrottlingException";$fault="client";throttlingReasons;constructor(e){super({name:"ThrottlingException",$fault:"client",...e}),Object.setPrototypeOf(this,Zs.prototype),this.throttlingReasons=e.throttlingReasons}},Wd=class eo extends T{name="InvalidEndpointException";$fault="client";Message;constructor(e){super({name:"InvalidEndpointException",$fault:"client",...e}),Object.setPrototypeOf(this,eo.prototype),this.Message=e.Message}},Vd=class to extends T{name="ProvisionedThroughputExceededException";$fault="client";ThrottlingReasons;constructor(e){super({name:"ProvisionedThroughputExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,to.prototype),this.ThrottlingReasons=e.ThrottlingReasons}},Kd=class no extends T{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,no.prototype)}},qd=class ro extends T{name="ItemCollectionSizeLimitExceededException";$fault="client";constructor(e){super({name:"ItemCollectionSizeLimitExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,ro.prototype)}},Gd=class so extends T{name="ReplicatedWriteConflictException";$fault="client";$retryable={};constructor(e){super({name:"ReplicatedWriteConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,so.prototype)}},Jd=class oo extends T{name="ContinuousBackupsUnavailableException";$fault="client";constructor(e){super({name:"ContinuousBackupsUnavailableException",$fault:"client",...e}),Object.setPrototypeOf(this,oo.prototype)}},Qd=class io extends T{name="LimitExceededException";$fault="client";constructor(e){super({name:"LimitExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,io.prototype)}},Yd=class ao extends T{name="TableInUseException";$fault="client";constructor(e){super({name:"TableInUseException",$fault:"client",...e}),Object.setPrototypeOf(this,ao.prototype)}},Xd=class co extends T{name="TableNotFoundException";$fault="client";constructor(e){super({name:"TableNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,co.prototype)}},Zd=class uo extends T{name="GlobalTableAlreadyExistsException";$fault="client";constructor(e){super({name:"GlobalTableAlreadyExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,uo.prototype)}},el=class lo extends T{name="ResourceInUseException";$fault="client";constructor(e){super({name:"ResourceInUseException",$fault:"client",...e}),Object.setPrototypeOf(this,lo.prototype)}},tl=class fo extends T{name="TransactionConflictException";$fault="client";constructor(e){super({name:"TransactionConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,fo.prototype)}},nl=class ho extends T{name="PolicyNotFoundException";$fault="client";constructor(e){super({name:"PolicyNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,ho.prototype)}},rl=class po extends T{name="ExportNotFoundException";$fault="client";constructor(e){super({name:"ExportNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,po.prototype)}},sl=class mo extends T{name="GlobalTableNotFoundException";$fault="client";constructor(e){super({name:"GlobalTableNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,mo.prototype)}},ol=class go extends T{name="ImportNotFoundException";$fault="client";constructor(e){super({name:"ImportNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,go.prototype)}},il=class yo extends T{name="DuplicateItemException";$fault="client";constructor(e){super({name:"DuplicateItemException",$fault:"client",...e}),Object.setPrototypeOf(this,yo.prototype)}},al=class wo extends T{name="IdempotentParameterMismatchException";$fault="client";Message;constructor(e){super({name:"IdempotentParameterMismatchException",$fault:"client",...e}),Object.setPrototypeOf(this,wo.prototype),this.Message=e.Message}},cl=class Eo extends T{name="TransactionInProgressException";$fault="client";Message;constructor(e){super({name:"TransactionInProgressException",$fault:"client",...e}),Object.setPrototypeOf(this,Eo.prototype),this.Message=e.Message}},ul=class So extends T{name="ExportConflictException";$fault="client";constructor(e){super({name:"ExportConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,So.prototype)}},dl=class bo extends T{name="InvalidExportTimeException";$fault="client";constructor(e){super({name:"InvalidExportTimeException",$fault:"client",...e}),Object.setPrototypeOf(this,bo.prototype)}},ll=class Ao extends T{name="PointInTimeRecoveryUnavailableException";$fault="client";constructor(e){super({name:"PointInTimeRecoveryUnavailableException",$fault:"client",...e}),Object.setPrototypeOf(this,Ao.prototype)}},fl=class Io extends T{name="ImportConflictException";$fault="client";constructor(e){super({name:"ImportConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,Io.prototype)}},hl=class xo extends T{name="TableAlreadyExistsException";$fault="client";constructor(e){super({name:"TableAlreadyExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,xo.prototype)}},pl=class To extends T{name="InvalidRestoreTimeException";$fault="client";constructor(e){super({name:"InvalidRestoreTimeException",$fault:"client",...e}),Object.setPrototypeOf(this,To.prototype)}},ml=class vo extends T{name="ReplicaAlreadyExistsException";$fault="client";constructor(e){super({name:"ReplicaAlreadyExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,vo.prototype)}},gl=class Co extends T{name="ReplicaNotFoundException";$fault="client";constructor(e){super({name:"ReplicaNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,Co.prototype)}},yl=class Ro extends T{name="IndexNotFoundException";$fault="client";constructor(e){super({name:"IndexNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,Ro.prototype)}},wl=class ko extends T{name="ConditionalCheckFailedException";$fault="client";Item;constructor(e){super({name:"ConditionalCheckFailedException",$fault:"client",...e}),Object.setPrototypeOf(this,ko.prototype),this.Item=e.Item}},El=class Oo extends T{name="TransactionCanceledException";$fault="client";Message;CancellationReasons;constructor(e){super({name:"TransactionCanceledException",$fault:"client",...e}),Object.setPrototypeOf(this,Oo.prototype),this.Message=e.Message,this.CancellationReasons=e.CancellationReasons}};const Sl="Action",bl="AttributeMap",Po="AttributesToGet",_o="AttributeUpdates",Al="AttributeValue",Nn="AttributeValueList",Il="AttributeValueUpdate",xl="Address",Mn="Attributes",Tl="BackupInUseException",vl="BackupNotFoundException",Cl="BOOL",Rl="BS",kl="BatchWriteItem",Ol="BatchWriteItemInput",Pl="BatchWriteItemOutput",_l="BatchWriteItemRequestMap",Dl="B",Nl="Code",Ml="ContinuousBackupsUnavailableException",ve="ConsumedCapacity",$l="ConditionalCheckFailedException",Bl="ConsumedCapacityMultiple",Do="ConditionCheck",Be="ConditionExpression",No="ComparisonOperator",qt="ConditionalOperator",Ul="CachePeriodInMinutes",Mo="ConsistentRead",Ll="CancellationReasonList",jl="ClientRequestToken",Fl="CancellationReason",zl="CancellationReasons",$o="CapacityUnits",Hl="Capacity",Wl="Condition",Vl="Count",Kl="DescribeEndpoints",ql="DescribeEndpointsRequest",Gl="DescribeEndpointsResponse",Jl="DeleteItem",Ql="DuplicateItemException",Yl="DeleteItemInput",Xl="DeleteItemOutput",Bo="DeleteRequest",Uo="Delete",Zl="ExpectedAttributeMap",ge="ExpressionAttributeNames",Ce="ExpressionAttributeValues",ef="ExpressionAttributeValueMap",tf="ExpectedAttributeValue",nf="ExportConflictException",rf="ExportNotFoundException",sf="ExclusiveStartKey",Lo="Endpoints",of="Endpoint",$n="Expected",af="Exists",cf="FilterConditionMap",uf="FilterExpression",df="GetItem",lf="GetItemInput",ff="GetItemOutput",hf="GlobalSecondaryIndexes",pf="GlobalTableAlreadyExistsException",mf="GlobalTableNotFoundException",et="Item",gf="ImportConflictException",yf="ItemCollectionKey",wf="ItemCollectionKeyAttributeMap",tt="ItemCollectionMetrics",Ef="ItemCollectionMetricsMultiple",Sf="ItemCollectionMetricsPerTable",bf="ItemCollectionSizeLimitExceededException",Af="InvalidEndpointException",If="InvalidExportTimeException",xf="ItemList",Tf="IndexName",vf="ImportNotFoundException",Cf="IndexNotFoundException",Rf="IdempotentParameterMismatchException",kf="InvalidRestoreTimeException",Of="InternalServerError",Pf="Items",Re="Key",jo="KeyConditions",_f="KeyConditionExpression",Df="Limit",Nf="ListAttributeValue",Mf="LimitExceededException",$f="LastEvaluatedKey",Bf="LocalSecondaryIndexes",Uf="L",At="Message",Lf="MapAttributeValue",jf="M",Ff="N",zf="NS",Hf="NULL",Fo="ProjectionExpression",Wf="PutItem",Vf="PutItemInput",Kf="PutItemInputAttributeMap",qf="PutItemOutput",Gf="PointInTimeRecoveryUnavailableException",Jf="PolicyNotFoundException",zo="PutRequest",Qf="ProvisionedThroughputExceededException",Ho="Put",Yf="Query",Xf="QueryFilter",Zf="QueryInput",eh="QueryOutput",th="ReplicaAlreadyExistsException",Ue="ReturnConsumedCapacity",Wo="ReadCapacityUnits",nh="RequestItems",It="ReturnItemCollectionMetrics",rh="ResourceInUseException",sh="RequestLimitExceeded",oh="ReplicaNotFoundException",ih="ResourceNotFoundException",Bn="ReturnValues",Le="ReturnValuesOnConditionCheckFailure",ah="ReplicatedWriteConflictException",ch="ScannedCount",uh="SizeEstimateRangeGB",dh="SecondaryIndexesCapacityMap",lh="ScanIndexForward",fh="SS",hh="S",ph="Select",mh="Table",gh="TableAlreadyExistsException",yh="TransactionCanceledException",wh="TransactionConflictException",Eh="ThrottlingException",Sh="TransactionInProgressException",bh="TableInUseException",Ah="TransactItems",le="TableName",Ih="TableNotFoundException",Vo="ThrottlingReasons",xh="ThrottlingReasonList",Th="ThrottlingReason",vh="TransactWriteItem",Ch="TransactWriteItemsInput",Rh="TransactWriteItemList",kh="TransactWriteItemsOutput",Oh="TransactWriteItems",Ko="Update",qo="UpdateExpression",Ph="UnprocessedItems",_h="UpdateItemInput",Dh="UpdateItemOutput",Nh="UpdateItem",Go="Value",Jo="WriteCapacityUnits",Mh="WriteRequest",$h="WriteRequests",Bh="awsQueryError",R="client",C="error",Qo="httpError",O="message",Uh="reason",Lh="resource",jh="server",Yo="smithy.ts.sdk.synthetic.com.amazonaws.dynamodb",Fh="throttlingReasons",h="com.amazonaws.dynamodb";var zh=[3,h,Il,0,[Go,Sl],[()=>fe,0]],Hh=[-3,h,Tl,{[C]:R},[O],[0]];b.for(h).registerError(Hh,Ld);var Wh=[-3,h,vl,{[C]:R},[O],[0]];b.for(h).registerError(Wh,jd);var Vh=[3,h,Ol,0,[nh,Ue,It],[()=>ni,0,0]],Kh=[3,h,Pl,0,[Ph,tt,ve],[()=>ni,()=>ri,()=>ti]],qh=[3,h,Fl,0,[et,Nl,At],[()=>je,0,0]],Xo=[3,h,Hl,0,[Wo,Jo,$o],[1,1,1]],Zo=[3,h,Wl,0,[Nn,No],[()=>ei,0]],Gh=[-3,h,$l,{[C]:R},[O,et],[0,()=>je]];b.for(h).registerError(Gh,wl);var Jh=[3,h,Do,0,[Re,le,Be,ge,Ce,Le],[()=>ye,0,0,128,()=>ke,0]],nt=[3,h,ve,0,[le,$o,Wo,Jo,mh,Bf,hf],[0,1,1,1,()=>Xo,()=>Cr,()=>Cr]],Qh=[-3,h,Ml,{[C]:R},[O],[0]];b.for(h).registerError(Qh,Jd);var Yh=[3,h,Uo,0,[Re,le,Be,ge,Ce,Le],[()=>ye,0,0,128,()=>ke,0]],Xh=[3,h,Yl,0,[le,Re,$n,qt,Bn,Ue,It,Be,ge,Ce,Le],[0,()=>ye,()=>Ln,0,0,0,0,0,128,()=>ke,0]],Zh=[3,h,Xl,0,[Mn,ve,tt],[()=>je,()=>nt,()=>Gt]],ep=[3,h,Bo,0,[Re],[()=>ye]],tp=[3,h,ql,0,[],[]],np=[3,h,Gl,0,[Lo],[()=>em]],rp=[-3,h,Ql,{[C]:R},[O],[0]];b.for(h).registerError(rp,il);var sp=[3,h,of,0,[xl,Ul],[0,1]],op=[3,h,tf,0,[Go,af,No,Nn],[()=>fe,2,0,()=>ei]],ip=[-3,h,nf,{[C]:R},[O],[0]];b.for(h).registerError(ip,ul);var ap=[-3,h,rf,{[C]:R},[O],[0]];b.for(h).registerError(ap,rl);var cp=[3,h,lf,0,[le,Re,Po,Mo,Ue,Fo,ge],[0,()=>ye,64,2,0,0,128]],up=[3,h,ff,0,[et,ve],[()=>je,()=>nt]],dp=[-3,h,pf,{[C]:R},[O],[0]];b.for(h).registerError(dp,Zd);var lp=[-3,h,mf,{[C]:R},[O],[0]];b.for(h).registerError(lp,sl);var fp=[-3,h,Rf,{[C]:R},[At],[0]];b.for(h).registerError(fp,al);var hp=[-3,h,gf,{[C]:R},[O],[0]];b.for(h).registerError(hp,fl);var pp=[-3,h,vf,{[C]:R},[O],[0]];b.for(h).registerError(pp,ol);var mp=[-3,h,Cf,{[C]:R},[O],[0]];b.for(h).registerError(mp,yl);var gp=[-3,h,Of,{[C]:jh},[O],[0]];b.for(h).registerError(gp,Fd);var yp=[-3,h,Af,{[C]:R,[Qo]:421},[At],[0]];b.for(h).registerError(yp,Wd);var wp=[-3,h,If,{[C]:R},[O],[0]];b.for(h).registerError(wp,dl);var Ep=[-3,h,kf,{[C]:R},[O],[0]];b.for(h).registerError(Ep,pl);var Gt=[3,h,tt,0,[yf,uh],[()=>cm,65]],Sp=[-3,h,bf,{[C]:R},[O],[0]];b.for(h).registerError(Sp,qd);var bp=[-3,h,Mf,{[C]:R},[O],[0]];b.for(h).registerError(bp,Qd);var Ap=[-3,h,Gf,{[C]:R},[O],[0]];b.for(h).registerError(Ap,ll);var Ip=[-3,h,Jf,{[C]:R},[O],[0]];b.for(h).registerError(Ip,nl);var xp=[-3,h,Qf,{[C]:R},[O,Vo],[0,()=>Un]];b.for(h).registerError(xp,Vd);var Tp=[3,h,Ho,0,[et,le,Be,ge,Ce,Le],[()=>jn,0,0,128,()=>ke,0]],vp=[3,h,Vf,0,[le,et,$n,Bn,Ue,It,qt,Be,ge,Ce,Le],[0,()=>jn,()=>Ln,0,0,0,0,0,128,()=>ke,0]],Cp=[3,h,qf,0,[Mn,ve,tt],[()=>je,()=>nt,()=>Gt]],Rp=[3,h,zo,0,[et],[()=>jn]],kp=[3,h,Zf,0,[le,Tf,ph,Po,Df,Mo,jo,Xf,qt,lh,sf,Ue,Fo,uf,_f,ge,Ce],[0,0,0,64,1,2,()=>um,()=>am,0,2,()=>ye,0,0,0,0,128,()=>ke]],Op=[3,h,eh,0,[Pf,Vl,ch,$f,ve],[()=>nm,1,1,()=>ye,()=>nt]],Pp=[-3,h,th,{[C]:R},[O],[0]];b.for(h).registerError(Pp,ml);var _p=[-3,h,oh,{[C]:R},[O],[0]];b.for(h).registerError(_p,gl);var Dp=[-3,h,ah,{[C]:R},[O],[0]];b.for(h).registerError(Dp,Gd);var Np=[-3,h,sh,{[C]:R},[O,Vo],[0,()=>Un]];b.for(h).registerError(Np,zd);var Mp=[-3,h,rh,{[C]:R},[O],[0]];b.for(h).registerError(Mp,el);var $p=[-3,h,ih,{[C]:R},[O],[0]];b.for(h).registerError($p,Kd);var Bp=[-3,h,gh,{[C]:R},[O],[0]];b.for(h).registerError(Bp,hl);var Up=[-3,h,bh,{[C]:R},[O],[0]];b.for(h).registerError(Up,Yd);var Lp=[-3,h,Ih,{[C]:R},[O],[0]];b.for(h).registerError(Lp,Xd);var jp=[-3,h,Eh,{[C]:R,[Qo]:400,[Bh]:["Throttling",400]},[O,Fh],[0,()=>Un]];b.for(h).registerError(jp,Hd);var Fp=[3,h,Th,0,[Uh,Lh],[0,0]],zp=[-3,h,yh,{[C]:R},[At,zl],[0,()=>Zp]];b.for(h).registerError(zp,El);var Hp=[-3,h,wh,{[C]:R},[O],[0]];b.for(h).registerError(Hp,tl);var Wp=[-3,h,Sh,{[C]:R},[At],[0]];b.for(h).registerError(Wp,cl);var Vp=[3,h,vh,0,[Do,Ho,Uo,Ko],[()=>Jh,()=>Tp,()=>Yh,()=>Gp]],Kp=[3,h,Ch,0,[Ah,Ue,It,jl],[()=>sm,0,0,[0,4]]],qp=[3,h,kh,0,[ve,tt],[()=>ti,()=>ri]],Gp=[3,h,Ko,0,[Re,qo,le,Be,ge,Ce,Le],[()=>ye,0,0,0,128,()=>ke,0]],Jp=[3,h,_h,0,[le,Re,_o,$n,qt,Bn,Ue,It,qo,Be,ge,Ce,Le],[0,()=>ye,()=>im,()=>Ln,0,0,0,0,0,0,128,()=>ke,0]],Qp=[3,h,Dh,0,[Mn,ve,tt],[()=>je,()=>nt,()=>Gt]],Yp=[3,h,Mh,0,[zo,Bo],[()=>Rp,()=>ep]],Xp=[-3,Yo,"DynamoDBServiceException",0,[],[]];b.for(Yo).registerError(Xp,T);var ei=[1,h,Nn,0,()=>fe],Zp=[1,h,Ll,0,()=>qh],ti=[1,h,Bl,0,()=>nt],em=[1,h,Lo,0,()=>sp],tm=[1,h,Ef,0,()=>Gt],nm=[1,h,xf,0,()=>je],rm=[1,h,Nf,0,()=>fe],Un=[1,h,xh,0,()=>Fp],sm=[1,h,Rh,0,()=>Vp],om=[1,h,$h,0,()=>Yp],je=[2,h,bl,0,0,()=>fe],im=[2,h,_o,0,0,()=>zh],ni=[2,h,_l,0,0,()=>om],Ln=[2,h,Zl,0,0,()=>op],ke=[2,h,ef,0,0,()=>fe],am=[2,h,cf,0,0,()=>Zo],cm=[2,h,wf,0,0,()=>fe],ri=[2,h,Sf,0,0,()=>tm],ye=[2,h,Re,0,0,()=>fe],um=[2,h,jo,0,0,()=>Zo],dm=[2,h,Lf,0,0,()=>fe],jn=[2,h,Kf,0,0,()=>fe],Cr=[2,h,dh,0,0,()=>Xo],fe=[3,h,Al,0,[hh,Ff,Dl,fh,zf,Rl,jf,Uf,Hf,Cl],[0,0,21,64,64,85,()=>dm,()=>rm,2,2]],lm=[9,h,kl,0,()=>Vh,()=>Kh],fm=[9,h,Jl,0,()=>Xh,()=>Zh],hm=[9,h,Kl,0,()=>tp,()=>np],pm=[9,h,df,0,()=>cp,()=>up],mm=[9,h,Wf,0,()=>vp,()=>Cp],gm=[9,h,Yf,0,()=>kp,()=>Op],ym=[9,h,Oh,0,()=>Kp,()=>qp],wm=[9,h,Nh,0,()=>Jp,()=>Qp];class Em extends de.classBuilder().ep(Te).m(function(e,n,r,s){return[xe(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeEndpoints",{}).n("DynamoDBClient","DescribeEndpointsCommand").sc(hm).build(){}const Sm="3.948.0",bm={version:Sm},Am=t=>new TextEncoder().encode(t);var Im=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:Am;function gt(t){return t instanceof Uint8Array?t:typeof t=="string"?Im(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}function An(t){return typeof t=="string"?t.length===0:t.byteLength===0}var si={name:"SHA-256"},Rr={name:"HMAC",hash:si},xm=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);const Tm={};function Pt(){return typeof window<"u"?window:typeof self<"u"?self:Tm}var vm=(function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!An(e)){var n=gt(e),r=new Uint8Array(this.toHash.byteLength+n.byteLength);r.set(this.toHash,0),r.set(n,this.toHash.byteLength),this.toHash=r}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(n){return Pt().crypto.subtle.sign(Rr,n,e.toHash).then(function(r){return new Uint8Array(r)})}):An(this.toHash)?Promise.resolve(xm):Promise.resolve().then(function(){return Pt().crypto.subtle.digest(si,e.toHash)}).then(function(n){return Promise.resolve(new Uint8Array(n))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(n,r){Pt().crypto.subtle.importKey("raw",gt(e.secret),Rr,!1,["sign"]).then(n,r)}),this.key.catch(function(){}))},t})();function Cm(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(l){try{u(r.next(l))}catch(d){i(d)}}function c(l){try{u(r.throw(l))}catch(d){i(d)}}function u(l){l.done?o(l.value):s(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function Rm(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(n=0)),n;)try{if(r=1,s&&(o=u[0]&2?s.return:u[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,u[1])).done)return o;switch(s=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(l){u=[6,l],s=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Y=64,km=32,Om=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pm=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],_m=Math.pow(2,53)-1,_t=(function(){function t(){this.state=Int32Array.from(Pm),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,r=e.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>_m)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=e[n++],r--,this.bufferLength===Y&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(n.setUint8(this.bufferLength++,128),r%Y>=Y-8){for(var s=this.bufferLength;s<Y;s++)n.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<Y-8;s++)n.setUint8(s,0);n.setUint32(Y-8,Math.floor(e/4294967296),!0),n.setUint32(Y-4,e),this.hashBuffer(),this.finished=!0}for(var o=new Uint8Array(km),s=0;s<8;s++)o[s*4]=this.state[s]>>>24&255,o[s*4+1]=this.state[s]>>>16&255,o[s*4+2]=this.state[s]>>>8&255,o[s*4+3]=this.state[s]>>>0&255;return o},t.prototype.hashBuffer=function(){for(var e=this,n=e.buffer,r=e.state,s=r[0],o=r[1],i=r[2],a=r[3],c=r[4],u=r[5],l=r[6],d=r[7],f=0;f<Y;f++){if(f<16)this.temp[f]=(n[f*4]&255)<<24|(n[f*4+1]&255)<<16|(n[f*4+2]&255)<<8|n[f*4+3]&255;else{var p=this.temp[f-2],m=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10;p=this.temp[f-15];var E=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[f]=(m+this.temp[f-7]|0)+(E+this.temp[f-16]|0)}var g=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&u^~c&l)|0)+(d+(Om[f]+this.temp[f]|0)|0)|0,I=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&o^s&i^o&i)|0;d=l,l=u,u=c,c=a+g|0,a=i,i=o,o=s,s=g+I|0}r[0]+=s,r[1]+=o,r[2]+=i,r[3]+=a,r[4]+=c,r[5]+=u,r[6]+=l,r[7]+=d},t})(),Dm=(function(){function t(e){this.secret=e,this.hash=new _t,this.reset()}return t.prototype.update=function(e){if(!(An(e)||this.error))try{this.hash.update(gt(e))}catch(n){this.error=n}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return Cm(this,void 0,void 0,function(){return Rm(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new _t,this.secret){this.outer=new _t;var e=Nm(this.secret),n=new Uint8Array(Y);n.set(e);for(var r=0;r<Y;r++)e[r]^=54,n[r]^=92;this.hash.update(e),this.outer.update(n);for(var r=0;r<e.byteLength;r++)e[r]=0}},t})();function Nm(t){var e=gt(t);if(e.byteLength>Y){var n=new _t;n.update(e),e=n.digest()}var r=new Uint8Array(Y);return r.set(e),r}var Mm=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function $m(t){if(Bm(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return Um(e)}return!1}function Bm(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function Um(t){return t&&Mm.every(function(e){return typeof t[e]=="function"})}var Lm=(function(){function t(e){$m(Pt())?this.hash=new vm(e):this.hash=new Dm(e)}return t.prototype.update=function(e,n){this.hash.update(gt(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t})();const jm=({serviceId:t,clientVersion:e})=>async n=>{const r=typeof window<"u"?window.navigator:void 0,s=r?.userAgent??"",o=r?.userAgentData?.platform??kr.os(s)??"other",i=void 0,a=r?.userAgentData?.brands??[],c=a[a.length-1],u=c?.brand??kr.browser(s)??"unknown",l=c?.version??"unknown",d=[["aws-sdk-js",e],["ua","2.1"],[`os/${o}`,i],["lang/js"],["md/browser",`${u}_${l}`]];t&&d.push([`api/${t}`,e]);const f=await n?.userAgentAppId?.();return f&&d.push([`app/${f}`]),d},kr={os(t){if(/iPhone|iPad|iPod/.test(t))return"iOS";if(/Macintosh|Mac OS X/.test(t))return"macOS";if(/Windows NT/.test(t))return"Windows";if(/Android/.test(t))return"Android";if(/Linux/.test(t))return"Linux"},browser(t){if(/EdgiOS|EdgA|Edg\//.test(t))return"Microsoft Edge";if(/Firefox\//.test(t))return"Firefox";if(/Chrome\//.test(t))return"Chrome";if(/Safari\//.test(t))return"Safari"}},Fm=t=>()=>Promise.reject(t),zm=["in-region","cross-region","mobile","standard","legacy"],Hm=({defaultsMode:t}={})=>Bc(async()=>{const e=typeof t=="function"?await t():t;switch(e?.toLowerCase()){case"auto":return Promise.resolve(Wm()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${zm.join(", ")}, got ${e}`)}}),Wm=()=>{const t=window?.navigator;if(t?.connection){const{effectiveType:e,rtt:n,downlink:r}=t?.connection;if(typeof e=="string"&&e!=="4g"||Number(n)>100||Number(r)<10)return!0}return t?.userAgentData?.mobile||typeof t?.maxTouchPoints=="number"&&t?.maxTouchPoints>1};class Vm extends Fs{constructor(){super({timestampFormat:{useTrait:!0,default:7},jsonName:!1})}createSerializer(){const e=new Km(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){const e=new qm(this.settings);return e.setSerdeContext(this.serdeContext),e}}const oi="com.amazonaws.dynamodb#AttributeValue";class Km extends js{_write(e,n,r){const s=D.of(e);if(s.isStructSchema()&&s.getName(!0)===oi&&n&&typeof n=="object"){const o=n,i=Lt(o),a=this.serdeContext?.base64Encoder??ht;if(o.B instanceof Uint8Array&&(i.B=a(o.B)),Array.isArray(o.BS)&&(i.BS=o.BS.map(a)),Array.isArray(o.L)&&(i.L=o.L.filter(c=>c!=null).map(c=>this._write(s,c,r))),o.M&&typeof o.M=="object"){i.M={};for(const[c,u]of Object.entries(o.M))u!=null&&(i.M[c]=this._write(s,u,r))}return i}return super._write(s,n,r)}}class qm extends Ls{_read(e,n){const r=D.of(e);if(r.isStructSchema()&&r.getName(!0)===oi&&n&&typeof n=="object"){const s=n,o=Lt(s),i=this.serdeContext?.base64Decoder??bt;if(typeof s.B=="string"&&(o.B=i(s.B)),Array.isArray(s.BS)&&(o.BS=s.BS.map(i)),Array.isArray(s.L)&&(o.L=s.L.map(a=>this._read(r,a))),s.M&&typeof s.M=="object"){o.M={};for(const[a,c]of Object.entries(s.M))o.M[a]=this._read(r,c)}return o}return super._read(r,n)}}const Fn="required",S="type",M="rules",_="conditions",y="fn",w="argv",x="ref",Ft="assign",te="url",ne="properties",re="headers",ii="metricValues",Gm=!1,$="error",W="stringEquals",Or="https://dynamodb.{Region}.{PartitionResult#dualStackDnsSuffix}",K="endpoint",B="tree",zn="dynamodb",ot={[Fn]:!1,[S]:"string"},Pr={[Fn]:!0,default:!1,[S]:"boolean"},_r={[y]:"isSet",[w]:[{[x]:"Endpoint"}]},Jm={[x]:"Endpoint"},Dr={[y]:"isSet",[w]:[{[x]:"Region"}]},ai={[x]:"Region"},Nr={[y]:"aws.partition",[w]:[ai],[Ft]:"PartitionResult"},Mr={[_]:[{[y]:"booleanEquals",[w]:[{[x]:"UseFIPS"},!0]}],[$]:"Invalid Configuration: FIPS and custom endpoint are not supported",[S]:$},rt={[y]:"booleanEquals",[w]:[{[x]:"UseFIPS"},!0]},$r={[_]:[{[y]:"booleanEquals",[w]:[{[x]:"UseDualStack"},!0]}],[$]:"Invalid Configuration: Dualstack and custom endpoint are not supported",[S]:$},ci={[y]:"booleanEquals",[w]:[{[x]:"UseDualStack"},!0]},Br={[K]:{[te]:"{Endpoint}",[ne]:{},[re]:{}},[S]:K},he={},Ur={[y]:"booleanEquals",[w]:[{[y]:"getAttr",[w]:[{[x]:"PartitionResult"},"supportsFIPS"]},!0]},Lr={[y]:"booleanEquals",[w]:[{[y]:"getAttr",[w]:[{[x]:"PartitionResult"},"supportsDualStack"]},!0]},hn={[_]:[{[y]:"isSet",[w]:[{[x]:"AccountIdEndpointMode"}]},{[y]:W,[w]:[{[x]:"AccountIdEndpointMode"},"required"]}],[M]:[{[$]:"Invalid Configuration: AccountIdEndpointMode is required and FIPS is enabled, but FIPS account endpoints are not supported",[S]:$}],[S]:B},xt={[y]:"getAttr",[w]:[{[x]:"PartitionResult"},"name"]},jr={[K]:{[te]:"https://dynamodb.{Region}.{PartitionResult#dnsSuffix}",[ne]:{},[re]:{}},[S]:K},Fr={[te]:"https://{ParsedArn#accountId}.ddb.{Region}.{PartitionResult#dualStackDnsSuffix}",[ne]:{[ii]:["O"]},[re]:{}},In={[ii]:["O"]},zr={[$]:"Credentials-sourced account ID parameter is invalid",[S]:$},Hr={[_]:[{[y]:"isSet",[w]:[{[x]:"AccountIdEndpointMode"}]},{[y]:W,[w]:[{[x]:"AccountIdEndpointMode"},"required"]}],[M]:[{[_]:[{[y]:"not",[w]:[rt]}],[M]:[{[_]:[{[y]:W,[w]:[xt,"aws"]}],[M]:[{[$]:"AccountIdEndpointMode is required but no AccountID was provided or able to be loaded",[S]:$}],[S]:B},{[$]:"Invalid Configuration: AccountIdEndpointMode is required but account endpoints are not supported in this partition",[S]:$}],[S]:B},{[$]:"Invalid Configuration: AccountIdEndpointMode is required and FIPS is enabled, but FIPS account endpoints are not supported",[S]:$}],[S]:B},Wr={[te]:"https://{ParsedArn#accountId}.ddb.{Region}.{PartitionResult#dnsSuffix}",[ne]:In,[re]:{}},Vr=[rt],Kr=[ci],qr=[{[y]:"isSet",[w]:[{[x]:"AccountIdEndpointMode"}]},{[y]:"not",[w]:[{[y]:W,[w]:[{[x]:"AccountIdEndpointMode"},"disabled"]}]},{[y]:W,[w]:[xt,"aws"]},{[y]:"not",[w]:[rt]},{[y]:"isSet",[w]:[{[x]:"ResourceArn"}]},{[y]:"aws.parseArn",[w]:[{[x]:"ResourceArn"}],[Ft]:"ParsedArn"},{[y]:W,[w]:[{[y]:"getAttr",[w]:[{[x]:"ParsedArn"},"service"]},zn]},{[y]:"isValidHostLabel",[w]:[{[y]:"getAttr",[w]:[{[x]:"ParsedArn"},"region"]},!1]},{[y]:W,[w]:[{[y]:"getAttr",[w]:[{[x]:"ParsedArn"},"region"]},"{Region}"]},{[y]:"isValidHostLabel",[w]:[{[y]:"getAttr",[w]:[{[x]:"ParsedArn"},"accountId"]},!1]}],Gr=[{[y]:"isSet",[w]:[{[x]:"AccountIdEndpointMode"}]},{[y]:"not",[w]:[{[y]:W,[w]:[{[x]:"AccountIdEndpointMode"},"disabled"]}]},{[y]:W,[w]:[xt,"aws"]},{[y]:"not",[w]:[rt]},{[y]:"isSet",[w]:[{[x]:"ResourceArnList"}]},{[y]:"getAttr",[w]:[{[x]:"ResourceArnList"},"[0]"],[Ft]:"FirstArn"},{[y]:"aws.parseArn",[w]:[{[x]:"FirstArn"}],[Ft]:"ParsedArn"},{[y]:W,[w]:[{[y]:"getAttr",[w]:[{[x]:"ParsedArn"},"service"]},zn]},{[y]:"isValidHostLabel",[w]:[{[y]:"getAttr",[w]:[{[x]:"ParsedArn"},"region"]},!1]},{[y]:W,[w]:[{[y]:"getAttr",[w]:[{[x]:"ParsedArn"},"region"]},"{Region}"]},{[y]:"isValidHostLabel",[w]:[{[y]:"getAttr",[w]:[{[x]:"ParsedArn"},"accountId"]},!1]}],Jr=[{[y]:"isSet",[w]:[{[x]:"AccountIdEndpointMode"}]},{[y]:"not",[w]:[{[y]:W,[w]:[{[x]:"AccountIdEndpointMode"},"disabled"]}]},{[y]:W,[w]:[xt,"aws"]},{[y]:"not",[w]:[rt]},{[y]:"isSet",[w]:[{[x]:"AccountId"}]}],Qr=[{[y]:"isValidHostLabel",[w]:[{[x]:"AccountId"},!1]}],Qm={parameters:{Region:ot,UseDualStack:Pr,UseFIPS:Pr,Endpoint:ot,AccountId:ot,AccountIdEndpointMode:ot,ResourceArn:ot,ResourceArnList:{[Fn]:Gm,[S]:"stringArray"}},[M]:[{[_]:[_r,Dr,Nr],[M]:[Mr,$r,{[_]:[{[y]:W,[w]:[Jm,Or]}],error:"Endpoint override is not supported for dual-stack endpoints. Please enable dual-stack functionality by enabling the configuration. For more details, see: https://docs.aws.amazon.com/sdkref/latest/guide/feature-endpoints.html",[S]:$},Br],[S]:B},{[_]:[_r],[M]:[Mr,$r,Br],[S]:B},{[_]:[Dr],[M]:[{[_]:[Nr],[M]:[{[_]:[{[y]:W,[w]:[ai,"local"]}],[M]:[{[_]:Vr,error:"Invalid Configuration: FIPS and local endpoint are not supported",[S]:$},{[_]:Kr,error:"Invalid Configuration: Dualstack and local endpoint are not supported",[S]:$},{endpoint:{[te]:"http://localhost:8000",[ne]:{authSchemes:[{name:"sigv4",signingName:zn,signingRegion:"us-east-1"}]},[re]:he},[S]:K}],[S]:B},{[_]:[rt,ci],[M]:[{[_]:[Ur,Lr],[M]:[hn,{endpoint:{[te]:"https://dynamodb-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[ne]:he,[re]:he},[S]:K}],[S]:B},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[S]:$}],[S]:B},{[_]:Vr,[M]:[{[_]:[Ur],[M]:[{[_]:[{[y]:W,[w]:[xt,"aws-us-gov"]}],[M]:[hn,jr],[S]:B},hn,{endpoint:{[te]:"https://dynamodb-fips.{Region}.{PartitionResult#dnsSuffix}",[ne]:he,[re]:he},[S]:K}],[S]:B},{error:"FIPS is enabled but this partition does not support FIPS",[S]:$}],[S]:B},{[_]:Kr,[M]:[{[_]:[Lr],[M]:[{[_]:qr,endpoint:Fr,[S]:K},{[_]:Gr,endpoint:Fr,[S]:K},{[_]:Jr,[M]:[{[_]:Qr,[M]:[{endpoint:{[te]:"https://{AccountId}.ddb.{Region}.{PartitionResult#dualStackDnsSuffix}",[ne]:In,[re]:he},[S]:K}],[S]:B},zr],[S]:B},Hr,{endpoint:{[te]:Or,[ne]:he,[re]:he},[S]:K}],[S]:B},{error:"DualStack is enabled but this partition does not support DualStack",[S]:$}],[S]:B},{[_]:qr,endpoint:Wr,[S]:K},{[_]:Gr,endpoint:Wr,[S]:K},{[_]:Jr,[M]:[{[_]:Qr,[M]:[{endpoint:{[te]:"https://{AccountId}.ddb.{Region}.{PartitionResult#dnsSuffix}",[ne]:In,[re]:he},[S]:K}],[S]:B},zr],[S]:B},Hr,jr],[S]:B}],[S]:B},{error:"Invalid Configuration: Missing Region",[S]:$}]},Ym=Qm,Xm=new ic({size:50,params:["AccountId","AccountIdEndpointMode","Endpoint","Region","ResourceArn","ResourceArnList","UseDualStack","UseFIPS"]}),Zm=(t,e={})=>Xm.get(t,()=>Tc(Ym,{endpointParams:t,logger:e.logger}));$t.aws=ks;const eg=t=>({apiVersion:"2012-08-10",base64Decoder:t?.base64Decoder??bt,base64Encoder:t?.base64Encoder??ht,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??Zm,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??$d,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new $c}],logger:t?.logger??new Us,protocol:t?.protocol??new Ou({defaultNamespace:"com.amazonaws.dynamodb",serviceTarget:"DynamoDB_20120810",awsQueryCompatible:!1,jsonCodec:new Vm}),serviceId:t?.serviceId??"DynamoDB",urlParser:t?.urlParser??Bt,utf8Decoder:t?.utf8Decoder??Je,utf8Encoder:t?.utf8Encoder??Tn}),tg=t=>{const e=Hm(t),n=()=>e().then(pu),r=eg(t);return{...r,...t,runtime:"browser",defaultsMode:e,accountIdEndpointMode:t?.accountIdEndpointMode??(()=>Promise.resolve(cs)),bodyLengthChecker:t?.bodyLengthChecker??fu,credentialDefaultProvider:t?.credentialDefaultProvider??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:t?.defaultUserAgentProvider??jm({serviceId:r.serviceId,clientVersion:bm.version}),endpointDiscoveryEnabledProvider:t?.endpointDiscoveryEnabledProvider??(()=>Promise.resolve(void 0)),maxAttempts:t?.maxAttempts??jt,region:t?.region??Fm("Region is missing"),requestHandler:vn.create(t?.requestHandler??n),retryMode:t?.retryMode??(async()=>(await n()).retryMode||id),sha256:t?.sha256??Lm,streamCollector:t?.streamCollector??la,useDualstackEndpoint:t?.useDualstackEndpoint??(()=>Promise.resolve(ju)),useFipsEndpoint:t?.useFipsEndpoint??(()=>Promise.resolve(Fu))}},ng=t=>({setRegion(e){t.region=e},region(){return t.region}}),rg=t=>({region:t.region()}),sg=t=>{const e=t.httpAuthSchemes;let n=t.httpAuthSchemeProvider,r=t.credentials;return{setHttpAuthScheme(s){const o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){n=s},httpAuthSchemeProvider(){return n},setCredentials(s){r=s},credentials(){return r}}},og=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),ig=(t,e)=>{const n=Object.assign(ng(t),Eu(t),ki(t),sg(t));return e.forEach(r=>r.configure(n)),Object.assign(t,rg(n),Su(n),Oi(n),og(n))};class ag extends Bs{config;constructor(...[e]){const n=tg(e||{});super(n),this.initConfig=n;const r=Ud(n),s=Ri(r),o=oc(s),i=Td(o),a=Wu(i),c=a,u=od(c),l=Bd(u),d=Li(l,{endpointDiscoveryCommandCtor:Em}),f=ig(d,e?.extensions||[]);this.config=f,this.middlewareStack.use(Sa(this.config)),this.middlewareStack.use(Lu(this.config)),this.middlewareStack.use(_d(this.config)),this.middlewareStack.use(qu(this.config)),this.middlewareStack.use(zi(this.config)),this.middlewareStack.use(Vi(this.config)),this.middlewareStack.use(Gi(this.config)),this.middlewareStack.use(Zi(this.config,{httpAuthSchemeParametersProvider:Nd,identityProviderConfigProvider:async p=>new Xa({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(oa(this.config))}destroy(){super.destroy()}}class cg extends de.classBuilder().ep({...Te,ResourceArnList:{type:"operationContextParams",get:e=>Object.keys(e?.RequestItems??{})}}).m(function(e,n,r,s){return[xe(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","BatchWriteItem",{}).n("DynamoDBClient","BatchWriteItemCommand").sc(lm).build(){}class ug extends de.classBuilder().ep({...Te,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,n,r,s){return[xe(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DeleteItem",{}).n("DynamoDBClient","DeleteItemCommand").sc(fm).build(){}class dg extends de.classBuilder().ep({...Te,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,n,r,s){return[xe(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","GetItem",{}).n("DynamoDBClient","GetItemCommand").sc(pm).build(){}class lg extends de.classBuilder().ep({...Te,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,n,r,s){return[xe(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","PutItem",{}).n("DynamoDBClient","PutItemCommand").sc(mm).build(){}let fg=class extends de.classBuilder().ep({...Te,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,n,r,s){return[xe(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","Query",{}).n("DynamoDBClient","QueryCommand").sc(gm).build(){};class hg extends de.classBuilder().ep({...Te,ResourceArnList:{type:"operationContextParams",get:e=>e?.TransactItems?.map(n=>[n?.ConditionCheck?.TableName,n?.Put?.TableName,n?.Delete?.TableName,n?.Update?.TableName].filter(r=>r)).flat()}}).m(function(e,n,r,s){return[xe(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","TransactWriteItems",{}).n("DynamoDBClient","TransactWriteItemsCommand").sc(ym).build(){}class pg extends de.classBuilder().ep({...Te,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,n,r,s){return[xe(r,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateItem",{}).n("DynamoDBClient","UpdateItemCommand").sc(wm).build(){}function ui(t){return Promise.all(Object.keys(t).reduce((e,n)=>{const r=t[n];return typeof r=="string"?e.push([n,r]):e.push(r().then(s=>[n,s])),e},[])).then(e=>e.reduce((n,[r,s])=>(n[r]=s,n),{}))}function mg(t){return async e=>{t.logger?.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");const{GetCredentialsForIdentityCommand:n,CognitoIdentityClient:r}=await xn(async()=>{const{GetCredentialsForIdentityCommand:u,CognitoIdentityClient:l}=await import("./DC8Slc7L.js");return{GetCredentialsForIdentityCommand:u,CognitoIdentityClient:l}},[],import.meta.url),s=u=>t.clientConfig?.[u]??t.parentClientConfig?.[u]??e?.callerClientConfig?.[u],{Credentials:{AccessKeyId:o=gg(t.logger),Expiration:i,SecretKey:a=wg(t.logger),SessionToken:c}=yg(t.logger)}=await(t.client??new r(Object.assign({},t.clientConfig??{},{region:s("region"),profile:s("profile"),userAgentAppId:s("userAgentAppId")}))).send(new n({CustomRoleArn:t.customRoleArn,IdentityId:t.identityId,Logins:t.logins?await ui(t.logins):void 0}));return{identityId:t.identityId,accessKeyId:o,secretAccessKey:a,sessionToken:c,expiration:i}}}function gg(t){throw new Ze("Response from Amazon Cognito contained no access key ID",{logger:t})}function yg(t){throw new Ze("Response from Amazon Cognito contained no credentials",{logger:t})}function wg(t){throw new Ze("Response from Amazon Cognito contained no secret key",{logger:t})}const pn="IdentityIds";class Eg{dbName;constructor(e="aws:cognito-identity-ids"){this.dbName=e}getItem(e){return this.withObjectStore("readonly",n=>{const r=n.get(e);return new Promise(s=>{r.onerror=()=>s(null),r.onsuccess=()=>s(r.result?r.result.value:null)})}).catch(()=>null)}removeItem(e){return this.withObjectStore("readwrite",n=>{const r=n.delete(e);return new Promise((s,o)=>{r.onerror=()=>o(r.error),r.onsuccess=()=>s()})})}setItem(e,n){return this.withObjectStore("readwrite",r=>{const s=r.put({id:e,value:n});return new Promise((o,i)=>{s.onerror=()=>i(s.error),s.onsuccess=()=>o()})})}getDb(){const e=self.indexedDB.open(this.dbName,1);return new Promise((n,r)=>{e.onsuccess=()=>{n(e.result)},e.onerror=()=>{r(e.error)},e.onblocked=()=>{r(new Error("Unable to access DB"))},e.onupgradeneeded=()=>{const s=e.result;s.onerror=()=>{r(new Error("Failed to create object store"))},s.createObjectStore(pn,{keyPath:"id"})}})}withObjectStore(e,n){return this.getDb().then(r=>{const s=r.transaction(pn,e);return s.oncomplete=()=>r.close(),new Promise((o,i)=>{s.onerror=()=>i(s.error),o(n(s.objectStore(pn)))}).catch(o=>{throw r.close(),o})})}}class Sg{store;constructor(e={}){this.store=e}getItem(e){return e in this.store?this.store[e]:null}removeItem(e){delete this.store[e]}setItem(e,n){this.store[e]=n}}const bg=new Sg;function Ag(){return typeof self=="object"&&self.indexedDB?new Eg:typeof window=="object"&&window.localStorage?window.localStorage:bg}function Ig({accountId:t,cache:e=Ag(),client:n,clientConfig:r,customRoleArn:s,identityPoolId:o,logins:i,userIdentifier:a=!i||Object.keys(i).length===0?"ANONYMOUS":void 0,logger:c,parentClientConfig:u}){c?.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");const l=a?`aws:cognito-identity-credentials:${o}:${a}`:void 0;let d=async f=>{const{GetIdCommand:p,CognitoIdentityClient:m}=await xn(async()=>{const{GetIdCommand:A,CognitoIdentityClient:U}=await import("./DC8Slc7L.js");return{GetIdCommand:A,CognitoIdentityClient:U}},[],import.meta.url),E=A=>r?.[A]??u?.[A]??f?.callerClientConfig?.[A],g=n??new m(Object.assign({},r??{},{region:E("region"),profile:E("profile"),userAgentAppId:E("userAgentAppId")}));let I=l&&await e.getItem(l);if(!I){const{IdentityId:A=xg(c)}=await g.send(new p({AccountId:t,IdentityPoolId:o,Logins:i?await ui(i):void 0}));I=A,l&&Promise.resolve(e.setItem(l,I)).catch(()=>{})}return d=mg({client:g,customRoleArn:s,logins:i,identityId:I}),d(f)};return f=>d(f).catch(async p=>{throw l&&Promise.resolve(e.removeItem(l)).catch(()=>{}),p})}function xg(t){throw new Ze("Response from Amazon Cognito contained no identity ID",{logger:t})}class Tt{value;constructor(e){typeof e=="object"&&"N"in e?this.value=String(e.N):this.value=String(e);const n=typeof e.valueOf()=="number"?e.valueOf():0;if(n>Number.MAX_SAFE_INTEGER||n<Number.MIN_SAFE_INTEGER||Math.abs(n)===1/0||Number.isNaN(n))throw new Error(`NumberValue should not be initialized with an imprecise number=${n}. Use a string instead.`)}static from(e){return new Tt(e)}toAttributeValue(){return{N:this.toString()}}toBigInt(){const e=this.toString();return BigInt(e)}toString(){return String(this.value)}valueOf(){return this.toString()}}const Jt=(t,e)=>{if(t===void 0)throw new Error("Pass options.removeUndefinedValues=true to remove undefined values from map/array/set.");if(t===null&&typeof t=="object")return Dt();if(Array.isArray(t))return Tg(t,e);if(t?.constructor?.name==="Set")return vg(t,e);if(t?.constructor?.name==="Map")return Cg(t,e);if(t?.constructor?.name==="Object"||!t.constructor&&typeof t=="object")return Yr(t,e);if(pi(t))return t.length===0&&e?.convertEmptyValues?Dt():di(t);if(typeof t=="boolean"||t?.constructor?.name==="Boolean")return{BOOL:t.valueOf()};if(typeof t=="number"||t?.constructor?.name==="Number")return hi(t,e);if(t instanceof Tt)return t.toAttributeValue();if(typeof t=="bigint")return fi(t);if(typeof t=="string"||t?.constructor?.name==="String")return t.length===0&&e?.convertEmptyValues?Dt():li(t);if(e?.convertClassInstanceToMap&&typeof t=="object")return Yr(t,e);throw new Error(`Unsupported type passed: ${t}. Pass options.convertClassInstanceToMap=true to marshall typeof object as map attribute.`)},Tg=(t,e)=>({L:t.filter(n=>typeof n!="function"&&(!e?.removeUndefinedValues||e?.removeUndefinedValues&&n!==void 0)).map(n=>Jt(n,e))}),vg=(t,e)=>{const n=e?.removeUndefinedValues?new Set([...t].filter(s=>s!==void 0)):t;if(!e?.removeUndefinedValues&&n.has(void 0))throw new Error("Pass options.removeUndefinedValues=true to remove undefined values from map/array/set.");if(n.size===0){if(e?.convertEmptyValues)return Dt();throw new Error("Pass a non-empty set, or options.convertEmptyValues=true.")}const r=n.values().next().value;if(r instanceof Tt)return{NS:Array.from(n).map(s=>s.toString())};if(typeof r=="number")return{NS:Array.from(n).map(s=>hi(s,e)).map(s=>s.N)};if(typeof r=="bigint")return{NS:Array.from(n).map(fi).map(s=>s.N)};if(typeof r=="string")return{SS:Array.from(n).map(li).map(s=>s.S)};if(pi(r))return{BS:Array.from(n).map(di).map(s=>s.B)};throw new Error("Only Number Set (NS), Binary Set (BS) or String Set (SS) are allowed.")},Cg=(t,e)=>({M:(n=>{const r={};for(const[s,o]of n)typeof o!="function"&&(o!==void 0||!e?.removeUndefinedValues)&&(r[s]=Jt(o,e));return r})(t)}),Yr=(t,e)=>({M:(n=>{const r={};for(const s in n){const o=n[s];typeof o!="function"&&(o!==void 0||!e?.removeUndefinedValues)&&(r[s]=Jt(o,e))}return r})(t)}),Dt=()=>({NULL:!0}),di=t=>({B:t}),li=t=>({S:t.toString()}),fi=t=>({N:t.toString()}),Xr=t=>{throw new Error(`${t} Use NumberValue from @aws-sdk/lib-dynamodb.`)},hi=(t,e)=>{if([Number.NaN,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY].map(n=>n.toString()).includes(t.toString()))throw new Error(`Special numeric value ${t.toString()} is not allowed`);return e?.allowImpreciseNumbers||(Number(t)>Number.MAX_SAFE_INTEGER?Xr(`Number ${t.toString()} is greater than Number.MAX_SAFE_INTEGER.`):Number(t)<Number.MIN_SAFE_INTEGER&&Xr(`Number ${t.toString()} is lesser than Number.MIN_SAFE_INTEGER.`)),{N:t.toString()}},pi=t=>{const e=["ArrayBuffer","Blob","Buffer","DataView","File","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];return t?.constructor?e.includes(t.constructor.name):!1},zt=(t,e)=>{for(const[n,r]of Object.entries(t))if(r!==void 0)switch(n){case"NULL":return null;case"BOOL":return!!r;case"N":return Zr(r,e);case"B":return ts(r);case"S":return es(r);case"L":return Rg(r,e);case"M":return kg(r,e);case"NS":return new Set(r.map(s=>Zr(s,e)));case"BS":return new Set(r.map(ts));case"SS":return new Set(r.map(es));default:throw new Error(`Unsupported type passed: ${n}`)}throw new Error(`No value defined: ${JSON.stringify(t)}`)},Zr=(t,e)=>{if(typeof e?.wrapNumbers=="function")return e?.wrapNumbers(t);if(e?.wrapNumbers)return Tt.from(t);const n=Number(t),r=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];if((n>Number.MAX_SAFE_INTEGER||n<Number.MIN_SAFE_INTEGER)&&!r.includes(n))if(typeof BigInt=="function")try{return BigInt(t)}catch{throw new Error(`${t} can't be converted to BigInt. Set options.wrapNumbers to get string value.`)}else throw new Error(`${t} is outside SAFE_INTEGER bounds. Set options.wrapNumbers to get string value.`);return n},es=t=>t,ts=t=>t,Rg=(t,e)=>t.map(n=>zt(n,e)),kg=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(n[r]=zt(s,e),n),{});function Og(t,e){const n=Jt(t,e),[r,s]=Object.entries(n)[0];switch(r){case"M":case"L":return e?.convertTopLevelContainer?n:s;case"SS":case"NS":case"BS":case"S":case"N":case"B":case"NULL":case"BOOL":case"$unknown":default:return n}}const Pg=(t,e)=>e?.convertWithoutMapWrapper?zt(t,e):zt({M:t},e),yt=null,k={},wt=[],ns="*",Ht=(t,e,n)=>{if(t!==void 0){if(n==null)return e(t);{const r=Object.keys(n),s=r.length===1&&r[0]===ns,o=r.length>=1&&!s,i=r.length===0;if(o)return Hn(t,e,n);if(i)return _g(t,e,yt);if(s)return Object.entries(t??{}).reduce((a,[c,u])=>(typeof u!="function"&&(a[c]=Ht(u,e,n[ns])),a),Array.isArray(t)?[]:{})}}},Hn=(t,e,n)=>{let r;if(Array.isArray(t))r=t.filter(s=>typeof s!="function");else{r={};for(const[s,o]of Object.entries(t))typeof o!="function"&&(r[s]=o)}for(const[s,o]of Object.entries(n)){if(typeof t[s]=="function")continue;const i=Ht(t[s],e,o);i!==void 0&&typeof i!="function"&&(r[s]=i)}return r},_g=(t,e,n)=>Array.isArray(t)?t.filter(r=>typeof r!="function").map(r=>Ht(r,e,n)):Object.entries(t).reduce((r,[s,o])=>{if(typeof o=="function")return r;const i=Ht(o,e,n);return i!==void 0&&typeof i!="function"&&(r[s]=i),r},{}),Dg=(t,e,n)=>Hn(t,s=>Og(s,n),e),Ng=(t,e,n)=>Hn(t,s=>Pg(s,n),e);class Fe extends de{addMarshallingMiddleware(e){const{marshallOptions:n={},unmarshallOptions:r={}}=e.translateConfig||{};n.convertTopLevelContainer=n.convertTopLevelContainer??!0,r.convertWithoutMapWrapper=r.convertWithoutMapWrapper??!0,this.clientCommand.middlewareStack.addRelativeTo((s,o)=>async i=>(Z(o,"DDB_MAPPER","d"),s({...i,input:Dg(i.input,this.inputKeyNodes,n)})),{name:"DocumentMarshall",relation:"before",toMiddleware:"serializerMiddleware",override:!0}),this.clientCommand.middlewareStack.addRelativeTo((s,o)=>async i=>{const a=await s(i);return a.output=Ng(a.output,this.outputKeyNodes,r),a},{name:"DocumentUnmarshall",relation:"before",toMiddleware:"deserializerMiddleware",override:!0})}}class Mg extends Fe{input;inputKeyNodes={RequestItems:{"*":{"*":{PutRequest:{Item:k},DeleteRequest:{Key:k}}}}};outputKeyNodes={UnprocessedItems:{"*":{"*":{PutRequest:{Item:k},DeleteRequest:{Key:k}}}},ItemCollectionMetrics:{"*":{"*":{ItemCollectionKey:k}}}};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new cg(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),o=this.clientCommand.resolveMiddleware(s,n,r);return async()=>o(this.clientCommand)}}class $g extends Fe{input;inputKeyNodes={Key:k,Expected:{"*":{Value:yt,AttributeValueList:wt}},ExpressionAttributeValues:k};outputKeyNodes={Attributes:k,ItemCollectionMetrics:{ItemCollectionKey:k}};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new ug(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),o=this.clientCommand.resolveMiddleware(s,n,r);return async()=>o(this.clientCommand)}}class Bg extends Fe{input;inputKeyNodes={Key:k};outputKeyNodes={Item:k};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new dg(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),o=this.clientCommand.resolveMiddleware(s,n,r);return async()=>o(this.clientCommand)}}class Ug extends Fe{input;inputKeyNodes={Item:k,Expected:{"*":{Value:yt,AttributeValueList:wt}},ExpressionAttributeValues:k};outputKeyNodes={Attributes:k,ItemCollectionMetrics:{ItemCollectionKey:k}};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new lg(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),o=this.clientCommand.resolveMiddleware(s,n,r);return async()=>o(this.clientCommand)}}class Lg extends Fe{input;inputKeyNodes={KeyConditions:{"*":{AttributeValueList:wt}},QueryFilter:{"*":{AttributeValueList:wt}},ExclusiveStartKey:k,ExpressionAttributeValues:k};outputKeyNodes={Items:{"*":k},LastEvaluatedKey:k};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new fg(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),o=this.clientCommand.resolveMiddleware(s,n,r);return async()=>o(this.clientCommand)}}class jg extends Fe{input;inputKeyNodes={TransactItems:{"*":{ConditionCheck:{Key:k,ExpressionAttributeValues:k},Put:{Item:k,ExpressionAttributeValues:k},Delete:{Key:k,ExpressionAttributeValues:k},Update:{Key:k,ExpressionAttributeValues:k}}}};outputKeyNodes={ItemCollectionMetrics:{"*":{"*":{ItemCollectionKey:k}}}};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new hg(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),o=this.clientCommand.resolveMiddleware(s,n,r);return async()=>o(this.clientCommand)}}class Fg extends Fe{input;inputKeyNodes={Key:k,AttributeUpdates:{"*":{Value:yt}},Expected:{"*":{Value:yt,AttributeValueList:wt}},ExpressionAttributeValues:k};outputKeyNodes={Attributes:k,ItemCollectionMetrics:{ItemCollectionKey:k}};clientCommand;middlewareStack;constructor(e){super(),this.input=e,this.clientCommand=new pg(this.input),this.middlewareStack=this.clientCommand.middlewareStack}resolveMiddleware(e,n,r){this.addMarshallingMiddleware(n);const s=e.concat(this.middlewareStack),o=this.clientCommand.resolveMiddleware(s,n,r);return async()=>o(this.clientCommand)}}class Wn extends Bs{config;constructor(e,n){if(super(e.config),this.config=e.config,this.config.translateConfig=n,this.middlewareStack=e.middlewareStack,this.config?.cacheMiddleware)throw new Error("@aws-sdk/lib-dynamodb - cacheMiddleware=true is not compatible with the DynamoDBDocumentClient. This option must be set to false.")}static from(e,n){return new Wn(e,n)}destroy(){}}class F{static singleton;static tableName="socialitix_items";static userId="";db;client;static init=()=>{if(console.log("Initializing database connections..."),this.singleton)return console.log("Found database singleton.."),this.singleton;let e=localStorage.getItem("IdentityPoolId");if(!e)if(e=prompt("Enter the credential: "),e)localStorage.setItem("IdentityPoolId",e);else throw alert("Need credential to connect to database.."),new Error("Cannot connect without credential...");let n=localStorage.getItem("UserId");if(!n)if(n=prompt("Enter your user ID: "),n)localStorage.setItem("UserId",n);else throw alert("Need user ID to continue.."),new Error("Cannot continue without user ID...");return this.userId=n,this.singleton=new F(e),this.singleton};constructor(e){this.db=new ag({region:"ap-south-1",credentials:Ig({identityPoolId:e,clientConfig:{region:"ap-south-1"}})}),this.client=Wn.from(this.db,{marshallOptions:{removeUndefinedValues:!0}}),console.log("Connected to dynamo db successfully...")}async get(e,n){return(await this.client.send(new Bg({TableName:F.tableName,Key:{PK:e,SK:n}}))).Item??null}async query(e,n){const r={TableName:F.tableName,KeyConditionExpression:n?"PK = :pk AND begins_with(SK, :sk)":"PK = :pk",ExpressionAttributeValues:{":pk":e,...n&&{":sk":n}}};return(await this.client.send(new Lg(r))).Items??[]}async put(e){await this.client.send(new Ug({TableName:F.tableName,Item:e}))}buildUpdateExpression(e){const n=[],r={},s={};return Object.entries(e).filter(([i,a])=>a!==void 0).forEach(([i,a],c)=>{const u=`#attr${c}`,l=`:val${c}`;n.push(`${u} = ${l}`),r[u]=i,s[l]=a}),{UpdateExpression:`SET ${n.join(", ")}`,ExpressionAttributeNames:r,ExpressionAttributeValues:s}}async update(e,n,r){const s=Object.fromEntries(Object.entries(r).filter(([o,i])=>i!==void 0));if(Object.keys(s).length===0){console.log("No updates to apply, skipping...");return}await this.client.send(new Fg({TableName:F.tableName,Key:{PK:e,SK:n},...this.buildUpdateExpression(s)}))}async remove(e,n){await this.client.send(new $g({TableName:F.tableName,Key:{PK:e,SK:n}}))}async batchWrite(e=[],n=[]){const r=[...e.map(s=>({PutRequest:{Item:s}})),...n.map(s=>({DeleteRequest:{Key:{PK:s.PK,SK:s.SK}}}))];if(r.length!==0){if(r.length>25)throw new Error("Batch write limited to 25 items");await this.client.send(new Mg({RequestItems:{[F.tableName]:r}}))}}async transactWrite(e){const n=e.map(r=>r.type==="put"?{Put:{TableName:F.tableName,Item:r.item}}:r.type==="update"?{Update:{TableName:F.tableName,Key:{PK:r.pk,SK:r.sk},...this.buildUpdateExpression(r.updates)}}:{Delete:{TableName:F.tableName,Key:{PK:r.pk,SK:r.sk}}});await this.client.send(new jg({TransactItems:n}))}}const Pe="PLN",v={areas:t=>`${Pe}#${t}#AREAS`,area:(t,e)=>`${Pe}#${t}#AREA#${e}`,project:(t,e)=>`${Pe}#${t}#PROJECT#${e}`,weeks:t=>`${Pe}#${t}#WEEKS`,week:(t,e)=>`${Pe}#${t}#WEEK#${e}`,completedProjects:(t,e)=>`${Pe}#${t}#COMPLETEDPROJ#${e}`,inbox:t=>`${Pe}#${t}#INBOX`},P={area:t=>`AREA#${t}`,project:t=>`PROJECT#${t}`,oneOff:t=>`ONEOFF#${t}`,task:t=>`TASK#${t}`,week:t=>`WEEK#${t}`,weekProject:t=>`PROJECT#${t}`,weekOneOff:t=>`ONEOFF#${t}`,weekTaskByDay:(t,e)=>`DAY#${t}#TASK#${e}`,inboxItem:t=>`ITEM#${t}`},Me={area:"AREA#",project:"PROJECT#",oneOff:"ONEOFF#",task:"TASK#",day:"DAY#"},zg="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Ve(t,e,n){const r=n[0];if(e!=null&&t>=e)throw new Error(t+" >= "+e);if(t.slice(-1)===r||e&&e.slice(-1)===r)throw new Error("trailing zero");if(e){let i=0;for(;(t[i]||r)===e[i];)i++;if(i>0)return e.slice(0,i)+Ve(t.slice(i),e.slice(i),n)}const s=t?n.indexOf(t[0]):0,o=e!=null?n.indexOf(e[0]):n.length;if(o-s>1){const i=Math.round(.5*(s+o));return n[i]}else return e&&e.length>1?e.slice(0,1):n[s]+Ve(t.slice(1),null,n)}function mi(t){if(t.length!==gi(t[0]))throw new Error("invalid integer part of order key: "+t)}function gi(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-97+2;if(t>="A"&&t<="Z")return 90-t.charCodeAt(0)+2;throw new Error("invalid order key head: "+t)}function at(t){const e=gi(t[0]);if(e>t.length)throw new Error("invalid order key: "+t);return t.slice(0,e)}function rs(t,e){if(t==="A"+e[0].repeat(26))throw new Error("invalid order key: "+t);const n=at(t);if(t.slice(n.length).slice(-1)===e[0])throw new Error("invalid order key: "+t)}function ss(t,e){mi(t);const[n,...r]=t.split("");let s=!0;for(let o=r.length-1;s&&o>=0;o--){const i=e.indexOf(r[o])+1;i===e.length?r[o]=e[0]:(r[o]=e[i],s=!1)}if(s){if(n==="Z")return"a"+e[0];if(n==="z")return null;const o=String.fromCharCode(n.charCodeAt(0)+1);return o>"a"?r.push(e[0]):r.pop(),o+r.join("")}else return n+r.join("")}function Hg(t,e){mi(t);const[n,...r]=t.split("");let s=!0;for(let o=r.length-1;s&&o>=0;o--){const i=e.indexOf(r[o])-1;i===-1?r[o]=e.slice(-1):(r[o]=e[i],s=!1)}if(s){if(n==="a")return"Z"+e.slice(-1);if(n==="A")return null;const o=String.fromCharCode(n.charCodeAt(0)-1);return o<"Z"?r.push(e.slice(-1)):r.pop(),o+r.join("")}else return n+r.join("")}function Wg(t,e,n=zg){if(t!=null&&rs(t,n),e!=null&&rs(e,n),t!=null&&e!=null&&t>=e)throw new Error(t+" >= "+e);if(t==null){if(e==null)return"a"+n[0];const c=at(e),u=e.slice(c.length);if(c==="A"+n[0].repeat(26))return c+Ve("",u,n);if(c<e)return c;const l=Hg(c,n);if(l==null)throw new Error("cannot decrement any more");return l}if(e==null){const c=at(t),u=t.slice(c.length),l=ss(c,n);return l??c+Ve(u,null,n)}const r=at(t),s=t.slice(r.length),o=at(e),i=e.slice(o.length);if(r===o)return r+Ve(s,i,n);const a=ss(r,n);if(a==null)throw new Error("cannot increment any more");return a<e?a:r+Ve(s,null,n)}function z(t,e){return Wg(t??null,e??null)}function Ie(t){return[...t].sort((e,n)=>e.index<n.index?-1:e.index>n.index?1:0)}function V(t){return[...t].sort((e,n)=>e.order<n.order?-1:e.order>n.order?1:0)}function Vg(t=new Date){const e=new Date(t),n=e.getDay(),r=e.getDate()-n+(n===0?-6:1);return e.setDate(r),e.setHours(0,0,0,0),e}function Vn(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`}function Kg(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0");return`${e}-${n}-${r} ${s}:${o}:${i}`}function ze(t){const[e,n,r]=t.split("-").map(Number);return new Date(e,n-1,r)}function qg(t=new Date){return Vn(Vg(t))}function yy(t){const e=ze(t),n=[];for(let r=0;r<7;r++){const s=new Date(e);s.setDate(e.getDate()+r),n.push(Vn(s))}return n}function wy(t){return ze(t).toLocaleDateString("en-US",{weekday:"long"})}function Ey(t){return ze(t).toLocaleDateString("en-US",{weekday:"short"})}function Sy(t){const e=ze(t),r=new Date().getTime()-e.getTime(),s=Math.floor(r/(1e3*60*60*24));return s===0?"Today":s===1?"Yesterday":s<7?e.toLocaleDateString("en-US",{weekday:"short"}):e.toLocaleDateString()}function by(t){return t===Vn(new Date)}function Ay(t){const e=ze(t);return e.setDate(e.getDate()-1),e}function Iy(t){const e=ze(t);return e.setDate(e.getDate()+1),e}function xy(t){const e=ze(t),n=new Date(e);n.setDate(e.getDate()+6);const r={month:"short"},s={day:"numeric"},o=e.toLocaleDateString("en-US",r),i=e.toLocaleDateString("en-US",s),a=n.toLocaleDateString("en-US",s),c=n.getFullYear();if(e.getMonth()===n.getMonth())return`${o} ${i} - ${a}, ${c}`;{const u=n.toLocaleDateString("en-US",r);return`${o} ${i} - ${u} ${a}, ${c}`}}function vt(){return crypto.randomUUID()}function j(){return Kg(new Date)}function Gg(){const t=new Date,e=[];for(let n=0;n<4;n++){const r=new Date(t);r.setDate(r.getDate()+n*7);const s=qg(r),o=n===0?"This Week":n===1?"Next Week":`In ${n} weeks`;e.push({weekOf:s,label:o})}return e}class Jg{db;userId;constructor(e){this.db=e,this.userId=F.userId}async getAll(){return console.log("Fetching all areas.."),(await this.db.query(v.areas(this.userId),Me.area)).map(this.mapToArea)}async create(e,n,r){console.log("Creating an area..");const s=vt(),o=j(),i={PK:v.areas(this.userId),SK:P.area(r),id:s,name:e,icon:n,status:"active",index:r,createdAt:o,updatedAt:o};return await this.db.put(i),this.mapToArea(i)}async update(e,n){console.log("Updating an area.."),await this.db.update(v.areas(this.userId),P.area(e),{...n,updatedAt:j()})}async delete(e){console.log("Deleting an area.."),await this.db.remove(v.areas(this.userId),P.area(e))}async reorder(e,n){console.log("Reordering an area..");const r=j(),s={PK:v.areas(this.userId),SK:P.area(n),id:e.id,name:e.name,icon:e.icon,status:e.status,index:n,createdAt:e.createdAt,updatedAt:r};return await this.db.remove(v.areas(this.userId),P.area(e.index)),await this.db.put(s),this.mapToArea(s)}mapToArea(e){return{id:e.id,name:e.name,icon:e.icon,status:e.status,index:e.index,createdAt:e.createdAt,updatedAt:e.updatedAt}}}class Qg{db;userId;constructor(e){this.db=e,this.userId=F.userId}async getByArea(e){return console.log("Fetching projects for area.."),(await this.db.query(v.area(this.userId,e),Me.project)).map(this.mapToProject)}async create(e,n,r,s,o){console.log("Creating a project..");const i=vt(),a=j(),c={PK:v.area(this.userId,e),SK:P.project(r),id:i,areaId:e,name:n,status:"active",index:r,type:s,severity:o,createdAt:a,updatedAt:a};return await this.db.put(c),this.mapToProject(c)}async update(e,n,r){console.log("Updating a project.."),await this.db.update(v.area(this.userId,e),P.project(n),{...r,updatedAt:j()})}async delete(e,n){console.log("Deleting a project.."),await this.db.remove(v.area(this.userId,e),P.project(n))}async reorder(e,n){console.log("Reordering a project..");const r=j(),s={PK:v.area(this.userId,e.areaId),SK:P.project(n),id:e.id,areaId:e.areaId,name:e.name,status:e.status,index:n,type:e.type,severity:e.severity,notes:e.notes,blockedSince:e.blockedSince,blockedOn:e.blockedOn,completedAt:e.completedAt,createdAt:e.createdAt,updatedAt:r};return await this.db.remove(v.area(this.userId,e.areaId),P.project(e.index)),await this.db.put(s),this.mapToProject(s)}mapToProject(e){return{id:e.id,areaId:e.areaId,name:e.name,status:e.status,index:e.index,type:e.type,severity:e.severity,notes:e.notes,blockedSince:e.blockedSince,blockedOn:e.blockedOn,completedAt:e.completedAt,createdAt:e.createdAt,updatedAt:e.updatedAt}}}class Yg{db;userId;constructor(e){this.db=e,this.userId=F.userId}async getByProject(e){return console.log("Fetching tasks for project.."),(await this.db.query(v.project(this.userId,e),Me.task)).map(this.mapToTask)}async create(e,n,r,s){console.log("Creating a task..");const o=vt(),i=j(),a={PK:v.project(this.userId,e),SK:P.task(s),id:o,projectId:e,areaId:n,name:r,status:"active",index:s,createdAt:i,updatedAt:i};return await this.db.put(a),this.mapToTask(a)}async update(e,n,r){console.log("Updating a task.."),await this.db.update(v.project(this.userId,e),P.task(n),{...r,updatedAt:j()})}async delete(e,n){console.log("Deleting a task.."),await this.db.remove(v.project(this.userId,e),P.task(n))}async reorder(e,n){console.log("Reordering a task..");const r=j(),s={PK:v.project(this.userId,e.projectId),SK:P.task(n),id:e.id,projectId:e.projectId,areaId:e.areaId,name:e.name,status:e.status,index:n,assignedDay:e.assignedDay,dueDate:e.dueDate,notes:e.notes,blockedSince:e.blockedSince,blockedOn:e.blockedOn,completedAt:e.completedAt,repeat:e.repeat,createdAt:e.createdAt,updatedAt:r};return await this.db.remove(v.project(this.userId,e.projectId),P.task(e.index)),await this.db.put(s),this.mapToTask(s)}mapToTask(e){return{id:e.id,projectId:e.projectId,areaId:e.areaId,name:e.name,status:e.status,index:e.index,assignedDay:e.assignedDay,dueDate:e.dueDate,notes:e.notes,blockedSince:e.blockedSince,blockedOn:e.blockedOn,completedAt:e.completedAt,repeat:e.repeat,createdAt:e.createdAt,updatedAt:e.updatedAt}}}class Xg{db;userId;constructor(e){this.db=e,this.userId=F.userId}async get(e){console.log("Fetching week data..");const n=await this.db.query(v.week(this.userId,e));let r=[],s=[],o=[];for(const i of n){const a=i.SK;a.startsWith(Me.project)?r.push(this.mapToWeekProjectAssignment(i)):a.startsWith(Me.oneOff)?s.push(this.mapToWeekOneOffAssignment(i)):a.startsWith(Me.day)&&o.push(this.mapToWeekTaskByDay(i))}return r=V(r),s=V(s),o=V(o),{weekOf:e,projectAssignments:r,oneOffAssignments:s,tasksByDay:o}}async createWeekPlan(e){console.log("Creating a week plan..");const n=vt(),r=j(),s={PK:v.weeks(this.userId),SK:P.week(e),id:n,weekOf:e,createdAt:r,updatedAt:r};return await this.db.put(s),{id:n,weekOf:e,createdAt:r,updatedAt:r}}async createAssignment(e,n,r,s=!1,o){console.log("Assigning project to week..");const i=j(),a=o??z(null,null),c={PK:v.week(this.userId,e),SK:P.weekProject(n),projectId:n,areaId:r,assignedAt:i,carriedForward:s,order:a};return await this.db.put(c),this.mapToWeekProjectAssignment(c)}async updateAssignment(e,n,r){console.log("Updating project assignment.."),await this.db.update(v.week(this.userId,e),P.weekProject(n),r)}async deleteAssignment(e,n){console.log("Removing project from week.."),await this.db.remove(v.week(this.userId,e),P.weekProject(n))}async reorderAssignment(e,n,r){console.log("Reordering project assignment.."),await this.updateAssignment(e,n,{order:r})}async createOneOffAssignment(e,n,r,s){console.log("Assigning one-off to week..");const o=j(),i=s??z(null,null),a={PK:v.week(this.userId,e),SK:P.weekOneOff(n),oneOffId:n,areaId:r,assignedAt:o,order:i};return await this.db.put(a),this.mapToWeekOneOffAssignment(a)}async updateOneOffAssignment(e,n,r){console.log("Updating one-off assignment.."),await this.db.update(v.week(this.userId,e),P.weekOneOff(n),r)}async deleteOneOffAssignment(e,n){console.log("Removing one-off from week.."),await this.db.remove(v.week(this.userId,e),P.weekOneOff(n))}async reorderOneOffAssignment(e,n,r){console.log("Reordering one-off assignment.."),await this.updateOneOffAssignment(e,n,{order:r})}async createTaskByDay(e,n,r,s,o,i,a,c,u){console.log("Assigning task to day..");const l=u??z(null,null),d={PK:v.week(this.userId,e),SK:P.weekTaskByDay(n,r),taskId:r,projectId:s,areaId:o,name:i,status:a,date:n,isOneOff:c,order:l};return await this.db.put(d),this.mapToWeekTaskByDay(d)}async updateTaskByDay(e,n,r,s){console.log("Updating task by day.."),await this.db.update(v.week(this.userId,e),P.weekTaskByDay(n,r),s)}async deleteTaskByDay(e,n,r){console.log("Removing task from day.."),await this.db.remove(v.week(this.userId,e),P.weekTaskByDay(n,r))}async reorderTaskByDay(e,n,r,s){console.log("Reordering task by day.."),await this.updateTaskByDay(e,n,r,{order:s})}mapToWeekProjectAssignment(e){return{projectId:e.projectId,areaId:e.areaId,assignedAt:e.assignedAt,carriedForward:e.carriedForward,order:e.order}}mapToWeekOneOffAssignment(e){return{oneOffId:e.oneOffId,areaId:e.areaId,assignedAt:e.assignedAt,order:e.order}}mapToWeekTaskByDay(e){return{taskId:e.taskId,projectId:e.projectId,areaId:e.areaId,name:e.name,status:e.status,date:e.date,isOneOff:e.isOneOff,order:e.order}}}class Zg{db;userId;constructor(e){this.db=e,this.userId=F.userId}async getByArea(e){return console.log("Fetching one-offs for area.."),(await this.db.query(v.area(this.userId,e),Me.oneOff)).map(this.mapToOneOff)}async create(e,n,r){console.log("Creating a one-off..");const s=vt(),o=j(),i={PK:v.area(this.userId,e),SK:P.oneOff(r),id:s,areaId:e,name:n,status:"active",index:r,createdAt:o,updatedAt:o};return await this.db.put(i),this.mapToOneOff(i)}async update(e,n,r){console.log("Updating a one-off.."),await this.db.update(v.area(this.userId,e),P.oneOff(n),{...r,updatedAt:j()})}async delete(e,n){console.log("Deleting a one-off.."),await this.db.remove(v.area(this.userId,e),P.oneOff(n))}async reorder(e,n){console.log("Reordering a one-off..");const r=j(),s={PK:v.area(this.userId,e.areaId),SK:P.oneOff(n),id:e.id,areaId:e.areaId,name:e.name,status:e.status,index:n,assignedDay:e.assignedDay,dueDate:e.dueDate,notes:e.notes,blockedSince:e.blockedSince,blockedOn:e.blockedOn,completedAt:e.completedAt,createdAt:e.createdAt,updatedAt:r};return await this.db.remove(v.area(this.userId,e.areaId),P.oneOff(e.index)),await this.db.put(s),this.mapToOneOff(s)}mapToOneOff(e){return{id:e.id,areaId:e.areaId,name:e.name,status:e.status,index:e.index,assignedDay:e.assignedDay,dueDate:e.dueDate,notes:e.notes,blockedSince:e.blockedSince,blockedOn:e.blockedOn,completedAt:e.completedAt,createdAt:e.createdAt,updatedAt:e.updatedAt}}}class ey{#e=se(qe([]));get areas(){return oe(this.#e)}set areas(e){ie(this.#e,e,!0)}#t=se(qe([]));get archived(){return oe(this.#t)}set archived(e){ie(this.#t,e,!0)}set(e){this.areas=Ie(e)}add(e){this.areas=Ie([...this.areas,e])}update(e,n){this.areas=this.areas.map(r=>r.index===e?{...r,...n}:r)}remove(e){const n=this.areas.find(r=>r.index==e);return this.areas=this.areas.filter(r=>r.index!==e),n}getById(e){return this.areas.find(n=>n.id===e)}getByIndex(e){return this.areas.find(n=>n.index===e)}clear(){this.areas=[]}}const ue=new ey;class ty{#e=se(qe({}));get projectsByArea(){return oe(this.#e)}set projectsByArea(e){ie(this.#e,e,!0)}getByArea(e){return this.projectsByArea[e]??[]}setForArea(e,n){this.projectsByArea[e]=Ie(n)}add(e){const n=this.projectsByArea[e.areaId]??[];this.projectsByArea[e.areaId]=Ie([...n,e])}update(e,n,r){const s=this.projectsByArea[e];s&&(this.projectsByArea[e]=s.map(o=>o.index===n?{...o,...r}:o))}remove(e,n){const r=this.projectsByArea[e];r&&(this.projectsByArea[e]=r.filter(s=>s.index!==n))}getById(e){for(const n of Object.values(this.projectsByArea)){const r=n.find(s=>s.id===e);if(r)return r}}clear(){this.projectsByArea={}}}const pe=new ty;class ny{#e=se(qe({}));get tasksByProject(){return oe(this.#e)}set tasksByProject(e){ie(this.#e,e,!0)}getByProject(e){return this.tasksByProject[e]??[]}setForProject(e,n){this.tasksByProject[e]=Ie(n)}add(e){const n=this.tasksByProject[e.projectId]??[];this.tasksByProject[e.projectId]=Ie([...n,e])}update(e,n,r){const s=this.tasksByProject[e];s&&(this.tasksByProject[e]=s.map(o=>o.index===n?{...o,...r}:o))}remove(e,n){const r=this.tasksByProject[e];r&&(this.tasksByProject[e]=r.filter(s=>s.index!==n))}getById(e){for(const n of Object.values(this.tasksByProject)){const r=n.find(s=>s.id===e);if(r)return r}}clear(){this.tasksByProject={}}}const X=new ny;class ry{#e=se(qe({}));get oneOffsByArea(){return oe(this.#e)}set oneOffsByArea(e){ie(this.#e,e,!0)}getByArea(e){return this.oneOffsByArea[e]??[]}setForArea(e,n){this.oneOffsByArea[e]=Ie(n)}add(e){const n=this.oneOffsByArea[e.areaId]??[];this.oneOffsByArea[e.areaId]=Ie([...n,e])}update(e,n,r){const s=this.oneOffsByArea[e];s&&(this.oneOffsByArea[e]=s.map(o=>o.index===n?{...o,...r}:o))}remove(e,n){const r=this.oneOffsByArea[e];r&&(this.oneOffsByArea[e]=r.filter(s=>s.index!==n))}getById(e){for(const n of Object.values(this.oneOffsByArea)){const r=n.find(s=>s.id===e);if(r)return r}}clear(){this.oneOffsByArea={}}}const me=new ry;class sy{#e=se(qe({}));get weeksByWeekOf(){return oe(this.#e)}set weeksByWeekOf(e){ie(this.#e,e,!0)}getWeek(e){return this.weeksByWeekOf[e]}setWeek(e,n){n.projectAssignments=V(n.projectAssignments),n.oneOffAssignments=V(n.oneOffAssignments),n.tasksByDay=V(n.tasksByDay),this.weeksByWeekOf[e]=n}addProjectAssignment(e,n){let r=this.weeksByWeekOf[e];r||(r={weekOf:e,projectAssignments:[],oneOffAssignments:[],tasksByDay:[]},this.weeksByWeekOf[e]=r),r.projectAssignments=V([...r.projectAssignments,n])}updateProjectAssignment(e,n,r){const s=this.weeksByWeekOf[e];s&&(s.projectAssignments=V(s.projectAssignments.map(o=>o.projectId===n?{...o,...r}:o)))}removeProjectAssignment(e,n){const r=this.weeksByWeekOf[e];r&&(r.projectAssignments=r.projectAssignments.filter(s=>s.projectId!==n))}isProjectAssignedToWeek(e,n){const r=this.weeksByWeekOf[n];return r?r.projectAssignments.some(s=>s.projectId===e):!1}addOneOffAssignment(e,n){let r=this.weeksByWeekOf[e];r||(r={weekOf:e,projectAssignments:[],oneOffAssignments:[],tasksByDay:[]},this.weeksByWeekOf[e]=r),r.oneOffAssignments=V([...r.oneOffAssignments,n])}updateOneOffAssignment(e,n,r){const s=this.weeksByWeekOf[e];s&&(s.oneOffAssignments=V(s.oneOffAssignments.map(o=>o.oneOffId===n?{...o,...r}:o)))}removeOneOffAssignment(e,n){const r=this.weeksByWeekOf[e];r&&(r.oneOffAssignments=r.oneOffAssignments.filter(s=>s.oneOffId!==n))}isOneOffAssignedToWeek(e,n){const r=this.weeksByWeekOf[n];return r?r.oneOffAssignments.some(s=>s.oneOffId===e):!1}getOneOffAssignments(e){const n=this.weeksByWeekOf[e];return n?V(n.oneOffAssignments):[]}addTaskByDay(e,n){let r=this.weeksByWeekOf[e];r||(r={weekOf:e,projectAssignments:[],oneOffAssignments:[],tasksByDay:[]},this.weeksByWeekOf[e]=r),r.tasksByDay=V([...r.tasksByDay,n])}updateTaskByDay(e,n,r,s){const o=this.weeksByWeekOf[e];o&&(o.tasksByDay=V(o.tasksByDay.map(i=>i.taskId===n&&i.date===r?{...i,...s}:i)))}removeTaskByDay(e,n,r){const s=this.weeksByWeekOf[e];s&&(s.tasksByDay=s.tasksByDay.filter(o=>!(o.taskId===n&&o.date===r)))}getTasksForDay(e,n){const r=this.weeksByWeekOf[e];return r?V(r.tasksByDay.filter(s=>s.date===n)):[]}getProjectAssignments(e){const n=this.weeksByWeekOf[e];return n?V(n.projectAssignments):[]}clear(){this.weeksByWeekOf={}}}const L=new sy;class oy{#e=se("Initializing...");get msg(){return oe(this.#e)}set msg(e){ie(this.#e,e,!0)}#t=se("Please wait...");get info(){return oe(this.#t)}set info(e){ie(this.#t,e,!0)}#n=se(0);get total(){return oe(this.#n)}set total(e){ie(this.#n,e,!0)}#r=se(0);get current(){return oe(this.#r)}set current(e){ie(this.#r,e,!0)}}const ee=new oy;let $e,Et,Ye,q,St;async function Ty(){console.log("Initializing app..");const t=F.init();ee.msg="Loading service scripts...",$e=new Jg(t),Et=new Qg(t),Ye=new Yg(t),q=new Xg(t),St=new Zg(t),ee.msg="Loading areas from database...";const e=await $e.getAll();ue.set(e);const n=Gg();ee.total=e.length+n.length;for(const r of e){ee.msg=`Loading ${r.name}...`;const s=await Et.getByArea(r.id);pe.setForArea(r.id,s);for(const i of s){ee.info=`${i.name} ...`;const a=await Ye.getByProject(i.id);X.setForProject(i.id,a)}ee.info=`One-offs of ${r.name}...`;const o=await St.getByArea(r.id);me.setForArea(r.id,o),ee.current++}ee.msg="Loading weekly assignments...";for(const r of n){ee.info=`Assignments ${r.label}...`;const s=await q.get(r.weekOf);L.setWeek(r.weekOf,s),ee.current++}console.log("App initialized.")}async function vy(t,e){console.log("Creating area..");const n=ue.areas[ue.areas.length-1],r=z(n?.index??null,null),s=await $e.create(t,e,r);return ue.add(s),s}async function Cy(t,e){console.log("Updating area.."),await $e.update(t,e),ue.update(t,e)}async function Ry(t){console.log("Unarchiving area.."),await $e.update(t,{icon:"",status:"active"}),ue.update(t,{icon:"",status:"active"})}async function ky(t){console.log("Archiving area.."),await $e.update(t,{icon:"",status:"archived"}),ue.update(t,{icon:"",status:"archived"})}async function Oy(t,e,n,r){console.log("Creating project..");const s=pe.getByArea(t),o=s[s.length-1],i=z(o?.index??null,null),a=await Et.create(t,e,i,n,r);return pe.add(a),a}async function os(t,e,n){console.log("Updating project..");const r={...n};(n.status==="completed"||n.status==="cancelled")&&(r.completedAt=j()),await Et.update(t,e,r),pe.update(t,e,r)}async function Py(t,e,n){console.log("Creating task..");const r=X.getByProject(t),s=r[r.length-1],o=z(s?.index??null,null),i=await Ye.create(t,e,n,o);return X.add(i),i}async function iy(t,e,n){console.log("Updating task..");const r=X.getByProject(t).find(i=>i.index===e);if(!r)return;const s=r.status==="blocked",o={...n};if(n.status==="completed"||n.status==="cancelled"?o.completedAt=j():o.completedAt=void 0,await Ye.update(t,e,o),X.update(t,e,o),await ay(r.id,t,n),n.status==="blocked"){const i=pe.getById(t);i&&i.status!=="blocked"&&await os(i.areaId,i.index,{status:"blocked"})}else if(s&&n.status){const i=pe.getById(t);i&&i.status==="blocked"&&X.getByProject(t).filter(c=>c.id!==r.id&&c.status==="blocked").length===0&&await os(i.areaId,i.index,{status:"active"})}}async function ay(t,e,n){const r={};if(n.name!==void 0&&(r.name=n.name),n.status!==void 0&&(r.status=n.status),Object.keys(r).length===0)return;const o=Object.values(L.weeksByWeekOf).filter(i=>i.projectAssignments.some(a=>a.projectId===e));for(const i of o){const a=i.tasksByDay.filter(c=>c.taskId===t);for(const c of a)L.updateTaskByDay(i.weekOf,t,c.date,r),await q.updateTaskByDay(i.weekOf,c.date,t,r)}}async function _y(t,e,n){console.log(`Updating task status to ${n}..`);const r=X.getById(t);r&&await iy(e,r.index,{status:n})}async function Dy(t,e,n){console.log("Assigning project to week..");const r=L.getProjectAssignments(n),s=r.length>0?r[r.length-1].order:null,o=z(s,null),i=await q.createAssignment(n,t,e,!1,o);L.addProjectAssignment(n,i)}async function Ny(t,e){console.log("Unassigning project from week.."),await q.deleteAssignment(e,t),L.removeProjectAssignment(e,t)}async function My(t,e,n,r,s,o,i,a){console.log("Assigning task to day..");const c=L.getTasksForDay(o,i),u=c.length>0?c[c.length-1].order:null,l=z(u,null),d=await q.createTaskByDay(o,i,t,e,n,r,s,a,l);L.addTaskByDay(o,d)}async function $y(t,e,n,r){console.log("Unassigning task from day..");const s=X.getById(t);s&&(await Ye.update(e,s.index,{assignedDay:void 0}),X.update(e,s.index,{assignedDay:void 0}),await q.deleteTaskByDay(n,r,t),L.removeTaskByDay(n,t,r))}async function By(t,e,n){console.log("Reordering area..");const r=ue.getByIndex(t);if(!r)return;const s=z(e,n),o=await $e.reorder(r,s),i=ue.areas.map(a=>a.id===r.id?o:a);ue.set(i)}async function Uy(t,e,n,r){console.log("Reordering project..");const s=pe.getByArea(t).find(c=>c.index===e);if(!s)return;const o=z(n,r),i=await Et.reorder(s,o),a=pe.getByArea(t).map(c=>c.id===s.id?i:c);pe.setForArea(t,a)}async function Ly(t,e,n,r){console.log("Reordering task..");const s=X.getByProject(t).find(c=>c.index===e);if(!s)return;const o=z(n,r),i=await Ye.reorder(s,o),a=X.getByProject(t).map(c=>c.id===s.id?i:c);X.setForProject(t,a)}async function jy(t,e,n,r){console.log("Reordering week project..");const s=z(n,r);await q.reorderAssignment(t,e,s),L.updateProjectAssignment(t,e,{order:s})}async function Fy(t,e,n,r,s){console.log("Reordering today task..");const o=z(r,s);await q.reorderTaskByDay(t,e,n,o),L.updateTaskByDay(t,n,e,{order:o})}async function zy(t,e){console.log("Creating one-off..");const n=me.getByArea(t),r=n[n.length-1],s=z(r?.index??null,null),o=await St.create(t,e,s);return me.add(o),o}async function cy(t,e,n){console.log("Updating one-off..");const r=me.getByArea(t).find(o=>o.index===e);if(!r)return;const s={...n};(n.status==="completed"||n.status==="cancelled")&&(s.completedAt=j()),await St.update(t,e,s),me.update(t,e,s),await uy(r.id,t,n)}async function uy(t,e,n){const r={};if(n.name!==void 0&&(r.name=n.name),n.status!==void 0&&(r.status=n.status),Object.keys(r).length===0)return;const s=Object.values(L.weeksByWeekOf);for(const o of s){const i=o.tasksByDay.filter(a=>a.taskId===t&&a.isOneOff);for(const a of i)L.updateTaskByDay(o.weekOf,t,a.date,r),await q.updateTaskByDay(o.weekOf,a.date,t,r)}}async function Hy(t,e,n){console.log(`Updating one-off status to ${n}..`);const r=me.getById(t);r&&await cy(e,r.index,{status:n})}async function Wy(t,e,n,r){console.log("Reordering one-off..");const s=me.getByArea(t).find(c=>c.index===e);if(!s)return;const o=z(n,r),i=await St.reorder(s,o),a=me.getByArea(t).map(c=>c.id===s.id?i:c);me.setForArea(t,a)}async function Vy(t,e,n){console.log("Assigning one-off to week..");const r=L.getOneOffAssignments(n),s=r.length>0?r[r.length-1].order:null,o=z(s,null),i=await q.createOneOffAssignment(n,t,e,o);L.addOneOffAssignment(n,i)}async function Ky(t,e){console.log("Unassigning one-off from week.."),await q.deleteOneOffAssignment(e,t),L.removeOneOffAssignment(e,t)}async function qy(t,e,n,r,s,o){console.log("Assigning one-off to day..");const i=L.getTasksForDay(s,o),a=i.length>0?i[i.length-1].order:null,c=z(a,null),u=await q.createTaskByDay(s,o,t,"",e,n,r,!0,c);L.addTaskByDay(s,u)}async function Gy(t,e,n){console.log("Unassigning one-off from day.."),await q.deleteTaskByDay(e,n,t),L.removeTaskByDay(e,t,n)}export{We as $,ku as A,Eu as B,ki as C,id as D,ic as E,vn as F,rg as G,Su as H,Oi as I,Bs as J,oc as K,Td as L,Wu as M,Us as N,od as O,my as P,Sa as Q,Lu as R,Lm as S,_d as T,qu as U,zi as V,Vi as W,Gi as X,Zi as Y,Xa as Z,oa as _,Kn as a,b as a0,de as a1,xe as a2,Gy as a3,qy as a4,$y as a5,My as a6,yy as a7,by as a8,Ey as a9,Gg as aA,Dy as aB,cy as aC,zy as aD,Ky as aE,Vy as aF,Wy as aG,Uy as aH,iy as aI,Ly as aJ,jy as aa,Ny as ab,X as ac,Sy as ad,qg as ae,xy as af,L as ag,ue as ah,pe as ai,me as aj,fy as ak,Hy as al,_y as am,Py as an,wy as ao,Iy as ap,Ay as aq,Vn as ar,Fy as as,Cy as at,vy as au,ky as av,Ry as aw,By as ax,os as ay,Oy as az,Tc as b,ks as c,$t as d,$c as e,Je as f,Xe as g,ht as h,Ty as i,bt as j,Hm as k,ee as l,la as m,ce as n,Fm as o,Bt as p,jt as q,uu as r,hy as s,Tn as t,jm as u,fu as v,Fu as w,ju as x,pu as y,ng as z};
