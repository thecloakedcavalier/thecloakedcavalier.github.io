import{d as Q,f as B,a as E,s as R,c as ee,b as Ie}from"../chunks/BqnnlT2t.js";import{h as he,n as et,w as ye,j as re,ao as tt,o as at,D as e,U as rt,t as nt,H as st,v as We,x as we,k as xe,aa as ot,aC as it,ah as Re,d as ce,aE as oe,i as Ee,s as lt,a8 as Le,a4 as ct,aA as Ne,aF as dt,aG as vt,aH as ut,aI as bt,f as qe,p as Je,aJ as je,aw as ft,az as xt,g as gt,aK as Ke,q as Ye,aL as pt,aM as mt,aN as _t,aO as kt,aP as ht,aQ as yt,aR as wt,a5 as jt,b as At,r as Tt,aS as Pt,y as X,A as Z,G as s,F as l,J as g,I as V,z as K,C as J,B as I,a6 as G,V as Mt}from"../chunks/Jn-zyrs1.js";import{i as U}from"../chunks/CVxw57y3.js";import{b as be}from"../chunks/CNDG0rpL.js";import{a1 as ge,a2 as Et,a3 as Ct,a4 as St,a5 as Qe,a6 as Xe,a7 as fe,a8 as pe,a9 as It,aa as de,ab as ve,ac as me,ad as Nt,ae as Dt,af as Bt,ag as Wt,ah as Rt,ai as Lt,aj as Ot,ak as Oe,al as zt,am as Vt,an as Ht,ao as Ut,ap as ze,aq as Ze,ar as Ft,as as Ve}from"../chunks/CHzvpvh-.js";function te(r,t){return t}function Gt(r,t,n){for(var a=[],o=t.length,i,v=t.length,w=0;w<o;w++){let T=t[w];Je(T,()=>{if(i){if(i.pending.delete(T),i.done.add(T),i.pending.size===0){var k=r.outrogroups;Ce(Ne(i.done)),k.delete(i),k.size===0&&(r.outrogroups=null)}}else v-=1},!1)}if(v===0){var p=a.length===0&&n!==null;if(p){var h=n,m=h.parentNode;xt(m),m.append(h),r.items.clear()}Ce(t,!p)}else i={pending:new Set(t),done:new Set},(r.outrogroups??=new Set).add(i)}function Ce(r,t=!0){for(var n=0;n<r.length;n++)gt(r[n],t)}var He;function ae(r,t,n,a,o,i=null){var v=r,w=new Map,p=(t&Ke)!==0;if(p){var h=r;v=re?ye(tt(h)):h.appendChild(he())}re&&at();var m=null,T=rt(()=>{var x=n();return dt(x)?x:x==null?[]:Ne(x)}),k,j=!0;function y(){d.fallback=m,qt(d,k,v,t,a),m!==null&&(k.length===0?(m.f&oe)===0?qe(m):(m.f^=oe,ue(m,null,v)):Je(m,()=>{m=null}))}var _=et(()=>{k=e(T);var x=k.length;let M=!1;if(re){var N=nt(v)===st;N!==(x===0)&&(v=We(),ye(v),we(!1),M=!0)}for(var S=new Set,W=ce,L=lt(),c=0;c<x;c+=1){re&&xe.nodeType===ot&&xe.data===it&&(v=xe,M=!0,we(!1));var u=k[c],b=a(u,c),f=j?null:w.get(b);f?(f.v&&Re(f.v,u),f.i&&Re(f.i,c),L&&W.skipped_effects.delete(f.e)):(f=Jt(w,j?v:He??=he(),u,b,c,o,t,n),j||(f.e.f|=oe),w.set(b,f)),S.add(b)}if(x===0&&i&&!m&&(j?m=Ee(()=>i(v)):(m=Ee(()=>i(He??=he())),m.f|=oe)),re&&x>0&&ye(We()),!j)if(L){for(const[C,A]of w)S.has(C)||W.skipped_effects.add(A.e);W.oncommit(y),W.ondiscard(()=>{})}else y();M&&we(!0),e(T)}),d={effect:_,items:w,outrogroups:null,fallback:m};j=!1,re&&(v=xe)}function qt(r,t,n,a,o){var i=(a&pt)!==0,v=t.length,w=r.items,p=r.effect.first,h,m=null,T,k=[],j=[],y,_,d,x;if(i)for(x=0;x<v;x+=1)y=t[x],_=o(y,x),d=w.get(_).e,(d.f&oe)===0&&(d.nodes?.a?.measure(),(T??=new Set).add(d));for(x=0;x<v;x+=1){if(y=t[x],_=o(y,x),d=w.get(_).e,r.outrogroups!==null)for(const f of r.outrogroups)f.pending.delete(d),f.done.delete(d);if((d.f&oe)!==0)if(d.f^=oe,d===p)ue(d,null,n);else{var M=m?m.next:p;d===r.effect.last&&(r.effect.last=d.prev),d.prev&&(d.prev.next=d.next),d.next&&(d.next.prev=d.prev),ie(r,m,d),ie(r,d,M),ue(d,M,n),m=d,k=[],j=[],p=m.next;continue}if((d.f&je)!==0&&(qe(d),i&&(d.nodes?.a?.unfix(),(T??=new Set).delete(d))),d!==p){if(h!==void 0&&h.has(d)){if(k.length<j.length){var N=j[0],S;m=N.prev;var W=k[0],L=k[k.length-1];for(S=0;S<k.length;S+=1)ue(k[S],N,n);for(S=0;S<j.length;S+=1)h.delete(j[S]);ie(r,W.prev,L.next),ie(r,m,W),ie(r,L,N),p=N,m=L,x-=1,k=[],j=[]}else h.delete(d),ue(d,p,n),ie(r,d.prev,d.next),ie(r,d,m===null?r.effect.first:m.next),ie(r,m,d),m=d;continue}for(k=[],j=[];p!==null&&p!==d;)(h??=new Set).add(p),j.push(p),p=p.next;if(p===null)continue}(d.f&oe)===0&&k.push(d),m=d,p=d.next}if(r.outrogroups!==null){for(const f of r.outrogroups)f.pending.size===0&&(Ce(Ne(f.done)),r.outrogroups?.delete(f));r.outrogroups.size===0&&(r.outrogroups=null)}if(p!==null||h!==void 0){var c=[];if(h!==void 0)for(d of h)(d.f&je)===0&&c.push(d);for(;p!==null;)(p.f&je)===0&&p!==r.fallback&&c.push(p),p=p.next;var u=c.length;if(u>0){var b=(a&Ke)!==0&&v===0?n:null;if(i){for(x=0;x<u;x+=1)c[x].nodes?.a?.measure();for(x=0;x<u;x+=1)c[x].nodes?.a?.fix()}Gt(r,c,b)}}i&&Ye(()=>{if(T!==void 0)for(d of T)d.nodes?.a?.apply()})}function Jt(r,t,n,a,o,i,v,w){var p=(v&vt)!==0?(v&ut)===0?ct(n,!1,!1):Le(n):null,h=(v&bt)!==0?Le(o):null;return{v:p,i:h,e:Ee(()=>(i(t,p??n,h??o,w),()=>{r.delete(a)}))}}function ue(r,t,n){if(r.nodes)for(var a=r.nodes.start,o=r.nodes.end,i=t&&(t.f&oe)===0?t.nodes.start:n;a!==null;){var v=ft(a);if(i.before(a),a===o)return;a=v}}function ie(r,t,n){t===null?r.effect.first=n:t.next=n,n===null?r.effect.last=t:n.prev=t}const Ue=[...` 	
\r\fÂ \v\uFEFF`];function Kt(r,t,n){var a=r==null?"":""+r;if(t&&(a=a?a+" "+t:t),n){for(var o in n)if(n[o])a=a?a+" "+o:o;else if(a.length)for(var i=o.length,v=0;(v=a.indexOf(o,v))>=0;){var w=v+i;(v===0||Ue.includes(a[v-1]))&&(w===a.length||Ue.includes(a[w]))?a=(v===0?"":a.substring(0,v))+a.substring(w+1):v=w}}return a===""?null:a}function Fe(r,t=!1){var n=t?" !important;":";",a="";for(var o in r){var i=r[o];i!=null&&i!==""&&(a+=" "+o+": "+i+n)}return a}function Ae(r){return r[0]!=="-"||r[1]!=="-"?r.toLowerCase():r}function Yt(r,t){if(t){var n="",a,o;if(Array.isArray(t)?(a=t[0],o=t[1]):a=t,r){r=String(r).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,v=0,w=!1,p=[];a&&p.push(...Object.keys(a).map(Ae)),o&&p.push(...Object.keys(o).map(Ae));var h=0,m=-1;const _=r.length;for(var T=0;T<_;T++){var k=r[T];if(w?k==="/"&&r[T-1]==="*"&&(w=!1):i?i===k&&(i=!1):k==="/"&&r[T+1]==="*"?w=!0:k==='"'||k==="'"?i=k:k==="("?v++:k===")"&&v--,!w&&i===!1&&v===0){if(k===":"&&m===-1)m=T;else if(k===";"||T===_-1){if(m!==-1){var j=Ae(r.substring(h,m).trim());if(!p.includes(j)){k!==";"&&T++;var y=r.substring(h,T).trim();n+=" "+y+";"}}h=T+1,m=-1}}}}return a&&(n+=Fe(a)),o&&(n+=Fe(o,!0)),n=n.trim(),n===""?null:n}return r==null?null:String(r)}function ne(r,t,n,a,o,i){var v=r.__className;if(re||v!==n||v===void 0){var w=Kt(n,a,i);(!re||w!==r.getAttribute("class"))&&(w==null?r.removeAttribute("class"):r.className=w),r.__className=n}else if(i&&o!==i)for(var p in i){var h=!!i[p];(o==null||h!==!!o[p])&&r.classList.toggle(p,h)}return i}function Te(r,t={},n,a){for(var o in n){var i=n[o];t[o]!==i&&(n[o]==null?r.style.removeProperty(o):r.style.setProperty(o,i,a))}}function _e(r,t,n,a){var o=r.__style;if(re||o!==t){var i=Yt(t,a);(!re||i!==r.getAttribute("style"))&&(i==null?r.removeAttribute("style"):r.style.cssText=i),r.__style=t}else a&&(Array.isArray(a)?(Te(r,n?.[0],a[0]),Te(r,n?.[1],a[1],"important")):Te(r,n,a));return a}const Qt=Symbol("is custom element"),Xt=Symbol("is html");function De(r){if(re){var t=!1,n=()=>{if(!t){if(t=!0,r.hasAttribute("value")){var a=r.value;Se(r,"value",null),r.value=a}if(r.hasAttribute("checked")){var o=r.checked;Se(r,"checked",null),r.checked=o}}};r.__on_r=n,Ye(n),mt()}}function Se(r,t,n,a){var o=Zt(r);re&&(o[t]=r.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&r.nodeName==="LINK")||o[t]!==(o[t]=n)&&(t==="loading"&&(r[_t]=n),n==null?r.removeAttribute(t):typeof n!="string"&&$t(r).includes(t)?r[t]=n:r.setAttribute(t,n))}function Zt(r){return r.__attributes??={[Qt]:r.nodeName.includes("-"),[Xt]:r.namespaceURI===kt}}var Ge=new Map;function $t(r){var t=r.getAttribute("is")||r.nodeName,n=Ge.get(t);if(n)return n;Ge.set(t,n=[]);for(var a,o=r,i=Element.prototype;i!==o;){a=yt(o);for(var v in a)a[v].set&&n.push(v);o=ht(o)}return n}function Be(r,t,n=t){var a=new WeakSet;wt(r,"input",async o=>{var i=o?r.defaultValue:r.value;if(i=Pe(r)?Me(i):i,n(i),ce!==null&&a.add(ce),await jt(),i!==(i=t())){var v=r.selectionStart,w=r.selectionEnd,p=r.value.length;if(r.value=i??"",w!==null){var h=r.value.length;v===w&&w===p&&h>p?(r.selectionStart=h,r.selectionEnd=h):(r.selectionStart=v,r.selectionEnd=Math.min(w,h))}}}),(re&&r.defaultValue!==r.value||At(t)==null&&r.value)&&(n(Pe(r)?Me(r.value):r.value),ce!==null&&a.add(ce)),Tt(()=>{var o=t();if(r===document.activeElement){var i=Pt??ce;if(a.has(i))return}Pe(r)&&o===Me(r.value)||r.type==="date"&&!o&&!r.value||o!==r.value&&(r.value=o??"")})}function Pe(r){var t=r.type;return t==="number"||t==="range"}function Me(r){return r===""?null:+r}const ea=["ğŸ’¼","ğŸ ","ğŸ’ª","ğŸ“š","ğŸ’°","â¤ï¸","ğŸ¯","ğŸš€","ğŸ¨","ğŸµ","âœˆï¸","ğŸ","ğŸ§˜","ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦","ğŸ¤","ğŸ“±","ğŸ’»","ğŸ”§","ğŸ“","ğŸ“","ğŸƒ","ğŸ§ ","ğŸŒ±","â­","ğŸ”¥","ğŸ’¡","ğŸ®","ğŸ“¸","ğŸ›’","ğŸ¦","ğŸš—","ğŸ‹ï¸"];Q(["click","keydown"]);var ta=B('<button><span class="text-lg"> </span> <span class="text-[10px] font-medium truncate"> </span></button>'),aa=B('<nav class="pb-6 fixed bottom-0 left-0 right-0 bg-base-200 border-t border-base-content/10 flex justify-around pt-2 px-1 safe-bottom"></nav>');function ra(r,t){X(t,!0);const n=[{id:"areas",icon:"ğŸ“",label:"Areas"},{id:"week",icon:"ğŸ“…",label:"Week"},{id:"today",icon:"â˜€ï¸",label:"Today"},{id:"review",icon:"ğŸ“Š",label:"Review"}];var a=aa();ae(a,21,()=>n,te,(o,i)=>{var v=ta();let w;v.__click=()=>t.onTabChange(e(i).id);let p;var h=l(v),m=l(h,!0);s(h);var T=g(h,2),k=l(T,!0);s(T),s(v),V(()=>{w=ne(v,1,"flex flex-col items-center gap-1 px-3 py-1 rounded-lg transition-colors min-w-0 flex-1",null,w,{"text-primary":t.activeTab===e(i).id,"text-base-content":t.activeTab!==e(i).id}),p=_e(v,"",p,{opacity:t.activeTab===e(i).id?1:.4}),R(m,e(i).icon),R(k,e(i).label)}),E(o,v)}),s(a),E(r,a),Z()}Q(["click"]);var na=B('<button type="button"><span class="text-xs font-medium"> </span> <span class="text-lg"> </span></button>'),sa=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><div><h2 class="text-lg font-semibold">Assign to Day</h2> <p class="text-xs text-base-content/50 truncate"> </p></div> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 grid grid-cols-7 gap-1"></div> <div class="p-4 pt-0"><button type="button" class="w-full p-3 text-sm text-base-content/50 hover:text-base-content rounded-lg border border-base-content/10 hover:border-primary transition-colors">Remove from all days</button></div></div></div>');function oa(r,t){X(t,!0);let n=J(!1),a=J(null);function o(k,j,y,_){k.stopPropagation(),I(a,{task:j,project:y,area:_},!0),I(n,!0)}function i(){I(n,!1),I(a,null)}function v(){return Ct(t.currentWeekOf).map(k=>({date:k,dayName:Qe(k),isToday:St(k)}))}async function w(k){if(!e(a))return;const{task:j,project:y,area:_}=e(a);i();const d=t.isTaskAssignedToDay(j.id);d===k?await ge(j.id,y.id,t.currentWeekOf,k):(d&&await ge(j.id,y.id,t.currentWeekOf,d),await Et(j.id,y.id,_.id,j.name,t.currentWeekOf,k,!1))}var p={openDayPicker:o},h=ee(),m=K(h);{var T=k=>{var j=sa(),y=l(j);y.__click=i,y.__keydown=u=>u.key==="Escape"&&i();var _=g(y,2),d=l(_),x=l(d),M=g(l(x),2),N=l(M,!0);s(M),s(x);var S=g(x,2);S.__click=i,s(d);var W=g(d,2);ae(W,21,v,te,(u,b)=>{const f=G(()=>t.isTaskAssignedToDay(e(a).task.id)===e(b).date);var C=na();C.__click=()=>w(e(b).date);var A=l(C),P=l(A,!0);s(A);var O=g(A,2),D=l(O,!0);s(O),s(C),V(z=>{ne(C,1,`flex flex-col items-center p-2 rounded-lg border transition-colors ${e(f)?"bg-primary text-primary-content border-primary":e(b).isToday?"border-primary/50 hover:border-primary":"border-base-content/10 hover:border-primary"}`),R(P,e(b).dayName),R(D,z)},[()=>e(b).date.split("-")[2]]),E(u,C)}),s(W);var L=g(W,2),c=l(L);c.__click=()=>{const u=t.isTaskAssignedToDay(e(a).task.id);u&&ge(e(a).task.id,e(a).project.id,t.currentWeekOf,u),i()},s(L),s(_),s(j),V(()=>R(N,e(a).task.name)),E(k,j)};U(m,k=>{e(n)&&e(a)&&k(T)})}return E(r,h),Z(p)}Q(["click","keydown"]);var ia=B('<div class="h-1 bg-base-300"><div class="h-full bg-base-content/20 transition-all"></div></div>'),la=B('<div class="bg-base-100 rounded-lg overflow-hidden"><!> <div class="flex items-center gap-3 p-3"><span class="text-2xl"> </span> <div class="flex-1 min-w-0"><p class="text-sm font-medium text-base-content truncate mb-1"> </p> <p class="text-xs text-base-content/50"> </p></div> <button type="button" class="w-7 h-7 flex items-center justify-center rounded text-base-content/30 hover:text-error hover:bg-error/10 transition-colors" title="Remove from week">âœ•</button></div></div>'),ca=B('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No projects assigned to this week</p> <p class="text-base-content/30 text-xs">Go to Areas and assign projects</p></div>'),da=B('<div class="flex flex-col gap-2"></div>');function va(r,t){X(t,!0);async function n(i,v){i.stopPropagation(),await Xe(v,t.currentWeekOf)}function a(i){const v=fe.getByProject(i),w=v.filter(h=>h.status==="active").length,p=v.filter(h=>h.status==="completed").length;return{active:w,completed:p,total:w+p}}var o=da();ae(o,21,()=>t.assignedProjects,te,(i,v)=>{let w=()=>e(v).project,p=()=>e(v).area;const h=G(()=>a(w().id)),m=G(()=>e(h).total>0?e(h).completed/e(h).total*100:0);var T=la(),k=l(T);{var j=c=>{var u=ia(),b=l(u);s(u),V(()=>_e(b,`width: ${e(m)??""}%`)),E(c,u)};U(k,c=>{e(h).total>0&&c(j)})}var y=g(k,2),_=l(y),d=l(_,!0);s(_);var x=g(_,2),M=l(x),N=l(M,!0);s(M);var S=g(M,2),W=l(S,!0);s(S),s(x);var L=g(x,2);L.__click=c=>n(c,w().id),s(y),s(T),V(()=>{R(d,p().icon),R(N,w().name),R(W,p().name)}),E(i,T)},i=>{var v=ca();E(i,v)}),s(o),E(r,o),Z()}Q(["click"]);var ua=B('<span class="text-xs text-primary-content px-2 py-1 bg-primary rounded"> </span>'),ba=B('<button class="text-start flex items-center gap-3 p-3 bg-base-100 border border-base-content/10 rounded-lg transition-all hover:border-primary"><div class="flex-1 min-w-0 "><p class="text-sm text-base-content truncate mb-1"> </p> <p class="text-xs text-base-content/50"> </p></div> <!></button>'),fa=B('<div class="text-center py-12"><p class="text-base-content/50 text-sm mb-2">No tasks available</p> <p class="text-base-content/30 text-xs">Assigned projects have no active tasks</p></div>'),xa=B('<div class="flex flex-col gap-2"></div>');function ga(r,t){X(t,!0);var n=xa();ae(n,21,()=>t.weekTasks,te,(a,o)=>{let i=()=>e(o).task,v=()=>e(o).project,w=()=>e(o).area;const p=G(()=>t.isTaskAssignedToDay(i().id));var h=ba();h.__click=x=>t.openDayPicker(x,i(),v(),w());var m=l(h),T=l(m),k=l(T,!0);s(T);var j=g(T,2),y=l(j);s(j),s(m);var _=g(m,2);{var d=x=>{var M=ua(),N=l(M,!0);s(M),V(S=>R(N,S),[()=>Qe(e(p))]),E(x,M)};U(_,x=>{e(p)&&x(d)})}s(h),V(()=>{R(k,i().name),R(y,`${w().icon??""} ${v().name??""}`)}),E(a,h)},a=>{var o=fa();E(a,o)}),s(n),E(r,n),Z()}Q(["click"]);var pa=B('<div class="flex flex-col h-full"><div class="bg-base-100 border-b border-b-base-content/10"><div class="px-4 pt-4 pb-2 "><h2 class="text-lg font-medium">Week</h2> <p class="text-xs text-base-content/50"> </p></div> <div class="flex gap-1 px-4 pb-3"><button> </button> <button> </button></div></div> <div class="flex-1 overflow-y-auto px-4 py-4"><!></div></div> <!>',1);function ma(r,t){X(t,!0);let n=J("projects"),a=Mt(pe());const o=G(()=>me.getWeek(a));let i;function v(b){return e(o)?e(o).tasksByDay.find(C=>C.taskId===b)?.date??null:null}let w=G(()=>e(o)?e(o).projectAssignments.map(b=>{const f=de.getById(b.areaId);if(!f)return null;const A=ve.getByArea(f.id).find(P=>P.id===b.projectId);return A?{assignment:b,project:A,area:f}:null}).filter(b=>b!==null):[]),p=G(()=>{const b=[];for(const{project:f,area:C}of e(w)){const A=fe.getByProject(f.id).filter(P=>P.status==="active");for(const P of A)b.push({task:P,project:f,area:C})}return b});var h=pa(),m=K(h),T=l(m),k=l(T),j=g(l(k),2),y=l(j,!0);s(j),s(k);var _=g(k,2),d=l(_);d.__click=()=>I(n,"projects");var x=l(d);s(d);var M=g(d,2);M.__click=()=>I(n,"tasks");var N=l(M);s(M),s(_),s(T);var S=g(T,2),W=l(S);{var L=b=>{va(b,{get currentWeekOf(){return a},get assignedProjects(){return e(w)}})},c=b=>{ga(b,{get openDayPicker(){return i.openDayPicker},get weekTasks(){return e(p)},isTaskAssignedToDay:v})};U(W,b=>{e(n)==="projects"?b(L):b(c,!1)})}s(S),s(m);var u=g(m,2);be(oa(u,{get currentWeekOf(){return a},isTaskAssignedToDay:v}),b=>i=b,()=>i),V(b=>{R(y,b),ne(d,1,`px-4 py-1.5 text-sm rounded-lg transition-colors ${e(n)==="projects"?"bg-primary/20 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),R(x,`Projects (${e(w).length??""})`),ne(M,1,`px-4 py-1.5 text-sm rounded-lg transition-colors ${e(n)==="tasks"?"bg-primary/20 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),R(N,`Tasks (${e(p).length??""})`)},[()=>It(a)]),E(r,h),Z()}Q(["click"]);var _a=B('<div class="px-4 pb-3"><div class="flex items-center justify-between text-xs text-base-content/50 mb-1"><span> </span> <span> </span></div> <div class="h-2 bg-base-100 rounded-full overflow-hidden"><div class="h-full bg-success transition-all rounded-full"></div></div></div>'),ka=B('<div class="flex items-center gap-3 p-3 bg-base-100 border border-base-content/10 rounded-lg"><button type="button" aria-label="check" class="w-7 h-7 rounded-full border-2 border-base-content/30 flex items-center justify-center flex-shrink-0 hover:border-success hover:bg-success/10 transition-colors"></button> <div class="flex-1 min-w-0"><p class="text-sm text-base-content truncate"> </p> <p class="text-xs text-base-content/50"> </p></div> <button type="button" class="w-7 h-7 flex items-center justify-center rounded text-base-content/30 hover:text-error hover:bg-error/10 transition-colors" title="Remove from today">âœ•</button></div>'),ha=B('<div class="flex flex-col gap-2 mb-4"></div>'),ya=B('<div class="text-center py-12"><span class="text-4xl block mb-3">ğŸ“‹</span> <p class="text-base-content/50 text-sm mb-2">No tasks for today</p> <p class="text-base-content/30 text-xs">Go to Week tab and assign tasks</p></div>'),wa=B('<div class="text-center mb-5 py-12 border-2 border-dashed border-success/30 rounded-lg bg-success/5"><span class="text-4xl block mb-3">ğŸ‰</span> <p class="text-sm font-medium text-success">All done for today!</p> <p class="text-xs text-base-content/50 mt-1">Great work!</p></div>'),ja=B('<div class="flex items-center gap-3 p-3 opacity-50"><button type="button" class="w-7 h-7 rounded-full bg-success border-2 border-success flex items-center justify-center flex-shrink-0 text-success-content" title="Mark as incomplete"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg></button> <div class="flex-1 min-w-0"><p class="text-sm text-base-content line-through truncate"> </p> <p class="text-xs text-base-content/50"> </p></div></div>'),Aa=B('<div><p class="text-xs font-medium uppercase tracking-wider text-base-content/40 mb-2"> </p> <div class="flex flex-col gap-1"></div></div>'),Ta=B('<div class="flex flex-col h-full"><div class="px-4 pt-4 pb-2"><h2 class="text-lg font-medium">Today</h2> <p class="text-xs text-base-content/50"> </p></div> <!> <div class="flex-1 overflow-y-auto px-4 pb-4"><!> <!></div></div>');function Pa(r,t){X(t,!0);const n=Nt(),a=pe();let o=G(()=>{const c=me.getWeek(a);return c?c.tasksByDay.filter(u=>u.date===n).map(u=>{const b=fe.getById(u.taskId),f=de.getById(u.areaId),A=(f?ve.getByArea(f.id):[]).find(P=>P.id===u.projectId);return{taskByDay:u,task:b,areaIcon:f?.icon??"ğŸ“",areaName:f?.name??"Unknown",projectName:A?.name??"Unknown"}}):[]}),i=G(()=>e(o).filter(c=>c.taskByDay.status!=="completed")),v=G(()=>e(o).filter(c=>c.taskByDay.status==="completed"));function w(){const c=e(o),u=c.filter(C=>C.taskByDay.status==="completed").length,b=c.length,f=b>0?u/b*100:0;return{completed:u,total:b,percent:f}}async function p(c){await Bt(c.taskId,c.projectId,a,n)}async function h(c){await Wt(c.taskId,c.projectId,a,n)}async function m(c){await ge(c.taskId,c.projectId,a,n)}var T=Ta(),k=l(T),j=g(l(k),2),y=l(j);s(j),s(k);var _=g(k,2);{var d=c=>{const u=G(w);var b=_a(),f=l(b),C=l(f),A=l(C);s(C);var P=g(C,2),O=l(P);s(P),s(f);var D=g(f,2),z=l(D);s(D),s(b),V(q=>{R(A,`${e(u).completed??""} of ${e(u).total??""} completed`),R(O,`${q??""}%`),_e(z,`width: ${e(u).percent??""}%`)},[()=>Math.round(e(u).percent)]),E(c,b)};U(_,c=>{w().total>0&&c(d)})}var x=g(_,2),M=l(x);{var N=c=>{var u=ha();ae(u,21,()=>e(i),te,(b,f)=>{let C=()=>e(f).taskByDay,A=()=>e(f).areaIcon,P=()=>e(f).areaName,O=()=>e(f).projectName;var D=ka(),z=l(D);z.__click=()=>p(C());var q=g(z,2),$=l(q),H=l($,!0);s($);var F=g($,2),Y=l(F);s(F),s(q);var se=g(q,2);se.__click=()=>m(C()),s(D),V(()=>{R(H,C().name),R(Y,`${A()??""} ${P()??""} Â· ${O()??""}`)}),E(b,D)}),s(u),E(c,u)},S=c=>{var u=ee(),b=K(u);{var f=A=>{var P=ya();E(A,P)},C=A=>{var P=wa();E(A,P)};U(b,A=>{w().total===0?A(f):A(C,!1)},!0)}E(c,u)};U(M,c=>{e(i).length>0?c(N):c(S,!1)})}var W=g(M,2);{var L=c=>{var u=Aa(),b=l(u),f=l(b);s(b);var C=g(b,2);ae(C,21,()=>e(v),te,(A,P)=>{let O=()=>e(P).taskByDay,D=()=>e(P).areaIcon,z=()=>e(P).areaName,q=()=>e(P).projectName;var $=ja(),H=l($);H.__click=()=>h(O());var F=g(H,2),Y=l(F),se=l(Y,!0);s(Y);var le=g(Y,2),ke=l(le);s(le),s(F),s($),V(()=>{R(se,O().name),R(ke,`${D()??""} ${z()??""} Â· ${q()??""}`)}),E(A,$)}),s(C),s(u),V(()=>R(f,`Completed (${e(v).length??""})`)),E(c,u)};U(W,c=>{e(v).length>0&&c(L)})}s(x),s(T),V(c=>R(y,`${c??""}, ${n??""}`),[()=>Dt(n)]),E(r,T),Z()}Q(["click"]);var Ma=B('<button class="rounded-lg border border-dashed min-h-30 border-base-content/20 bg-transparent hover:bg-primary/20 transition-colors cursor-pointer w-full"><div class="card-body p-3 items-center justify-center text-center min-h-[88px]"><span class="text-xl text-base-content/50">+</span> <span class="text-xs text-base-content/50">Add Area</span></div></button>');function Ea(r,t){var n=Ma();n.__click=function(...a){t.handleClick?.apply(this,a)},E(r,n)}Q(["click"]);var Ca=B('<button type="button"> </button>'),Sa=B('<button type="button" class="btn btn-outline btn-error btn-sm">Archive</button>'),Ia=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Icon</label> <div class="grid grid-cols-8 gap-1"></div></div> <div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Health, Work, Learning"/></div></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><!> <div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function Na(r,t){X(t,!0);let n=J(!1),a=J(null),o=J(""),i=J("ğŸ¯");function v(){I(a,null),I(o,""),I(i,"ğŸ¯"),I(n,!0)}function w(d,x){d.stopPropagation(),I(a,x,!0),I(o,x.name,!0),I(i,x.icon,!0),I(n,!0)}function p(){I(n,!1),I(a,null)}async function h(){!e(o).trim()||!e(i)||(e(a)?await Rt(e(a).index,{name:e(o).trim(),icon:e(i)}):await Lt(e(o).trim(),e(i)),p())}function m(d){return ve.getByArea(d.id).filter(M=>M.status==="active").length===0}async function T(){!e(a)||!m(e(a))||(await Ot(e(a).index),p())}var k={openCreateAreaModal:v,openEditAreaModal:w},j=ee(),y=K(j);{var _=d=>{var x=Ia(),M=l(x);M.__click=p,M.__keydown=H=>H.key==="Escape"&&p();var N=g(M,2),S=l(N),W=l(S),L=l(W,!0);s(W);var c=g(W,2);c.__click=p,s(S);var u=g(S,2),b=l(u),f=g(l(b),2);ae(f,21,()=>ea,te,(H,F)=>{var Y=Ca();Y.__click=()=>I(i,e(F),!0);var se=l(Y,!0);s(Y),V(()=>{ne(Y,1,`aspect-square flex items-center justify-center text-lg rounded-lg transition-colors ${e(i)===e(F)?"bg-primary text-primary-content":"hover:bg-base-200"}`),R(se,e(F))}),E(H,Y)}),s(f),s(b);var C=g(b,2),A=g(l(C),2);De(A),A.__keydown=H=>H.key==="Enter"&&h(),s(C),s(u);var P=g(u,2),O=l(P);{var D=H=>{var F=Sa();F.__click=T,V((Y,se)=>{F.disabled=Y,Se(F,"title",se)},[()=>!m(e(a)),()=>m(e(a))?"Archive area":"Cannot archive: has active projects"]),E(H,F)};U(O,H=>{e(a)&&H(D)})}var z=g(O,4);z.__click=p;var q=g(z,2);q.__click=h;var $=l(q,!0);s(q),s(P),s(N),s(x),V(H=>{R(L,e(a)?"Edit Area":"New Area"),q.disabled=H,R($,e(a)?"Save":"Create")},[()=>!e(o).trim()||!e(i)]),Be(A,()=>e(o),H=>I(o,H)),E(d,x)};U(y,d=>{e(n)&&d(_)})}return E(r,j),Z(k)}Q(["click","keydown"]);var Da=B('<button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center"><svg viewBox="0 0 24 24" class="size-6" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button>'),Ba=B('<div class="flex flex-row gap-1"><button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†</button> <button aria-label="edit" class="size-8 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†’</button></div>'),Wa=B('<div tabindex="0" role="button" class="rounded-lg bg-base-100 hover:bg-primary/20 transition-colors cursor-pointer w-full"><div class="flex flex-col py-4 px-3 items-start text-left"><div class="w-full flex flex-row justify-between items-start"><span class="text-4xl mb-3"> </span> <!></div> <div class="flex flex-row justify-between items-end w-full"><div class="flex flex-col w-full"><div class="text-sm font-medium mb-0 pb-1 truncate"> </div> <p class="text-xs text-base-content/50"> </p></div></div></div></div>');function Ra(r,t){X(t,!0);const n=G(()=>ve.getByArea(t.area.id).filter(x=>x.status==="active").length);var a=Wa();a.__click=()=>t.handleSelect(t.area);var o=l(a),i=l(o),v=l(i),w=l(v,!0);s(v);var p=g(v,2);{var h=x=>{var M=Da();M.__click=N=>t.handleEdit(N,t.area),E(x,M)},m=x=>{var M=ee(),N=K(M);{var S=W=>{var L=Ba(),c=l(L);c.__click=b=>t.handleAreaMoveUp(b,t.index);var u=g(c,2);u.__click=b=>t.handleAreaMoveDown(b,t.index),s(L),V(()=>c.disabled=t.index==0),E(W,L)};U(N,W=>{t.allowEdit&&t.reorderModeEnabled&&W(S)},!0)}E(x,M)};U(p,x=>{t.allowEdit&&!t.reorderModeEnabled?x(h):x(m,!1)})}s(i);var T=g(i,2),k=l(T),j=l(k),y=l(j,!0);s(j);var _=g(j,2),d=l(_);s(_),s(k),s(T),s(o),s(a),V(()=>{R(w,t.area.icon),R(y,t.area.name),R(d,`${e(n)??""} project${e(n)!==1?"s":""}`)}),E(r,a),Z()}Q(["click"]);var La=B('<button class="link text-base-content/50 text-sm"> </button>'),Oa=B('<div class="flex flex-col h-full"><div class="px-3 pt-5 pb-4 flex flex-row justify-between items-center bg-base-100 border-b border-base-content/10"><div><div class="text-xl text-base-content/80 tracking-wider font-medium">Doable</div> <div class="text-sm text-base-content/50">Life areas at a glance</div></div> <div class="flex flex-row gap-4"><!> <button class="link text-base-content/50 text-sm"> </button></div></div> <div class="flex-1 min-h-0 overflow-auto"><div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 p-3"><!> <!></div></div> <!></div>');function za(r,t){X(t,!0);let n,a=J(!1),o=J(!1),i=()=>I(a,!e(a)),v=()=>I(o,!e(o));const w=G(()=>e(o)?de.archived:de.areas);async function p(c,u){c.stopPropagation();const b=de.areas;if(u===0)return;const f=b[u],C=u>1?b[u-2].index:null,A=b[u-1].index;await Oe(f.index,C,A)}async function h(c,u){c.stopPropagation();const b=de.areas;if(u===b.length-1)return;const f=b[u],C=b[u+1].index,A=u<b.length-2?b[u+2].index:null;await Oe(f.index,C,A)}var m=Oa(),T=l(m),k=g(l(T),2),j=l(k);{var y=c=>{var u=La();u.__click=i;var b=l(u,!0);s(u),V(()=>R(b,e(a)?"Edit":"Reorder")),E(c,u)};U(j,c=>{e(o)||c(y)})}var _=g(j,2);_.__click=v;var d=l(_,!0);s(_),s(k),s(T);var x=g(T,2),M=l(x),N=l(M);ae(N,17,()=>e(w),te,(c,u,b)=>{{let f=G(()=>!e(o));Ra(c,{get area(){return e(u)},get handleSelect(){return t.onSelectArea},index:b,get allowEdit(){return e(f)},handleAreaMoveUp:p,handleAreaMoveDown:h,get reorderModeEnabled(){return e(a)},get handleEdit(){return n.openEditAreaModal}})}});var S=g(N,2);{var W=c=>{Ea(c,{get handleClick(){return n.openCreateAreaModal}})};U(S,c=>{e(o)||c(W)})}s(M),s(x);var L=g(x,2);be(Na(L,{}),c=>n=c,()=>n),s(m),V(()=>R(d,e(o)?"Active":"Archived")),E(r,m),Z()}Q(["click"]);var Va=B('<div class="h-full bg-primary/80 transition-all"></div>'),Ha=B('<span class="text-xs mx-0.5">â€¢</span> ',1),Ua=B('<button aria-label="edit"> </button> <button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†‘</button> <button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†“</button>',1),Fa=B('<div class="w-full transition-colors bg-base-100 rounded-lg cursor-pointer hover:bg-primary/20" role="button" tabindex="0"><div class="flex-1 min-w-0 p-3 pt-4"><p class="text-sm mb-1.5 text-base-content"><svg class="inline w-5 h-5 text-base-content/40 align-text-bottom -mb-0.5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> </p> <div class="mb-2 mt-3 w-full items-center flex h-1 bg-neutral"><!></div> <div class="flex flex-row justify-between items-center"><p class="text-xs font-semibold text-base-content/50 "> <!></p> <div class="flex flex-row gap-1 items-center mt-1"><!> <button aria-label="edit" class="size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center"><svg viewBox="0 0 24 24" class="size-5" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18 10L21 7L17 3L14 6M18 10L8 20H4V16L14 6M18 10L14 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></button></div></div></div></div>');function Ga(r,t){X(t,!0);const n=G(()=>fe.getByProject(t.project.id)),a=G(()=>e(n).filter(f=>f.status==="active").length),o=G(()=>e(n).filter(f=>f.status==="completed").length),i=G(()=>e(n).filter(f=>f.status==="active"||f.status==="completed").length),v=G(()=>e(i)>0?e(o)/e(i)*100:0);function w(f){for(const[C,A]of Object.entries(me.weeksByWeekOf))if(A.projectAssignments.some(P=>P.projectId===f))return C;return null}function p(f){const C=pe();if(f===C)return"This week";const A=new Date(C),P=new Date(f),O=Math.round((P.getTime()-A.getTime())/(1e3*60*60*24)),D=Math.round(O/7);return D===1?"Next week":D>1?`In ${D} weeks`:D===-1?"Last week":f.slice(5)}const h=G(()=>w(t.project.id));var m=Fa();m.__click=()=>t.navigateToTasks(t.project),m.__keydown=f=>f.key==="Enter"&&t.navigateToTasks(t.project);var T=l(m),k=l(T),j=g(l(k),1,!0);s(k);var y=g(k,2),_=l(y);{var d=f=>{var C=Va();V(()=>_e(C,`width: ${e(v)??""}%`)),E(f,C)};U(_,f=>{e(i)>0&&f(d)})}s(y);var x=g(y,2),M=l(x),N=l(M),S=g(N);{var W=f=>{var C=Ha(),A=g(K(C));V(()=>R(A,` ${e(o)??""} done`)),E(f,C)};U(S,f=>{e(o)>0&&f(W)})}s(M);var L=g(M,2),c=l(L);{var u=f=>{var C=Ua(),A=K(C);A.__click=z=>t.handleProjectAssign(z,t.project);var P=l(A,!0);s(A);var O=g(A,2);O.__click=z=>t.handleProjectMoveUp(z,t.index);var D=g(O,2);D.__click=z=>t.handleProjectMoveDown(z,t.index),V(z=>{ne(A,1,`badge badge-lg badge-soft ${e(h)?"badge-accent":"badge-ghost text-base-content/40"} text-xs p-1.5 w-20 cursor-pointer flex justify-center rounded-lg items-center`),R(P,z)},[()=>e(h)?p(e(h)):"Unassigned"]),E(f,C)};U(c,f=>{t.allowReorder&&f(u)})}var b=g(c,2);b.__click=f=>t.handleEdit(f,t.project),s(L),s(x),s(T),s(m),V(()=>{R(j,t.project.name),R(N,`${e(a)??""} active `)}),E(r,m),Z()}Q(["click","keydown"]);const $e=[{value:"active",label:"Active",color:"border-s-primary"},{value:"blocked",label:"Blocked",color:"border-s-warning"},{value:"someday",label:"Someday",color:"border-s-info"},{value:"completed",label:"Completed",color:"border-s-success"},{value:"cancelled",label:"Cancelled",color:"border-s-error"}],qa=[{value:"active",label:"Active"},{value:"blocked",label:"Blocked"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}];var Ja=B('<button type="button"> </button>'),Ka=B('<div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Status</label> <div class="flex flex-wrap gap-2"></div></div>'),Ya=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Learn Spanish, Build Website"/></div> <!></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function Qa(r,t){X(t,!0);let n=J(!1),a=J(null),o=J(""),i=J("active");function v(){console.log("Creating.."),I(a,null),I(o,""),I(i,"active"),I(n,!0)}function w(y,_){y.stopPropagation(),I(a,_,!0),I(o,_.name,!0),I(i,_.status,!0),I(n,!0)}function p(){I(n,!1),I(a,null)}async function h(){!e(o).trim()||!t.selectedArea||(e(a)?await zt(t.selectedArea.id,e(a).index,{name:e(o).trim(),status:e(i)}):await Vt(t.selectedArea.id,e(o).trim()),p())}var m={openCreateProjectModal:v,openEditProjectModal:w},T=ee(),k=K(T);{var j=y=>{var _=Ya(),d=l(_);d.__click=p,d.__keydown=D=>D.key==="Escape"&&p();var x=g(d,2),M=l(x),N=l(M),S=l(N,!0);s(N);var W=g(N,2);W.__click=p,s(M);var L=g(M,2),c=l(L),u=g(l(c),2);De(u),u.__keydown=D=>D.key==="Enter"&&h(),s(c);var b=g(c,2);{var f=D=>{var z=Ka(),q=g(l(z),2);ae(q,21,()=>$e,te,($,H)=>{var F=Ja();F.__click=()=>I(i,e(H).value,!0);var Y=l(F,!0);s(F),V(()=>{ne(F,1,`px-3 py-1.5 text-sm rounded-lg border transition-colors ${e(i)===e(H).value?"bg-primary text-primary-content border-primary":"border-base-content/20 hover:border-primary"}`),R(Y,e(H).label)}),E($,F)}),s(q),s(z),E(D,z)};U(b,D=>{e(a)&&D(f)})}s(L);var C=g(L,2),A=g(l(C),2);A.__click=p;var P=g(A,2);P.__click=h;var O=l(P,!0);s(P),s(C),s(x),s(_),V(D=>{R(S,e(a)?"Edit Project":"New Project"),P.disabled=D,R(O,e(a)?"Save":"Create")},[()=>!e(o).trim()]),Be(u,()=>e(o),D=>I(o,D)),E(y,_)};U(k,y=>{e(n)&&y(j)})}return E(r,T),Z(m)}Q(["click","keydown"]);var Xa=B('<button type="button"><div class="font-medium"> </div> <div class="text-xs opacity-70"> </div></button>'),Za=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-sm sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold">Assign to Week</h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-2"></div></div></div>');function $a(r,t){X(t,!0);let n=J(!1),a=J(null),o=J(void 0);function i(j,y,_){j.stopPropagation(),I(o,y,!0),I(a,_,!0),I(n,!0)}function v(){I(n,!1),I(a,null)}async function w(j,y){!e(a)||!e(o)||(y?await Xe(e(a).id,j):await Ut(e(a).id,e(o).id,j),v())}function p(j,y){const _=y??pe();return me.getWeek(_)?.projectAssignments.some(x=>x.projectId===j)??!1}var h={openWeekPicker:i},m=ee(),T=K(m);{var k=j=>{var y=Za(),_=l(y);_.__click=v,_.__keydown=S=>S.key==="Escape"&&v();var d=g(_,2),x=l(d),M=g(l(x),2);M.__click=v,s(x);var N=g(x,2);ae(N,21,Ht,te,(S,W)=>{const L=G(()=>p(e(a).id,e(W).weekOf));var c=Xa();c.__click=()=>w(e(W).weekOf,e(L));var u=l(c),b=l(u,!0);s(u);var f=g(u,2),C=l(f,!0);s(f),s(c),V(()=>{ne(c,1,`w-full p-3 text-left rounded-lg border transition-colors ${e(L)?"bg-primary/20 text-primary-content border-primary":"border-base-content/10 hover:border-primary"}`),R(b,e(W).label),R(C,e(W).weekOf)}),E(S,c)}),s(N),s(d),s(y),E(j,y)};U(T,j=>{e(n)&&e(a)&&j(k)})}return E(r,m),Z(h)}Q(["click","keydown"]);var er=B("<button> </button>"),tr=B('<div class="text-center py-8 text-base-content/50 text-sm"> </div>'),ar=B('<button type="button" class="flex items-center h-16 gap-2 p-3 border-2 border-dashed border-base-content/20 rounded-lg text-base-content/50 cursor-pointer transition-all hover:border-primary hover:text-primary"><span class="text-lg">+</span> <span class="text-sm">Add Project</span></button>'),rr=B('<div class="flex flex-col h-full"><div class="flex flex-col border-b border-base-content/10 bg-base-100"><div class="flex flex-col items-start px-2 "><button class="gap-2 mx-3 mt-2 mb-1 text-sm text-secondary w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-100 text-base-content/70"><span>â†</span> <span>Back</span></button> <div class="flex items-center gap-3 pe-2"><span class="text-4xl"> </span> <h2 class="text-lg "> </h2></div></div> <div class="flex gap-1 mt-4  px-3 pb-2 overflow-x-auto"></div></div> <div class="flex-1 overflow-auto min-h-0 pb-5 pt-2.5"><div class="flex flex-col gap-2.5 px-3 py-0"><!> <!></div></div></div> <!> <!>',1);function nr(r,t){X(t,!0);let n,a,o=J("active"),i=G(()=>!["completed","cancelled"].includes(e(o))),v=G(()=>ve.getByArea(t.selectedArea.id).filter(A=>A.status===e(o)));function w(A){return ve.getByArea(t.selectedArea.id).filter(P=>P.status===A).length}async function p(A,P){if(A.stopPropagation(),P===0||!t.selectedArea)return;const O=e(v),D=O[P],z=P>1?O[P-2].index:null,q=O[P-1].index;await ze(t.selectedArea.id,D.index,z,q)}async function h(A,P){if(A.stopPropagation(),!t.selectedArea)return;const O=e(v);if(P===O.length-1)return;const D=O[P],z=O[P+1].index,q=P<O.length-2?O[P+2].index:null;await ze(t.selectedArea.id,D.index,z,q)}var m=rr(),T=K(m),k=l(T),j=l(k),y=l(j);y.__click=function(...A){t.navigateBack?.apply(this,A)};var _=g(y,2),d=l(_),x=l(d,!0);s(d);var M=g(d,2),N=l(M,!0);s(M),s(_),s(j);var S=g(j,2);ae(S,21,()=>$e,te,(A,P)=>{const O=G(()=>e(o)===e(P).value),D=G(()=>w(e(P).value));var z=er();z.__click=()=>I(o,e(P).value,!0);var q=l(z);s(z),V(()=>{ne(z,1,`px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap ${e(O)?"bg-primary/40 text-primary-content":"text-base-content/50 hover:text-base-content hover:bg-base-100"}`),R(q,`${e(P).label??""} (${e(D)??""})`)}),E(A,z)}),s(S),s(k);var W=g(k,2),L=l(W),c=l(L);ae(c,17,()=>e(v),te,(A,P,O)=>{Ga(A,{handleProjectAssign:(D,z)=>a.openWeekPicker(D,t.selectedArea,z),index:O,get allowReorder(){return e(i)},get navigateToTasks(){return t.navigateToTasks},get project(){return e(P)},get handleEdit(){return n.openEditProjectModal},handleProjectMoveUp:p,handleProjectMoveDown:h})},A=>{var P=tr(),O=l(P);s(P),V(()=>R(O,`No ${e(o)??""} projects`)),E(A,P)});var u=g(c,2);{var b=A=>{var P=ar();P.__click=function(...O){n.openCreateProjectModal?.apply(this,O)},E(A,P)};U(u,A=>{e(o)=="active"&&A(b)})}s(L),s(W),s(T);var f=g(T,2);be(Qa(f,{get selectedArea(){return t.selectedArea}}),A=>n=A,()=>n);var C=g(f,2);be($a(C,{}),A=>a=A,()=>a),V(()=>{R(x,t.selectedArea.icon),R(N,t.selectedArea.name)}),E(r,m),Z()}Q(["click"]);var sr=B('<button type="button"> </button>'),or=B('<div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Status</label> <div class="flex flex-wrap gap-2"></div></div>'),ir=B('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/60 backdrop-blur-sm" role="button" tabindex="0"></div> <div class="absolute bottom-0 left-0 right-0 bg-base-100 rounded-t-2xl sm:bottom-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-md sm:rounded-xl sm:border sm:border-base-content/10"><div class="flex justify-between items-center p-4 border-b border-base-content/10"><h2 class="text-lg font-semibold"> </h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-200 text-base-content/50 hover:text-base-content">âœ•</button></div> <div class="p-4 space-y-4"><div><label class="block text-xs uppercase tracking-wider text-base-content/50 mb-2">Name</label> <input type="text" class="input input-bordered w-full" placeholder="e.g., Read chapter 1, Write blog post"/></div> <!></div> <div class="flex gap-3 p-4 border-t border-base-content/10"><div class="flex-1"></div> <button type="button" class="btn btn-ghost btn-sm">Cancel</button> <button type="button" class="btn btn-primary btn-sm"> </button></div></div></div>');function lr(r,t){X(t,!0);let n=J(!1),a=J(null),o=J(""),i=J("active");function v(){I(a,null),I(o,""),I(i,"active"),I(n,!0)}function w(y,_){y.stopPropagation(),I(a,_,!0),I(o,_.name,!0),I(i,_.status,!0),I(n,!0)}function p(){I(n,!1),I(a,null)}async function h(){!e(o).trim()||!t.selectedProject||!t.selectedArea||(e(a)?await Ze(t.selectedProject.id,e(a).index,{name:e(o).trim(),status:e(i)}):await Ft(t.selectedProject.id,t.selectedArea.id,e(o).trim()),p())}var m={openCreateTaskModal:v,openEditTaskModal:w},T=ee(),k=K(T);{var j=y=>{var _=ir(),d=l(_);d.__click=p,d.__keydown=D=>D.key==="Escape"&&p();var x=g(d,2),M=l(x),N=l(M),S=l(N,!0);s(N);var W=g(N,2);W.__click=p,s(M);var L=g(M,2),c=l(L),u=g(l(c),2);De(u),u.__keydown=D=>D.key==="Enter"&&h(),s(c);var b=g(c,2);{var f=D=>{var z=or(),q=g(l(z),2);ae(q,21,()=>qa,te,($,H)=>{var F=sr();F.__click=()=>I(i,e(H).value,!0);var Y=l(F,!0);s(F),V(()=>{ne(F,1,`px-3 py-1.5 text-sm rounded-lg border transition-colors ${e(i)===e(H).value?"bg-primary text-primary-content border-primary":"border-base-content/20 hover:border-primary"}`),R(Y,e(H).label)}),E($,F)}),s(q),s(z),E(D,z)};U(b,D=>{e(a)&&D(f)})}s(L);var C=g(L,2),A=g(l(C),2);A.__click=p;var P=g(A,2);P.__click=h;var O=l(P,!0);s(P),s(C),s(x),s(_),V(D=>{R(S,e(a)?"Edit Task":"New Task"),P.disabled=D,R(O,e(a)?"Save":"Create")},[()=>!e(o).trim()]),Be(u,()=>e(o),D=>I(o,D)),E(y,_)};U(k,y=>{e(n)&&y(j)})}return E(r,T),Z(m)}Q(["click","keydown"]);var cr=Ie('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>'),dr=Ie('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"></path></svg>'),vr=Ie('<svg class="w-3 h-3 text-warning" fill="currentColor" viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16" rx="1"></rect><rect x="14" y="4" width="4" height="16" rx="1"></rect></svg>'),ur=B('<button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†‘</button> <button aria-label="edit" class="me-1 size-7 bg-base-300 hover:bg-base-100 cursor-pointer flex justify-center rounded-lg text-base-content/50 items-center">â†“</button>',1),br=B('<div tabindex="0" role="button" class="hover:bg-primary/20 cursor-pointer w-full flex flex-row items-start border-b border-b-base-content/10 p-2"><button type="button"><!></button> <div class="text-sm text-base-content/80 flex-1 "> </div> <!></div>');function fr(r,t){X(t,!0);const n=G(()=>t.task.status==="completed"),a=G(()=>t.task.status==="cancelled"),o=G(()=>t.task.status==="blocked");var i=br();i.__click=y=>t.handleEdit(y,t.task);var v=l(i);v.__click=y=>t.toggleTaskComplete(y,t.task);var w=l(v);{var p=y=>{var _=cr();E(y,_)},h=y=>{var _=ee(),d=K(_);{var x=N=>{var S=dr();E(N,S)},M=N=>{var S=ee(),W=K(S);{var L=c=>{var u=vr();E(c,u)};U(W,c=>{e(o)&&c(L)},!0)}E(N,S)};U(d,N=>{e(a)?N(x):N(M,!1)},!0)}E(y,_)};U(w,y=>{e(n)?y(p):y(h,!1)})}s(v);var m=g(v,2),T=l(m,!0);s(m);var k=g(m,2);{var j=y=>{var _=ur(),d=K(_);d.__click=M=>t.handleTaskMoveUp(M,t.index);var x=g(d,2);x.__click=M=>t.handleTaskMoveDown(M,t.index),E(y,_)};U(k,y=>{t.reorderEnabled&&y(j)})}s(i),V(()=>{ne(v,1,`w-6 h-6 cursor-pointer rounded-full border-2 flex me-2 items-center justify-center text-xs transition-colors flex-shrink-0 ${e(n)?"bg-success border-success text-success-content":e(o)?"border-warning":e(a)?"bg-error border-error text-error-content":"border-base-content/30 hover:border-success"}`),v.disabled=e(a),R(T,t.task.name)}),E(r,i),Z()}Q(["click"]);var xr=B('<div class="flex flex-col h-full"><div class="flex flex-col border-b border-base-content/10 bg-base-100"><div class="flex flex-col items-start px-2 "><button class="gap-2 mx-3 mt-2 mb-0 text-sm text-secondary w-8 h-8 flex items-center justify-center rounded-lg hover:bg-base-100 text-base-content/70"><span>â†</span> <span>Back</span></button> <div class="flex items-center gap-2"><svg class="size-10 inline shrink-0 text-base-content/40 align-text-bottom -mb-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg> <h2 class="text-base "> </h2></div> <div class="flex gap-1 overflow-x-auto my-2"><button class="text-base-content/50 bg-base-300 hover:bg-primary/50 hover:text-primary-content px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap">+ New</button> <button>Reorder</button></div></div></div> <div class="flex-1 overflow-auto bg-base-200  min-h-0 pb-5 pt-2.5"><div class="flex flex-col px-2 py-0"></div></div></div> <!>',1);function gr(r,t){X(t,!0);let n,a=G(()=>fe.getByProject(t.selectedProject.id)),o=J(!1),i=()=>I(o,!e(o));async function v(c,u){if(c.stopPropagation(),!t.selectedProject)return;const b=u.status==="completed"?"active":"completed";await Ze(t.selectedProject.id,u.index,{status:b})}async function w(c,u){if(c.stopPropagation(),u===0||!t.selectedProject)return;const b=e(a)[u],f=u>1?e(a)[u-2].index:null,C=e(a)[u-1].index;await Ve(t.selectedProject.id,b.index,f,C)}async function p(c,u){if(c.stopPropagation(),!t.selectedProject||u===e(a).length-1)return;const b=e(a)[u],f=e(a)[u+1].index,C=u<e(a).length-2?e(a)[u+2].index:null;await Ve(t.selectedProject.id,b.index,f,C)}var h=xr(),m=K(h),T=l(m),k=l(T),j=l(k);j.__click=function(...c){t.navigateBack?.apply(this,c)};var y=g(j,2),_=g(l(y),2),d=l(_,!0);s(_),s(y);var x=g(y,2),M=l(x);M.__click=function(...c){n.openCreateTaskModal?.apply(this,c)};var N=g(M,2);N.__click=i,s(x),s(k),s(T);var S=g(T,2),W=l(S);ae(W,21,()=>e(a),te,(c,u,b)=>{fr(c,{get handleEdit(){return n.openEditTaskModal},handleTaskMoveUp:w,handleTaskMoveDown:p,index:b,get task(){return e(u)},toggleTaskComplete:v,get reorderEnabled(){return e(o)}})}),s(W),s(S),s(m);var L=g(m,2);be(lr(L,{get selectedArea(){return t.selectedArea},get selectedProject(){return t.selectedProject}}),c=>n=c,()=>n),V(()=>{R(d,t.selectedProject.name),ne(N,1,`px-3 py-1.5 text-sm rounded-lg transition-colors cursor-pointer whitespace-nowrap ${e(o)?"bg-primary/40 text-primary-content":"text-base-content/50 bg-base-300 hover:text-base-content hover:bg-primary/50"}`)}),E(r,h),Z()}Q(["click"]);var pr=B('<div class="flex items-center justify-center h-full text-base-content/50"><p>Review - Coming soon</p></div>'),mr=B('<div class="h-screen flex flex-col bg-base-300"><div class="pb-22 h-full"><!></div> <!></div>');function jr(r){const t=()=>I(a,"areas"),n=()=>I(a,"projects");let a=J("areas"),o=J(void 0),i=J(void 0);function v(_){I(a,_,!0)}function w(_){I(o,_,!0),I(a,"projects")}function p(_){I(i,_,!0),I(a,"tasks")}var h=mr(),m=l(h),T=l(m);{var k=_=>{za(_,{onSelectArea:w})},j=_=>{var d=ee(),x=K(d);{var M=S=>{nr(S,{navigateBack:t,navigateToTasks:p,get selectedArea(){return e(o)}})},N=S=>{var W=ee(),L=K(W);{var c=b=>{gr(b,{navigateBack:n,get selectedArea(){return e(o)},get selectedProject(){return e(i)}})},u=b=>{var f=ee(),C=K(f);{var A=O=>{ma(O,{})},P=O=>{var D=ee(),z=K(D);{var q=H=>{Pa(H,{})},$=H=>{var F=ee(),Y=K(F);{var se=le=>{var ke=pr();E(le,ke)};U(Y,le=>{e(a)==="review"&&le(se)},!0)}E(H,F)};U(z,H=>{e(a)==="today"?H(q):H($,!1)},!0)}E(O,D)};U(C,O=>{e(a)==="week"?O(A):O(P,!1)},!0)}E(b,f)};U(L,b=>{e(a)=="tasks"?b(c):b(u,!1)},!0)}E(S,W)};U(x,S=>{e(a)==="projects"?S(M):S(N,!1)},!0)}E(_,d)};U(T,_=>{e(a)==="areas"?_(k):_(j,!1)})}s(m);var y=g(m,2);ra(y,{get activeTab(){return e(a)},onTabChange:v}),s(h),E(r,h)}export{jr as component};
